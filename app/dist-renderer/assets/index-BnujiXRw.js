(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();function Ug(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Dm={exports:{}},Dd={};var U2;function X3(){if(U2)return Dd;U2=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,u,d){var h=null;if(d!==void 0&&(h=""+d),u.key!==void 0&&(h=""+u.key),"key"in u){d={};for(var m in u)m!=="key"&&(d[m]=u[m])}else d=u;return u=d.ref,{$$typeof:l,type:o,key:h,ref:u!==void 0?u:null,props:d}}return Dd.Fragment=e,Dd.jsx=i,Dd.jsxs=i,Dd}var B2;function q3(){return B2||(B2=1,Dm.exports=X3()),Dm.exports}var N=q3(),Om={exports:{}},fe={};var G2;function V3(){if(G2)return fe;G2=1;var l=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),_=Symbol.iterator;function M(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,D={};function U(B,P,St){this.props=B,this.context=P,this.refs=D,this.updater=St||A}U.prototype.isReactComponent={},U.prototype.setState=function(B,P){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,P,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function j(){}j.prototype=U.prototype;function Y(B,P,St){this.props=B,this.context=P,this.refs=D,this.updater=St||A}var L=Y.prototype=new j;L.constructor=Y,H(L,U.prototype),L.isPureReactComponent=!0;var nt=Array.isArray;function z(){}var G={H:null,A:null,T:null,S:null},Q=Object.prototype.hasOwnProperty;function dt(B,P,St){var Ht=St.ref;return{$$typeof:l,type:B,key:P,ref:Ht!==void 0?Ht:null,props:St}}function lt(B,P){return dt(B.type,P,B.props)}function vt(B){return typeof B=="object"&&B!==null&&B.$$typeof===l}function pt(B){var P={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(St){return P[St]})}var jt=/\/+/g;function Ot(B,P){return typeof B=="object"&&B!==null&&B.key!=null?pt(""+B.key):P.toString(36)}function Mt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(z,z):(B.status="pending",B.then(function(P){B.status==="pending"&&(B.status="fulfilled",B.value=P)},function(P){B.status==="pending"&&(B.status="rejected",B.reason=P)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function q(B,P,St,Ht,Vt){var Xt=typeof B;(Xt==="undefined"||Xt==="boolean")&&(B=null);var Z=!1;if(B===null)Z=!0;else switch(Xt){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(B.$$typeof){case l:case e:Z=!0;break;case E:return Z=B._init,q(Z(B._payload),P,St,Ht,Vt)}}if(Z)return Vt=Vt(B),Z=Ht===""?"."+Ot(B,0):Ht,nt(Vt)?(St="",Z!=null&&(St=Z.replace(jt,"$&/")+"/"),q(Vt,P,St,"",function(wt){return wt})):Vt!=null&&(vt(Vt)&&(Vt=lt(Vt,St+(Vt.key==null||B&&B.key===Vt.key?"":(""+Vt.key).replace(jt,"$&/")+"/")+Z)),P.push(Vt)),1;Z=0;var F=Ht===""?".":Ht+":";if(nt(B))for(var mt=0;mt<B.length;mt++)Ht=B[mt],Xt=F+Ot(Ht,mt),Z+=q(Ht,P,St,Xt,Vt);else if(mt=M(B),typeof mt=="function")for(B=mt.call(B),mt=0;!(Ht=B.next()).done;)Ht=Ht.value,Xt=F+Ot(Ht,mt++),Z+=q(Ht,P,St,Xt,Vt);else if(Xt==="object"){if(typeof B.then=="function")return q(Mt(B),P,St,Ht,Vt);throw P=String(B),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Z}function I(B,P,St){if(B==null)return B;var Ht=[],Vt=0;return q(B,Ht,"","",function(Xt){return P.call(St,Xt,Vt++)}),Ht}function k(B){if(B._status===-1){var P=B._result;P=P(),P.then(function(St){(B._status===0||B._status===-1)&&(B._status=1,B._result=St)},function(St){(B._status===0||B._status===-1)&&(B._status=2,B._result=St)}),B._status===-1&&(B._status=0,B._result=P)}if(B._status===1)return B._result.default;throw B._result}var xt=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Nt={map:I,forEach:function(B,P,St){I(B,function(){P.apply(this,arguments)},St)},count:function(B){var P=0;return I(B,function(){P++}),P},toArray:function(B){return I(B,function(P){return P})||[]},only:function(B){if(!vt(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return fe.Activity=C,fe.Children=Nt,fe.Component=U,fe.Fragment=i,fe.Profiler=u,fe.PureComponent=Y,fe.StrictMode=o,fe.Suspense=v,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,fe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return G.H.useMemoCache(B)}},fe.cache=function(B){return function(){return B.apply(null,arguments)}},fe.cacheSignal=function(){return null},fe.cloneElement=function(B,P,St){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Ht=H({},B.props),Vt=B.key;if(P!=null)for(Xt in P.key!==void 0&&(Vt=""+P.key),P)!Q.call(P,Xt)||Xt==="key"||Xt==="__self"||Xt==="__source"||Xt==="ref"&&P.ref===void 0||(Ht[Xt]=P[Xt]);var Xt=arguments.length-2;if(Xt===1)Ht.children=St;else if(1<Xt){for(var Z=Array(Xt),F=0;F<Xt;F++)Z[F]=arguments[F+2];Ht.children=Z}return dt(B.type,Vt,Ht)},fe.createContext=function(B){return B={$$typeof:h,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:d,_context:B},B},fe.createElement=function(B,P,St){var Ht,Vt={},Xt=null;if(P!=null)for(Ht in P.key!==void 0&&(Xt=""+P.key),P)Q.call(P,Ht)&&Ht!=="key"&&Ht!=="__self"&&Ht!=="__source"&&(Vt[Ht]=P[Ht]);var Z=arguments.length-2;if(Z===1)Vt.children=St;else if(1<Z){for(var F=Array(Z),mt=0;mt<Z;mt++)F[mt]=arguments[mt+2];Vt.children=F}if(B&&B.defaultProps)for(Ht in Z=B.defaultProps,Z)Vt[Ht]===void 0&&(Vt[Ht]=Z[Ht]);return dt(B,Xt,Vt)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(B){return{$$typeof:m,render:B}},fe.isValidElement=vt,fe.lazy=function(B){return{$$typeof:E,_payload:{_status:-1,_result:B},_init:k}},fe.memo=function(B,P){return{$$typeof:b,type:B,compare:P===void 0?null:P}},fe.startTransition=function(B){var P=G.T,St={};G.T=St;try{var Ht=B(),Vt=G.S;Vt!==null&&Vt(St,Ht),typeof Ht=="object"&&Ht!==null&&typeof Ht.then=="function"&&Ht.then(z,xt)}catch(Xt){xt(Xt)}finally{P!==null&&St.types!==null&&(P.types=St.types),G.T=P}},fe.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},fe.use=function(B){return G.H.use(B)},fe.useActionState=function(B,P,St){return G.H.useActionState(B,P,St)},fe.useCallback=function(B,P){return G.H.useCallback(B,P)},fe.useContext=function(B){return G.H.useContext(B)},fe.useDebugValue=function(){},fe.useDeferredValue=function(B,P){return G.H.useDeferredValue(B,P)},fe.useEffect=function(B,P){return G.H.useEffect(B,P)},fe.useEffectEvent=function(B){return G.H.useEffectEvent(B)},fe.useId=function(){return G.H.useId()},fe.useImperativeHandle=function(B,P,St){return G.H.useImperativeHandle(B,P,St)},fe.useInsertionEffect=function(B,P){return G.H.useInsertionEffect(B,P)},fe.useLayoutEffect=function(B,P){return G.H.useLayoutEffect(B,P)},fe.useMemo=function(B,P){return G.H.useMemo(B,P)},fe.useOptimistic=function(B,P){return G.H.useOptimistic(B,P)},fe.useReducer=function(B,P,St){return G.H.useReducer(B,P,St)},fe.useRef=function(B){return G.H.useRef(B)},fe.useState=function(B){return G.H.useState(B)},fe.useSyncExternalStore=function(B,P,St){return G.H.useSyncExternalStore(B,P,St)},fe.useTransition=function(){return G.H.useTransition()},fe.version="19.2.3",fe}var L2;function oh(){return L2||(L2=1,Om.exports=V3()),Om.exports}var O=oh();const Zt=Ug(O);var zm={exports:{}},Od={},jm={exports:{}},Hm={};var Y2;function K3(){return Y2||(Y2=1,(function(l){function e(q,I){var k=q.length;q.push(I);t:for(;0<k;){var xt=k-1>>>1,Nt=q[xt];if(0<u(Nt,I))q[xt]=I,q[k]=Nt,k=xt;else break t}}function i(q){return q.length===0?null:q[0]}function o(q){if(q.length===0)return null;var I=q[0],k=q.pop();if(k!==I){q[0]=k;t:for(var xt=0,Nt=q.length,B=Nt>>>1;xt<B;){var P=2*(xt+1)-1,St=q[P],Ht=P+1,Vt=q[Ht];if(0>u(St,k))Ht<Nt&&0>u(Vt,St)?(q[xt]=Vt,q[Ht]=k,xt=Ht):(q[xt]=St,q[P]=k,xt=P);else if(Ht<Nt&&0>u(Vt,k))q[xt]=Vt,q[Ht]=k,xt=Ht;else break t}}return I}function u(q,I){var k=q.sortIndex-I.sortIndex;return k!==0?k:q.id-I.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,m=h.now();l.unstable_now=function(){return h.now()-m}}var v=[],b=[],E=1,C=null,_=3,M=!1,A=!1,H=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function L(q){for(var I=i(b);I!==null;){if(I.callback===null)o(b);else if(I.startTime<=q)o(b),I.sortIndex=I.expirationTime,e(v,I);else break;I=i(b)}}function nt(q){if(H=!1,L(q),!A)if(i(v)!==null)A=!0,z||(z=!0,pt());else{var I=i(b);I!==null&&Mt(nt,I.startTime-q)}}var z=!1,G=-1,Q=5,dt=-1;function lt(){return D?!0:!(l.unstable_now()-dt<Q)}function vt(){if(D=!1,z){var q=l.unstable_now();dt=q;var I=!0;try{t:{A=!1,H&&(H=!1,j(G),G=-1),M=!0;var k=_;try{e:{for(L(q),C=i(v);C!==null&&!(C.expirationTime>q&&lt());){var xt=C.callback;if(typeof xt=="function"){C.callback=null,_=C.priorityLevel;var Nt=xt(C.expirationTime<=q);if(q=l.unstable_now(),typeof Nt=="function"){C.callback=Nt,L(q),I=!0;break e}C===i(v)&&o(v),L(q)}else o(v);C=i(v)}if(C!==null)I=!0;else{var B=i(b);B!==null&&Mt(nt,B.startTime-q),I=!1}}break t}finally{C=null,_=k,M=!1}I=void 0}}finally{I?pt():z=!1}}}var pt;if(typeof Y=="function")pt=function(){Y(vt)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,Ot=jt.port2;jt.port1.onmessage=vt,pt=function(){Ot.postMessage(null)}}else pt=function(){U(vt,0)};function Mt(q,I){G=U(function(){q(l.unstable_now())},I)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(q){q.callback=null},l.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<q?Math.floor(1e3/q):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_next=function(q){switch(_){case 1:case 2:case 3:var I=3;break;default:I=_}var k=_;_=I;try{return q()}finally{_=k}},l.unstable_requestPaint=function(){D=!0},l.unstable_runWithPriority=function(q,I){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var k=_;_=q;try{return I()}finally{_=k}},l.unstable_scheduleCallback=function(q,I,k){var xt=l.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?xt+k:xt):k=xt,q){case 1:var Nt=-1;break;case 2:Nt=250;break;case 5:Nt=1073741823;break;case 4:Nt=1e4;break;default:Nt=5e3}return Nt=k+Nt,q={id:E++,callback:I,priorityLevel:q,startTime:k,expirationTime:Nt,sortIndex:-1},k>xt?(q.sortIndex=k,e(b,q),i(v)===null&&q===i(b)&&(H?(j(G),G=-1):H=!0,Mt(nt,k-xt))):(q.sortIndex=Nt,e(v,q),A||M||(A=!0,z||(z=!0,pt()))),q},l.unstable_shouldYield=lt,l.unstable_wrapCallback=function(q){var I=_;return function(){var k=_;_=I;try{return q.apply(this,arguments)}finally{_=k}}}})(Hm)),Hm}var X2;function R1(){return X2||(X2=1,jm.exports=K3()),jm.exports}var Um={exports:{}},Za={};var q2;function Q3(){if(q2)return Za;q2=1;var l=oh();function e(v){var b="https://react.dev/errors/"+v;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)b+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+v+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(v,b,E){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:C==null?null:""+C,children:v,containerInfo:b,implementation:E}}var h=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(v,b){if(v==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Za.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Za.createPortal=function(v,b){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return d(v,b,null,E)},Za.flushSync=function(v){var b=h.T,E=o.p;try{if(h.T=null,o.p=2,v)return v()}finally{h.T=b,o.p=E,o.d.f()}},Za.preconnect=function(v,b){typeof v=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,o.d.C(v,b))},Za.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Za.preinit=function(v,b){if(typeof v=="string"&&b&&typeof b.as=="string"){var E=b.as,C=m(E,b.crossOrigin),_=typeof b.integrity=="string"?b.integrity:void 0,M=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;E==="style"?o.d.S(v,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:C,integrity:_,fetchPriority:M}):E==="script"&&o.d.X(v,{crossOrigin:C,integrity:_,fetchPriority:M,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Za.preinitModule=function(v,b){if(typeof v=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var E=m(b.as,b.crossOrigin);o.d.M(v,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&o.d.M(v)},Za.preload=function(v,b){if(typeof v=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var E=b.as,C=m(E,b.crossOrigin);o.d.L(v,E,{crossOrigin:C,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Za.preloadModule=function(v,b){if(typeof v=="string")if(b){var E=m(b.as,b.crossOrigin);o.d.m(v,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else o.d.m(v)},Za.requestFormReset=function(v){o.d.r(v)},Za.unstable_batchedUpdates=function(v,b){return v(b)},Za.useFormState=function(v,b,E){return h.H.useFormState(v,b,E)},Za.useFormStatus=function(){return h.H.useHostTransitionStatus()},Za.version="19.2.3",Za}var V2;function Sv(){if(V2)return Um.exports;V2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),Um.exports=Q3(),Um.exports}var K2;function Z3(){if(K2)return Od;K2=1;var l=R1(),e=oh(),i=Sv();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function h(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function m(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(d(t)!==t)throw Error(o(188))}function b(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(o(188));return n!==t?null:t}for(var r=t,c=n;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return v(p),t;if(y===c)return v(p),n;y=y.sibling}throw Error(o(188))}if(r.return!==c.return)r=p,c=y;else{for(var T=!1,R=p.child;R;){if(R===r){T=!0,r=p,c=y;break}if(R===c){T=!0,c=p,r=y;break}R=R.sibling}if(!T){for(R=y.child;R;){if(R===r){T=!0,r=y,c=p;break}if(R===c){T=!0,c=y,r=p;break}R=R.sibling}if(!T)throw Error(o(189))}}if(r.alternate!==c)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:n}function E(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=E(t),n!==null)return n;t=t.sibling}return null}var C=Object.assign,_=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),dt=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),vt=Symbol.iterator;function pt(t){return t===null||typeof t!="object"?null:(t=vt&&t[vt]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Symbol.for("react.client.reference");function Ot(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===jt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case U:return"Profiler";case D:return"StrictMode";case nt:return"Suspense";case z:return"SuspenseList";case dt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case Y:return t.displayName||"Context";case j:return(t._context.displayName||"Context")+".Consumer";case L:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case G:return n=t.displayName||null,n!==null?n:Ot(t.type)||"Memo";case Q:n=t._payload,t=t._init;try{return Ot(t(n))}catch{}}return null}var Mt=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},xt=[],Nt=-1;function B(t){return{current:t}}function P(t){0>Nt||(t.current=xt[Nt],xt[Nt]=null,Nt--)}function St(t,n){Nt++,xt[Nt]=t.current,t.current=n}var Ht=B(null),Vt=B(null),Xt=B(null),Z=B(null);function F(t,n){switch(St(Xt,n),St(Vt,t),St(Ht,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?i2(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=i2(n),t=s2(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(Ht),St(Ht,t)}function mt(){P(Ht),P(Vt),P(Xt)}function wt(t){t.memoizedState!==null&&St(Z,t);var n=Ht.current,r=s2(n,t.type);n!==r&&(St(Vt,t),St(Ht,r))}function W(t){Vt.current===t&&(P(Ht),P(Vt)),Z.current===t&&(P(Z),Md._currentValue=k)}var gt,_t;function At(t){if(gt===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);gt=n&&n[1]||"",_t=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gt+t+_t}var Yt=!1;function ot(t,n){if(!t||Yt)return"";Yt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var Et=function(){throw Error()};if(Object.defineProperty(Et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Et,[])}catch(ft){var rt=ft}Reflect.construct(t,[],Et)}else{try{Et.call()}catch(ft){rt=ft}t.call(Et.prototype)}}else{try{throw Error()}catch(ft){rt=ft}(Et=t())&&typeof Et.catch=="function"&&Et.catch(function(){})}}catch(ft){if(ft&&rt&&typeof ft.stack=="string")return[ft.stack,rt.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),T=y[0],R=y[1];if(T&&R){var V=T.split(`
`),it=R.split(`
`);for(p=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;p<it.length&&!it[p].includes("DetermineComponentFrameRoot");)p++;if(c===V.length||p===it.length)for(c=V.length-1,p=it.length-1;1<=c&&0<=p&&V[c]!==it[p];)p--;for(;1<=c&&0<=p;c--,p--)if(V[c]!==it[p]){if(c!==1||p!==1)do if(c--,p--,0>p||V[c]!==it[p]){var yt=`
`+V[c].replace(" at new "," at ");return t.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",t.displayName)),yt}while(1<=c&&0<=p);break}}}finally{Yt=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?At(r):""}function ht(t,n){switch(t.tag){case 26:case 27:case 5:return At(t.type);case 16:return At("Lazy");case 13:return t.child!==n&&n!==null?At("Suspense Fallback"):At("Suspense");case 19:return At("SuspenseList");case 0:case 15:return ot(t.type,!1);case 11:return ot(t.type.render,!1);case 1:return ot(t.type,!0);case 31:return At("Activity");default:return""}}function Kt(t){try{var n="",r=null;do n+=ht(t,r),r=t,t=t.return;while(t);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var _e=Object.prototype.hasOwnProperty,le=l.unstable_scheduleCallback,Oe=l.unstable_cancelCallback,Xe=l.unstable_shouldYield,kt=l.unstable_requestPaint,Jt=l.unstable_now,Ze=l.unstable_getCurrentPriorityLevel,an=l.unstable_ImmediatePriority,ze=l.unstable_UserBlockingPriority,je=l.unstable_NormalPriority,dn=l.unstable_LowPriority,hl=l.unstable_IdlePriority,ka=l.log,ki=l.unstable_setDisableYieldValue,Ji=null,oa=null;function Ja(t){if(typeof ka=="function"&&ki(t),oa&&typeof oa.setStrictMode=="function")try{oa.setStrictMode(Ji,t)}catch{}}var ua=Math.clz32?Math.clz32:Nu,To=Math.log,wu=Math.LN2;function Nu(t){return t>>>=0,t===0?32:31-(To(t)/wu|0)|0}var vr=256,Ii=262144,ln=4194304;function Cn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Nn(t,n,r){var c=t.pendingLanes;if(c===0)return 0;var p=0,y=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var R=c&134217727;return R!==0?(c=R&~y,c!==0?p=Cn(c):(T&=R,T!==0?p=Cn(T):r||(r=R&~t,r!==0&&(p=Cn(r))))):(R=c&~y,R!==0?p=Cn(R):T!==0?p=Cn(T):r||(r=c&~t,r!==0&&(p=Cn(r)))),p===0?0:n!==0&&n!==p&&(n&y)===0&&(y=p&-p,r=n&-n,y>=r||y===32&&(r&4194048)!==0)?n:p}function Sa(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function ba(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function En(){var t=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),t}function xa(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Ia(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function _n(t,n,r,c,p,y){var T=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,V=t.expirationTimes,it=t.hiddenUpdates;for(r=T&~r;0<r;){var yt=31-ua(r),Et=1<<yt;R[yt]=0,V[yt]=-1;var rt=it[yt];if(rt!==null)for(it[yt]=null,yt=0;yt<rt.length;yt++){var ft=rt[yt];ft!==null&&(ft.lane&=-536870913)}r&=~Et}c!==0&&Ca(t,c,0),y!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=y&~(T&~n))}function Ca(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var c=31-ua(n);t.entangledLanes|=n,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function ca(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var c=31-ua(r),p=1<<c;p&n|t[c]&n&&(t[c]|=n),r&=~p}}function Fa(t,n){var r=n&-n;return r=(r&42)!==0?1:gl(r),(r&(t.suspendedLanes|n))!==0?0:r}function gl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ml(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wa(){var t=I.p;return t!==0?t:(t=window.event,t===void 0?32:N2(t.type))}function Ua(t,n){var r=I.p;try{return I.p=t,n()}finally{I.p=r}}var Pa=Math.random().toString(36).slice(2),Un="__reactFiber$"+Pa,fa="__reactProps$"+Pa,Fi="__reactContainer$"+Pa,Ql="__reactEvents$"+Pa,Wi="__reactListeners$"+Pa,Ao="__reactHandles$"+Pa,Ru="__reactResources$"+Pa,bi="__reactMarker$"+Pa;function Ns(t){delete t[Un],delete t[fa],delete t[Ql],delete t[Wi],delete t[Ao]}function Rs(t){var n=t[Un];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Fi]||r[Un]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=h2(t);t!==null;){if(r=t[Un])return r;t=h2(t)}return n}t=r,r=t.parentNode}return null}function Ds(t){if(t=t[Un]||t[Fi]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function yr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function Pi(t){var n=t[Ru];return n||(n=t[Ru]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Bn(t){t[bi]=!0}var xi=new Set,Du={};function $i(t,n){$a(t,n),$a(t+"Capture",n)}function $a(t,n){for(Du[t]=n,t=0;t<n.length;t++)xi.add(n[t])}var tl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mo={},hn={};function nf(t){return _e.call(hn,t)?!0:_e.call(Mo,t)?!1:tl.test(t)?hn[t]=!0:(Mo[t]=!0,!1)}function Sr(t,n,r){if(nf(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function wo(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Zl(t,n,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+c)}}function pl(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ou(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function af(t,n,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return p.call(this)},set:function(T){r=""+T,y.call(this,T)}}),Object.defineProperty(t,n,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(T){r=""+T},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function No(t){if(!t._valueTracker){var n=Ou(t)?"checked":"value";t._valueTracker=af(t,n,""+t[n])}}function da(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),c="";return t&&(c=Ou(t)?t.checked?"true":"false":t.value),t=c,t!==r?(n.setValue(t),!0):!1}function sn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zu=/[\n"\\]/g;function ha(t){return t.replace(zu,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function br(t,n,r,c,p,y,T,R){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),n!=null?T==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+pl(n)):t.value!==""+pl(n)&&(t.value=""+pl(n)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),n!=null?Bl(t,T,pl(n)):r!=null?Bl(t,T,pl(r)):c!=null&&t.removeAttribute("value"),p==null&&y!=null&&(t.defaultChecked=!!y),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+pl(R):t.removeAttribute("name")}function ju(t,n,r,c,p,y,T,R){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),n!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||n!=null)){No(t);return}r=r!=null?""+pl(r):"",n=n!=null?""+pl(n):r,R||n===t.value||(t.value=n),t.defaultValue=n}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=R?t.checked:!!c,t.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),No(t)}function Bl(t,n,r){n==="number"&&sn(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ci(t,n,r,c){if(t=t.options,n){n={};for(var p=0;p<r.length;p++)n["$"+r[p]]=!0;for(r=0;r<t.length;r++)p=n.hasOwnProperty("$"+t[r].value),t[r].selected!==p&&(t[r].selected=p),p&&c&&(t[r].defaultSelected=!0)}else{for(r=""+pl(r),n=null,p=0;p<t.length;p++){if(t[p].value===r){t[p].selected=!0,c&&(t[p].defaultSelected=!0);return}n!==null||t[p].disabled||(n=t[p])}n!==null&&(n.selected=!0)}}function Hu(t,n,r){if(n!=null&&(n=""+pl(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+pl(r):""}function Uu(t,n,r,c){if(n==null){if(c!=null){if(r!=null)throw Error(o(92));if(Mt(c)){if(1<c.length)throw Error(o(93));c=c[0]}r=c}r==null&&(r=""),n=r}r=pl(n),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),No(t)}function Os(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var gh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lf(t,n,r){var c=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":c?t.setProperty(n,r):typeof r!="number"||r===0||gh.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function sf(t,n,r){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var p in n)c=n[p],n.hasOwnProperty(p)&&r[p]!==c&&lf(t,p,c)}else for(var y in n)n.hasOwnProperty(y)&&lf(t,y,n[y])}function Bu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ro(t){return rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ei(){}var Gu=null;function Lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zs=null,ts=null;function of(t){var n=Ds(t);if(n&&(t=n.stateNode)){var r=t[fa]||null;t:switch(t=n.stateNode,n.type){case"input":if(br(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ha(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var c=r[n];if(c!==t&&c.form===t.form){var p=c[fa]||null;if(!p)throw Error(o(90));br(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<r.length;n++)c=r[n],c.form===t.form&&da(c)}break t;case"textarea":Hu(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&Ci(t,!!r.multiple,n,!1)}}}var Yu=!1;function uf(t,n,r){if(Yu)return t(n,r);Yu=!0;try{var c=t(n);return c}finally{if(Yu=!1,(zs!==null||ts!==null)&&(ql(),zs&&(n=zs,t=ts,ts=zs=null,of(n),t)))for(n=0;n<t.length;n++)of(t[n])}}function xr(t,n){var r=t.stateNode;if(r===null)return null;var c=r[fa]||null;if(c===null)return null;r=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,n,typeof r));return r}var kl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=!1;if(kl)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){cf=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{cf=!1}var el=null,Xu=null,js=null;function Do(){if(js)return js;var t,n=Xu,r=n.length,c,p="value"in el?el.value:el.textContent,y=p.length;for(t=0;t<r&&n[t]===p[t];t++);var T=r-t;for(c=1;c<=T&&n[r-c]===p[y-c];c++);return js=p.slice(t,1<c?1-c:void 0)}function Oo(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Er(){return!0}function ph(){return!1}function Ea(t){function n(r,c,p,y,T){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Er:ph,this.isPropagationStopped=ph,this}return C(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),n}var es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zo=Ea(es),_r=C({},es,{view:0,detail:0}),vh=Ea(_r),jo,qu,Tr,Ar=C({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tr&&(Tr&&t.type==="mousemove"?(jo=t.screenX-Tr.screenX,qu=t.screenY-Tr.screenY):qu=jo=0,Tr=t),jo)},movementY:function(t){return"movementY"in t?t.movementY:qu}}),ff=Ea(Ar),yh=C({},Ar,{dataTransfer:0}),Sh=Ea(yh),df=C({},_r,{relatedTarget:0}),Vu=Ea(df),bh=C({},es,{animationName:0,elapsedTime:0,pseudoElement:0}),Wg=Ea(bh),Pg=C({},es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xh=Ea(Pg),Ho=C({},es,{data:0}),Ku=Ea(Ho),Qu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ch={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Eh[t])?!!n[t]:!1}function Zu(){return hf}var _h=C({},_r,{key:function(t){if(t.key){var n=Qu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Oo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ch[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(t){return t.type==="keypress"?Oo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Hs=Ea(_h),ku=C({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=Ea(ku),mf=C({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),Th=Ea(mf),Ah=C({},es,{propertyName:0,elapsedTime:0,pseudoElement:0}),$g=Ea(Ah),ea=C({},Ar,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mh=Ea(ea),wh=C({},es,{newState:0,oldState:0}),Nh=Ea(wh),Rh=[9,13,27,32],Us=kl&&"CompositionEvent"in window,Mr=null;kl&&"documentMode"in document&&(Mr=document.documentMode);var Ju=kl&&"TextEvent"in window&&!Mr,pf=kl&&(!Us||Mr&&8<Mr&&11>=Mr),Dh=" ",Uo=!1;function Iu(t,n){switch(t){case"keyup":return Rh.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bs=!1;function Oh(t,n){switch(t){case"compositionend":return vf(n);case"keypress":return n.which!==32?null:(Uo=!0,Dh);case"textInput":return t=n.data,t===Dh&&Uo?null:t;default:return null}}function yf(t,n){if(Bs)return t==="compositionend"||!Us&&Iu(t,n)?(t=Do(),js=Xu=el=null,Bs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return pf&&n.locale!=="ko"?null:n.data;default:return null}}var Sf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Sf[t.type]:n==="textarea"}function Fu(t,n,r,c){zs?ts?ts.push(c):ts=[c]:zs=c,n=B0(n,"onChange"),0<n.length&&(r=new zo("onChange","change",null,r,c),t.push({event:r,listeners:n}))}var ns=null,Gs=null;function zh(t){$1(t,0)}function wr(t){var n=yr(t);if(da(n))return t}function xf(t,n){if(t==="change")return n}var Jl=!1;if(kl){var Bo;if(kl){var Cf="oninput"in document;if(!Cf){var Ef=document.createElement("div");Ef.setAttribute("oninput","return;"),Cf=typeof Ef.oninput=="function"}Bo=Cf}else Bo=!1;Jl=Bo&&(!document.documentMode||9<document.documentMode)}function vl(){ns&&(ns.detachEvent("onpropertychange",Go),Gs=ns=null)}function Go(t){if(t.propertyName==="value"&&wr(Gs)){var n=[];Fu(n,Gs,t,Lu(t)),uf(zh,n)}}function jh(t,n,r){t==="focusin"?(vl(),ns=n,Gs=r,ns.attachEvent("onpropertychange",Go)):t==="focusout"&&vl()}function _f(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wr(Gs)}function Hh(t,n){if(t==="click")return wr(n)}function Uh(t,n){if(t==="input"||t==="change")return wr(n)}function Tf(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var _a=typeof Object.is=="function"?Object.is:Tf;function Nr(t,n){if(_a(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),c=Object.keys(n);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!_e.call(n,p)||!_a(t[p],n[p]))return!1}return!0}function Lo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rr(t,n){var r=Lo(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=n&&c>=n)return{node:r,offset:n-t};t=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Lo(r)}}function Fe(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Fe(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Bh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=sn(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=sn(t.document)}return n}function Af(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Gh=kl&&"documentMode"in document&&11>=document.documentMode,Il=null,Fl=null,Dr=null,Wu=!1;function Or(t,n,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wu||Il==null||Il!==sn(c)||(c=Il,"selectionStart"in c&&Af(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Dr&&Nr(Dr,c)||(Dr=c,c=B0(Fl,"onSelect"),0<c.length&&(n=new zo("onSelect","select",null,n,r),t.push({event:n,listeners:c}),n.target=Il)))}function ga(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Ls={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionrun:ga("Transition","TransitionRun"),transitionstart:ga("Transition","TransitionStart"),transitioncancel:ga("Transition","TransitionCancel"),transitionend:ga("Transition","TransitionEnd")},Yo={},Mf={};kl&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function _i(t){if(Yo[t])return Yo[t];if(!Ls[t])return t;var n=Ls[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Mf)return Yo[t]=n[r];return t}var Pu=_i("animationend"),Xo=_i("animationiteration"),wf=_i("animationstart"),Lh=_i("transitionrun"),tm=_i("transitionstart"),Yh=_i("transitioncancel"),Nf=_i("transitionend"),yl=new Map,qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qo.push("scrollEnd");function Sl(t,n){yl.set(t,n),$i(n,[t])}var Vo=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},bl=[],Ti=0,Jn=0;function Ko(){for(var t=Ti,n=Jn=Ti=0;n<t;){var r=bl[n];bl[n++]=null;var c=bl[n];bl[n++]=null;var p=bl[n];bl[n++]=null;var y=bl[n];if(bl[n++]=null,c!==null&&p!==null){var T=c.pending;T===null?p.next=p:(p.next=T.next,T.next=p),c.pending=p}y!==0&&as(r,p,y)}}function In(t,n,r,c){bl[Ti++]=t,bl[Ti++]=n,bl[Ti++]=r,bl[Ti++]=c,Jn|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function $u(t,n,r,c){return In(t,n,r,c),xl(t)}function Ta(t,n){return In(t,null,null,n),xl(t)}function as(t,n,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var p=!1,y=t.return;y!==null;)y.childLanes|=r,c=y.alternate,c!==null&&(c.childLanes|=r),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(p=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,p&&n!==null&&(p=31-ua(r),t=y.hiddenUpdates,c=t[p],c===null?t[p]=[n]:c.push(n),n.lane=r|536870912),y):null}function xl(t){if(50<Cs)throw Cs=0,lr=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ls={};function Rf(t,n,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,n,r,c){return new Rf(t,n,r,c)}function tc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ba(t,n){var r=t.alternate;return r===null?(r=gn(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function zr(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Wl(t,n,r,c,p,y){var T=0;if(c=t,typeof t=="function")tc(t)&&(T=1);else if(typeof t=="string")T=N3(t,r,Ht.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case dt:return t=gn(31,r,n,p),t.elementType=dt,t.lanes=y,t;case H:return is(r.children,p,y,n);case D:T=8,p|=24;break;case U:return t=gn(12,r,n,p|2),t.elementType=U,t.lanes=y,t;case nt:return t=gn(13,r,n,p),t.elementType=nt,t.lanes=y,t;case z:return t=gn(19,r,n,p),t.elementType=z,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:T=10;break t;case j:T=9;break t;case L:T=11;break t;case G:T=14;break t;case Q:T=16,c=null;break t}T=29,r=Error(o(130,t===null?"null":typeof t,"")),c=null}return n=gn(T,r,n,p),n.elementType=t,n.type=c,n.lanes=y,n}function is(t,n,r,c){return t=gn(7,t,c,n),t.lanes=r,t}function ec(t,n,r){return t=gn(6,t,null,n),t.lanes=r,t}function jr(t){var n=gn(18,null,null,0);return n.stateNode=t,n}function nc(t,n,r){return n=gn(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Qo=new WeakMap;function nl(t,n){if(typeof t=="object"&&t!==null){var r=Qo.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Kt(n)},Qo.set(t,n),n)}return{value:t,source:n,stack:Kt(n)}}var ss=[],rs=0,Hr=null,Ur=0,Ga=[],rn=0,Ai=null,mn=1,Gl="";function Pl(t,n){ss[rs++]=Ur,ss[rs++]=Hr,Hr=t,Ur=n}function Xh(t,n,r){Ga[rn++]=mn,Ga[rn++]=Gl,Ga[rn++]=Ai,Ai=t;var c=mn;t=Gl;var p=32-ua(c)-1;c&=~(1<<p),r+=1;var y=32-ua(n)+p;if(30<y){var T=p-p%5;y=(c&(1<<T)-1).toString(32),c>>=T,p-=T,mn=1<<32-ua(n)+p|r<<p|c,Gl=y+t}else mn=1<<y|r<<p|c,Gl=t}function $l(t){t.return!==null&&(Pl(t,1),Xh(t,1,0))}function ac(t){for(;t===Hr;)Hr=ss[--rs],ss[rs]=null,Ur=ss[--rs],ss[rs]=null;for(;t===Ai;)Ai=Ga[--rn],Ga[rn]=null,Gl=Ga[--rn],Ga[rn]=null,mn=Ga[--rn],Ga[rn]=null}function lc(t,n){Ga[rn++]=mn,Ga[rn++]=Gl,Ga[rn++]=Ai,mn=n.id,Gl=n.overflow,Ai=t}var Tn=null,We=null,Te=!1,Mi=null,al=!1,Br=Error(o(519));function ti(t){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ei(nl(n,t)),Br}function qh(t){var n=t.stateNode,r=t.type,c=t.memoizedProps;switch(n[Un]=t,n[fa]=c,r){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(r=0;r<jl.length;r++)we(jl[r],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":we("invalid",n),ju(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":we("invalid",n);break;case"textarea":we("invalid",n),Uu(n,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||c.suppressHydrationWarning===!0||a2(n.textContent,r)?(c.popover!=null&&(we("beforetoggle",n),we("toggle",n)),c.onScroll!=null&&we("scroll",n),c.onScrollEnd!=null&&we("scrollend",n),c.onClick!=null&&(n.onclick=Ei),n=!0):n=!1,n||ti(t,!0)}function Vh(t){for(Tn=t.return;Tn;)switch(Tn.tag){case 5:case 31:case 13:al=!1;return;case 27:case 3:al=!0;return;default:Tn=Tn.return}}function Gr(t){if(t!==Tn)return!1;if(!Te)return Vh(t),Te=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||pm(t.type,t.memoizedProps)),r=!r),r&&We&&ti(t),Vh(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));We=d2(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));We=d2(t)}else n===27?(n=We,lo(t.type)?(t=xm,xm=null,We=t):We=n):We=Tn?mi(t.stateNode.nextSibling):null;return!0}function os(){We=Tn=null,Te=!1}function ic(){var t=Mi;return t!==null&&(Mn===null?Mn=t:Mn.push.apply(Mn,t),Mi=null),t}function ei(t){Mi===null?Mi=[t]:Mi.push(t)}var Lr=B(null),us=null,ni=null;function wi(t,n,r){St(Lr,n._currentValue),n._currentValue=r}function ai(t){t._currentValue=Lr.current,P(Lr)}function sc(t,n,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),t===r)break;t=t.return}}function rc(t,n,r,c){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;t:for(;y!==null;){var R=y;y=p;for(var V=0;V<n.length;V++)if(R.context===n[V]){y.lanes|=r,R=y.alternate,R!==null&&(R.lanes|=r),sc(y.return,r,t),c||(T=null);break t}y=R.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(o(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),sc(T,r,t),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===t){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function li(t,n,r,c){t=null;for(var p=n,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(o(387));if(T=T.memoizedProps,T!==null){var R=p.type;_a(p.pendingProps.value,T.value)||(t!==null?t.push(R):t=[R])}}else if(p===Z.current){if(T=p.alternate,T===null)throw Error(o(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Md):t=[Md])}p=p.return}t!==null&&rc(n,t,r,c),n.flags|=262144}function Zo(t){for(t=t.firstContext;t!==null;){if(!_a(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function cs(t){us=t,ni=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ie(t){return Kh(us,t)}function Yr(t,n){return us===null&&cs(t),Kh(t,n)}function Kh(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},ni===null){if(t===null)throw Error(o(308));ni=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ni=ni.next=n;return r}var Qh=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},em=l.unstable_scheduleCallback,nm=l.unstable_NormalPriority,Gn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new Qh,data:new Map,refCount:0}}function Ys(t){t.refCount--,t.refCount===0&&em(nm,function(){t.controller.abort()})}var ll=null,oc=0,Ni=0,Cl=null;function Of(t,n){if(ll===null){var r=ll=[];oc=0,Ni=ut(),Cl={status:"pending",value:void 0,then:function(c){r.push(c)}}}return oc++,n.then(zf,zf),n}function zf(){if(--oc===0&&ll!==null){Cl!==null&&(Cl.status="fulfilled");var t=ll;ll=null,Ni=0,Cl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function jf(t,n){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return t.then(function(){c.status="fulfilled",c.value=n;for(var p=0;p<r.length;p++)(0,r[p])(n)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var Zh=q.S;q.S=function(t,n){xd=Jt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Of(t,n),Zh!==null&&Zh(t,n)};var fs=B(null);function uc(){var t=fs.current;return t!==null?t:se.pooledCache}function ko(t,n){n===null?St(fs,fs.current):St(fs,n.pool)}function Hf(){var t=uc();return t===null?null:{parent:Gn._currentValue,pool:t}}var Xs=Error(o(460)),Jo=Error(o(474)),he=Error(o(542)),cc={then:function(){}};function La(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fc(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Ei,Ei),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ks(t),t;default:if(typeof n.status=="string")n.then(Ei,Ei);else{if(t=se,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(c){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=c}},function(c){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Ks(t),t}throw ii=n,Xs}}function qs(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(ii=r,Xs):r}}var ii=null;function Vs(){if(ii===null)throw Error(o(459));var t=ii;return ii=null,t}function Ks(t){if(t===Xs||t===he)throw Error(o(483))}var Qs=null,Zs=0;function Io(t){var n=Zs;return Zs+=1,Qs===null&&(Qs=[]),fc(Qs,t,n)}function El(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Xr(t,n){throw n.$$typeof===_?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function dc(t){function n($,J){if(t){var at=$.deletions;at===null?($.deletions=[J],$.flags|=16):at.push(J)}}function r($,J){if(!t)return null;for(;J!==null;)n($,J),J=J.sibling;return null}function c($){for(var J=new Map;$!==null;)$.key!==null?J.set($.key,$):J.set($.index,$),$=$.sibling;return J}function p($,J){return $=Ba($,J),$.index=0,$.sibling=null,$}function y($,J,at){return $.index=at,t?(at=$.alternate,at!==null?(at=at.index,at<J?($.flags|=67108866,J):at):($.flags|=67108866,J)):($.flags|=1048576,J)}function T($){return t&&$.alternate===null&&($.flags|=67108866),$}function R($,J,at,bt){return J===null||J.tag!==6?(J=ec(at,$.mode,bt),J.return=$,J):(J=p(J,at),J.return=$,J)}function V($,J,at,bt){var Pt=at.type;return Pt===H?yt($,J,at.props.children,bt,at.key):J!==null&&(J.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Q&&qs(Pt)===J.type)?(J=p(J,at.props),El(J,at),J.return=$,J):(J=Wl(at.type,at.key,at.props,null,$.mode,bt),El(J,at),J.return=$,J)}function it($,J,at,bt){return J===null||J.tag!==4||J.stateNode.containerInfo!==at.containerInfo||J.stateNode.implementation!==at.implementation?(J=nc(at,$.mode,bt),J.return=$,J):(J=p(J,at.children||[]),J.return=$,J)}function yt($,J,at,bt,Pt){return J===null||J.tag!==7?(J=is(at,$.mode,bt,Pt),J.return=$,J):(J=p(J,at),J.return=$,J)}function Et($,J,at){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=ec(""+J,$.mode,at),J.return=$,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case M:return at=Wl(J.type,J.key,J.props,null,$.mode,at),El(at,J),at.return=$,at;case A:return J=nc(J,$.mode,at),J.return=$,J;case Q:return J=qs(J),Et($,J,at)}if(Mt(J)||pt(J))return J=is(J,$.mode,at,null),J.return=$,J;if(typeof J.then=="function")return Et($,Io(J),at);if(J.$$typeof===Y)return Et($,Yr($,J),at);Xr($,J)}return null}function rt($,J,at,bt){var Pt=J!==null?J.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return Pt!==null?null:R($,J,""+at,bt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case M:return at.key===Pt?V($,J,at,bt):null;case A:return at.key===Pt?it($,J,at,bt):null;case Q:return at=qs(at),rt($,J,at,bt)}if(Mt(at)||pt(at))return Pt!==null?null:yt($,J,at,bt,null);if(typeof at.then=="function")return rt($,J,Io(at),bt);if(at.$$typeof===Y)return rt($,J,Yr($,at),bt);Xr($,at)}return null}function ft($,J,at,bt,Pt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return $=$.get(at)||null,R(J,$,""+bt,Pt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case M:return $=$.get(bt.key===null?at:bt.key)||null,V(J,$,bt,Pt);case A:return $=$.get(bt.key===null?at:bt.key)||null,it(J,$,bt,Pt);case Q:return bt=qs(bt),ft($,J,at,bt,Pt)}if(Mt(bt)||pt(bt))return $=$.get(at)||null,yt(J,$,bt,Pt,null);if(typeof bt.then=="function")return ft($,J,at,Io(bt),Pt);if(bt.$$typeof===Y)return ft($,J,at,Yr(J,bt),Pt);Xr(J,bt)}return null}function Qt($,J,at,bt){for(var Pt=null,Le=null,It=J,pe=J=0,Re=null;It!==null&&pe<at.length;pe++){It.index>pe?(Re=It,It=null):Re=It.sibling;var Ye=rt($,It,at[pe],bt);if(Ye===null){It===null&&(It=Re);break}t&&It&&Ye.alternate===null&&n($,It),J=y(Ye,J,pe),Le===null?Pt=Ye:Le.sibling=Ye,Le=Ye,It=Re}if(pe===at.length)return r($,It),Te&&Pl($,pe),Pt;if(It===null){for(;pe<at.length;pe++)It=Et($,at[pe],bt),It!==null&&(J=y(It,J,pe),Le===null?Pt=It:Le.sibling=It,Le=It);return Te&&Pl($,pe),Pt}for(It=c(It);pe<at.length;pe++)Re=ft(It,$,pe,at[pe],bt),Re!==null&&(t&&Re.alternate!==null&&It.delete(Re.key===null?pe:Re.key),J=y(Re,J,pe),Le===null?Pt=Re:Le.sibling=Re,Le=Re);return t&&It.forEach(function(uo){return n($,uo)}),Te&&Pl($,pe),Pt}function ee($,J,at,bt){if(at==null)throw Error(o(151));for(var Pt=null,Le=null,It=J,pe=J=0,Re=null,Ye=at.next();It!==null&&!Ye.done;pe++,Ye=at.next()){It.index>pe?(Re=It,It=null):Re=It.sibling;var uo=rt($,It,Ye.value,bt);if(uo===null){It===null&&(It=Re);break}t&&It&&uo.alternate===null&&n($,It),J=y(uo,J,pe),Le===null?Pt=uo:Le.sibling=uo,Le=uo,It=Re}if(Ye.done)return r($,It),Te&&Pl($,pe),Pt;if(It===null){for(;!Ye.done;pe++,Ye=at.next())Ye=Et($,Ye.value,bt),Ye!==null&&(J=y(Ye,J,pe),Le===null?Pt=Ye:Le.sibling=Ye,Le=Ye);return Te&&Pl($,pe),Pt}for(It=c(It);!Ye.done;pe++,Ye=at.next())Ye=ft(It,$,pe,Ye.value,bt),Ye!==null&&(t&&Ye.alternate!==null&&It.delete(Ye.key===null?pe:Ye.key),J=y(Ye,J,pe),Le===null?Pt=Ye:Le.sibling=Ye,Le=Ye);return t&&It.forEach(function(Y3){return n($,Y3)}),Te&&Pl($,pe),Pt}function tn($,J,at,bt){if(typeof at=="object"&&at!==null&&at.type===H&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case M:t:{for(var Pt=at.key;J!==null;){if(J.key===Pt){if(Pt=at.type,Pt===H){if(J.tag===7){r($,J.sibling),bt=p(J,at.props.children),bt.return=$,$=bt;break t}}else if(J.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Q&&qs(Pt)===J.type){r($,J.sibling),bt=p(J,at.props),El(bt,at),bt.return=$,$=bt;break t}r($,J);break}else n($,J);J=J.sibling}at.type===H?(bt=is(at.props.children,$.mode,bt,at.key),bt.return=$,$=bt):(bt=Wl(at.type,at.key,at.props,null,$.mode,bt),El(bt,at),bt.return=$,$=bt)}return T($);case A:t:{for(Pt=at.key;J!==null;){if(J.key===Pt)if(J.tag===4&&J.stateNode.containerInfo===at.containerInfo&&J.stateNode.implementation===at.implementation){r($,J.sibling),bt=p(J,at.children||[]),bt.return=$,$=bt;break t}else{r($,J);break}else n($,J);J=J.sibling}bt=nc(at,$.mode,bt),bt.return=$,$=bt}return T($);case Q:return at=qs(at),tn($,J,at,bt)}if(Mt(at))return Qt($,J,at,bt);if(pt(at)){if(Pt=pt(at),typeof Pt!="function")throw Error(o(150));return at=Pt.call(at),ee($,J,at,bt)}if(typeof at.then=="function")return tn($,J,Io(at),bt);if(at.$$typeof===Y)return tn($,J,Yr($,at),bt);Xr($,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,J!==null&&J.tag===6?(r($,J.sibling),bt=p(J,at),bt.return=$,$=bt):(r($,J),bt=ec(at,$.mode,bt),bt.return=$,$=bt),T($)):r($,J)}return function($,J,at,bt){try{Zs=0;var Pt=tn($,J,at,bt);return Qs=null,Pt}catch(It){if(It===Xs||It===he)throw It;var Le=gn(29,It,null,$.mode);return Le.lanes=bt,Le.return=$,Le}}}var Ri=dc(!0),hc=dc(!1),Aa=!1;function Fo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Di(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,n,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ft&2)!==0){var p=c.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),c.pending=n,n=xl(t),as(t,null,r),n}return In(t,c,n,r),xl(t)}function hs(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var c=n.lanes;c&=t.pendingLanes,r|=c,n.lanes=r,ca(t,r)}}function Wt(t,n){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?p=y=n:y=y.next=n}else p=y=n;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var Bf=!1;function Wo(){if(Bf){var t=Cl;if(t!==null)throw t}}function qr(t,n,r,c){Bf=!1;var p=t.updateQueue;Aa=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var V=R,it=V.next;V.next=null,T===null?y=it:T.next=it,T=V;var yt=t.alternate;yt!==null&&(yt=yt.updateQueue,R=yt.lastBaseUpdate,R!==T&&(R===null?yt.firstBaseUpdate=it:R.next=it,yt.lastBaseUpdate=V))}if(y!==null){var Et=p.baseState;T=0,yt=it=V=null,R=y;do{var rt=R.lane&-536870913,ft=rt!==R.lane;if(ft?(de&rt)===rt:(c&rt)===rt){rt!==0&&rt===Ni&&(Bf=!0),yt!==null&&(yt=yt.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Qt=t,ee=R;rt=n;var tn=r;switch(ee.tag){case 1:if(Qt=ee.payload,typeof Qt=="function"){Et=Qt.call(tn,Et,rt);break t}Et=Qt;break t;case 3:Qt.flags=Qt.flags&-65537|128;case 0:if(Qt=ee.payload,rt=typeof Qt=="function"?Qt.call(tn,Et,rt):Qt,rt==null)break t;Et=C({},Et,rt);break t;case 2:Aa=!0}}rt=R.callback,rt!==null&&(t.flags|=64,ft&&(t.flags|=8192),ft=p.callbacks,ft===null?p.callbacks=[rt]:ft.push(rt))}else ft={lane:rt,tag:R.tag,payload:R.payload,callback:R.callback,next:null},yt===null?(it=yt=ft,V=Et):yt=yt.next=ft,T|=rt;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ft=R,R=ft.next,ft.next=null,p.lastBaseUpdate=ft,p.shared.pending=null}}while(!0);yt===null&&(V=Et),p.baseState=V,p.firstBaseUpdate=it,p.lastBaseUpdate=yt,y===null&&(p.shared.lanes=0),di|=T,t.lanes=T,t.memoizedState=Et}}function Vr(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function kh(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Vr(r[t],n)}var Kr=B(null),gc=B(0);function Jh(t,n){t=ol,St(gc,t),St(Kr,n),ol=t|n.baseLanes}function Gf(){St(gc,ol),St(Kr,Kr.current)}function Po(){ol=gc.current,P(Kr),P(gc)}var Ya=B(null),Ma=null;function Oi(t){var n=t.alternate;St(Ae,Ae.current&1),St(Ya,t),Ma===null&&(n===null||Kr.current!==null||n.memoizedState!==null)&&(Ma=t)}function Lf(t){St(Ae,Ae.current),St(Ya,t),Ma===null&&(Ma=t)}function Ih(t){t.tag===22?(St(Ae,Ae.current),St(Ya,t),Ma===null&&(Ma=t)):Xa()}function Xa(){St(Ae,Ae.current),St(Ya,Ya.current)}function Rn(t){P(Ya),Ma===t&&(Ma=null),P(Ae)}var Ae=B(0);function il(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Sm(r)||bm(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var on=0,ue=null,ke=null,xe=null,_l=!1,Qr=!1,ks=!1,mc=0,$o=0,Zr=null,Yf=0;function pn(){throw Error(o(321))}function Xf(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!_a(t[r],n[r]))return!1;return!0}function pc(t,n,r,c,p,y){return on=y,ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=t===null||t.memoizedState===null?M0:rd,ks=!1,y=r(c,p),ks=!1,Qr&&(y=Js(n,r,c,p)),Fh(t),y}function Fh(t){q.H=kr;var n=ke!==null&&ke.next!==null;if(on=0,xe=ke=ue=null,_l=!1,$o=0,Zr=null,n)throw Error(o(300));t===null||Ln||(t=t.dependencies,t!==null&&Zo(t)&&(Ln=!0))}function Js(t,n,r,c){ue=t;var p=0;do{if(Qr&&(Zr=null),$o=0,Qr=!1,25<=p)throw Error(o(301));if(p+=1,xe=ke=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}q.H=Tl,y=n(r,c)}while(Qr);return y}function Is(){var t=q.H,n=t.useState()[0];return n=typeof n.then=="function"?tu(n):n,t=t.useState()[0],(ke!==null?ke.memoizedState:null)!==t&&(ue.flags|=1024),n}function qf(){var t=mc!==0;return mc=0,t}function Vf(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Kf(t){if(_l){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}_l=!1}on=0,xe=ke=ue=null,Qr=!1,$o=mc=0,Zr=null}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?ue.memoizedState=xe=t:xe=xe.next=t,xe}function Dn(){if(ke===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var n=xe===null?ue.memoizedState:xe.next;if(n!==null)xe=n,ke=t;else{if(t===null)throw ue.alternate===null?Error(o(467)):Error(o(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},xe===null?ue.memoizedState=xe=t:xe=xe.next=t}return xe}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(t){var n=$o;return $o+=1,Zr===null&&(Zr=[]),t=fc(Zr,t,n),n=ue,(xe===null?n.memoizedState:xe.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?M0:rd),t}function gs(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tu(t);if(t.$$typeof===Y)return ie(t)}throw Error(o(438,String(t)))}function Qf(t){var n=null,r=ue.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var c=ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=vc(),ue.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),c=0;c<t;c++)r[c]=lt;return n.index++,r}function zi(t,n){return typeof n=="function"?n(t):n}function yc(t){var n=Dn();return Zf(n,ke,t)}function Zf(t,n,r){var c=t.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=r;var p=t.baseQueue,y=c.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}n.baseQueue=p=y,c.pending=null}if(y=t.baseState,p===null)t.memoizedState=y;else{n=p.next;var R=T=null,V=null,it=n,yt=!1;do{var Et=it.lane&-536870913;if(Et!==it.lane?(de&Et)===Et:(on&Et)===Et){var rt=it.revertLane;if(rt===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),Et===Ni&&(yt=!0);else if((on&rt)===rt){it=it.next,rt===Ni&&(yt=!0);continue}else Et={lane:0,revertLane:it.revertLane,gesture:null,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},V===null?(R=V=Et,T=y):V=V.next=Et,ue.lanes|=rt,di|=rt;Et=it.action,ks&&r(y,Et),y=it.hasEagerState?it.eagerState:r(y,Et)}else rt={lane:Et,revertLane:it.revertLane,gesture:it.gesture,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},V===null?(R=V=rt,T=y):V=V.next=rt,ue.lanes|=Et,di|=Et;it=it.next}while(it!==null&&it!==n);if(V===null?T=y:V.next=R,!_a(y,t.memoizedState)&&(Ln=!0,yt&&(r=Cl,r!==null)))throw r;t.memoizedState=y,t.baseState=T,t.baseQueue=V,c.lastRenderedState=y}return p===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function kf(t){var n=Dn(),r=n.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var c=r.dispatch,p=r.pending,y=n.memoizedState;if(p!==null){r.pending=null;var T=p=p.next;do y=t(y,T.action),T=T.next;while(T!==p);_a(y,n.memoizedState)||(Ln=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),r.lastRenderedState=y}return[y,c]}function Wh(t,n,r){var c=ue,p=Dn(),y=Te;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=n();var T=!_a((ke||p).memoizedState,r);if(T&&(p.memoizedState=r,Ln=!0),p=p.queue,ed(t0.bind(null,c,p,t),[t]),p.getSnapshot!==n||T||xe!==null&&xe.memoizedState.tag&1){if(c.flags|=2048,ms(9,{destroy:void 0},$h.bind(null,c,p,r,n),null),se===null)throw Error(o(349));y||(on&127)!==0||Ph(c,n,r)}return r}function Ph(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=ue.updateQueue,n===null?(n=vc(),ue.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function $h(t,n,r,c){n.value=r,n.getSnapshot=c,e0(n)&&n0(t)}function t0(t,n,r){return r(function(){e0(n)&&n0(t)})}function e0(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!_a(t,r)}catch{return!0}}function n0(t){var n=Ta(t,2);n!==null&&me(n,t,2)}function Jf(t){var n=qn();if(typeof t=="function"){var r=t;if(t=r(),ks){Ja(!0);try{r()}finally{Ja(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:t},n}function If(t,n,r,c){return t.baseState=r,Zf(t,ke,typeof c=="function"?c:zi)}function am(t,n,r,c,p){if(Cc(t))throw Error(o(485));if(t=n.action,t!==null){var y={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};q.T!==null?r(!0):y.isTransition=!1,c(y),r=n.pending,r===null?(y.next=n.pending=y,a0(n,y)):(y.next=r.next,n.pending=r.next=y)}}function a0(t,n){var r=n.action,c=n.payload,p=t.state;if(n.isTransition){var y=q.T,T={};q.T=T;try{var R=r(p,c),V=q.S;V!==null&&V(T,R),l0(t,n,R)}catch(it){Ff(t,n,it)}finally{y!==null&&T.types!==null&&(y.types=T.types),q.T=y}}else try{y=r(p,c),l0(t,n,y)}catch(it){Ff(t,n,it)}}function l0(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){i0(t,n,c)},function(c){return Ff(t,n,c)}):i0(t,n,r)}function i0(t,n,r){n.status="fulfilled",n.value=r,s0(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,a0(t,r)))}function Ff(t,n,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=r,s0(n),n=n.next;while(n!==c)}t.action=null}function s0(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Wf(t,n){return n}function Pf(t,n){if(Te){var r=se.formState;if(r!==null){t:{var c=ue;if(Te){if(We){e:{for(var p=We,y=al;p.nodeType!==8;){if(!y){p=null;break e}if(p=mi(p.nextSibling),p===null){p=null;break e}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){We=mi(p.nextSibling),c=p.data==="F!";break t}}ti(c)}c=!1}c&&(n=r[0])}}return r=qn(),r.memoizedState=r.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:n},r.queue=c,r=_0.bind(null,ue,c),c.dispatch=r,c=Jf(!1),y=sd.bind(null,ue,!1,c.queue),c=qn(),p={state:n,dispatch:null,action:t,pending:null},c.queue=p,r=am.bind(null,ue,p,y,r),p.dispatch=r,c.memoizedState=t,[n,r,!1]}function r0(t){var n=Dn();return $f(n,ke,t)}function $f(t,n,r){if(n=Zf(t,n,Wf)[0],t=yc(zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=tu(n)}catch(T){throw T===Xs?he:T}else c=n;n=Dn();var p=n.queue,y=p.dispatch;return r!==n.memoizedState&&(ue.flags|=2048,ms(9,{destroy:void 0},o0.bind(null,p,r),null)),[c,y,t]}function o0(t,n){t.action=n}function td(t){var n=Dn(),r=ke;if(r!==null)return $f(n,r,t);Dn(),n=n.memoizedState,r=Dn();var c=r.queue.dispatch;return r.memoizedState=t,[n,c,!1]}function ms(t,n,r,c){return t={tag:t,create:r,deps:c,inst:n,next:null},n=ue.updateQueue,n===null&&(n=vc(),ue.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,n.lastEffect=t),t}function Sc(){return Dn().memoizedState}function bc(t,n,r,c){var p=qn();ue.flags|=t,p.memoizedState=ms(1|n,{destroy:void 0},r,c===void 0?null:c)}function xc(t,n,r,c){var p=Dn();c=c===void 0?null:c;var y=p.memoizedState.inst;ke!==null&&c!==null&&Xf(c,ke.memoizedState.deps)?p.memoizedState=ms(n,y,r,c):(ue.flags|=t,p.memoizedState=ms(1|n,y,r,c))}function u0(t,n){bc(8390656,8,t,n)}function ed(t,n){xc(2048,8,t,n)}function c0(t){ue.flags|=4;var n=ue.updateQueue;if(n===null)n=vc(),ue.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function f0(t){var n=Dn().memoizedState;return c0({ref:n,nextImpl:t}),function(){if((Ft&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function d0(t,n){return xc(4,2,t,n)}function h0(t,n){return xc(4,4,t,n)}function g0(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function m0(t,n,r){r=r!=null?r.concat([t]):null,xc(4,4,g0.bind(null,n,t),r)}function nd(){}function p0(t,n){var r=Dn();n=n===void 0?null:n;var c=r.memoizedState;return n!==null&&Xf(n,c[1])?c[0]:(r.memoizedState=[t,n],t)}function v0(t,n){var r=Dn();n=n===void 0?null:n;var c=r.memoizedState;if(n!==null&&Xf(n,c[1]))return c[0];if(c=t(),ks){Ja(!0);try{t()}finally{Ja(!1)}}return r.memoizedState=[c,n],c}function ad(t,n,r){return r===void 0||(on&1073741824)!==0&&(de&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=ye(),ue.lanes|=t,di|=t,r)}function y0(t,n,r,c){return _a(r,n)?r:Kr.current!==null?(t=ad(t,r,c),_a(t,n)||(Ln=!0),t):(on&42)===0||(on&1073741824)!==0&&(de&261930)===0?(Ln=!0,t.memoizedState=r):(t=ye(),ue.lanes|=t,di|=t,n)}function S0(t,n,r,c,p){var y=I.p;I.p=y!==0&&8>y?y:8;var T=q.T,R={};q.T=R,sd(t,!1,n,r);try{var V=p(),it=q.S;if(it!==null&&it(R,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var yt=jf(V,c);eu(t,n,yt,cl(t))}else eu(t,n,c,cl(t))}catch(Et){eu(t,n,{then:function(){},status:"rejected",reason:Et},cl())}finally{I.p=y,T!==null&&R.types!==null&&(T.types=R.types),q.T=T}}function lm(){}function ld(t,n,r,c){if(t.tag!==5)throw Error(o(476));var p=b0(t).queue;S0(t,p,n,k,r===null?lm:function(){return x0(t),r(c)})}function b0(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:k},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function x0(t){var n=b0(t);n.next===null&&(n=t.alternate.memoizedState),eu(t,n.next.queue,{},cl())}function id(){return ie(Md)}function C0(){return Dn().memoizedState}function E0(){return Dn().memoizedState}function im(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=cl();t=Di(r);var c=ds(n,t,r);c!==null&&(me(c,n,r),hs(c,n,r)),n={cache:Df()},t.payload=n;return}n=n.return}}function sm(t,n,r){var c=cl();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Cc(t)?T0(n,r):(r=$u(t,n,r,c),r!==null&&(me(r,t,c),A0(r,n,c)))}function _0(t,n,r){var c=cl();eu(t,n,r,c)}function eu(t,n,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cc(t))T0(n,p);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var T=n.lastRenderedState,R=y(T,r);if(p.hasEagerState=!0,p.eagerState=R,_a(R,T))return In(t,n,p,0),se===null&&Ko(),!1}catch{}if(r=$u(t,n,p,c),r!==null)return me(r,t,c),A0(r,n,c),!0}return!1}function sd(t,n,r,c){if(c={lane:2,revertLane:ut(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Cc(t)){if(n)throw Error(o(479))}else n=$u(t,r,c,2),n!==null&&me(n,t,2)}function Cc(t){var n=t.alternate;return t===ue||n!==null&&n===ue}function T0(t,n){Qr=_l=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function A0(t,n,r){if((r&4194048)!==0){var c=n.lanes;c&=t.pendingLanes,r|=c,n.lanes=r,ca(t,r)}}var kr={readContext:ie,use:gs,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};kr.useEffectEvent=pn;var M0={readContext:ie,use:gs,useCallback:function(t,n){return qn().memoizedState=[t,n===void 0?null:n],t},useContext:ie,useEffect:u0,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,bc(4194308,4,g0.bind(null,n,t),r)},useLayoutEffect:function(t,n){return bc(4194308,4,t,n)},useInsertionEffect:function(t,n){bc(4,2,t,n)},useMemo:function(t,n){var r=qn();n=n===void 0?null:n;var c=t();if(ks){Ja(!0);try{t()}finally{Ja(!1)}}return r.memoizedState=[c,n],c},useReducer:function(t,n,r){var c=qn();if(r!==void 0){var p=r(n);if(ks){Ja(!0);try{r(n)}finally{Ja(!1)}}}else p=n;return c.memoizedState=c.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},c.queue=t,t=t.dispatch=sm.bind(null,ue,t),[c.memoizedState,t]},useRef:function(t){var n=qn();return t={current:t},n.memoizedState=t},useState:function(t){t=Jf(t);var n=t.queue,r=_0.bind(null,ue,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:nd,useDeferredValue:function(t,n){var r=qn();return ad(r,t,n)},useTransition:function(){var t=Jf(!1);return t=S0.bind(null,ue,t.queue,!0,!1),qn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var c=ue,p=qn();if(Te){if(r===void 0)throw Error(o(407));r=r()}else{if(r=n(),se===null)throw Error(o(349));(de&127)!==0||Ph(c,n,r)}p.memoizedState=r;var y={value:r,getSnapshot:n};return p.queue=y,u0(t0.bind(null,c,y,t),[t]),c.flags|=2048,ms(9,{destroy:void 0},$h.bind(null,c,y,r,n),null),r},useId:function(){var t=qn(),n=se.identifierPrefix;if(Te){var r=Gl,c=mn;r=(c&~(1<<32-ua(c)-1)).toString(32)+r,n="_"+n+"R_"+r,r=mc++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=Yf++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:id,useFormState:Pf,useActionState:Pf,useOptimistic:function(t){var n=qn();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=sd.bind(null,ue,!0,r),r.dispatch=n,[t,n]},useMemoCache:Qf,useCacheRefresh:function(){return qn().memoizedState=im.bind(null,ue)},useEffectEvent:function(t){var n=qn(),r={impl:t};return n.memoizedState=r,function(){if((Ft&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},rd={readContext:ie,use:gs,useCallback:p0,useContext:ie,useEffect:ed,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:v0,useReducer:yc,useRef:Sc,useState:function(){return yc(zi)},useDebugValue:nd,useDeferredValue:function(t,n){var r=Dn();return y0(r,ke.memoizedState,t,n)},useTransition:function(){var t=yc(zi)[0],n=Dn().memoizedState;return[typeof t=="boolean"?t:tu(t),n]},useSyncExternalStore:Wh,useId:C0,useHostTransitionStatus:id,useFormState:r0,useActionState:r0,useOptimistic:function(t,n){var r=Dn();return If(r,ke,t,n)},useMemoCache:Qf,useCacheRefresh:E0};rd.useEffectEvent=f0;var Tl={readContext:ie,use:gs,useCallback:p0,useContext:ie,useEffect:ed,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:v0,useReducer:kf,useRef:Sc,useState:function(){return kf(zi)},useDebugValue:nd,useDeferredValue:function(t,n){var r=Dn();return ke===null?ad(r,t,n):y0(r,ke.memoizedState,t,n)},useTransition:function(){var t=kf(zi)[0],n=Dn().memoizedState;return[typeof t=="boolean"?t:tu(t),n]},useSyncExternalStore:Wh,useId:C0,useHostTransitionStatus:id,useFormState:td,useActionState:td,useOptimistic:function(t,n){var r=Dn();return ke!==null?If(r,ke,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:E0};Tl.useEffectEvent=f0;function Ec(t,n,r,c){n=t.memoizedState,r=r(c,n),r=r==null?n:C({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var nu={enqueueSetState:function(t,n,r){t=t._reactInternals;var c=cl(),p=Di(c);p.payload=n,r!=null&&(p.callback=r),n=ds(t,p,c),n!==null&&(me(n,t,c),hs(n,t,c))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var c=cl(),p=Di(c);p.tag=1,p.payload=n,r!=null&&(p.callback=r),n=ds(t,p,c),n!==null&&(me(n,t,c),hs(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=cl(),c=Di(r);c.tag=2,n!=null&&(c.callback=n),n=ds(t,c,r),n!==null&&(me(n,t,r),hs(n,t,r))}};function od(t,n,r,c,p,y,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,y,T):n.prototype&&n.prototype.isPureReactComponent?!Nr(r,c)||!Nr(p,y):!0}function ud(t,n,r,c){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,c),n.state!==t&&nu.enqueueReplaceState(n,n.state,null)}function ps(t,n){var r=n;if("ref"in n){r={};for(var c in n)c!=="ref"&&(r[c]=n[c])}if(t=t.defaultProps){r===n&&(r=C({},r));for(var p in t)r[p]===void 0&&(r[p]=t[p])}return r}function w0(t){Vo(t)}function cd(t){console.error(t)}function fd(t){Vo(t)}function _c(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function N0(t,n,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function dd(t,n,r){return r=Di(r),r.tag=3,r.payload={element:null},r.callback=function(){_c(t,n)},r}function hd(t){return t=Di(t),t.tag=3,t}function R0(t,n,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;t.payload=function(){return p(y)},t.callback=function(){N0(n,r,c)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){N0(n,r,c),typeof p!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function Vn(t,n,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=r.alternate,n!==null&&li(n,r,p,!0),r=Ya.current,r!==null){switch(r.tag){case 31:case 13:return Ma===null?to():r.alternate===null&&vn===0&&(vn=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===cc?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([c]):n.add(c),gu(t,c,p)),!1;case 22:return r.flags|=65536,c===cc?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([c]):r.add(c)),gu(t,c,p)),!1}throw Error(o(435,r.tag))}return gu(t,c,p),to(),!1}if(Te)return n=Ya.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,c!==Br&&(t=Error(o(422),{cause:c}),ei(nl(t,r)))):(c!==Br&&(n=Error(o(423),{cause:c}),ei(nl(n,r))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,c=nl(c,r),p=dd(t.stateNode,c,p),Wt(t,p),vn!==4&&(vn=2)),!1;var y=Error(o(520),{cause:c});if(y=nl(y,r),ar===null?ar=[y]:ar.push(y),vn!==4&&(vn=2),n===null)return!0;c=nl(c,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=p&-p,r.lanes|=t,t=dd(r.stateNode,c,t),Wt(r,t),!1;case 1:if(n=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(jn===null||!jn.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=hd(p),R0(p,t,r,c),Wt(r,p),!1}r=r.return}while(r!==null);return!1}var Tc=Error(o(461)),Ln=!1;function Fn(t,n,r,c){n.child=t===null?hc(n,null,r,c):Ri(n,t.child,r,c)}function gd(t,n,r,c,p){r=r.render;var y=n.ref;if("ref"in c){var T={};for(var R in c)R!=="ref"&&(T[R]=c[R])}else T=c;return cs(n),c=pc(t,n,r,T,y,p),R=qf(),t!==null&&!Ln?(Vf(t,n,p),On(t,n,p)):(Te&&R&&$l(n),n.flags|=1,Fn(t,n,c,p),n.child)}function Fs(t,n,r,c,p){if(t===null){var y=r.type;return typeof y=="function"&&!tc(y)&&y.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=y,Ac(t,n,y,c,p)):(t=Wl(r.type,null,c,n,n.mode,p),t.ref=n.ref,t.return=n,n.child=t)}if(y=t.child,!Oc(t,p)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:Nr,r(T,c)&&t.ref===n.ref)return On(t,n,p)}return n.flags|=1,t=Ba(y,c),t.ref=n.ref,t.return=n,n.child=t}function Ac(t,n,r,c,p){if(t!==null){var y=t.memoizedProps;if(Nr(y,c)&&t.ref===n.ref)if(Ln=!1,n.pendingProps=c=y,Oc(t,p))(t.flags&131072)!==0&&(Ln=!0);else return n.lanes=t.lanes,On(t,n,p)}return Jr(t,n,r,c,p)}function Ws(t,n,r,c){var p=c.children,y=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,t!==null){for(c=n.child=t.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,n.child=null;return qa(t,n,y,r,c)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ko(n,y!==null?y.cachePool:null),y!==null?Jh(n,y):Gf(),Ih(n);else return c=n.lanes=536870912,qa(t,n,y!==null?y.baseLanes|r:r,r,c)}else y!==null?(ko(n,y.cachePool),Jh(n,y),Xa(),n.memoizedState=null):(t!==null&&ko(n,null),Gf(),Xa());return Fn(t,n,p,r),n.child}function si(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function qa(t,n,r,c,p){var y=uc();return y=y===null?null:{parent:Gn._currentValue,pool:y},n.memoizedState={baseLanes:r,cachePool:y},t!==null&&ko(n,null),Gf(),Ih(n),t!==null&&li(t,n,c,!0),n.childLanes=p,null}function Mc(t,n){return n=Dc({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function D0(t,n,r){return Ri(n,t.child,null,r),t=Mc(n,n.pendingProps),t.flags|=2,Rn(n),n.memoizedState=null,t}function wc(t,n,r){var c=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Te){if(c.mode==="hidden")return t=Mc(n,c),n.lanes=536870912,si(null,t);if(Lf(n),(t=We)?(t=f2(t,al),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ai!==null?{id:mn,overflow:Gl}:null,retryLane:536870912,hydrationErrors:null},r=jr(t),r.return=n,n.child=r,Tn=n,We=null)):t=null,t===null)throw ti(n);return n.lanes=536870912,null}return Mc(n,c)}var y=t.memoizedState;if(y!==null){var T=y.dehydrated;if(Lf(n),p)if(n.flags&256)n.flags&=-257,n=D0(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(o(558));else if(Ln||li(t,n,r,!1),p=(r&t.childLanes)!==0,Ln||p){if(c=se,c!==null&&(T=Fa(c,r),T!==0&&T!==y.retryLane))throw y.retryLane=T,Ta(t,T),me(c,t,T),Tc;to(),n=D0(t,n,r)}else t=y.treeContext,We=mi(T.nextSibling),Tn=n,Te=!0,Mi=null,al=!1,t!==null&&lc(n,t),n=Mc(n,c),n.flags|=4096;return n}return t=Ba(t.child,{mode:c.mode,children:c.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Ps(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Jr(t,n,r,c,p){return cs(n),r=pc(t,n,r,c,void 0,p),c=qf(),t!==null&&!Ln?(Vf(t,n,p),On(t,n,p)):(Te&&c&&$l(n),n.flags|=1,Fn(t,n,r,p),n.child)}function au(t,n,r,c,p,y){return cs(n),n.updateQueue=null,r=Js(n,c,r,p),Fh(t),c=qf(),t!==null&&!Ln?(Vf(t,n,y),On(t,n,y)):(Te&&c&&$l(n),n.flags|=1,Fn(t,n,r,y),n.child)}function Nc(t,n,r,c,p){if(cs(n),n.stateNode===null){var y=ls,T=r.contextType;typeof T=="object"&&T!==null&&(y=ie(T)),y=new r(c,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=nu,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=c,y.state=n.memoizedState,y.refs={},Fo(n),T=r.contextType,y.context=typeof T=="object"&&T!==null?ie(T):ls,y.state=n.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(Ec(n,r,T,c),y.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&nu.enqueueReplaceState(y,y.state,null),qr(n,c,y,p),Wo(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(t===null){y=n.stateNode;var R=n.memoizedProps,V=ps(r,R);y.props=V;var it=y.context,yt=r.contextType;T=ls,typeof yt=="object"&&yt!==null&&(T=ie(yt));var Et=r.getDerivedStateFromProps;yt=typeof Et=="function"||typeof y.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,yt||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(R||it!==T)&&ud(n,y,c,T),Aa=!1;var rt=n.memoizedState;y.state=rt,qr(n,c,y,p),Wo(),it=n.memoizedState,R||rt!==it||Aa?(typeof Et=="function"&&(Ec(n,r,Et,c),it=n.memoizedState),(V=Aa||od(n,r,V,c,rt,it,T))?(yt||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=it),y.props=c,y.state=it,y.context=T,c=V):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{y=n.stateNode,Uf(t,n),T=n.memoizedProps,yt=ps(r,T),y.props=yt,Et=n.pendingProps,rt=y.context,it=r.contextType,V=ls,typeof it=="object"&&it!==null&&(V=ie(it)),R=r.getDerivedStateFromProps,(it=typeof R=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==Et||rt!==V)&&ud(n,y,c,V),Aa=!1,rt=n.memoizedState,y.state=rt,qr(n,c,y,p),Wo();var ft=n.memoizedState;T!==Et||rt!==ft||Aa||t!==null&&t.dependencies!==null&&Zo(t.dependencies)?(typeof R=="function"&&(Ec(n,r,R,c),ft=n.memoizedState),(yt=Aa||od(n,r,yt,c,rt,ft,V)||t!==null&&t.dependencies!==null&&Zo(t.dependencies))?(it||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ft,V),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ft,V)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&rt===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&rt===t.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=ft),y.props=c,y.state=ft,y.context=V,c=yt):(typeof y.componentDidUpdate!="function"||T===t.memoizedProps&&rt===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&rt===t.memoizedState||(n.flags|=1024),c=!1)}return y=c,Ps(t,n),c=(n.flags&128)!==0,y||c?(y=n.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,t!==null&&c?(n.child=Ri(n,t.child,null,p),n.child=Ri(n,null,r,p)):Fn(t,n,r,p),n.memoizedState=y.state,t=n.child):t=On(t,n,p),t}function O0(t,n,r,c){return os(),n.flags|=256,Fn(t,n,r,c),n.child}var md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ma(t){return{baseLanes:t,cachePool:Hf()}}function Rc(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Da),t}function z0(t,n,r){var c=n.pendingProps,p=!1,y=(n.flags&128)!==0,T;if((T=y)||(T=t!==null&&t.memoizedState===null?!1:(Ae.current&2)!==0),T&&(p=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,t===null){if(Te){if(p?Oi(n):Xa(),(t=We)?(t=f2(t,al),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ai!==null?{id:mn,overflow:Gl}:null,retryLane:536870912,hydrationErrors:null},r=jr(t),r.return=n,n.child=r,Tn=n,We=null)):t=null,t===null)throw ti(n);return bm(t)?n.lanes=32:n.lanes=536870912,null}var R=c.children;return c=c.fallback,p?(Xa(),p=n.mode,R=Dc({mode:"hidden",children:R},p),c=is(c,p,r,null),R.return=n,c.return=n,R.sibling=c,n.child=R,c=n.child,c.memoizedState=ma(r),c.childLanes=Rc(t,T,r),n.memoizedState=md,si(null,c)):(Oi(n),lu(n,R))}var V=t.memoizedState;if(V!==null&&(R=V.dehydrated,R!==null)){if(y)n.flags&256?(Oi(n),n.flags&=-257,n=pd(t,n,r)):n.memoizedState!==null?(Xa(),n.child=t.child,n.flags|=128,n=null):(Xa(),R=c.fallback,p=n.mode,c=Dc({mode:"visible",children:c.children},p),R=is(R,p,r,null),R.flags|=2,c.return=n,R.return=n,c.sibling=R,n.child=c,Ri(n,t.child,null,r),c=n.child,c.memoizedState=ma(r),c.childLanes=Rc(t,T,r),n.memoizedState=md,n=si(null,c));else if(Oi(n),bm(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var it=T.dgst;T=it,c=Error(o(419)),c.stack="",c.digest=T,ei({value:c,source:null,stack:null}),n=pd(t,n,r)}else if(Ln||li(t,n,r,!1),T=(r&t.childLanes)!==0,Ln||T){if(T=se,T!==null&&(c=Fa(T,r),c!==0&&c!==V.retryLane))throw V.retryLane=c,Ta(t,c),me(T,t,c),Tc;Sm(R)||to(),n=pd(t,n,r)}else Sm(R)?(n.flags|=192,n.child=t.child,n=null):(t=V.treeContext,We=mi(R.nextSibling),Tn=n,Te=!0,Mi=null,al=!1,t!==null&&lc(n,t),n=lu(n,c.children),n.flags|=4096);return n}return p?(Xa(),R=c.fallback,p=n.mode,V=t.child,it=V.sibling,c=Ba(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,it!==null?R=Ba(it,R):(R=is(R,p,r,null),R.flags|=2),R.return=n,c.return=n,c.sibling=R,n.child=c,si(null,c),c=n.child,R=t.child.memoizedState,R===null?R=ma(r):(p=R.cachePool,p!==null?(V=Gn._currentValue,p=p.parent!==V?{parent:V,pool:V}:p):p=Hf(),R={baseLanes:R.baseLanes|r,cachePool:p}),c.memoizedState=R,c.childLanes=Rc(t,T,r),n.memoizedState=md,si(t.child,c)):(Oi(n),r=t.child,t=r.sibling,r=Ba(r,{mode:"visible",children:c.children}),r.return=n,r.sibling=null,t!==null&&(T=n.deletions,T===null?(n.deletions=[t],n.flags|=16):T.push(t)),n.child=r,n.memoizedState=null,r)}function lu(t,n){return n=Dc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Dc(t,n){return t=gn(22,t,null,n),t.lanes=0,t}function pd(t,n,r){return Ri(n,t.child,null,r),t=lu(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function j0(t,n,r){t.lanes|=n;var c=t.alternate;c!==null&&(c.lanes|=n),sc(t.return,n,r)}function $s(t,n,r,c,p,y){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:y}:(T.isBackwards=n,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=r,T.tailMode=p,T.treeForkCount=y)}function Va(t,n,r){var c=n.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var T=Ae.current,R=(T&2)!==0;if(R?(T=T&1|2,n.flags|=128):T&=1,St(Ae,T),Fn(t,n,c,r),c=Te?Ur:0,!R&&t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j0(t,r,n);else if(t.tag===19)j0(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(r=n.child,p=null;r!==null;)t=r.alternate,t!==null&&il(t)===null&&(p=r),r=r.sibling;r=p,r===null?(p=n.child,n.child=null):(p=r.sibling,r.sibling=null),$s(n,!1,p,r,y,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=n.child,n.child=null;p!==null;){if(t=p.alternate,t!==null&&il(t)===null){n.child=p;break}t=p.sibling,p.sibling=r,r=p,p=t}$s(n,!0,r,null,y,c);break;case"together":$s(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function On(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),di|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(li(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,r=Ba(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Ba(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Oc(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Zo(t)))}function rm(t,n,r){switch(n.tag){case 3:F(n,n.stateNode.containerInfo),wi(n,Gn,t.memoizedState.cache),os();break;case 27:case 5:wt(n);break;case 4:F(n,n.stateNode.containerInfo);break;case 10:wi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Lf(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(Oi(n),n.flags|=128,null):(r&n.child.childLanes)!==0?z0(t,n,r):(Oi(n),t=On(t,n,r),t!==null?t.sibling:null);Oi(n);break;case 19:var p=(t.flags&128)!==0;if(c=(r&n.childLanes)!==0,c||(li(t,n,r,!1),c=(r&n.childLanes)!==0),p){if(c)return Va(t,n,r);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),St(Ae,Ae.current),c)break;return null;case 22:return n.lanes=0,Ws(t,n,r,n.pendingProps);case 24:wi(n,Gn,t.memoizedState.cache)}return On(t,n,r)}function zc(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ln=!0;else{if(!Oc(t,r)&&(n.flags&128)===0)return Ln=!1,rm(t,n,r);Ln=(t.flags&131072)!==0}else Ln=!1,Te&&(n.flags&1048576)!==0&&Xh(n,Ur,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(t=qs(n.elementType),n.type=t,typeof t=="function")tc(t)?(c=ps(t,c),n.tag=1,n=Nc(null,n,t,c,r)):(n.tag=0,n=Jr(null,n,t,c,r));else{if(t!=null){var p=t.$$typeof;if(p===L){n.tag=11,n=gd(null,n,t,c,r);break t}else if(p===G){n.tag=14,n=Fs(null,n,t,c,r);break t}}throw n=Ot(t)||t,Error(o(306,n,""))}}return n;case 0:return Jr(t,n,n.type,n.pendingProps,r);case 1:return c=n.type,p=ps(c,n.pendingProps),Nc(t,n,c,p,r);case 3:t:{if(F(n,n.stateNode.containerInfo),t===null)throw Error(o(387));c=n.pendingProps;var y=n.memoizedState;p=y.element,Uf(t,n),qr(n,c,null,r);var T=n.memoizedState;if(c=T.cache,wi(n,Gn,c),c!==y.cache&&rc(n,[Gn],r,!0),Wo(),c=T.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=O0(t,n,c,r);break t}else if(c!==p){p=nl(Error(o(424)),n),ei(p),n=O0(t,n,c,r);break t}else for(t=n.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,We=mi(t.firstChild),Tn=n,Te=!0,Mi=null,al=!0,r=hc(n,null,c,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(os(),c===p){n=On(t,n,r);break t}Fn(t,n,c,r)}n=n.child}return n;case 26:return Ps(t,n),t===null?(r=v2(n.type,null,n.pendingProps,null))?n.memoizedState=r:Te||(r=n.type,t=n.pendingProps,c=G0(Xt.current).createElement(r),c[Un]=n,c[fa]=t,za(c,r,t),Bn(c),n.stateNode=c):n.memoizedState=v2(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return wt(n),t===null&&Te&&(c=n.stateNode=g2(n.type,n.pendingProps,Xt.current),Tn=n,al=!0,p=We,lo(n.type)?(xm=p,We=mi(c.firstChild)):We=p),Fn(t,n,n.pendingProps.children,r),Ps(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Te&&((p=c=We)&&(c=p3(c,n.type,n.pendingProps,al),c!==null?(n.stateNode=c,Tn=n,We=mi(c.firstChild),al=!1,p=!0):p=!1),p||ti(n)),wt(n),p=n.type,y=n.pendingProps,T=t!==null?t.memoizedProps:null,c=y.children,pm(p,y)?c=null:T!==null&&pm(p,T)&&(n.flags|=32),n.memoizedState!==null&&(p=pc(t,n,Is,null,null,r),Md._currentValue=p),Ps(t,n),Fn(t,n,c,r),n.child;case 6:return t===null&&Te&&((t=r=We)&&(r=v3(r,n.pendingProps,al),r!==null?(n.stateNode=r,Tn=n,We=null,t=!0):t=!1),t||ti(n)),null;case 13:return z0(t,n,r);case 4:return F(n,n.stateNode.containerInfo),c=n.pendingProps,t===null?n.child=Ri(n,null,c,r):Fn(t,n,c,r),n.child;case 11:return gd(t,n,n.type,n.pendingProps,r);case 7:return Fn(t,n,n.pendingProps,r),n.child;case 8:return Fn(t,n,n.pendingProps.children,r),n.child;case 12:return Fn(t,n,n.pendingProps.children,r),n.child;case 10:return c=n.pendingProps,wi(n,n.type,c.value),Fn(t,n,c.children,r),n.child;case 9:return p=n.type._context,c=n.pendingProps.children,cs(n),p=ie(p),c=c(p),n.flags|=1,Fn(t,n,c,r),n.child;case 14:return Fs(t,n,n.type,n.pendingProps,r);case 15:return Ac(t,n,n.type,n.pendingProps,r);case 19:return Va(t,n,r);case 31:return wc(t,n,r);case 22:return Ws(t,n,r,n.pendingProps);case 24:return cs(n),c=ie(Gn),t===null?(p=uc(),p===null&&(p=se,y=Df(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),n.memoizedState={parent:c,cache:p},Fo(n),wi(n,Gn,p)):((t.lanes&r)!==0&&(Uf(t,n),qr(n,null,null,r),Wo()),p=t.memoizedState,y=n.memoizedState,p.parent!==c?(p={parent:c,cache:c},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),wi(n,Gn,c)):(c=y.cache,wi(n,Gn,c),c!==p.cache&&rc(n,[Gn],r,!0))),Fn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function ri(t){t.flags|=4}function iu(t,n,r,c,p){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Sn())t.flags|=8192;else throw ii=cc,Jo}else t.flags&=-16777217}function vd(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!C2(n))if(Sn())t.flags|=8192;else throw ii=cc,Jo}function ji(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?En():536870912,t.lanes|=n,en|=n)}function oi(t,n){if(!Te)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Je(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(n)for(var p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=c,t.childLanes=r,n}function su(t,n,r){var c=n.pendingProps;switch(ac(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(n),null;case 1:return Je(n),null;case 3:return r=n.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),ai(Gn),mt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gr(n)?ri(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ic())),Je(n),null;case 26:var p=n.type,y=n.memoizedState;return t===null?(ri(n),y!==null?(Je(n),vd(n,y)):(Je(n),iu(n,p,null,c,r))):y?y!==t.memoizedState?(ri(n),Je(n),vd(n,y)):(Je(n),n.flags&=-16777217):(t=t.memoizedProps,t!==c&&ri(n),Je(n),iu(n,p,t,c,r)),null;case 27:if(W(n),r=Xt.current,p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==c&&ri(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return Je(n),null}t=Ht.current,Gr(n)?qh(n):(t=g2(p,c,r),n.stateNode=t,ri(n))}return Je(n),null;case 5:if(W(n),p=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==c&&ri(n);else{if(!c){if(n.stateNode===null)throw Error(o(166));return Je(n),null}if(y=Ht.current,Gr(n))qh(n);else{var T=G0(Xt.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?T.createElement(p,{is:c.is}):T.createElement(p)}}y[Un]=n,y[fa]=c;t:for(T=n.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===n)break t;for(;T.sibling===null;){if(T.return===null||T.return===n)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}n.stateNode=y;t:switch(za(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&ri(n)}}return Je(n),iu(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==c&&ri(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(o(166));if(t=Xt.current,Gr(n)){if(t=n.stateNode,r=n.memoizedProps,c=null,p=Tn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}t[Un]=n,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||a2(t.nodeValue,r)),t||ti(n,!0)}else t=G0(t).createTextNode(c),t[Un]=n,n.stateNode=t}return Je(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(c=Gr(n),r!==null){if(t===null){if(!c)throw Error(o(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Un]=n}else os(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Je(n),t=!1}else r=ic(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Rn(n),n):(Rn(n),null);if((n.flags&128)!==0)throw Error(o(558))}return Je(n),null;case 13:if(c=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=Gr(n),c!==null&&c.dehydrated!==null){if(t===null){if(!p)throw Error(o(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));p[Un]=n}else os(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Je(n),p=!1}else p=ic(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(Rn(n),n):(Rn(n),null)}return Rn(n),(n.flags&128)!==0?(n.lanes=r,n):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=n.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),ji(n,n.updateQueue),Je(n),null);case 4:return mt(),t===null&&fm(n.stateNode.containerInfo),Je(n),null;case 10:return ai(n.type),Je(n),null;case 19:if(P(Ae),c=n.memoizedState,c===null)return Je(n),null;if(p=(n.flags&128)!==0,y=c.rendering,y===null)if(p)oi(c,!1);else{if(vn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(y=il(t),y!==null){for(n.flags|=128,oi(c,!1),t=y.updateQueue,n.updateQueue=t,ji(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)zr(r,t),r=r.sibling;return St(Ae,Ae.current&1|2),Te&&Pl(n,c.treeForkCount),n.child}t=t.sibling}c.tail!==null&&Jt()>zn&&(n.flags|=128,p=!0,oi(c,!1),n.lanes=4194304)}else{if(!p)if(t=il(y),t!==null){if(n.flags|=128,p=!0,t=t.updateQueue,n.updateQueue=t,ji(n,t),oi(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Te)return Je(n),null}else 2*Jt()-c.renderingStartTime>zn&&r!==536870912&&(n.flags|=128,p=!0,oi(c,!1),n.lanes=4194304);c.isBackwards?(y.sibling=n.child,n.child=y):(t=c.last,t!==null?t.sibling=y:n.child=y,c.last=y)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Jt(),t.sibling=null,r=Ae.current,St(Ae,p?r&1|2:r&1),Te&&Pl(n,c.treeForkCount),t):(Je(n),null);case 22:case 23:return Rn(n),Po(),c=n.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(r&536870912)!==0&&(n.flags&128)===0&&(Je(n),n.subtreeFlags&6&&(n.flags|=8192)):Je(n),r=n.updateQueue,r!==null&&ji(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==r&&(n.flags|=2048),t!==null&&P(fs),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),ai(Gn),Je(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function Al(t,n){switch(ac(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ai(Gn),mt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return W(n),null;case 31:if(n.memoizedState!==null){if(Rn(n),n.alternate===null)throw Error(o(340));os()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Rn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));os()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return P(Ae),null;case 4:return mt(),null;case 10:return ai(n.type),null;case 22:case 23:return Rn(n),Po(),t!==null&&P(fs),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return ai(Gn),null;case 25:return null;default:return null}}function sl(t,n){switch(ac(n),n.tag){case 3:ai(Gn),mt();break;case 26:case 27:case 5:W(n);break;case 4:mt();break;case 31:n.memoizedState!==null&&Rn(n);break;case 13:Rn(n);break;case 19:P(Ae);break;case 10:ai(n.type);break;case 22:case 23:Rn(n),Po(),t!==null&&P(fs);break;case 24:ai(Gn)}}function Ml(t,n){try{var r=n.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&t)===t){c=void 0;var y=r.create,T=r.inst;c=y(),T.destroy=c}r=r.next}while(r!==p)}}catch(R){He(n,n.return,R)}}function na(t,n,r){try{var c=n.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&t)===t){var T=c.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,p=n;var V=r,it=R;try{it()}catch(yt){He(p,V,yt)}}}c=c.next}while(c!==y)}}catch(yt){He(n,n.return,yt)}}function Ll(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{kh(n,r)}catch(c){He(t,t.return,c)}}}function Wn(t,n,r){r.props=ps(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){He(t,n,c)}}function Hi(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(p){He(t,n,p)}}function aa(t,n){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){He(t,n,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){He(t,n,p)}else r.current=null}function ru(t){var n=t.type,r=t.memoizedProps,c=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){He(t,t.return,p)}}function Kn(t,n,r){try{var c=t.stateNode;c3(c,t.type,r,n),c[fa]=n}catch(p){He(t,t.return,p)}}function un(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&lo(t.type)||t.tag===4}function Ce(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||un(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&lo(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ui(t,n,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Ei));else if(c!==4&&(c===27&&lo(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(ui(t,n,r),t=t.sibling;t!==null;)ui(t,n,r),t=t.sibling}function wa(t,n,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(c!==4&&(c===27&&lo(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(wa(t,n,r),t=t.sibling;t!==null;)wa(t,n,r),t=t.sibling}function jc(t){var n=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);za(n,c,r),n[Un]=t,n[fa]=r}catch(y){He(t,t.return,y)}}var wl=!1,Pe=!1,Yl=!1,H0=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function om(t,n){if(t=t.containerInfo,gm=Q0,t=Bh(t),Af(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var T=0,R=-1,V=-1,it=0,yt=0,Et=t,rt=null;e:for(;;){for(var ft;Et!==r||p!==0&&Et.nodeType!==3||(R=T+p),Et!==y||c!==0&&Et.nodeType!==3||(V=T+c),Et.nodeType===3&&(T+=Et.nodeValue.length),(ft=Et.firstChild)!==null;)rt=Et,Et=ft;for(;;){if(Et===t)break e;if(rt===r&&++it===p&&(R=T),rt===y&&++yt===c&&(V=T),(ft=Et.nextSibling)!==null)break;Et=rt,rt=Et.parentNode}Et=ft}r=R===-1||V===-1?null:{start:R,end:V}}else r=null}r=r||{start:0,end:0}}else r=null;for(mm={focusedElem:t,selectionRange:r},Q0=!1,Pn=n;Pn!==null;)if(n=Pn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Pn=t;else for(;Pn!==null;){switch(n=Pn,y=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)p=t[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,r=n,p=y.memoizedProps,y=y.memoizedState,c=r.stateNode;try{var Qt=ps(r.type,p);t=c.getSnapshotBeforeUpdate(Qt,y),c.__reactInternalSnapshotBeforeUpdate=t}catch(ee){He(r,r.return,ee)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)ym(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ym(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,Pn=t;break}Pn=n.return}}function cn(t,n,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Dl(t,r),c&4&&Ml(5,r);break;case 1:if(Dl(t,r),c&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(T){He(r,r.return,T)}else{var p=ps(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(p,n,t.__reactInternalSnapshotBeforeUpdate)}catch(T){He(r,r.return,T)}}c&64&&Ll(r),c&512&&Hi(r,r.return);break;case 3:if(Dl(t,r),c&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{kh(t,n)}catch(T){He(r,r.return,T)}}break;case 27:n===null&&c&4&&jc(r);case 26:case 5:Dl(t,r),n===null&&c&4&&ru(r),c&512&&Hi(r,r.return);break;case 12:Dl(t,r);break;case 31:Dl(t,r),c&4&&vs(t,r);break;case 13:Dl(t,r),c&4&&Ir(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=f.bind(null,r),y3(t,r))));break;case 22:if(c=r.memoizedState!==null||wl,!c){n=n!==null&&n.memoizedState!==null||Pe,p=wl;var y=Pe;wl=c,(Pe=n)&&!y?Na(t,r,(r.subtreeFlags&8772)!==0):Dl(t,r),wl=p,Pe=y}break;case 30:break;default:Dl(t,r)}}function ou(t){var n=t.alternate;n!==null&&(t.alternate=null,ou(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ns(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,pa=!1;function Nl(t,n,r){for(r=r.child;r!==null;)Hc(t,n,r),r=r.sibling}function Hc(t,n,r){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(Ji,r)}catch{}switch(r.tag){case 26:Pe||aa(r,n),Nl(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Pe||aa(r,n);var c=qe,p=pa;lo(r.type)&&(qe=r.stateNode,pa=!1),Nl(t,n,r),_d(r.stateNode),qe=c,pa=p;break;case 5:Pe||aa(r,n);case 6:if(c=qe,p=pa,qe=null,Nl(t,n,r),qe=c,pa=p,qe!==null)if(pa)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(r.stateNode)}catch(y){He(r,n,y)}else try{qe.removeChild(r.stateNode)}catch(y){He(r,n,y)}break;case 18:qe!==null&&(pa?(t=qe,u2(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Vc(t)):u2(qe,r.stateNode));break;case 4:c=qe,p=pa,qe=r.stateNode.containerInfo,pa=!0,Nl(t,n,r),qe=c,pa=p;break;case 0:case 11:case 14:case 15:na(2,r,n),Pe||na(4,r,n),Nl(t,n,r);break;case 1:Pe||(aa(r,n),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Wn(r,n,c)),Nl(t,n,r);break;case 21:Nl(t,n,r);break;case 22:Pe=(c=Pe)||r.memoizedState!==null,Nl(t,n,r),Pe=c;break;default:Nl(t,n,r)}}function vs(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Vc(t)}catch(r){He(n,n.return,r)}}}function Ir(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Vc(t)}catch(r){He(n,n.return,r)}}function yd(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new H0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new H0),n;default:throw Error(o(435,t.tag))}}function Ui(t,n){var r=yd(t);n.forEach(function(c){if(!r.has(c)){r.add(c);var p=g.bind(null,t,c);c.then(p,p)}})}function Qn(t,n){var r=n.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],y=t,T=n,R=T;t:for(;R!==null;){switch(R.tag){case 27:if(lo(R.type)){qe=R.stateNode,pa=!1;break t}break;case 5:qe=R.stateNode,pa=!1;break t;case 3:case 4:qe=R.stateNode.containerInfo,pa=!0;break t}R=R.return}if(qe===null)throw Error(o(160));Hc(y,T,p),qe=null,pa=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)ys(n,t),n=n.sibling}var Rl=null;function ys(t,n){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(n,t),Zn(t),c&4&&(na(3,t,t.return),Ml(3,t),na(5,t,t.return));break;case 1:Qn(n,t),Zn(t),c&512&&(Pe||r===null||aa(r,r.return)),c&64&&wl&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=Rl;if(Qn(n,t),Zn(t),c&512&&(Pe||r===null||aa(r,r.return)),c&4){var y=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){t:{c=t.type,r=t.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[bi]||y[Un]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),za(y,c,r),y[Un]=t,Bn(y),c=y;break t;case"link":var T=b2("link","href",p).get(c+(r.href||""));if(T){for(var R=0;R<T.length;R++)if(y=T[R],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(R,1);break e}}y=p.createElement(c),za(y,c,r),p.head.appendChild(y);break;case"meta":if(T=b2("meta","content",p).get(c+(r.content||""))){for(R=0;R<T.length;R++)if(y=T[R],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(R,1);break e}}y=p.createElement(c),za(y,c,r),p.head.appendChild(y);break;default:throw Error(o(468,c))}y[Un]=t,Bn(y),c=y}t.stateNode=c}else x2(p,t.type,t.stateNode);else t.stateNode=S2(p,c,t.memoizedProps);else y!==c?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,c===null?x2(p,t.type,t.stateNode):S2(p,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Kn(t,t.memoizedProps,r.memoizedProps)}break;case 27:Qn(n,t),Zn(t),c&512&&(Pe||r===null||aa(r,r.return)),r!==null&&c&4&&Kn(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Qn(n,t),Zn(t),c&512&&(Pe||r===null||aa(r,r.return)),t.flags&32){p=t.stateNode;try{Os(p,"")}catch(Qt){He(t,t.return,Qt)}}c&4&&t.stateNode!=null&&(p=t.memoizedProps,Kn(t,p,r!==null?r.memoizedProps:p)),c&1024&&(Yl=!0);break;case 6:if(Qn(n,t),Zn(t),c&4){if(t.stateNode===null)throw Error(o(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Qt){He(t,t.return,Qt)}}break;case 3:if(X0=null,p=Rl,Rl=L0(n.containerInfo),Qn(n,t),Rl=p,Zn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Vc(n.containerInfo)}catch(Qt){He(t,t.return,Qt)}Yl&&(Yl=!1,Uc(t));break;case 4:c=Rl,Rl=L0(t.stateNode.containerInfo),Qn(n,t),Zn(t),Rl=c;break;case 12:Qn(n,t),Zn(t);break;case 31:Qn(n,t),Zn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ui(t,c)));break;case 13:Qn(n,t),Zn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Fr=Jt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ui(t,c)));break;case 22:p=t.memoizedState!==null;var V=r!==null&&r.memoizedState!==null,it=wl,yt=Pe;if(wl=it||p,Pe=yt||V,Qn(n,t),Pe=yt,wl=it,Zn(t),c&8192)t:for(n=t.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(r===null||V||wl||Pe||ci(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){V=r=n;try{if(y=V.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=V.stateNode;var Et=V.memoizedProps.style,rt=Et!=null&&Et.hasOwnProperty("display")?Et.display:null;R.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(Qt){He(V,V.return,Qt)}}}else if(n.tag===6){if(r===null){V=n;try{V.stateNode.nodeValue=p?"":V.memoizedProps}catch(Qt){He(V,V.return,Qt)}}}else if(n.tag===18){if(r===null){V=n;try{var ft=V.stateNode;p?c2(ft,!0):c2(V.stateNode,!1)}catch(Qt){He(V,V.return,Qt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Ui(t,r))));break;case 19:Qn(n,t),Zn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ui(t,c)));break;case 30:break;case 21:break;default:Qn(n,t),Zn(t)}}function Zn(t){var n=t.flags;if(n&2){try{for(var r,c=t.return;c!==null;){if(un(c)){r=c;break}c=c.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var p=r.stateNode,y=Ce(t);wa(t,y,p);break;case 5:var T=r.stateNode;r.flags&32&&(Os(T,""),r.flags&=-33);var R=Ce(t);wa(t,R,T);break;case 3:case 4:var V=r.stateNode.containerInfo,it=Ce(t);ui(t,it,V);break;default:throw Error(o(161))}}catch(yt){He(t,t.return,yt)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Uc(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Uc(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Dl(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)cn(t,n.alternate,n),n=n.sibling}function ci(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:na(4,n,n.return),ci(n);break;case 1:aa(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Wn(n,n.return,r),ci(n);break;case 27:_d(n.stateNode);case 26:case 5:aa(n,n.return),ci(n);break;case 22:n.memoizedState===null&&ci(n);break;case 30:ci(n);break;default:ci(n)}t=t.sibling}}function Na(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,p=t,y=n,T=y.flags;switch(y.tag){case 0:case 11:case 15:Na(p,y,r),Ml(4,y);break;case 1:if(Na(p,y,r),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(it){He(c,c.return,it)}if(c=y,p=c.updateQueue,p!==null){var R=c.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)Vr(V[p],R)}catch(it){He(c,c.return,it)}}r&&T&64&&Ll(y),Hi(y,y.return);break;case 27:jc(y);case 26:case 5:Na(p,y,r),r&&c===null&&T&4&&ru(y),Hi(y,y.return);break;case 12:Na(p,y,r);break;case 31:Na(p,y,r),r&&T&4&&vs(p,y);break;case 13:Na(p,y,r),r&&T&4&&Ir(p,y);break;case 22:y.memoizedState===null&&Na(p,y,r),Hi(y,y.return);break;case 30:break;default:Na(p,y,r)}n=n.sibling}}function Ss(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ys(r))}function tr(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ys(t))}function la(t,n,r,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Sd(t,n,r,c),n=n.sibling}function Sd(t,n,r,c){var p=n.flags;switch(n.tag){case 0:case 11:case 15:la(t,n,r,c),p&2048&&Ml(9,n);break;case 1:la(t,n,r,c);break;case 3:la(t,n,r,c),p&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ys(t)));break;case 12:if(p&2048){la(t,n,r,c),t=n.stateNode;try{var y=n.memoizedProps,T=y.id,R=y.onPostCommit;typeof R=="function"&&R(T,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){He(n,n.return,V)}}else la(t,n,r,c);break;case 31:la(t,n,r,c);break;case 13:la(t,n,r,c);break;case 23:break;case 22:y=n.stateNode,T=n.alternate,n.memoizedState!==null?y._visibility&2?la(t,n,r,c):fi(t,n):y._visibility&2?la(t,n,r,c):(y._visibility|=2,ia(t,n,r,c,(n.subtreeFlags&10256)!==0||!1)),p&2048&&Ss(T,n);break;case 24:la(t,n,r,c),p&2048&&tr(n.alternate,n);break;default:la(t,n,r,c)}}function ia(t,n,r,c,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var y=t,T=n,R=r,V=c,it=T.flags;switch(T.tag){case 0:case 11:case 15:ia(y,T,R,V,p),Ml(8,T);break;case 23:break;case 22:var yt=T.stateNode;T.memoizedState!==null?yt._visibility&2?ia(y,T,R,V,p):fi(y,T):(yt._visibility|=2,ia(y,T,R,V,p)),p&&it&2048&&Ss(T.alternate,T);break;case 24:ia(y,T,R,V,p),p&&it&2048&&tr(T.alternate,T);break;default:ia(y,T,R,V,p)}n=n.sibling}}function fi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,c=n,p=c.flags;switch(c.tag){case 22:fi(r,c),p&2048&&Ss(c.alternate,c);break;case 24:fi(r,c),p&2048&&tr(c.alternate,c);break;default:fi(r,c)}n=n.sibling}}var er=8192;function rl(t,n,r){if(t.subtreeFlags&er)for(t=t.child;t!==null;)Bc(t,n,r),t=t.sibling}function Bc(t,n,r){switch(t.tag){case 26:rl(t,n,r),t.flags&er&&t.memoizedState!==null&&R3(r,Rl,t.memoizedState,t.memoizedProps);break;case 5:rl(t,n,r);break;case 3:case 4:var c=Rl;Rl=L0(t.stateNode.containerInfo),rl(t,n,r),Rl=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=er,er=16777216,rl(t,n,r),er=c):rl(t,n,r));break;default:rl(t,n,r)}}function nr(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function bs(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];Pn=c,An(c,t)}nr(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ka(t),t=t.sibling}function Ka(t){switch(t.tag){case 0:case 11:case 15:bs(t),t.flags&2048&&na(9,t,t.return);break;case 3:bs(t);break;case 12:bs(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Ra(t)):bs(t);break;default:bs(t)}}function Ra(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var c=n[r];Pn=c,An(c,t)}nr(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:na(8,n,n.return),Ra(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Ra(n));break;default:Ra(n)}t=t.sibling}}function An(t,n){for(;Pn!==null;){var r=Pn;switch(r.tag){case 0:case 11:case 15:na(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ys(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Pn=c;else t:for(r=t;Pn!==null;){c=Pn;var p=c.sibling,y=c.return;if(ou(c),c===r){Pn=null;break t}if(p!==null){p.return=y,Pn=p;break t}Pn=y}}}var Bi={getCacheForType:function(t){var n=ie(Gn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return ie(Gn).controller.signal}},ce=typeof WeakMap=="function"?WeakMap:Map,Ft=0,se=null,ge=null,de=0,Me=0,va=null,Ol=!1,Xl=!1,bd=!1,ol=0,vn=0,di=0,xs=0,uu=0,Da=0,en=0,ar=null,Mn=null,wn=!1,Fr=0,xd=0,zn=1/0,yn=null,jn=null,Ve=0,ul=null,Wr=null,zl=0,Pr=0,$r=null,cu=null,Cs=0,lr=null;function cl(){return(Ft&2)!==0&&de!==0?de&-de:q.T!==null?ut():Wa()}function ye(){if(Da===0)if((de&536870912)===0||Te){var t=Ii;Ii<<=1,(Ii&3932160)===0&&(Ii=262144),Da=t}else Da=536870912;return t=Ya.current,t!==null&&(t.flags|=32),Da}function me(t,n,r){(t===se&&(Me===2||Me===9)||t.cancelPendingCommit!==null)&&(_s(t,0),Yn(t,de,Da,!1)),Ia(t,r),((Ft&2)===0||t!==se)&&(t===se&&((Ft&2)===0&&(xs|=r),vn===4&&Yn(t,de,Da,!1)),Rt(t))}function Se(t,n,r){if((Ft&6)!==0)throw Error(o(327));var c=!r&&(n&127)===0&&(n&t.expiredLanes)===0||Sa(t,n),p=c?fu(t,n):Oa(t,n,!0),y=c;do{if(p===0){Xl&&!c&&Yn(t,n,0,!1);break}else{if(r=t.current.alternate,y&&!Ke(r)){p=Oa(t,n,!1),y=!1;continue}if(p===2){if(y=n,t.errorRecoveryDisabledLanes&y)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;t:{var R=t;p=ar;var V=R.current.memoizedState.isDehydrated;if(V&&(_s(R,T).flags|=256),T=Oa(R,T,!1),T!==2){if(bd&&!V){R.errorRecoveryDisabledLanes|=y,xs|=y,p=4;break t}y=Mn,Mn=p,y!==null&&(Mn===null?Mn=y:Mn.push.apply(Mn,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){_s(t,0),Yn(t,n,0,!0);break}t:{switch(c=t,y=p,y){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Yn(c,n,Da,!Ol);break t;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(p=Fr+300-Jt(),10<p)){if(Yn(c,n,Da,!Ol),Nn(c,0,!0)!==0)break t;zl=n,c.timeoutHandle=r2(Ee.bind(null,c,r,Mn,yn,wn,n,Da,xs,en,Ol,y,"Throttled",-0,0),p);break t}Ee(c,r,Mn,yn,wn,n,Da,xs,en,Ol,y,null,-0,0)}}break}while(!0);Rt(t)}function Ee(t,n,r,c,p,y,T,R,V,it,yt,Et,rt,ft){if(t.timeoutHandle=-1,Et=n.subtreeFlags,Et&8192||(Et&16785408)===16785408){Et={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ei},Bc(n,y,Et);var Qt=(y&62914560)===y?Fr-Jt():(y&4194048)===y?xd-Jt():0;if(Qt=D3(Et,Qt),Qt!==null){zl=y,t.cancelPendingCommit=Qt(Li.bind(null,t,n,y,r,c,p,T,R,V,yt,Et,null,rt,ft)),Yn(t,y,T,!it);return}}Li(t,n,y,r,c,p,T,R,V)}function Ke(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],y=p.getSnapshot;p=p.value;try{if(!_a(y(),p))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Yn(t,n,r,c){n&=~uu,n&=~xs,t.suspendedLanes|=n,t.pingedLanes&=~n,c&&(t.warmLanes|=n),c=t.expirationTimes;for(var p=n;0<p;){var y=31-ua(p),T=1<<y;c[y]=-1,p&=~T}r!==0&&Ca(t,r,n)}function ql(){return(Ft&6)===0?(qt(0),!1):!0}function Es(){if(ge!==null){if(Me===0)var t=ge.return;else t=ge,ni=us=null,Kf(t),Qs=null,Zs=0,t=ge;for(;t!==null;)sl(t.alternate,t),t=t.return;ge=null}}function _s(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,h3(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),zl=0,Es(),se=t,ge=r=Ba(t.current,null),de=n,Me=0,va=null,Ol=!1,Xl=Sa(t,n),bd=!1,en=Da=uu=xs=di=vn=0,Mn=ar=null,wn=!1,(n&8)!==0&&(n|=n&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=n;0<c;){var p=31-ua(c),y=1<<p;n|=t[p],c&=~y}return ol=n,Ko(),r}function hi(t,n){ue=null,q.H=kr,n===Xs||n===he?(n=Vs(),Me=3):n===Jo?(n=Vs(),Me=4):Me=n===Tc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,va=n,ge===null&&(vn=1,_c(t,nl(n,t.current)))}function Sn(){var t=Ya.current;return t===null?!0:(de&4194048)===de?Ma===null:(de&62914560)===de||(de&536870912)!==0?t===Ma:!1}function Gi(){var t=q.H;return q.H=kr,t===null?kr:t}function Ts(){var t=q.A;return q.A=Bi,t}function to(){vn=4,Ol||(de&4194048)!==de&&Ya.current!==null||(Xl=!0),(di&134217727)===0&&(xs&134217727)===0||se===null||Yn(se,de,Da,!1)}function Oa(t,n,r){var c=Ft;Ft|=2;var p=Gi(),y=Ts();(se!==t||de!==n)&&(yn=null,_s(t,n)),n=!1;var T=vn;t:do try{if(Me!==0&&ge!==null){var R=ge,V=va;switch(Me){case 8:Es(),T=6;break t;case 3:case 2:case 9:case 6:Ya.current===null&&(n=!0);var it=Me;if(Me=0,va=null,ir(t,R,V,it),r&&Xl){T=0;break t}break;default:it=Me,Me=0,va=null,ir(t,R,V,it)}}eo(),T=vn;break}catch(yt){hi(t,yt)}while(!0);return n&&t.shellSuspendCounter++,ni=us=null,Ft=c,q.H=p,q.A=y,ge===null&&(se=null,de=0,Ko()),T}function eo(){for(;ge!==null;)Gc(ge)}function fu(t,n){var r=Ft;Ft|=2;var c=Gi(),p=Ts();se!==t||de!==n?(yn=null,zn=Jt()+500,_s(t,n)):Xl=Sa(t,n);t:do try{if(Me!==0&&ge!==null){n=ge;var y=va;e:switch(Me){case 1:Me=0,va=null,ir(t,n,y,1);break;case 2:case 9:if(La(y)){Me=0,va=null,du(n);break}n=function(){Me!==2&&Me!==9||se!==t||(Me=7),Rt(t)},y.then(n,n);break t;case 3:Me=7;break t;case 4:Me=5;break t;case 7:La(y)?(Me=0,va=null,du(n)):(Me=0,va=null,ir(t,n,y,7));break;case 5:var T=null;switch(ge.tag){case 26:T=ge.memoizedState;case 5:case 27:var R=ge;if(T?C2(T):R.stateNode.complete){Me=0,va=null;var V=R.sibling;if(V!==null)ge=V;else{var it=R.return;it!==null?(ge=it,As(it)):ge=null}break e}}Me=0,va=null,ir(t,n,y,5);break;case 6:Me=0,va=null,ir(t,n,y,6);break;case 8:Es(),vn=6;break t;default:throw Error(o(462))}}Qa();break}catch(yt){hi(t,yt)}while(!0);return ni=us=null,q.H=c,q.A=p,Ft=r,ge!==null?0:(se=null,de=0,Ko(),vn)}function Qa(){for(;ge!==null&&!Xe();)Gc(ge)}function Gc(t){var n=zc(t.alternate,t,ol);t.memoizedProps=t.pendingProps,n===null?As(t):ge=n}function du(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=au(r,n,n.pendingProps,n.type,void 0,de);break;case 11:n=au(r,n,n.pendingProps,n.type.render,n.ref,de);break;case 5:Kf(n);default:sl(r,n),n=ge=zr(n,ol),n=zc(r,n,ol)}t.memoizedProps=t.pendingProps,n===null?As(t):ge=n}function ir(t,n,r,c){ni=us=null,Kf(n),Qs=null,Zs=0;var p=n.return;try{if(Vn(t,p,n,r,de)){vn=1,_c(t,nl(r,t.current)),ge=null;return}}catch(y){if(p!==null)throw ge=p,y;vn=1,_c(t,nl(r,t.current)),ge=null;return}n.flags&32768?(Te||c===1?t=!0:Xl||(de&536870912)!==0?t=!1:(Ol=t=!0,(c===2||c===9||c===3||c===6)&&(c=Ya.current,c!==null&&c.tag===13&&(c.flags|=16384))),hu(n,t)):As(n)}function As(t){var n=t;do{if((n.flags&32768)!==0){hu(n,Ol);return}t=n.return;var r=su(n.alternate,n,ol);if(r!==null){ge=r;return}if(n=n.sibling,n!==null){ge=n;return}ge=n=t}while(n!==null);vn===0&&(vn=5)}function hu(t,n){do{var r=Al(t.alternate,t);if(r!==null){r.flags&=32767,ge=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){ge=t;return}ge=t=r}while(t!==null);vn=6,ge=null}function Li(t,n,r,c,p,y,T,R,V){t.cancelPendingCommit=null;do no();while(Ve!==0);if((Ft&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(y=n.lanes|n.childLanes,y|=Jn,_n(t,r,y,T,R,V),t===se&&(ge=se=null,de=0),Wr=n,ul=t,zl=r,Pr=y,$r=p,cu=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,S(je,function(){return Lc(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=q.T,q.T=null,p=I.p,I.p=2,T=Ft,Ft|=4;try{om(t,n,r)}finally{Ft=T,I.p=p,q.T=c}}Ve=1,Xn(),Yi(),sr()}}function Xn(){if(Ve===1){Ve=0;var t=ul,n=Wr,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=q.T,q.T=null;var c=I.p;I.p=2;var p=Ft;Ft|=4;try{ys(n,t);var y=mm,T=Bh(t.containerInfo),R=y.focusedElem,V=y.selectionRange;if(T!==R&&R&&R.ownerDocument&&Fe(R.ownerDocument.documentElement,R)){if(V!==null&&Af(R)){var it=V.start,yt=V.end;if(yt===void 0&&(yt=it),"selectionStart"in R)R.selectionStart=it,R.selectionEnd=Math.min(yt,R.value.length);else{var Et=R.ownerDocument||document,rt=Et&&Et.defaultView||window;if(rt.getSelection){var ft=rt.getSelection(),Qt=R.textContent.length,ee=Math.min(V.start,Qt),tn=V.end===void 0?ee:Math.min(V.end,Qt);!ft.extend&&ee>tn&&(T=tn,tn=ee,ee=T);var $=Rr(R,ee),J=Rr(R,tn);if($&&J&&(ft.rangeCount!==1||ft.anchorNode!==$.node||ft.anchorOffset!==$.offset||ft.focusNode!==J.node||ft.focusOffset!==J.offset)){var at=Et.createRange();at.setStart($.node,$.offset),ft.removeAllRanges(),ee>tn?(ft.addRange(at),ft.extend(J.node,J.offset)):(at.setEnd(J.node,J.offset),ft.addRange(at))}}}}for(Et=[],ft=R;ft=ft.parentNode;)ft.nodeType===1&&Et.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<Et.length;R++){var bt=Et[R];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}Q0=!!gm,mm=gm=null}finally{Ft=p,I.p=c,q.T=r}}t.current=n,Ve=2}}function Yi(){if(Ve===2){Ve=0;var t=ul,n=Wr,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=q.T,q.T=null;var c=I.p;I.p=2;var p=Ft;Ft|=4;try{cn(t,n.alternate,n)}finally{Ft=p,I.p=c,q.T=r}}Ve=3}}function sr(){if(Ve===4||Ve===3){Ve=0,kt();var t=ul,n=Wr,r=zl,c=cu;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ve=5:(Ve=0,Wr=ul=null,gi(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(jn=null),ml(r),n=n.stateNode,oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(Ji,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=q.T,p=I.p,I.p=2,q.T=null;try{for(var y=t.onRecoverableError,T=0;T<c.length;T++){var R=c[T];y(R.value,{componentStack:R.stack})}}finally{q.T=n,I.p=p}}(zl&3)!==0&&no(),Rt(t),p=t.pendingLanes,(r&261930)!==0&&(p&42)!==0?t===lr?Cs++:(Cs=0,lr=t):Cs=0,qt(0)}}function gi(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ys(n)))}function no(){return Xn(),Yi(),sr(),Lc()}function Lc(){if(Ve!==5)return!1;var t=ul,n=Pr;Pr=0;var r=ml(zl),c=q.T,p=I.p;try{I.p=32>r?32:r,q.T=null,r=$r,$r=null;var y=ul,T=zl;if(Ve=0,Wr=ul=null,zl=0,(Ft&6)!==0)throw Error(o(331));var R=Ft;if(Ft|=4,Ka(y.current),Sd(y,y.current,T,r),Ft=R,qt(0,!1),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(Ji,y)}catch{}return!0}finally{I.p=p,q.T=c,gi(t,n)}}function Cd(t,n,r){n=nl(r,n),n=dd(t.stateNode,n,2),t=ds(t,n,2),t!==null&&(Ia(t,2),Rt(t))}function He(t,n,r){if(t.tag===3)Cd(t,t,r);else for(;n!==null;){if(n.tag===3){Cd(n,t,r);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(jn===null||!jn.has(c))){t=nl(r,t),r=hd(2),c=ds(n,r,2),c!==null&&(R0(r,c,n,t),Ia(c,2),Rt(c));break}}n=n.return}}function gu(t,n,r){var c=t.pingCache;if(c===null){c=t.pingCache=new ce;var p=new Set;c.set(n,p)}else p=c.get(n),p===void 0&&(p=new Set,c.set(n,p));p.has(r)||(bd=!0,p.add(r),t=a.bind(null,t,n,r),n.then(t,t))}function a(t,n,r){var c=t.pingCache;c!==null&&c.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,se===t&&(de&r)===r&&(vn===4||vn===3&&(de&62914560)===de&&300>Jt()-Fr?(Ft&2)===0&&_s(t,0):uu|=r,en===de&&(en=0)),Rt(t)}function s(t,n){n===0&&(n=En()),t=Ta(t,n),t!==null&&(Ia(t,n),Rt(t))}function f(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),s(t,r)}function g(t,n){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,p=t.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(o(314))}c!==null&&c.delete(n),s(t,r)}function S(t,n){return le(t,n)}var x=null,w=null,K=!1,ct=!1,Tt=!1,Ut=0;function Rt(t){t!==w&&t.next===null&&(w===null?x=w=t:w=w.next=t),ct=!0,K||(K=!0,tt())}function qt(t,n){if(!Tt&&ct){Tt=!0;do for(var r=!1,c=x;c!==null;){if(t!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var T=c.suspendedLanes,R=c.pingedLanes;y=(1<<31-ua(42|t)+1)-1,y&=p&~(T&~R),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,st(c,y))}else y=de,y=Nn(c,c===se?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Sa(c,y)||(r=!0,st(c,y));c=c.next}while(r);Tt=!1}}function oe(){$n()}function $n(){ct=K=!1;var t=0;Ut!==0&&d3()&&(t=Ut);for(var n=Jt(),r=null,c=x;c!==null;){var p=c.next,y=ao(c,n);y===0?(c.next=null,r===null?x=p:r.next=p,p===null&&(w=r)):(r=c,(t!==0||(y&3)!==0)&&(ct=!0)),c=p}Ve!==0&&Ve!==5||qt(t),Ut!==0&&(Ut=0)}function ao(t,n){for(var r=t.suspendedLanes,c=t.pingedLanes,p=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var T=31-ua(y),R=1<<T,V=p[T];V===-1?((R&r)===0||(R&c)!==0)&&(p[T]=ba(R,n)):V<=n&&(t.expiredLanes|=R),y&=~R}if(n=se,r=de,r=Nn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===n&&(Me===2||Me===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Oe(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Sa(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(c!==null&&Oe(c),ml(r)){case 2:case 8:r=ze;break;case 32:r=je;break;case 268435456:r=hl;break;default:r=je}return c=Ms.bind(null,t),r=le(r,c),t.callbackPriority=n,t.callbackNode=r,n}return c!==null&&c!==null&&Oe(c),t.callbackPriority=2,t.callbackNode=null,2}function Ms(t,n){if(Ve!==0&&Ve!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(no()&&t.callbackNode!==r)return null;var c=de;return c=Nn(t,t===se?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Se(t,c,n),ao(t,Jt()),t.callbackNode!=null&&t.callbackNode===r?Ms.bind(null,t):null)}function st(t,n){if(no())return null;Se(t,n,!0)}function tt(){g3(function(){(Ft&6)!==0?le(an,oe):$n()})}function ut(){if(Ut===0){var t=Ni;t===0&&(t=vr,vr<<=1,(vr&261888)===0&&(vr=256)),Ut=t}return Ut}function zt(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ro(""+t)}function $t(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function bn(t,n,r,c,p){if(n==="submit"&&r&&r.stateNode===p){var y=zt((p[fa]||null).action),T=c.submitter;T&&(n=(n=T[fa]||null)?zt(n.formAction):T.getAttribute("formAction"),n!==null&&(y=n,T=null));var R=new zo("action","action",null,c,p);t.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ut!==0){var V=T?$t(p,T):new FormData(p);ld(r,{pending:!0,data:V,method:p.method,action:y},null,V)}}else typeof y=="function"&&(R.preventDefault(),V=T?$t(p,T):new FormData(p),ld(r,{pending:!0,data:V,method:p.method,action:y},y,V))},currentTarget:p}]})}}for(var te=0;te<qo.length;te++){var Ne=qo[te],ta=Ne.toLowerCase(),Ge=Ne[0].toUpperCase()+Ne.slice(1);Sl(ta,"on"+Ge)}Sl(Pu,"onAnimationEnd"),Sl(Xo,"onAnimationIteration"),Sl(wf,"onAnimationStart"),Sl("dblclick","onDoubleClick"),Sl("focusin","onFocus"),Sl("focusout","onBlur"),Sl(Lh,"onTransitionRun"),Sl(tm,"onTransitionStart"),Sl(Yh,"onTransitionCancel"),Sl(Nf,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),um=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function $1(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],p=c.event;c=c.listeners;t:{var y=void 0;if(n)for(var T=c.length-1;0<=T;T--){var R=c[T],V=R.instance,it=R.currentTarget;if(R=R.listener,V!==y&&p.isPropagationStopped())break t;y=R,p.currentTarget=it;try{y(p)}catch(yt){Vo(yt)}p.currentTarget=null,y=V}else for(T=0;T<c.length;T++){if(R=c[T],V=R.instance,it=R.currentTarget,R=R.listener,V!==y&&p.isPropagationStopped())break t;y=R,p.currentTarget=it;try{y(p)}catch(yt){Vo(yt)}p.currentTarget=null,y=V}}}}function we(t,n){var r=n[Ql];r===void 0&&(r=n[Ql]=new Set);var c=t+"__bubble";r.has(c)||(t2(n,t,2,!1),r.add(c))}function cm(t,n,r){var c=0;n&&(c|=4),t2(r,t,c,n)}var U0="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[U0]){t[U0]=!0,xi.forEach(function(r){r!=="selectionchange"&&(um.has(r)||cm(r,!1,t),cm(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[U0]||(n[U0]=!0,cm("selectionchange",!1,n))}}function t2(t,n,r,c){switch(N2(n)){case 2:var p=j3;break;case 8:p=H3;break;default:p=Am}r=p.bind(null,n,r,t),p=void 0,!cf||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),c?p!==void 0?t.addEventListener(n,r,{capture:!0,passive:p}):t.addEventListener(n,r,!0):p!==void 0?t.addEventListener(n,r,{passive:p}):t.addEventListener(n,r,!1)}function dm(t,n,r,c,p){var y=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var R=c.stateNode.containerInfo;if(R===p)break;if(T===4)for(T=c.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;R!==null;){if(T=Rs(R),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){c=y=T;continue t}R=R.parentNode}}c=c.return}uf(function(){var it=y,yt=Lu(r),Et=[];t:{var rt=yl.get(t);if(rt!==void 0){var ft=zo,Qt=t;switch(t){case"keypress":if(Oo(r)===0)break t;case"keydown":case"keyup":ft=Hs;break;case"focusin":Qt="focus",ft=Vu;break;case"focusout":Qt="blur",ft=Vu;break;case"beforeblur":case"afterblur":ft=Vu;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Th;break;case Pu:case Xo:case wf:ft=Wg;break;case Nf:ft=$g;break;case"scroll":case"scrollend":ft=vh;break;case"wheel":ft=Mh;break;case"copy":case"cut":case"paste":ft=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=gf;break;case"toggle":case"beforetoggle":ft=Nh}var ee=(n&4)!==0,tn=!ee&&(t==="scroll"||t==="scrollend"),$=ee?rt!==null?rt+"Capture":null:rt;ee=[];for(var J=it,at;J!==null;){var bt=J;if(at=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||at===null||$===null||(bt=xr(J,$),bt!=null&&ee.push(Ed(J,bt,at))),tn)break;J=J.return}0<ee.length&&(rt=new ft(rt,Qt,null,r,yt),Et.push({event:rt,listeners:ee}))}}if((n&7)===0){t:{if(rt=t==="mouseover"||t==="pointerover",ft=t==="mouseout"||t==="pointerout",rt&&r!==Gu&&(Qt=r.relatedTarget||r.fromElement)&&(Rs(Qt)||Qt[Fi]))break t;if((ft||rt)&&(rt=yt.window===yt?yt:(rt=yt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ft?(Qt=r.relatedTarget||r.toElement,ft=it,Qt=Qt?Rs(Qt):null,Qt!==null&&(tn=d(Qt),ee=Qt.tag,Qt!==tn||ee!==5&&ee!==27&&ee!==6)&&(Qt=null)):(ft=null,Qt=it),ft!==Qt)){if(ee=ff,bt="onMouseLeave",$="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(ee=gf,bt="onPointerLeave",$="onPointerEnter",J="pointer"),tn=ft==null?rt:yr(ft),at=Qt==null?rt:yr(Qt),rt=new ee(bt,J+"leave",ft,r,yt),rt.target=tn,rt.relatedTarget=at,bt=null,Rs(yt)===it&&(ee=new ee($,J+"enter",Qt,r,yt),ee.target=at,ee.relatedTarget=tn,bt=ee),tn=bt,ft&&Qt)e:{for(ee=r3,$=ft,J=Qt,at=0,bt=$;bt;bt=ee(bt))at++;bt=0;for(var Pt=J;Pt;Pt=ee(Pt))bt++;for(;0<at-bt;)$=ee($),at--;for(;0<bt-at;)J=ee(J),bt--;for(;at--;){if($===J||J!==null&&$===J.alternate){ee=$;break e}$=ee($),J=ee(J)}ee=null}else ee=null;ft!==null&&e2(Et,rt,ft,ee,!1),Qt!==null&&tn!==null&&e2(Et,tn,Qt,ee,!0)}}t:{if(rt=it?yr(it):window,ft=rt.nodeName&&rt.nodeName.toLowerCase(),ft==="select"||ft==="input"&&rt.type==="file")var Le=xf;else if(bf(rt))if(Jl)Le=Uh;else{Le=_f;var It=jh}else ft=rt.nodeName,!ft||ft.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?it&&Bu(it.elementType)&&(Le=xf):Le=Hh;if(Le&&(Le=Le(t,it))){Fu(Et,Le,r,yt);break t}It&&It(t,rt,it),t==="focusout"&&it&&rt.type==="number"&&it.memoizedProps.value!=null&&Bl(rt,"number",rt.value)}switch(It=it?yr(it):window,t){case"focusin":(bf(It)||It.contentEditable==="true")&&(Il=It,Fl=it,Dr=null);break;case"focusout":Dr=Fl=Il=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,Or(Et,r,yt);break;case"selectionchange":if(Gh)break;case"keydown":case"keyup":Or(Et,r,yt)}var pe;if(Us)t:{switch(t){case"compositionstart":var Re="onCompositionStart";break t;case"compositionend":Re="onCompositionEnd";break t;case"compositionupdate":Re="onCompositionUpdate";break t}Re=void 0}else Bs?Iu(t,r)&&(Re="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(pf&&r.locale!=="ko"&&(Bs||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Bs&&(pe=Do()):(el=yt,Xu="value"in el?el.value:el.textContent,Bs=!0)),It=B0(it,Re),0<It.length&&(Re=new Ku(Re,t,null,r,yt),Et.push({event:Re,listeners:It}),pe?Re.data=pe:(pe=vf(r),pe!==null&&(Re.data=pe)))),(pe=Ju?Oh(t,r):yf(t,r))&&(Re=B0(it,"onBeforeInput"),0<Re.length&&(It=new Ku("onBeforeInput","beforeinput",null,r,yt),Et.push({event:It,listeners:Re}),It.data=pe)),bn(Et,t,it,r,yt)}$1(Et,n)})}function Ed(t,n,r){return{instance:t,listener:n,currentTarget:r}}function B0(t,n){for(var r=n+"Capture",c=[];t!==null;){var p=t,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=xr(t,r),p!=null&&c.unshift(Ed(t,p,y)),p=xr(t,n),p!=null&&c.push(Ed(t,p,y))),t.tag===3)return c;t=t.return}return[]}function r3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function e2(t,n,r,c,p){for(var y=n._reactName,T=[];r!==null&&r!==c;){var R=r,V=R.alternate,it=R.stateNode;if(R=R.tag,V!==null&&V===c)break;R!==5&&R!==26&&R!==27||it===null||(V=it,p?(it=xr(r,y),it!=null&&T.unshift(Ed(r,it,V))):p||(it=xr(r,y),it!=null&&T.push(Ed(r,it,V)))),r=r.return}T.length!==0&&t.push({event:n,listeners:T})}var o3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function n2(t){return(typeof t=="string"?t:""+t).replace(o3,`
`).replace(u3,"")}function a2(t,n){return n=n2(n),n2(t)===n}function $e(t,n,r,c,p,y){switch(r){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Os(t,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Os(t,""+c);break;case"className":wo(t,"class",c);break;case"tabIndex":wo(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":wo(t,r,c);break;case"style":sf(t,c,y);break;case"data":if(n!=="object"){wo(t,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Ro(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(n!=="input"&&$e(t,n,"name",p.name,p,null),$e(t,n,"formEncType",p.formEncType,p,null),$e(t,n,"formMethod",p.formMethod,p,null),$e(t,n,"formTarget",p.formTarget,p,null)):($e(t,n,"encType",p.encType,p,null),$e(t,n,"method",p.method,p,null),$e(t,n,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Ro(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Ei);break;case"onScroll":c!=null&&we("scroll",t);break;case"onScrollEnd":c!=null&&we("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=Ro(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":we("beforetoggle",t),we("toggle",t),Sr(t,"popover",c);break;case"xlinkActuate":Zl(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Zl(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Zl(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Zl(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Zl(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Zl(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Zl(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Zl(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Zl(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Sr(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=mh.get(r)||r,Sr(t,r,c))}}function hm(t,n,r,c,p,y){switch(r){case"style":sf(t,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(o(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Os(t,c):(typeof c=="number"||typeof c=="bigint")&&Os(t,""+c);break;case"onScroll":c!=null&&we("scroll",t);break;case"onScrollEnd":c!=null&&we("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Du.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),n=r.slice(2,p?r.length-7:void 0),y=t[fa]||null,y=y!=null?y[r]:null,typeof y=="function"&&t.removeEventListener(n,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,c,p);break t}r in t?t[r]=c:c===!0?t.setAttribute(r,""):Sr(t,r,c)}}}function za(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",t),we("load",t);var c=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:$e(t,n,y,T,r,null)}}p&&$e(t,n,"srcSet",r.srcSet,r,null),c&&$e(t,n,"src",r.src,r,null);return;case"input":we("invalid",t);var R=y=T=p=null,V=null,it=null;for(c in r)if(r.hasOwnProperty(c)){var yt=r[c];if(yt!=null)switch(c){case"name":p=yt;break;case"type":T=yt;break;case"checked":V=yt;break;case"defaultChecked":it=yt;break;case"value":y=yt;break;case"defaultValue":R=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(o(137,n));break;default:$e(t,n,c,yt,r,null)}}ju(t,y,R,V,it,T,p,!1);return;case"select":we("invalid",t),c=T=y=null;for(p in r)if(r.hasOwnProperty(p)&&(R=r[p],R!=null))switch(p){case"value":y=R;break;case"defaultValue":T=R;break;case"multiple":c=R;default:$e(t,n,p,R,r,null)}n=y,r=T,t.multiple=!!c,n!=null?Ci(t,!!c,n,!1):r!=null&&Ci(t,!!c,r,!0);return;case"textarea":we("invalid",t),y=p=c=null;for(T in r)if(r.hasOwnProperty(T)&&(R=r[T],R!=null))switch(T){case"value":c=R;break;case"defaultValue":p=R;break;case"children":y=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:$e(t,n,T,R,r,null)}Uu(t,c,p,y);return;case"option":for(V in r)r.hasOwnProperty(V)&&(c=r[V],c!=null)&&(V==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":$e(t,n,V,c,r,null));return;case"dialog":we("beforetoggle",t),we("toggle",t),we("cancel",t),we("close",t);break;case"iframe":case"object":we("load",t);break;case"video":case"audio":for(c=0;c<jl.length;c++)we(jl[c],t);break;case"image":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"embed":case"source":case"link":we("error",t),we("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in r)if(r.hasOwnProperty(it)&&(c=r[it],c!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:$e(t,n,it,c,r,null)}return;default:if(Bu(n)){for(yt in r)r.hasOwnProperty(yt)&&(c=r[yt],c!==void 0&&hm(t,n,yt,c,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(c=r[R],c!=null&&$e(t,n,R,c,r,null))}function c3(t,n,r,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,R=null,V=null,it=null,yt=null;for(ft in r){var Et=r[ft];if(r.hasOwnProperty(ft)&&Et!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":V=Et;default:c.hasOwnProperty(ft)||$e(t,n,ft,null,c,Et)}}for(var rt in c){var ft=c[rt];if(Et=r[rt],c.hasOwnProperty(rt)&&(ft!=null||Et!=null))switch(rt){case"type":y=ft;break;case"name":p=ft;break;case"checked":it=ft;break;case"defaultChecked":yt=ft;break;case"value":T=ft;break;case"defaultValue":R=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(o(137,n));break;default:ft!==Et&&$e(t,n,rt,ft,c,Et)}}br(t,T,R,V,it,yt,y,p);return;case"select":ft=T=R=rt=null;for(y in r)if(V=r[y],r.hasOwnProperty(y)&&V!=null)switch(y){case"value":break;case"multiple":ft=V;default:c.hasOwnProperty(y)||$e(t,n,y,null,c,V)}for(p in c)if(y=c[p],V=r[p],c.hasOwnProperty(p)&&(y!=null||V!=null))switch(p){case"value":rt=y;break;case"defaultValue":R=y;break;case"multiple":T=y;default:y!==V&&$e(t,n,p,y,c,V)}n=R,r=T,c=ft,rt!=null?Ci(t,!!r,rt,!1):!!c!=!!r&&(n!=null?Ci(t,!!r,n,!0):Ci(t,!!r,r?[]:"",!1));return;case"textarea":ft=rt=null;for(R in r)if(p=r[R],r.hasOwnProperty(R)&&p!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:$e(t,n,R,null,c,p)}for(T in c)if(p=c[T],y=r[T],c.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":rt=p;break;case"defaultValue":ft=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(o(91));break;default:p!==y&&$e(t,n,T,p,c,y)}Hu(t,rt,ft);return;case"option":for(var Qt in r)rt=r[Qt],r.hasOwnProperty(Qt)&&rt!=null&&!c.hasOwnProperty(Qt)&&(Qt==="selected"?t.selected=!1:$e(t,n,Qt,null,c,rt));for(V in c)rt=c[V],ft=r[V],c.hasOwnProperty(V)&&rt!==ft&&(rt!=null||ft!=null)&&(V==="selected"?t.selected=rt&&typeof rt!="function"&&typeof rt!="symbol":$e(t,n,V,rt,c,ft));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ee in r)rt=r[ee],r.hasOwnProperty(ee)&&rt!=null&&!c.hasOwnProperty(ee)&&$e(t,n,ee,null,c,rt);for(it in c)if(rt=c[it],ft=r[it],c.hasOwnProperty(it)&&rt!==ft&&(rt!=null||ft!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(o(137,n));break;default:$e(t,n,it,rt,c,ft)}return;default:if(Bu(n)){for(var tn in r)rt=r[tn],r.hasOwnProperty(tn)&&rt!==void 0&&!c.hasOwnProperty(tn)&&hm(t,n,tn,void 0,c,rt);for(yt in c)rt=c[yt],ft=r[yt],!c.hasOwnProperty(yt)||rt===ft||rt===void 0&&ft===void 0||hm(t,n,yt,rt,c,ft);return}}for(var $ in r)rt=r[$],r.hasOwnProperty($)&&rt!=null&&!c.hasOwnProperty($)&&$e(t,n,$,null,c,rt);for(Et in c)rt=c[Et],ft=r[Et],!c.hasOwnProperty(Et)||rt===ft||rt==null&&ft==null||$e(t,n,Et,rt,c,ft)}function l2(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],y=p.transferSize,T=p.initiatorType,R=p.duration;if(y&&R&&l2(T)){for(T=0,R=p.responseEnd,c+=1;c<r.length;c++){var V=r[c],it=V.startTime;if(it>R)break;var yt=V.transferSize,Et=V.initiatorType;yt&&l2(Et)&&(V=V.responseEnd,T+=yt*(V<R?1:(R-it)/(V-it)))}if(--c,n+=8*(y+T)/(p.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var gm=null,mm=null;function G0(t){return t.nodeType===9?t:t.ownerDocument}function i2(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s2(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function pm(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var vm=null;function d3(){var t=window.event;return t&&t.type==="popstate"?t===vm?!1:(vm=t,!0):(vm=null,!1)}var r2=typeof setTimeout=="function"?setTimeout:void 0,h3=typeof clearTimeout=="function"?clearTimeout:void 0,o2=typeof Promise=="function"?Promise:void 0,g3=typeof queueMicrotask=="function"?queueMicrotask:typeof o2<"u"?function(t){return o2.resolve(null).then(t).catch(m3)}:r2;function m3(t){setTimeout(function(){throw t})}function lo(t){return t==="head"}function u2(t,n){var r=n,c=0;do{var p=r.nextSibling;if(t.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(p),Vc(n);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")_d(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,_d(r);for(var y=r.firstChild;y;){var T=y.nextSibling,R=y.nodeName;y[bi]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=T}}else r==="body"&&_d(t.ownerDocument.body);r=p}while(r);Vc(n)}function c2(t,n){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function ym(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ym(r),Ns(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function p3(t,n,r,c){for(;t.nodeType===1;){var p=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[bi])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=mi(t.nextSibling),t===null)break}return null}function v3(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=mi(t.nextSibling),t===null))return null;return t}function f2(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=mi(t.nextSibling),t===null))return null;return t}function Sm(t){return t.data==="$?"||t.data==="$~"}function bm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function y3(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var c=function(){n(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function mi(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var xm=null;function d2(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return mi(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function h2(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function g2(t,n,r){switch(n=G0(r),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function _d(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ns(t)}var pi=new Map,m2=new Set;function L0(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rr=I.d;I.d={f:S3,r:b3,D:x3,C:C3,L:E3,m:_3,X:A3,S:T3,M:M3};function S3(){var t=rr.f(),n=ql();return t||n}function b3(t){var n=Ds(t);n!==null&&n.tag===5&&n.type==="form"?x0(n):rr.r(t)}var Yc=typeof document>"u"?null:document;function p2(t,n,r){var c=Yc;if(c&&typeof n=="string"&&n){var p=ha(n);p='link[rel="'+t+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),m2.has(p)||(m2.add(p),t={rel:t,crossOrigin:r,href:n},c.querySelector(p)===null&&(n=c.createElement("link"),za(n,"link",t),Bn(n),c.head.appendChild(n)))}}function x3(t){rr.D(t),p2("dns-prefetch",t,null)}function C3(t,n){rr.C(t,n),p2("preconnect",t,n)}function E3(t,n,r){rr.L(t,n,r);var c=Yc;if(c&&t&&n){var p='link[rel="preload"][as="'+ha(n)+'"]';n==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+ha(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+ha(r.imageSizes)+'"]')):p+='[href="'+ha(t)+'"]';var y=p;switch(n){case"style":y=Xc(t);break;case"script":y=qc(t)}pi.has(y)||(t=C({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),pi.set(y,t),c.querySelector(p)!==null||n==="style"&&c.querySelector(Td(y))||n==="script"&&c.querySelector(Ad(y))||(n=c.createElement("link"),za(n,"link",t),Bn(n),c.head.appendChild(n)))}}function _3(t,n){rr.m(t,n);var r=Yc;if(r&&t){var c=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+ha(c)+'"][href="'+ha(t)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=qc(t)}if(!pi.has(y)&&(t=C({rel:"modulepreload",href:t},n),pi.set(y,t),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ad(y)))return}c=r.createElement("link"),za(c,"link",t),Bn(c),r.head.appendChild(c)}}}function T3(t,n,r){rr.S(t,n,r);var c=Yc;if(c&&t){var p=Pi(c).hoistableStyles,y=Xc(t);n=n||"default";var T=p.get(y);if(!T){var R={loading:0,preload:null};if(T=c.querySelector(Td(y)))R.loading=5;else{t=C({rel:"stylesheet",href:t,"data-precedence":n},r),(r=pi.get(y))&&Cm(t,r);var V=T=c.createElement("link");Bn(V),za(V,"link",t),V._p=new Promise(function(it,yt){V.onload=it,V.onerror=yt}),V.addEventListener("load",function(){R.loading|=1}),V.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Y0(T,n,c)}T={type:"stylesheet",instance:T,count:1,state:R},p.set(y,T)}}}function A3(t,n){rr.X(t,n);var r=Yc;if(r&&t){var c=Pi(r).hoistableScripts,p=qc(t),y=c.get(p);y||(y=r.querySelector(Ad(p)),y||(t=C({src:t,async:!0},n),(n=pi.get(p))&&Em(t,n),y=r.createElement("script"),Bn(y),za(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function M3(t,n){rr.M(t,n);var r=Yc;if(r&&t){var c=Pi(r).hoistableScripts,p=qc(t),y=c.get(p);y||(y=r.querySelector(Ad(p)),y||(t=C({src:t,async:!0,type:"module"},n),(n=pi.get(p))&&Em(t,n),y=r.createElement("script"),Bn(y),za(y,"link",t),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function v2(t,n,r,c){var p=(p=Xt.current)?L0(p):null;if(!p)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=Xc(r.href),r=Pi(p).hoistableStyles,c=r.get(n),c||(c={type:"style",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Xc(r.href);var y=Pi(p).hoistableStyles,T=y.get(t);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,T),(y=p.querySelector(Td(t)))&&!y._p&&(T.instance=y,T.state.loading=5),pi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},pi.set(t,r),y||w3(p,t,r,T.state))),n&&c===null)throw Error(o(528,""));return T}if(n&&c!==null)throw Error(o(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=qc(r),r=Pi(p).hoistableScripts,c=r.get(n),c||(c={type:"script",instance:null,count:0,state:null},r.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Xc(t){return'href="'+ha(t)+'"'}function Td(t){return'link[rel="stylesheet"]['+t+"]"}function y2(t){return C({},t,{"data-precedence":t.precedence,precedence:null})}function w3(t,n,r,c){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=t.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),za(n,"link",r),Bn(n),t.head.appendChild(n))}function qc(t){return'[src="'+ha(t)+'"]'}function Ad(t){return"script[async]"+t}function S2(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var c=t.querySelector('style[data-href~="'+ha(r.href)+'"]');if(c)return n.instance=c,Bn(c),c;var p=C({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),Bn(c),za(c,"style",p),Y0(c,r.precedence,t),n.instance=c;case"stylesheet":p=Xc(r.href);var y=t.querySelector(Td(p));if(y)return n.state.loading|=4,n.instance=y,Bn(y),y;c=y2(r),(p=pi.get(p))&&Cm(c,p),y=(t.ownerDocument||t).createElement("link"),Bn(y);var T=y;return T._p=new Promise(function(R,V){T.onload=R,T.onerror=V}),za(y,"link",c),n.state.loading|=4,Y0(y,r.precedence,t),n.instance=y;case"script":return y=qc(r.src),(p=t.querySelector(Ad(y)))?(n.instance=p,Bn(p),p):(c=r,(p=pi.get(y))&&(c=C({},r),Em(c,p)),t=t.ownerDocument||t,p=t.createElement("script"),Bn(p),za(p,"link",c),t.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Y0(c,r.precedence,t));return n.instance}function Y0(t,n,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,T=0;T<c.length;T++){var R=c[T];if(R.dataset.precedence===n)y=R;else if(y!==p)break}y?y.parentNode.insertBefore(t,y.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Cm(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Em(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var X0=null;function b2(t,n,r){if(X0===null){var c=new Map,p=X0=new Map;p.set(r,c)}else p=X0,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),p=0;p<r.length;p++){var y=r[p];if(!(y[bi]||y[Un]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(n)||"";T=t+T;var R=c.get(T);R?R.push(y):c.set(T,[y])}}return c}function x2(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function N3(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(t=n.disabled,typeof n.precedence=="string"&&t==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function C2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function R3(t,n,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Xc(c.href),y=n.querySelector(Td(p));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=q0.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=y,Bn(y);return}y=n.ownerDocument||n,c=y2(c),(p=pi.get(p))&&Cm(c,p),y=y.createElement("link"),Bn(y);var T=y;T._p=new Promise(function(R,V){T.onload=R,T.onerror=V}),za(y,"link",c),r.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=q0.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var _m=0;function D3(t,n){return t.stylesheets&&t.count===0&&K0(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&K0(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+n);0<t.imgBytes&&_m===0&&(_m=62500*f3());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&K0(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>_m?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function q0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)K0(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var V0=null;function K0(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,V0=new Map,n.forEach(O3,t),V0=null,q0.call(t))}function O3(t,n){if(!(n.state.loading&4)){var r=V0.get(t);if(r)var c=r.get(null);else{r=new Map,V0.set(t,r);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),c=T)}c&&r.set(null,c)}p=n.instance,T=p.getAttribute("data-precedence"),y=r.get(T)||c,y===c&&r.set(null,p),r.set(T,p),this.count++,c=q0.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),n.state.loading|=4}}var Md={$$typeof:Y,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function z3(t,n,r,c,p,y,T,R,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xa(0),this.hiddenUpdates=xa(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function E2(t,n,r,c,p,y,T,R,V,it,yt,Et){return t=new z3(t,n,r,T,V,it,yt,Et,R),n=1,y===!0&&(n|=24),y=gn(3,null,null,n),t.current=y,y.stateNode=t,n=Df(),n.refCount++,t.pooledCache=n,n.refCount++,y.memoizedState={element:c,isDehydrated:r,cache:n},Fo(y),t}function _2(t){return t?(t=ls,t):ls}function T2(t,n,r,c,p,y){p=_2(p),c.context===null?c.context=p:c.pendingContext=p,c=Di(n),c.payload={element:r},y=y===void 0?null:y,y!==null&&(c.callback=y),r=ds(t,c,n),r!==null&&(me(r,t,n),hs(r,t,n))}function A2(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Tm(t,n){A2(t,n),(t=t.alternate)&&A2(t,n)}function M2(t){if(t.tag===13||t.tag===31){var n=Ta(t,67108864);n!==null&&me(n,t,67108864),Tm(t,67108864)}}function w2(t){if(t.tag===13||t.tag===31){var n=cl();n=gl(n);var r=Ta(t,n);r!==null&&me(r,t,n),Tm(t,n)}}var Q0=!0;function j3(t,n,r,c){var p=q.T;q.T=null;var y=I.p;try{I.p=2,Am(t,n,r,c)}finally{I.p=y,q.T=p}}function H3(t,n,r,c){var p=q.T;q.T=null;var y=I.p;try{I.p=8,Am(t,n,r,c)}finally{I.p=y,q.T=p}}function Am(t,n,r,c){if(Q0){var p=Mm(c);if(p===null)dm(t,n,c,Z0,r),R2(t,c);else if(B3(p,t,n,r,c))c.stopPropagation();else if(R2(t,c),n&4&&-1<U3.indexOf(t)){for(;p!==null;){var y=Ds(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=Cn(y.pendingLanes);if(T!==0){var R=y;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var V=1<<31-ua(T);R.entanglements[1]|=V,T&=~V}Rt(y),(Ft&6)===0&&(zn=Jt()+500,qt(0))}}break;case 31:case 13:R=Ta(y,2),R!==null&&me(R,y,2),ql(),Tm(y,2)}if(y=Mm(c),y===null&&dm(t,n,c,Z0,r),y===p)break;p=y}p!==null&&c.stopPropagation()}else dm(t,n,c,null,r)}}function Mm(t){return t=Lu(t),wm(t)}var Z0=null;function wm(t){if(Z0=null,t=Rs(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=h(n),t!==null)return t;t=null}else if(r===31){if(t=m(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Z0=t,null}function N2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ze()){case an:return 2;case ze:return 8;case je:case dn:return 32;case hl:return 268435456;default:return 32}default:return 32}}var Nm=!1,io=null,so=null,ro=null,wd=new Map,Nd=new Map,oo=[],U3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function R2(t,n){switch(t){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":wd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nd.delete(n.pointerId)}}function Rd(t,n,r,c,p,y){return t===null||t.nativeEvent!==y?(t={blockedOn:n,domEventName:r,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},n!==null&&(n=Ds(n),n!==null&&M2(n)),t):(t.eventSystemFlags|=c,n=t.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),t)}function B3(t,n,r,c,p){switch(n){case"focusin":return io=Rd(io,t,n,r,c,p),!0;case"dragenter":return so=Rd(so,t,n,r,c,p),!0;case"mouseover":return ro=Rd(ro,t,n,r,c,p),!0;case"pointerover":var y=p.pointerId;return wd.set(y,Rd(wd.get(y)||null,t,n,r,c,p)),!0;case"gotpointercapture":return y=p.pointerId,Nd.set(y,Rd(Nd.get(y)||null,t,n,r,c,p)),!0}return!1}function D2(t){var n=Rs(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=h(r),n!==null){t.blockedOn=n,Ua(t.priority,function(){w2(r)});return}}else if(n===31){if(n=m(r),n!==null){t.blockedOn=n,Ua(t.priority,function(){w2(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function k0(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Mm(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Gu=c,r.target.dispatchEvent(c),Gu=null}else return n=Ds(r),n!==null&&M2(n),t.blockedOn=r,!1;n.shift()}return!0}function O2(t,n,r){k0(t)&&r.delete(n)}function G3(){Nm=!1,io!==null&&k0(io)&&(io=null),so!==null&&k0(so)&&(so=null),ro!==null&&k0(ro)&&(ro=null),wd.forEach(O2),Nd.forEach(O2)}function J0(t,n){t.blockedOn===n&&(t.blockedOn=null,Nm||(Nm=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,G3)))}var I0=null;function z2(t){I0!==t&&(I0=t,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){I0===t&&(I0=null);for(var n=0;n<t.length;n+=3){var r=t[n],c=t[n+1],p=t[n+2];if(typeof c!="function"){if(wm(c||r)===null)continue;break}var y=Ds(r);y!==null&&(t.splice(n,3),n-=3,ld(y,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function Vc(t){function n(V){return J0(V,t)}io!==null&&J0(io,t),so!==null&&J0(so,t),ro!==null&&J0(ro,t),wd.forEach(n),Nd.forEach(n);for(var r=0;r<oo.length;r++){var c=oo[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<oo.length&&(r=oo[0],r.blockedOn===null);)D2(r),r.blockedOn===null&&oo.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],y=r[c+1],T=p[fa]||null;if(typeof y=="function")T||z2(r);else if(T){var R=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[fa]||null)R=T.formAction;else if(wm(p)!==null)continue}else R=T.action;typeof R=="function"?r[c+1]=R:(r.splice(c,3),c-=3),z2(r)}}}function j2(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function Rm(t){this._internalRoot=t}F0.prototype.render=Rm.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var r=n.current,c=cl();T2(r,c,t,n,null,null)},F0.prototype.unmount=Rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;T2(t.current,2,null,t,null,null),ql(),n[Fi]=null}};function F0(t){this._internalRoot=t}F0.prototype.unstable_scheduleHydration=function(t){if(t){var n=Wa();t={blockedOn:null,target:t,priority:n};for(var r=0;r<oo.length&&n!==0&&n<oo[r].priority;r++);oo.splice(r,0,t),r===0&&D2(t)}};var H2=e.version;if(H2!=="19.2.3")throw Error(o(527,H2,"19.2.3"));I.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=b(n),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var L3={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W0.isDisabled&&W0.supportsFiber)try{Ji=W0.inject(L3),oa=W0}catch{}}return Od.createRoot=function(t,n){if(!u(t))throw Error(o(299));var r=!1,c="",p=w0,y=cd,T=fd;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError)),n=E2(t,1,!1,null,null,r,c,null,p,y,T,j2),t[Fi]=n.current,fm(t),new Rm(n)},Od.hydrateRoot=function(t,n,r){if(!u(t))throw Error(o(299));var c=!1,p="",y=w0,T=cd,R=fd,V=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(V=r.formState)),n=E2(t,1,!0,n,r??null,c,p,V,y,T,R,j2),n.context=_2(null),r=n.current,c=cl(),c=gl(c),p=Di(c),p.callback=null,ds(r,p,c),r=c,n.current.lanes=r,Ia(n,r),Rt(n),t[Fi]=n.current,fm(t),new F0(n)},Od.version="19.2.3",Od}var Q2;function k3(){if(Q2)return zm.exports;Q2=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(e){console.error(e)}}return l(),zm.exports=Z3(),zm.exports}var J3=k3();const I3="modulepreload",F3=function(l,e){return new URL(l,e).href},Z2={},k2=function(e,i,o){let u=Promise.resolve();if(i&&i.length>0){let b=function(E){return Promise.all(E.map(C=>Promise.resolve(C).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};const h=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),v=m?.nonce||m?.getAttribute("nonce");u=b(i.map(E=>{if(E=F3(E,o),E in Z2)return;Z2[E]=!0;const C=E.endsWith(".css"),_=C?'[rel="stylesheet"]':"";if(o)for(let A=h.length-1;A>=0;A--){const H=h[A];if(H.href===E&&(!C||H.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${E}"]${_}`))return;const M=document.createElement("link");if(M.rel=C?"stylesheet":I3,C||(M.as="script"),M.crossOrigin="",M.href=E,v&&M.setAttribute("nonce",v),document.head.appendChild(M),C)return new Promise((A,H)=>{M.addEventListener("load",A),M.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${E}`)))})}))}function d(h){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=h,window.dispatchEvent(m),!m.defaultPrevented)throw h}return u.then(h=>{for(const m of h||[])m.status==="rejected"&&d(m.reason);return e().catch(d)})};const W3=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P3=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,o)=>o?o.toUpperCase():i.toLowerCase()),J2=l=>{const e=P3(l);return e.charAt(0).toUpperCase()+e.slice(1)},bv=(...l)=>l.filter((e,i,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===i).join(" ").trim(),$3=l=>{for(const e in l)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var t4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const e4=O.forwardRef(({color:l="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:h,...m},v)=>O.createElement("svg",{ref:v,...t4,width:e,height:e,stroke:l,strokeWidth:o?Number(i)*24/Number(e):i,className:bv("lucide",u),...!d&&!$3(m)&&{"aria-hidden":"true"},...m},[...h.map(([b,E])=>O.createElement(b,E)),...Array.isArray(d)?d:[d]]));const Ul=(l,e)=>{const i=O.forwardRef(({className:o,...u},d)=>O.createElement(e4,{ref:d,iconNode:e,className:bv(`lucide-${W3(J2(l))}`,`lucide-${l}`,o),...u}));return i.displayName=J2(l),i};const n4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],I2=Ul("check",n4);const a4=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],xv=Ul("folder-open",a4);const l4=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],i4=Ul("link",l4);const s4=[["path",{d:"M5 12h14",key:"1ays0h"}]],r4=Ul("minus",s4);const o4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],u4=Ul("pen",o4);const c4=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],f4=Ul("pin",c4);const d4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],h4=Ul("plus",d4);const g4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],m4=Ul("refresh-cw",g4);const p4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],v4=Ul("search",p4);const y4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S4=Ul("settings",y4);const b4=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],x4=Ul("settings-2",b4);const C4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],E4=Ul("square",C4);const _4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Cv=Ul("trash-2",_4);const T4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mg=Ul("x",T4);function Ev(l){var e,i,o="";if(typeof l=="string"||typeof l=="number")o+=l;else if(typeof l=="object")if(Array.isArray(l)){var u=l.length;for(e=0;e<u;e++)l[e]&&(i=Ev(l[e]))&&(o&&(o+=" "),o+=i)}else for(i in l)l[i]&&(o&&(o+=" "),o+=i);return o}function fr(){for(var l,e,i=0,o="",u=arguments.length;i<u;i++)(l=arguments[i])&&(e=Ev(l))&&(o&&(o+=" "),o+=e);return o}const A4=Symbol(),D1=Symbol(),Xd="a",_v="f",F2="p",Tv="c",Av="t",O1="h",Jd="w",z1="o",j1="k";let M4=(l,e)=>new Proxy(l,e);const r1=Object.getPrototypeOf,o1=new WeakMap,Mv=l=>l&&(o1.has(l)?o1.get(l):r1(l)===Object.prototype||r1(l)===Array.prototype),xg=l=>typeof l=="object"&&l!==null,w4=l=>Object.values(Object.getOwnPropertyDescriptors(l)).some(e=>!e.configurable&&!e.writable),N4=l=>{if(Array.isArray(l))return Array.from(l);const e=Object.getOwnPropertyDescriptors(l);return Object.values(e).forEach(i=>{i.configurable=!0}),Object.create(r1(l),e)},R4=(l,e)=>{const i={[_v]:e};let o=!1;const u=(m,v)=>{if(!o){let b=i[Xd].get(l);if(b||(b={},i[Xd].set(l,b)),m===Jd)b[Jd]=!0;else{let E=b[m];E||(E=new Set,b[m]=E),E.add(v)}}},d=()=>{o=!0,i[Xd].delete(l)},h={get(m,v){return v===D1?l:(u(j1,v),wv(Reflect.get(m,v),i[Xd],i[Tv],i[Av]))},has(m,v){return v===A4?(d(),!0):(u(O1,v),Reflect.has(m,v))},getOwnPropertyDescriptor(m,v){return u(z1,v),Reflect.getOwnPropertyDescriptor(m,v)},ownKeys(m){return u(Jd),Reflect.ownKeys(m)}};return e&&(h.set=h.deleteProperty=()=>!1),[h,i]},H1=l=>l[D1]||l,wv=(l,e,i,o)=>{if(!Mv(l))return l;let u=o&&o.get(l);if(!u){const v=H1(l);w4(v)?u=[v,N4(v)]:u=[v],o?.set(l,u)}const[d,h]=u;let m=i&&i.get(d);return(!m||m[1][_v]!==!!h)&&(m=R4(d,!!h),m[1][F2]=M4(h||d,m[0]),i&&i.set(d,m)),m[1][Xd]=e,m[1][Tv]=i,m[1][Av]=o,m[1][F2]},D4=(l,e)=>{const i=Reflect.ownKeys(l),o=Reflect.ownKeys(e);return i.length!==o.length||i.some((u,d)=>u!==o[d])},Nv=(l,e,i,o,u=Object.is)=>{if(u(l,e))return!1;if(!xg(l)||!xg(e))return!0;const d=i.get(H1(l));if(!d)return!0;if(o){if(o.get(l)===e)return!1;o.set(l,e)}let h=null;for(const m of d[O1]||[])if(h=Reflect.has(l,m)!==Reflect.has(e,m),h)return h;if(d[Jd]===!0){if(h=D4(l,e),h)return h}else for(const m of d[z1]||[]){const v=!!Reflect.getOwnPropertyDescriptor(l,m),b=!!Reflect.getOwnPropertyDescriptor(e,m);if(h=v!==b,h)return h}for(const m of d[j1]||[])if(h=Nv(l[m],e[m],i,o,u),h)return h;if(h===null)throw new Error("invalid used");return h},O4=l=>Mv(l)&&l[D1]||null,W2=(l,e=!0)=>{o1.set(l,e)},z4=(l,e,i)=>{const o=[],u=new WeakSet,d=(h,m)=>{var v,b,E;if(u.has(h))return;xg(h)&&u.add(h);const C=xg(h)&&e.get(H1(h));if(C){if((v=C[O1])===null||v===void 0||v.forEach(_=>{const M=`:has(${String(_)})`;o.push(m?[...m,M]:[M])}),C[Jd]===!0){const _=":ownKeys";o.push(m?[...m,_]:[_])}else(b=C[z1])===null||b===void 0||b.forEach(_=>{const M=`:hasOwn(${String(_)})`;o.push(m?[...m,M]:[M])});(E=C[j1])===null||E===void 0||E.forEach(_=>{"value"in(Object.getOwnPropertyDescriptor(h,_)||{})&&d(h[_],m?[...m,_]:[_])})}else m&&o.push(m)};return d(l),o},Cg={},U1=l=>typeof l=="object"&&l!==null,j4=l=>U1(l)&&!B1.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer)&&!(l instanceof Promise),Rv=(l,e)=>{const i=P2.get(l);if(i?.[0]===e)return i[1];const o=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return W2(o,!0),P2.set(l,[e,o]),Reflect.ownKeys(l).forEach(u=>{if(Object.getOwnPropertyDescriptor(o,u))return;const d=Reflect.get(l,u),{enumerable:h}=Reflect.getOwnPropertyDescriptor(l,u),m={value:d,enumerable:h,configurable:!0};if(B1.has(d))W2(d,!1);else if(bu.has(d)){const[v,b]=bu.get(d);m.value=Rv(v,b())}Object.defineProperty(o,u,m)}),Object.preventExtensions(o)},H4=(l,e,i,o)=>({deleteProperty(u,d){Reflect.get(u,d),i(d);const h=Reflect.deleteProperty(u,d);return h&&o(void 0),h},set(u,d,h,m){const v=!l()&&Reflect.has(u,d),b=Reflect.get(u,d,m);if(v&&($2(b,h)||Eg.has(h)&&$2(b,Eg.get(h))))return!0;i(d),U1(h)&&(h=O4(h)||h);const E=!bu.has(h)&&B4(h)?So(h):h;return e(d,E),Reflect.set(u,d,E,m),o(void 0),!0}}),bu=new WeakMap,B1=new WeakSet,P2=new WeakMap,Bm=[1],Eg=new WeakMap;let $2=Object.is,U4=(l,e)=>new Proxy(l,e),B4=j4,G4=Rv,L4=H4;function So(l={}){if(!U1(l))throw new Error("object required");const e=Eg.get(l);if(e)return e;let i=Bm[0];const o=new Set,u=(D,U=++Bm[0])=>{i!==U&&(d=i=U,o.forEach(j=>j(D,U)))};let d=i;const h=(D=Bm[0])=>(d!==D&&(d=D,v.forEach(([U])=>{const j=U[1](D);j>i&&(i=j)})),i),m=D=>(U,j)=>{let Y;U&&(Y=[...U],Y[1]=[D,...Y[1]]),u(Y,j)},v=new Map,b=(D,U)=>{const j=!B1.has(U)&&bu.get(U);if(j){if((Cg?"production":void 0)!=="production"&&v.has(D))throw new Error("prop listener already exists");if(o.size){const Y=j[2](m(D));v.set(D,[j,Y])}else v.set(D,[j])}},E=D=>{var U;const j=v.get(D);j&&(v.delete(D),(U=j[1])==null||U.call(j))},C=D=>(o.add(D),o.size===1&&v.forEach(([j,Y],L)=>{if((Cg?"production":void 0)!=="production"&&Y)throw new Error("remove already exists");const nt=j[2](m(L));v.set(L,[j,nt])}),()=>{o.delete(D),o.size===0&&v.forEach(([j,Y],L)=>{Y&&(Y(),v.set(L,[j]))})});let _=!0;const M=L4(()=>_,b,E,u),A=U4(l,M);Eg.set(l,A);const H=[l,h,C];return bu.set(A,H),Reflect.ownKeys(l).forEach(D=>{const U=Object.getOwnPropertyDescriptor(l,D);"value"in U&&U.writable&&(A[D]=l[D])}),_=!1,A}function Y4(l,e,i){const o=bu.get(l);(Cg?"production":void 0)!=="production"&&!o&&console.warn("Please use proxy object");let u;const d=[],h=o[2];let m=!1;const b=h(E=>{E&&d.push(E),u||(u=Promise.resolve().then(()=>{u=void 0,m&&e(d.splice(0))}))});return m=!0,()=>{m=!1,b()}}function tp(l){const e=bu.get(l);(Cg?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[i,o]=e;return G4(i,o())}const X4={},q4=(l,e)=>{const i=O.useRef(void 0);O.useEffect(()=>{i.current=z4(l,e)}),O.useDebugValue(i.current)},V4=q4,K4=new WeakMap;function Ha(l,e){const o=O.useMemo(()=>l&&new WeakMap,[l]),u=O.useRef(void 0),d=O.useRef(!1),h=O.useSyncExternalStore(O.useCallback(v=>{d.current=!0;const b=Y4(l,v);return v(),()=>{b(),d.current=!1}},[l,void 0]),()=>{const v=tp(l);try{if(d.current&&u.current&&!Nv(u.current,v,o,new WeakMap))return u.current}catch{}return v},()=>tp(l));O.useLayoutEffect(()=>{u.current=h}),(X4?"production":void 0)!=="production"&&V4(h,o);const m=O.useMemo(()=>new WeakMap,[]);return wv(h,o,m,K4)}const De={primary:"#39c5bb",danger:"#ef4444",canvas:{selectionFill:"rgba(57, 197, 187, 0.2)"}},Su=(l,e)=>{const i=l.trim().replace("#","");if(i.length!==6)return null;const o=parseInt(i.slice(0,2),16),u=parseInt(i.slice(2,4),16),d=parseInt(i.slice(4,6),16);return isNaN(o)||isNaN(u)||isNaN(d)?null:`rgba(${o}, ${u}, ${d}, ${e})`},kn="http://localhost:30001",Ie={async get({key:l,fallback:e}){try{const i=await fetch(`${kn}/api/settings/${encodeURIComponent(l)}`);if(!i.ok)return e;const o=await i.json();return!o||typeof o!="object"||!("value"in o)?e:o.value??e}catch{return e}},async set(l,e){try{await fetch(`${kn}/api/settings/${encodeURIComponent(l)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})})}catch{}}},Q4=l=>l==="en"||l==="zh";async function Z4(){const l=await Ie.get({key:"language",fallback:"en"});return Q4(l)?l:"en"}async function k4(l){await Ie.set("language",l)}async function J4(l){const e=l?`${kn}/api/load-canvas?canvasName=${encodeURIComponent(l)}`:`${kn}/api/load-canvas`,i=await fetch(e);if(!i.ok)throw new Error(`Failed to load canvas: ${i.status}`);return await i.json()}async function I4(l){const e=l?`${kn}/api/canvas-viewport?canvasName=${encodeURIComponent(l)}`:`${kn}/api/canvas-viewport`,i=await fetch(e);if(!i.ok)return null;const o=await i.json();return o===null?null:o}async function Dv(l,e){try{await ja("/api/canvas-viewport",{viewport:l,canvasName:e})}catch{}}async function ep(){const l=await fetch(`${kn}/api/canvases`);if(!l.ok)throw new Error("Failed to list canvases");return l.json()}async function F4(l){await ja("/api/canvases",{name:l})}async function W4(l,e){await ja("/api/canvases/rename",{oldName:l,newName:e})}async function P4(l){await ja("/api/canvases/delete",{name:l})}async function np(l){try{const e=await ja("/api/temp-dominant-color",{filePath:l});if(!e||e.success!==!0||typeof e.dominantColor!="string")return null;const i=e.dominantColor.trim();return i||null}catch{return null}}async function $4(l){try{await ja("/api/save-gallery-order",{order:l})}catch{}}async function ja(l,e){const i=await fetch(`${kn}${l}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!i.ok)throw new Error(`Request failed with status ${i.status}`);try{return await i.json()}catch{return null}}const pu=So({isOpen:!1,progress:0,statusKey:"envInit.preparing",percentText:"0%"}),co=So({isIndexing:!1,current:0,total:0,statusKey:null}),fo=So({isDownloading:!1,current:0,total:0,statusKey:null}),Gm={update:l=>{Object.assign(co,l)},reset:()=>{co.isIndexing=!1,co.current=0,co.total=0,co.statusKey=null,co.statusParams=void 0,co.filename=void 0}},or={update:l=>{Object.assign(fo,l)},reset:()=>{fo.isDownloading=!1,fo.current=0,fo.total=0,fo.statusKey=null,fo.statusParams=void 0,fo.filename=void 0}},t5={update:l=>{Object.assign(pu,l)},reset:()=>{pu.isOpen=!1,pu.progress=0,pu.statusKey="envInit.preparing",pu.statusParams=void 0,pu.percentText="0%"}},pg=["#a855f7","#3b82f6","#06b6d4","#22c55e","#eab308","#f97316","#ef4444","#ec4899","#94a3b8","#ffffff","#0f172a"],ap=l=>typeof l!="string"?!1:/^#[0-9a-fA-F]{6}$/.test(l.trim())||/^#[0-9a-fA-F]{3}$/.test(l.trim()),lp=l=>{const e=l.trim().toLowerCase();if(/^#[0-9a-f]{6}$/.test(e))return e;if(/^#[0-9a-f]{3}$/.test(e)){const i=e[1],o=e[2],u=e[3];return`#${i}${i}${o}${o}${u}${u}`}return De.primary},e5=l=>typeof l!="number"||Number.isNaN(l)||!Number.isFinite(l)?320:l,Ov=typeof navigator<"u"&&/Mac|iPhone|iPad|iPod/.test(navigator.platform||"")?"Command+L":"Ctrl+L",ve=So({tagColors:{},colorSwatches:[...pg],toasts:[],pinMode:!1,pinTransparent:!1,toggleWindowShortcut:Ov,sidebarWidth:320,activeArea:null,vectorSearchThreshold:.19}),ae={hydrateSettings:async()=>{try{const[l,e,i,o,u,d,h]=await Promise.all([Ie.get({key:"tagColors",fallback:{}}),Ie.get({key:"colorSwatches",fallback:[...pg]}),Ie.get({key:"sidebarWidth",fallback:320}),Ie.get({key:"vectorSearchThreshold",fallback:.19}),Ie.get({key:"pinTransparent",fallback:!1}),Ie.get({key:"pinMode",fallback:!1}),Ie.get({key:"toggleWindowShortcut",fallback:Ov})]),m={};for(const[b,E]of Object.entries(l))typeof b=="string"&&typeof E=="string"&&b.trim()&&(m[b]=E);ve.tagColors=m;let v=[];Array.isArray(e)&&(v=e.filter(ap).map(b=>lp(b))),v.length===0&&(v=[...pg]),ve.colorSwatches=v.slice(0,pg.length),ve.sidebarWidth=e5(i),typeof o=="number"&&(ve.vectorSearchThreshold=o),typeof u=="boolean"&&(ve.pinTransparent=u),typeof d=="boolean"&&(ve.pinMode=d),typeof h=="string"&&h.trim()&&(ve.toggleWindowShortcut=h.trim())}catch(l){console.error("Failed to hydrate settings:",l)}},pushToast:(l,e="info",i=3200)=>{const o=`toast_${Date.now()}_${Math.random().toString(16).slice(2)}`;ve.toasts=[...ve.toasts,{id:o,message:l,type:e,createdAt:Date.now()}],i>0&&window.setTimeout(()=>{ae.removeToast(o)},i)},removeToast:l=>{ve.toasts=ve.toasts.filter(e=>e.id!==l)},setActiveArea:l=>{ve.activeArea=l},setVectorSearchThreshold:l=>{ve.vectorSearchThreshold=l,Ie.set("vectorSearchThreshold",l)},setTagColor:(l,e)=>{const i=l.trim();if(!i)return;const o={...ve.tagColors,[i]:e};ve.tagColors=o,Ie.set("tagColors",o)},clearTagColor:l=>{const e=l.trim();if(!e||!Object.prototype.hasOwnProperty.call(ve.tagColors,e))return;const i={...ve.tagColors};delete i[e],ve.tagColors=i,Ie.set("tagColors",i)},setColorSwatch:(l,e)=>{if(!Number.isInteger(l)||l<0||l>=ve.colorSwatches.length||!ap(e))return;const i=[...ve.colorSwatches];i[l]=lp(e),ve.colorSwatches=i,Ie.set("colorSwatches",i)},togglePinMode:()=>{ve.pinMode=!ve.pinMode},setPinMode:l=>{ve.pinMode=l,Ie.set("pinMode",l)},setPinTransparent:l=>{ve.pinTransparent=l,Ie.set("pinTransparent",l)},setToggleWindowShortcut:async l=>{const e=l.trim();if(!e)return!1;const i=ve.toggleWindowShortcut;ve.toggleWindowShortcut=e,await Ie.set("toggleWindowShortcut",e);const o=await window.electron?.setToggleWindowShortcut?.(e);return o&&o.success!==!0?(ve.toggleWindowShortcut=i,await Ie.set("toggleWindowShortcut",i),ae.pushToast({key:"toast.shortcutUpdateFailed",params:{error:o.error??""}},"error"),!1):!0},setSidebarWidth:l=>{ve.sidebarWidth=l},persistSidebarWidth:()=>{Ie.set("sidebarWidth",ve.sidebarWidth)}},Bg=({delay:l},e)=>{let i,o=!0;const u=(...d)=>{o?(clearTimeout(i),i=setTimeout(()=>{o&&e(...d),i=void 0},l)):e(...d)};return u.isPending=()=>i!==void 0,u.cancel=()=>{o=!1},u.flush=(...d)=>e(...d),u},u1=(l,e,i)=>{const o=i*Math.PI/180,u=Math.cos(o),d=Math.sin(o),h={x:0,y:0},m={x:l*u,y:l*d},v={x:l*u-e*d,y:l*d+e*u},b={x:-e*d,y:e*u},E=[h.x,m.x,v.x,b.x],C=[h.y,m.y,v.y,b.y],_=Math.min(...E),M=Math.max(...E),A=Math.min(...C),H=Math.max(...C);return{width:M-_,height:H-A,offsetX:_,offsetY:A}},n5={x:0,y:0,width:0,height:0,scale:1},Ct=So({canvasItems:[],canvasHistory:[],canvasHistoryIndex:-1,canvasViewport:n5,canvasGrayscale:!1,showMinimap:!0,isCanvasToolbarExpanded:!0,isClearModalOpen:!1,selectedIds:new Set,primaryId:null,autoEditId:null,dimensions:{width:0,height:0},isSpaceDown:!1,multiSelectUnion:null,selectionBox:{start:null,current:null},currentCanvasName:"Default"}),a5=l=>{if(l.type==="text")return{...l};const e=l;return{...e,tags:[...e.tags],vector:Array.isArray(e.vector)?[...e.vector]:e.vector}},P0=l=>l.map(a5),$0=async l=>{try{const e=l.map(i=>{if(i.type==="text")return{type:"text",canvasId:i.canvasId,x:i.x,y:i.y,rotation:i.rotation,scale:i.scale,scaleX:i.scaleX,text:i.text,fontSize:i.fontSize,fill:i.fill,width:i.width,height:i.height,align:i.align};const o=i;return(o.image.startsWith("temp-images/")?"temp":"ref")==="temp"?{type:"image",kind:"temp",canvasId:o.canvasId,x:o.x,y:o.y,rotation:o.rotation,scale:o.scale,scaleX:o.scaleX,scaleY:o.scaleY,width:o.width,height:o.height,grayscale:o.grayscale,image:o.image,pageUrl:o.pageUrl,tags:[...o.tags],createdAt:o.createdAt,dominantColor:typeof o.dominantColor=="string"?o.dominantColor:null,tone:typeof o.tone=="string"?o.tone:null}:{type:"image",kind:"ref",canvasId:o.canvasId,x:o.x,y:o.y,rotation:o.rotation,scale:o.scale,scaleX:o.scaleX,scaleY:o.scaleY,width:o.width,height:o.height,grayscale:o.grayscale,image:o.image,dominantColor:typeof o.dominantColor=="string"?o.dominantColor:null,tone:typeof o.tone=="string"?o.tone:null}});await ja("/api/save-canvas",{images:e,canvasName:Ct.currentCanvasName})}catch{}},l5=async l=>{try{await Dv(l,Ct.currentCanvasName)}catch{}},i5=Bg({delay:500},l5),ne={hydrateSettings:async()=>{try{const[l,e,i]=await Promise.all([Ie.get({key:"canvasGrayscale",fallback:Ct.canvasGrayscale}),Ie.get({key:"showMinimap",fallback:Ct.showMinimap}),Ie.get({key:"isCanvasToolbarExpanded",fallback:Ct.isCanvasToolbarExpanded})]);typeof l=="boolean"&&(Ct.canvasGrayscale=l),typeof e=="boolean"&&(Ct.showMinimap=e),typeof i=="boolean"&&(Ct.isCanvasToolbarExpanded=i)}catch{}},setCanvasViewport:l=>{Ct.canvasViewport={...l},i5(Ct.canvasViewport)},initCanvas:async l=>{try{const e=await Ie.get({key:"lastActiveCanvas",fallback:"Default"});Ct.currentCanvasName=e;const[i,o]=await Promise.all([J4(e).catch(()=>[]),I4(e).catch(()=>null)]),u=Array.isArray(i)?i:[],d=[];u.forEach(h=>{if(!(!h||typeof h!="object")){if(h.type==="text"){d.push({type:"text",canvasId:h.canvasId,x:h.x,y:h.y,rotation:h.rotation,scale:h.scale,scaleX:h.scaleX,text:h.text||"",fontSize:h.fontSize||24,fill:h.fill||"#000000",width:h.width||0,height:h.height,align:h.align});return}if(h.kind==="temp"){const m=h;if(!m.image)return;const v={type:"image",image:m.image,pageUrl:m.pageUrl,tags:Array.isArray(m.tags)?[...m.tags]:[],createdAt:m.createdAt||Date.now(),vector:null,dominantColor:m.dominantColor??null,tone:m.tone??null,canvasId:m.canvasId,x:m.x,y:m.y,scale:m.scale,scaleX:m.scaleX,scaleY:m.scaleY,rotation:m.rotation,width:m.width||0,height:m.height||0,grayscale:m.grayscale};d.push(v);return}if(h.kind==="ref"||!h.kind&&h.type==="image"){const m=h;if(!m.image)return;const v=l(m.image);if(!v)return;const b={...v,type:"image",canvasId:m.canvasId,x:m.x,y:m.y,scale:m.scale,scaleX:m.scaleX,scaleY:m.scaleY,rotation:m.rotation,width:m.width||0,height:m.height||0,grayscale:m.grayscale};d.push(b)}}}),Ct.canvasItems=d,Ct.canvasHistory=[P0(d)],Ct.canvasHistoryIndex=0,o&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.width=="number"&&typeof o.height=="number"&&typeof o.scale=="number"&&(Ct.canvasViewport={...o})}catch{Ct.canvasItems=[],Ct.canvasHistory=[[]],Ct.canvasHistoryIndex=0}},switchCanvas:async(l,e)=>{l!==Ct.currentCanvasName&&(await Dv(Ct.canvasViewport,Ct.currentCanvasName),await Ie.set("lastActiveCanvas",l),Ct.canvasItems=[],Ct.canvasHistory=[[]],Ct.canvasHistoryIndex=0,await ne.initCanvas(e))},commitCanvasChange:()=>{const l=P0(Ct.canvasItems),e=Ct.canvasHistoryIndex+1,i=Ct.canvasHistoryIndex>=0?Ct.canvasHistory[Ct.canvasHistoryIndex]:null;i&&JSON.stringify(i)===JSON.stringify(l)||(Ct.canvasHistory=Ct.canvasHistory.slice(0,e),Ct.canvasHistory.push(l),Ct.canvasHistoryIndex=e,Ct.canvasHistory.length>50&&(Ct.canvasHistory.shift(),Ct.canvasHistoryIndex--),$0(Ct.canvasItems))},undoCanvas:()=>{Ct.canvasHistoryIndex>0&&(Ct.canvasHistoryIndex--,Ct.canvasItems=P0(Ct.canvasHistory[Ct.canvasHistoryIndex]),$0(Ct.canvasItems))},redoCanvas:()=>{Ct.canvasHistoryIndex<Ct.canvasHistory.length-1&&(Ct.canvasHistoryIndex++,Ct.canvasItems=P0(Ct.canvasHistory[Ct.canvasHistoryIndex]),$0(Ct.canvasItems))},addTextToCanvas:(l,e)=>{const i=`text_${Date.now()}`;return Ct.canvasItems.push({type:"text",canvasId:i,x:l,y:e,rotation:0,scale:1,scaleX:1,text:"Double click to edit",fontSize:96,fill:"#ffffff"}),ne.commitCanvasChange(),i},addToCanvas:(l,e,i)=>{let o=e,u=i;if(typeof o!="number"||typeof u!="number"){const v=Ct.canvasItems.length,b=4,E=260,C=260,_=120,M=80,A=v%b,H=Math.floor(v/b);o=_+A*E,u=M+H*C}const{vector:d,...h}=l,m=`img_${Date.now()}_${Math.random().toString(16).slice(2)}`;Ct.canvasItems.push({type:"image",...h,canvasId:m,x:o,y:u,scale:1,rotation:0}),ne.commitCanvasChange()},updateCanvasImageTransient:(l,e)=>{const i=Ct.canvasItems.findIndex(o=>o.canvasId===l);i!==-1&&Object.assign(Ct.canvasItems[i],e)},updateCanvasImageSilent:(l,e)=>{const i=Ct.canvasItems.findIndex(o=>o.canvasId===l);i!==-1&&Object.assign(Ct.canvasItems[i],e)},updateCanvasImage:(l,e)=>{const i=Ct.canvasItems.findIndex(o=>o.canvasId===l);i!==-1&&(Object.assign(Ct.canvasItems[i],e),ne.commitCanvasChange())},removeFromCanvas:l=>{const e=Ct.canvasItems.findIndex(i=>i.canvasId===l);e!==-1&&(Ct.canvasItems.splice(e,1),ne.commitCanvasChange())},removeManyFromCanvas:l=>{if(!l.length)return;const e=new Set(l);Ct.canvasItems=Ct.canvasItems.filter(i=>!e.has(i.canvasId)),ne.commitCanvasChange()},removeImageFromCanvas:l=>{const e=Ct.canvasItems.length;Ct.canvasItems=Ct.canvasItems.filter(i=>i.type==="text"?!0:i.image!==l),Ct.canvasItems.length!==e&&ne.commitCanvasChange()},autoLayoutCanvas:(l,e)=>{if(Ct.canvasItems.length===0)return;const i=20,o=e?.startX??100,u=e?.startY??100,h=Ct.canvasItems.map((I,k)=>({item:I,index:k})).filter(I=>I.item.type==="image"&&(!l||l.length===0||l.includes(I.item.canvasId))).map(({item:I,index:k})=>{const xt=I.scale||1,Nt=(I.width||250)*xt*Math.abs(I.scaleX||1),B=(I.height||200)*xt*Math.abs(I.scaleY||1),P=u1(Nt,B,I.rotation||0);return{item:I,index:k,w:P.width,h:P.height,offsetX:P.offsetX,offsetY:P.offsetY}});if(h.length===0)return;let m=0,v=0;h.forEach(I=>{m+=I.w*I.h,v+=I.w});const b=Array.isArray(l)&&l.length>0,E=h.map(I=>I.w).sort((I,k)=>I-k),C=E.length>0?E[Math.floor(E.length/2)]:250,_=h.length>0?v/h.length:250,M=C>0?C:_,A=m>0?Math.sqrt(m):Math.sqrt(M*M*h.length),H=typeof Ct.canvasViewport.scale=="number"&&Ct.canvasViewport.scale>0?Ct.canvasViewport.scale:1,D=typeof Ct.dimensions.width=="number"?Ct.dimensions.width/H:0,U=typeof Ct.dimensions.height=="number"?Ct.dimensions.height/H:0;let j=1;!b&&D>0&&U>0&&(j=D/U);const Y=Math.max(1,h.length),L=Math.max(1,Math.round(A*Math.sqrt(j)/M)),nt=h.slice().sort((I,k)=>k.h!==I.h?k.h-I.h:I.index-k.index),z=I=>{let k=0,xt=I[0]??u;for(let Nt=1;Nt<I.length;Nt++){const B=I[Nt]??u;B<xt&&(xt=B,k=Nt)}return k},G=I=>{const k=new Array(I).fill(u),xt=new Array(I).fill(0);nt.forEach(P=>{const St=z(k);xt[St]=Math.max(xt[St],P.w),k[St]+=P.h+i});const Nt=xt.reduce((P,St)=>P+(St>0?St:0),0)+i*Math.max(0,I-1),B=Math.max(...k)-u;return{width:Nt,height:B}},Q=I=>{const k=G(I),xt=k.height>0?k.width/k.height:Number.POSITIVE_INFINITY,Nt=xt>0?xt:1e-6,B=j>0?j:1,P=Math.abs(Math.log(Nt/B));return{columns:I,score:P}},dt=(I,k)=>I.score<k.score-1e-6?!0:Math.abs(I.score-k.score)>1e-6?!1:Math.abs(I.columns-L)<Math.abs(k.columns-L);let lt=L;if(Y>1){let I=Q(L);for(let k=1;k<=Y;k++){const xt=Q(k);dt(xt,I)&&(I=xt)}lt=I.columns}const vt=new Array(lt).fill(u),pt=new Array(lt).fill(0),jt=new Map;nt.forEach(I=>{const k=z(vt);I.item.y=vt[k]-I.offsetY,jt.set(I.item.canvasId,k),pt[k]=Math.max(pt[k],I.w),vt[k]+=I.h+i});const Ot=[];let Mt=o;for(let I=0;I<lt;I++)Ot[I]=Mt,pt[I]>0&&(Mt+=pt[I]+i);const q=new Map(h.map(I=>[I.item.canvasId,I]));Ct.canvasItems.forEach(I=>{const k=jt.get(I.canvasId);if(typeof k=="number"){const xt=q.get(I.canvasId),Nt=xt?xt.offsetX:0;I.x=Ot[k]-Nt}}),ne.commitCanvasChange()},clearCanvas:()=>{Ct.canvasItems.length!==0&&(Ct.canvasItems=[],ne.commitCanvasChange())},bringToFront:l=>{const e=Ct.canvasItems.findIndex(i=>i.canvasId===l);if(e!==-1&&e!==Ct.canvasItems.length-1){const[i]=Ct.canvasItems.splice(e,1);Ct.canvasItems.push(i),$0(Ct.canvasItems)}},toggleCanvasGrayscale:()=>{Ct.canvasGrayscale=!Ct.canvasGrayscale,Ie.set("canvasGrayscale",Ct.canvasGrayscale)},toggleCanvasToolbarExpanded:()=>{Ct.isCanvasToolbarExpanded=!Ct.isCanvasToolbarExpanded,Ie.set("isCanvasToolbarExpanded",Ct.isCanvasToolbarExpanded)},toggleMinimap:()=>{Ct.showMinimap=!Ct.showMinimap,Ie.set("showMinimap",Ct.showMinimap)}},zv={"common.ok":"OK","common.confirm":"Confirm","common.cancel":"Cancel","common.close":"Close","common.loading":"Loading...","common.clear":"Clear","common.none":"None","common.notSet":"Not set","common.color":"Color","common.language":"Language","common.language.en":"EN","common.language.zh":"","common.reset":"Reset","titleBar.settings":"Setting","titleBar.alwaysOnTop":"Always on Top","titleBar.dataFolder":"Data Folder","titleBar.dataFolder.default":"Not configured, using default directory","titleBar.change":"Change","titleBar.window":"Window","titleBar.pinTransparent":"Pin transparent","titleBar.shortcuts":"Shortcuts","titleBar.toggleWindowVisibility":"Toggle window visibility","titleBar.shortcutClickToRecord":"Click to record","titleBar.shortcutRecording":"Press a shortcut","titleBar.index":"Index","titleBar.enableAiSearchVector":"Enable AI Search (Vector)","titleBar.threshold":"Threshold","titleBar.indexing":"Indexing...","titleBar.indexUnindexedImages":"Index unindexed images","titleBar.processing":"Processing...","toast.indexFailed":"Failed to index images","toast.noUnindexedImages":"No unindexed images found","toast.indexCompleted":"Index completed: {{created}} created, {{updated}} updated","toast.modelReady":"AI Model is ready","toast.modelCheckFailed":"Model check failed: {{error}}","toast.settingsUpdateFailed":"Failed to update settings","toast.translationWarning":"Translation warning: {{warning}}","toast.reactError":"Something went wrong: {{message}}","toast.logCopied":"Log copied to clipboard","toast.logCopyFailed":"Failed to copy log","toast.tagRenamed":"Tag renamed","toast.tagRenameFailed":"Failed to rename tag","toast.updateDominantColorFailed":"Failed to update dominant color","toast.updateNameFailed":"Failed to update name","toast.imageDeleted":"Image deleted","toast.deleteImageFailed":"Failed to delete image","toast.vectorIndexed":"Vector indexed","toast.vectorIndexFailed":"Failed to index vector","toast.openFileFailed":"Failed to open file","toast.shortcutInvalid":"Invalid shortcut","toast.shortcutUpdateFailed":"Failed to update shortcut: {{error}}","envInit.brandTitle":"Oh, Captain!","envInit.heading":"Setting up the Python environment...","envInit.subheading":"First run may download tools and install dependencies. This is a one-time step.","envInit.preparing":"Preparing...","envInit.checkingUv":"Checking uv...","envInit.downloadingUv":"Downloading uv...","envInit.initializingPythonEnv":"Initializing Python environment...","envInit.resolvingDependencies":"Resolving dependencies...","envInit.downloadingPackages":"Downloading packages...","envInit.installingPackages":"Installing packages...","envInit.verifyingEnvironment":"Verifying environment...","envInit.pythonEnvReady":"Python environment ready","model.downloading":"Downloading model...","model.preparingDownload":"Preparing model download...","model.downloadingFraction":"Downloading ({{current}}/{{total}})","model.retrying":"Retrying download...","model.ready":"Model is ready","model.downloadFailed":"Model download failed","model.downloadFailedWithReason":"Model download failed: {{reason}}","indexing.starting":"Starting...","indexing.progress":"Indexing {{current}}/{{total}}...","indexing.completed":"Completed","errors.title":"Oh Captain, Something went wrong","errors.unexpected":"An unexpected error occurred.","errors.applicationLogTitle":"Application Log (Last 50KB)","errors.loadingLogs":"Loading logs...","errors.logAccessUnavailable":"Log access not available in this environment.","errors.failedToLoadLogs":"Failed to load logs: {{message}}","errors.copyLog":"Copy Log","errors.reloadApplication":"Reload Application","gallery.searchPlaceholder":"Search","gallery.filter":"Filter","gallery.filterSummary.color":"Color: {{color}}","gallery.filterSummary.tone":"Tone: {{tone}}","gallery.filterSummary.colorTone":"Color: {{color}}, Tone: {{tone}}","gallery.colorFilter.title":"Color Filter","gallery.colorFilter.selected":"Selected","gallery.toneFilter.title":"Tone Filter","gallery.referenceAlt":"Reference","gallery.notIndexed":"Not Indexed","gallery.contextMenu.nameLabel":"Name","gallery.contextMenu.imageNamePlaceholder":"Image name","gallery.contextMenu.linkLabel":"Link","gallery.contextMenu.tagsLabel":"Tags","gallery.contextMenu.addTagPlaceholder":"Add tag...","gallery.contextMenu.dominantColorLabel":"Dominant Color","gallery.contextMenu.toneLabel":"Tone","gallery.contextMenu.showInFolder":"Show in Folder","gallery.contextMenu.indexVector":"Index Vector","gallery.contextMenu.deleteImage":"Delete Image","gallery.dominantColor.title":"Dominant Color","gallery.empty.bodyLine1":"Your journey begins.","gallery.empty.bodyLine2":"Drag & drop to command your fleet.","gallery.empty.dragHint":"Drag images here","tag.setColor":"Set Color","canvas.toolbar.expand":"Expand Toolbar","canvas.toolbar.collapse":"Collapse Toolbar","canvas.toolbar.toggleGrayscale":"Toggle Grayscale Mode","canvas.toolbar.grayscale":"Grayscale","canvas.toolbar.smartLayout":"Smart Layout","canvas.toolbar.toggleMinimap":"Toggle Minimap","canvas.toolbar.minimap":"Minimap","canvas.clearCanvasTitle":"Clear Canvas","canvas.clearCanvasMessage":"Are you sure you want to clear the canvas? This action cannot be undone.","canvas.clearCanvasConfirm":"Clear","swatch.replaceHint":"{{color}} (long press to replace)","tone.key.high":"High","tone.key.mid":"Mid","tone.key.low":"Low","tone.range.short":"Short","tone.range.mid":"Mid","tone.range.long":"Long","tone.label.highShort":"High Key / Short Range","tone.label.highMid":"High Key / Mid Range","tone.label.highLong":"High Key / Long Range","tone.label.midShort":"Mid Key / Short Range","tone.label.midMid":"Mid Key / Mid Range","tone.label.midLong":"Mid Key / Long Range","tone.label.lowShort":"Low Key / Short Range","tone.label.lowMid":"Low Key / Mid Range","tone.label.lowLong":"Low Key / Long Range","tone.unknown":"Tone","dialog.pythonSetupFailedTitle":"Python setup failed","dialog.pythonSetupFailedMessage":"Failed to set up Python environment.","dialog.pythonSetupFailedDetail":`Exit code: {{code}}
Dir: {{dir}}`,"dialog.modelDownloadFailedTitle":"Model download failed","dialog.modelDownloadFailedMessage":"Failed to download model files.","dialog.modelDownloadFailedDetail":`Exit code: {{code}}
Progress: {{progress}}%
Model dir: {{dir}}`,"dialog.chooseStorageFolderTitle":"Choose LookBack storage folder","toast.globalError":"Error: {{message}}","toast.unhandledRejection":"Unhandled Promise Rejection: {{reason}}","toast.storageIncompatible":"Storage is incompatible. Please reset the data folder.","settings.canvas":"Canvas","settings.canvas.create":"Create New","settings.canvas.placeholder":"Canvas Name","settings.canvas.deleteConfirm":"Delete this canvas?","settings.canvas.rename":"Rename","settings.canvas.renamePlaceholder":"New Name","toast.createCanvasFailed":"Failed to create canvas"},s5={"common.ok":"","common.confirm":"","common.cancel":"","common.close":"","common.loading":"","common.clear":"","common.none":"","common.notSet":"","common.color":"","common.language":"","common.language.en":"EN","common.language.zh":"","common.reset":"","titleBar.settings":"","titleBar.alwaysOnTop":"","titleBar.dataFolder":"","titleBar.dataFolder.default":"","titleBar.change":"","titleBar.window":"","titleBar.pinTransparent":"","titleBar.shortcuts":"","titleBar.toggleWindowVisibility":"","titleBar.shortcutClickToRecord":"","titleBar.shortcutRecording":"","titleBar.index":"","titleBar.enableAiSearchVector":" AI ","titleBar.threshold":"","titleBar.indexing":"","titleBar.indexUnindexedImages":"","titleBar.processing":"","toast.indexFailed":"","toast.noUnindexedImages":"","toast.indexCompleted":" {{created}} {{updated}}","toast.modelReady":"","toast.modelCheckFailed":"{{error}}","toast.settingsUpdateFailed":"","toast.translationWarning":"{{warning}}","toast.reactError":"{{message}}","toast.logCopied":"","toast.logCopyFailed":"","toast.tagRenamed":"","toast.tagRenameFailed":"","toast.updateDominantColorFailed":"","toast.updateNameFailed":"","toast.imageDeleted":"","toast.deleteImageFailed":"","toast.vectorIndexed":"","toast.vectorIndexFailed":"","toast.openFileFailed":"","toast.shortcutInvalid":"","toast.shortcutUpdateFailed":"{{error}}","envInit.brandTitle":"Oh, Captain!","envInit.heading":" Python ","envInit.subheading":"","envInit.preparing":"","envInit.checkingUv":" uv","envInit.downloadingUv":" uv","envInit.initializingPythonEnv":" Python ","envInit.resolvingDependencies":"","envInit.downloadingPackages":"","envInit.installingPackages":"","envInit.verifyingEnvironment":"","envInit.pythonEnvReady":"Python ","model.downloading":"","model.preparingDownload":"","model.downloadingFraction":"{{current}}/{{total}}","model.retrying":"","model.ready":"","model.downloadFailed":"","model.downloadFailedWithReason":"{{reason}}","indexing.starting":"","indexing.progress":" {{current}}/{{total}}","indexing.completed":"","errors.title":"Oh Captain","errors.unexpected":"","errors.applicationLogTitle":" 50KB","errors.loadingLogs":"","errors.logAccessUnavailable":"","errors.failedToLoadLogs":"{{message}}","errors.copyLog":"","errors.reloadApplication":"","gallery.searchPlaceholder":"","gallery.filter":"","gallery.filterSummary.color":"{{color}}","gallery.filterSummary.tone":"{{tone}}","gallery.filterSummary.colorTone":"{{color}}{{tone}}","gallery.colorFilter.title":"","gallery.colorFilter.selected":"","gallery.toneFilter.title":"","gallery.referenceAlt":"","gallery.notIndexed":"","gallery.contextMenu.nameLabel":"","gallery.contextMenu.imageNamePlaceholder":"","gallery.contextMenu.linkLabel":"","gallery.contextMenu.tagsLabel":"","gallery.contextMenu.addTagPlaceholder":"","gallery.contextMenu.dominantColorLabel":"","gallery.contextMenu.toneLabel":"","gallery.contextMenu.showInFolder":"","gallery.contextMenu.indexVector":"","gallery.contextMenu.deleteImage":"","gallery.dominantColor.title":"","gallery.empty.bodyLine1":"","gallery.empty.bodyLine2":"","gallery.empty.dragHint":"","tag.setColor":"","canvas.toolbar.expand":"","canvas.toolbar.collapse":"","canvas.toolbar.toggleGrayscale":"","canvas.toolbar.grayscale":"","canvas.toolbar.smartLayout":"","canvas.toolbar.toggleMinimap":"","canvas.toolbar.minimap":"","canvas.clearCanvasTitle":"","canvas.clearCanvasMessage":"","canvas.clearCanvasConfirm":"","swatch.replaceHint":"{{color}}","tone.key.high":"","tone.key.mid":"","tone.key.low":"","tone.range.short":"","tone.range.mid":"","tone.range.long":"","tone.label.highShort":" / ","tone.label.highMid":" / ","tone.label.highLong":" / ","tone.label.midShort":" / ","tone.label.midMid":" / ","tone.label.midLong":" / ","tone.label.lowShort":" / ","tone.label.lowMid":" / ","tone.label.lowLong":" / ","tone.unknown":"","dialog.pythonSetupFailedTitle":"Python ","dialog.pythonSetupFailedMessage":" Python ","dialog.pythonSetupFailedDetail":`{{code}}
{{dir}}`,"dialog.modelDownloadFailedTitle":"","dialog.modelDownloadFailedMessage":"","dialog.modelDownloadFailedDetail":`{{code}}
{{progress}}%
{{dir}}`,"dialog.chooseStorageFolderTitle":" LookBack ","toast.globalError":"{{message}}","toast.unhandledRejection":" Promise {{reason}}","toast.storageIncompatible":"","settings.canvas":"","settings.canvas.create":"","settings.canvas.placeholder":"","settings.canvas.deleteConfirm":"","settings.canvas.rename":"","settings.canvas.renamePlaceholder":"","toast.createCanvasFailed":""},r5={en:zv,zh:s5};function o5(l,e,i){const o=r5[l][e];return i?o.replace(/{{\s*([a-zA-Z0-9_.-]+)\s*}}/g,(u,d)=>{const h=i[d];return h==null?u:String(h)}):o}const vg=So({locale:"en",hydrated:!1}),jv={hydrate:async()=>{const l=await Z4();vg.locale=l,vg.hydrated=!0},setLocale:l=>{vg.locale=l,k4(l)}};function fl(){const l=Ha(vg);return{locale:l.locale,setLocale:jv.setLocale,t:(e,i)=>o5(l.locale,e,i)}}const c1=l=>typeof l=="string"&&Object.prototype.hasOwnProperty.call(zv,l),ip=({checked:l,onToggle:e,disabled:i})=>N.jsx("button",{type:"button",onClick:e,disabled:i,className:fr("w-8 h-4 rounded-full relative transition-colors duration-200 bg-neutral-700 disabled:opacity-60"),style:{backgroundColor:l?De.primary:void 0},children:N.jsx("div",{className:fr("absolute top-0.5 left-0.5 w-3 h-3 rounded-full bg-white transition-transform duration-200",l?"translate-x-4":"translate-x-0")})}),u5=l=>{const e=l.trim();return e?/^[a-z]$/i.test(e)?e.toUpperCase():/^\d$/.test(e)?e:/^F([1-9]|1[0-2])$/i.test(e)?e.toUpperCase():null:null},c5=()=>{if(typeof navigator>"u")return!1;const l=navigator.platform||"";return/Mac|iPhone|iPad|iPod/.test(l)},f5=l=>{const e=u5(l.key);if(!e)return null;const i=[];return c5()?l.metaKey&&i.push("Command"):l.ctrlKey&&i.push("Ctrl"),l.altKey&&i.push("Alt"),l.shiftKey&&i.push("Shift"),i.length===0?null:[...i,e].join("+")},d5=({value:l,disabled:e,onChange:i,onInvalid:o})=>{const{t:u}=fl(),[d,h]=O.useState(!1),m=O.useMemo(()=>d?u("titleBar.shortcutRecording"):l||u("titleBar.shortcutClickToRecord"),[d,u,l]);return O.useEffect(()=>{if(!d)return;const v=b=>{if(b.preventDefault(),b.stopPropagation(),b.key==="Escape"){h(!1);return}if(b.key==="Shift"||b.key==="Control"||b.key==="Meta"||b.key==="Alt")return;const E=f5(b);if(!E){o();return}i(E),h(!1)};return window.addEventListener("keydown",v,!0),()=>{window.removeEventListener("keydown",v,!0)}},[i,o,d]),N.jsx("button",{type:"button",disabled:e,onClick:()=>h(!0),className:fr("h-6 px-2 rounded border border-neutral-700 bg-neutral-800 hover:bg-neutral-700 text-[10px] text-neutral-200 transition-colors","disabled:opacity-60 disabled:hover:bg-neutral-800"),title:u("titleBar.shortcutClickToRecord"),children:m})},tg=l=>typeof l=="object"&&l!==null,h5=()=>{const l=Ha(ve),e=Ha(co),i=Ha(fo),{t:o,locale:u,setLocale:d}=fl(),[h,m]=O.useState(!1),[v,b]=O.useState(""),[E,C]=O.useState(!1),[_,M]=O.useState(!1),[A,H]=O.useState(!1),[D,U]=O.useState(!0),[j,Y]=O.useState(!1),[L,nt]=O.useState(!1),z=Ha(Ct),[G,Q]=O.useState([]),[dt,lt]=O.useState(""),[vt,pt]=O.useState(!1),[jt,Ot]=O.useState(null),[Mt,q]=O.useState(""),I=async()=>{try{const ot=await ep();Q(ot)}catch(ot){console.error(ot)}};O.useEffect(()=>{h&&(St(),Ht(),I())},[h]);const k=async()=>{if(dt.trim())try{await F4(dt),lt(""),pt(!1),await I()}catch(ot){console.error(ot),ae.pushToast({key:"toast.createCanvasFailed"},"error")}},xt=async ot=>{const{state:ht}=await k2(async()=>{const{state:_e}=await Promise.resolve().then(()=>rp);return{state:_e}},void 0,import.meta.url),Kt=_e=>ht.images.find(Oe=>Oe.image===_e)||null;await ne.switchCanvas(ot,Kt)},Nt=async ot=>{if(confirm(o("settings.canvas.deleteConfirm")))try{if(await P4(ot),await I(),z.currentCanvasName===ot){const ht=await ep();ht.length>0&&xt(ht[0].name)}}catch(ht){console.error(ht)}},B=async()=>{if(!(!jt||!Mt.trim()))try{if(await W4(jt,Mt),Ot(null),q(""),await I(),z.currentCanvasName===jt){const{state:ot}=await k2(async()=>{const{state:Kt}=await Promise.resolve().then(()=>rp);return{state:Kt}},void 0,import.meta.url),ht=Kt=>ot.images.find(le=>le.image===Kt)||null;await ne.switchCanvas(Mt,ht)}}catch(ot){console.error(ot)}};O.useEffect(()=>{const ot=window.electron?.onModelDownloadProgress?.(ht=>{if(tg(ht)){if(ht.isOpen===!1){or.reset();return}if(typeof ht.progress=="number"){if(!c1(ht.statusKey))return;const Kt=tg(ht.statusParams)?ht.statusParams:void 0;or.update({isDownloading:!0,current:Math.round(Math.max(0,Math.min(1,ht.progress))*100),total:100,statusKey:ht.statusKey,statusParams:Kt,filename:typeof ht.filename=="string"?ht.filename:void 0});return}if(ht.type==="start"){or.update({isDownloading:!0,current:0,total:100,statusKey:"model.preparingDownload",statusParams:void 0,filename:void 0});return}if(ht.type==="file"&&typeof ht.current=="number"&&typeof ht.total=="number"){const Kt=ht.total>0?ht.current/ht.total:0;or.update({isDownloading:!0,current:Math.round(Math.max(0,Math.min(1,Kt))*100),total:100,statusKey:"model.downloadingFraction",statusParams:{current:ht.current,total:ht.total},filename:typeof ht.filename=="string"?ht.filename:void 0});return}if(ht.type==="retry"){or.update({isDownloading:!0,statusKey:"model.retrying",statusParams:void 0,filename:typeof ht.filename=="string"?ht.filename:void 0});return}if(ht.type==="done"||ht.type==="verify"&&ht.ok===!0){or.update({isDownloading:!0,current:100,total:100,statusKey:"model.ready",statusParams:void 0}),window.setTimeout(()=>or.reset(),800);return}if(ht.type==="error"||ht.type==="weight-failed"){const Kt=typeof ht.reason=="string"?ht.reason:void 0;or.update({isDownloading:!0,statusKey:Kt?"model.downloadFailedWithReason":"model.downloadFailed",statusParams:Kt?{reason:Kt}:void 0}),window.setTimeout(()=>or.reset(),1600)}}});return()=>{ot?.()}},[]),O.useEffect(()=>{const ot=window.electron?.onIndexingProgress?.(ht=>{if(!tg(ht)||typeof ht.current!="number"||typeof ht.total!="number"||!c1(ht.statusKey))return;const Kt=tg(ht.statusParams)?ht.statusParams:void 0;Gm.update({isIndexing:!0,current:ht.current,total:ht.total,statusKey:ht.statusKey,statusParams:Kt,filename:void 0})});return()=>{ot?.()}},[]);const P=()=>{const ot=!ve.pinMode,ht=ve.sidebarWidth;ae.setPinMode(ot),window.electron?.setPinMode?.(ot,ht)},St=async()=>{if(window.electron?.getStorageDir){C(!0);try{const ot=await window.electron.getStorageDir();b(ot)}finally{C(!1)}}},Ht=async()=>{nt(!0);try{const ot=await fetch(`${kn}/api/settings`);if(ot.ok){const ht=await ot.json();Y(!!ht.enableVectorSearch)}}catch(ot){console.error(ot)}finally{nt(!1)}};O.useEffect(()=>{const ot=()=>U(!0),ht=()=>U(!1),Kt=()=>{U(!document.hidden)};return window.addEventListener("focus",ot),window.addEventListener("blur",ht),document.addEventListener("visibilitychange",Kt),Kt(),()=>{window.removeEventListener("focus",ot),window.removeEventListener("blur",ht),document.removeEventListener("visibilitychange",Kt)}},[]),O.useEffect(()=>{Ht()},[]);const Vt=()=>{m(ot=>{const ht=!ot;return window.electron?.setSettingsOpen?.(ht),ht})},Xt=async()=>{if(window.electron?.chooseStorageDir){M(!0);try{const ot=await window.electron.chooseStorageDir();ot&&b(ot)}finally{M(!1)}}},Z=async()=>{H(!0),Gm.update({isIndexing:!0,current:0,total:0,statusKey:"indexing.starting",statusParams:void 0});try{const ot=await fetch(`${kn}/api/index-missing`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!ot.ok){ae.pushToast({key:"toast.indexFailed"},"error");return}const ht=await ot.json().catch(()=>({})),Kt=typeof ht.created=="number"?ht.created:0,_e=typeof ht.updated=="number"?ht.updated:0;if(Kt+_e===0){ae.pushToast({key:"toast.noUnindexedImages"},"info");return}ae.pushToast({key:"toast.indexCompleted",params:{created:Kt,updated:_e}},"success")}catch(ot){console.error(ot),ae.pushToast({key:"toast.indexFailed"},"error")}finally{H(!1),Gm.reset()}},F=async()=>{const ot=!j;Y(ot);try{if(await fetch(`${kn}/api/settings/enableVectorSearch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:ot})}),ot)if(window.electron?.ensureModelReady){const ht=await window.electron.ensureModelReady();ht.success?ae.pushToast({key:"toast.modelReady"},"success"):ae.pushToast({key:"toast.modelCheckFailed",params:{error:ht.error??""}},"error")}else await fetch(`${kn}/api/download-model`,{method:"POST"})}catch(ht){console.error(ht),ae.pushToast({key:"toast.settingsUpdateFailed"},"error"),Y(!ot)}},mt=()=>{const ot=!l.pinTransparent;ae.setPinTransparent(ot),window.electron?.setPinTransparent?.(ot)},wt=()=>{ae.pushToast({key:"toast.shortcutInvalid"},"error")},W=async ot=>{await ae.setToggleWindowShortcut(ot)},[gt,_t]=O.useState(null),At=ot=>{const ht=parseFloat(ot.target.value);_t(ht)},Yt=async()=>{if(gt===null)return;const ot=gt;ae.setVectorSearchThreshold(ot),_t(null);try{await fetch(`${kn}/api/settings/vectorSearchThreshold`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:ot})})}catch(ht){console.error(ht)}};return N.jsxs("div",{className:fr("relative z-[100] h-8 flex items-center justify-between pr-2 pl-2 select-none draggable border-b border-neutral-800","bg-neutral-900"),children:[N.jsx("div",{className:"flex items-center gap-2 text-neutral-400 text-xs font-bold",children:N.jsx("span",{style:{color:D?De.primary:"#6b7280"},children:"LookBack"})}),N.jsxs("div",{className:"flex items-center gap-1 no-drag",children:[N.jsx("button",{onClick:Vt,className:fr("p-1 hover:bg-neutral-800 rounded transition-colors",h&&"bg-neutral-800"),style:{color:h?De.primary:void 0},title:o("titleBar.settings"),children:N.jsx(S4,{size:14})}),N.jsx("button",{onClick:P,className:fr("p-1 hover:bg-neutral-800 rounded transition-colors"),style:{color:l.pinMode?De.primary:void 0},title:o("titleBar.alwaysOnTop"),children:N.jsx(f4,{size:14})}),N.jsx("div",{className:"w-px h-4 bg-neutral-700 mx-1"}),N.jsx("button",{onClick:()=>window.electron?.min(),className:"p-1 hover:bg-neutral-800 rounded transition-colors",children:N.jsx(r4,{size:14})}),N.jsx("button",{onClick:()=>window.electron?.max(),className:"p-1 hover:bg-neutral-800 rounded transition-colors",children:N.jsx(E4,{size:14})}),N.jsx("button",{onClick:()=>window.electron?.close(),className:"p-1 hover:bg-red-900 hover:text-red-200 rounded transition-colors",children:N.jsx(mg,{size:14})})]}),h&&N.jsxs("div",{className:"absolute right-2 top-8 mt-1 w-80 rounded border border-neutral-700 bg-neutral-900/95 shadow-lg p-3 text-xs text-neutral-200 no-drag",children:[N.jsx("div",{className:"font-semibold mb-2",children:o("titleBar.settings")}),N.jsxs("div",{className:"mb-3 space-y-1",children:[N.jsxs("div",{className:"text-[11px] text-neutral-400 flex justify-between items-center",children:[N.jsx("span",{children:o("settings.canvas")}),N.jsx("button",{onClick:()=>pt(!0),className:"p-1 hover:bg-neutral-800 rounded",title:o("settings.canvas.create"),children:N.jsx(h4,{size:12})})]}),vt&&N.jsxs("div",{className:"flex gap-1 mb-2",children:[N.jsx("input",{className:"flex-1 bg-neutral-800 text-[10px] px-2 py-1 rounded border border-neutral-700 outline-none focus:border-blue-500",value:dt,onChange:ot=>lt(ot.target.value),placeholder:o("settings.canvas.placeholder"),onKeyDown:ot=>ot.key==="Enter"&&k(),autoFocus:!0}),N.jsx("button",{onClick:k,className:"p-1 hover:bg-neutral-700 rounded text-green-500",children:N.jsx(I2,{size:12})}),N.jsx("button",{onClick:()=>pt(!1),className:"p-1 hover:bg-neutral-700 rounded text-neutral-400",children:N.jsx(mg,{size:12})})]}),N.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1 pr-1 custom-scrollbar",children:G.map(ot=>N.jsx("div",{className:fr("flex items-center justify-between p-1 rounded group",z.currentCanvasName===ot.name?"bg-neutral-800 text-blue-400":"hover:bg-neutral-800/50 text-neutral-300"),children:jt===ot.name?N.jsxs("div",{className:"flex flex-1 gap-1 items-center",children:[N.jsx("input",{className:"flex-1 bg-neutral-900 text-[10px] px-1 rounded border border-neutral-700 outline-none",value:Mt,onChange:ht=>q(ht.target.value),onKeyDown:ht=>ht.key==="Enter"&&B(),autoFocus:!0,onClick:ht=>ht.stopPropagation()}),N.jsx("button",{onClick:B,className:"text-green-500 hover:text-green-400",children:N.jsx(I2,{size:10})}),N.jsx("button",{onClick:()=>Ot(null),className:"text-neutral-500 hover:text-neutral-400",children:N.jsx(mg,{size:10})})]}):N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"flex-1 truncate text-[10px] cursor-pointer",onClick:()=>xt(ot.name),children:ot.name}),N.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[N.jsx("button",{onClick:ht=>{ht.stopPropagation(),Ot(ot.name),q(ot.name)},className:"p-0.5 hover:text-white text-neutral-500",title:o("settings.canvas.rename"),children:N.jsx(u4,{size:10})}),G.length>1&&N.jsx("button",{onClick:ht=>{ht.stopPropagation(),Nt(ot.name)},className:"p-0.5 hover:text-red-400 text-neutral-500",title:o("settings.canvas.deleteConfirm"),children:N.jsx(Cv,{size:10})})]})]})},ot.name))})]}),N.jsxs("div",{className:"space-y-1",children:[N.jsx("div",{className:"text-[11px] text-neutral-400",children:o("titleBar.dataFolder")}),N.jsxs("div",{className:"flex items-center gap-2",children:[N.jsx("div",{className:"flex-1 truncate text-[10px] text-neutral-300",children:E?o("common.loading"):v||o("titleBar.dataFolder.default")}),N.jsx("button",{onClick:Xt,disabled:_,className:"px-2 py-0.5 rounded bg-neutral-800 hover:bg-neutral-700 text-[10px] disabled:opacity-60",children:o("titleBar.change")})]})]}),N.jsxs("div",{className:"mt-3 space-y-1",children:[N.jsx("div",{className:"text-[11px] text-neutral-400",children:o("common.language")}),N.jsxs("div",{className:"flex gap-1",children:[N.jsx("button",{type:"button",onClick:()=>d("en"),className:fr("px-2 py-0.5 rounded text-[10px] transition-colors",u==="en"?"bg-neutral-700 text-white":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"),children:o("common.language.en")}),N.jsx("button",{type:"button",onClick:()=>d("zh"),className:fr("px-2 py-0.5 rounded text-[10px] transition-colors",u==="zh"?"bg-neutral-700 text-white":"bg-neutral-800 hover:bg-neutral-700 text-neutral-200"),children:o("common.language.zh")})]})]}),N.jsxs("div",{className:"mt-3 space-y-1",children:[N.jsx("div",{className:"text-[11px] text-neutral-400",children:o("titleBar.window")}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{className:"text-[10px] text-neutral-300",children:o("titleBar.pinTransparent")}),N.jsx(ip,{checked:l.pinTransparent,onToggle:mt})]})]}),N.jsxs("div",{className:"mt-3 space-y-1",children:[N.jsx("div",{className:"text-[11px] text-neutral-400",children:o("titleBar.shortcuts")}),N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx("span",{className:"text-[10px] text-neutral-300",children:o("titleBar.toggleWindowVisibility")}),N.jsxs("div",{className:"flex items-center gap-1",children:[N.jsx(d5,{value:l.toggleWindowShortcut,onChange:ot=>{W(ot)},onInvalid:wt}),N.jsx("button",{type:"button",className:"h-6 px-2 rounded bg-neutral-800 hover:bg-neutral-700 text-[10px] text-neutral-200 transition-colors",onClick:()=>{const ht=typeof navigator<"u"&&/Mac|iPhone|iPad|iPod/.test(navigator.platform||"")?"Command+L":"Ctrl+L";W(ht)},title:o("common.reset"),children:o("common.reset")})]})]})]}),N.jsxs("div",{className:"mt-3 space-y-1",children:[N.jsx("div",{className:"text-[11px] text-neutral-400",children:o("titleBar.index")}),N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{className:"text-[10px] text-neutral-300",children:o("titleBar.enableAiSearchVector")}),N.jsx(ip,{checked:j,onToggle:()=>{F()},disabled:L})]}),j&&N.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[N.jsxs("div",{className:"flex justify-between text-[10px]",children:[N.jsx("span",{children:o("titleBar.threshold")}),N.jsx("span",{children:(gt??l.vectorSearchThreshold).toFixed(2)})]}),N.jsx("input",{type:"range",min:"0.15",max:"0.25",step:"0.01",value:gt??l.vectorSearchThreshold,onChange:At,onMouseUp:Yt,onTouchEnd:Yt,className:"w-full h-1 bg-neutral-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-2.5 [&::-webkit-slider-thumb]:h-2.5 [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:rounded-full hover:[&::-webkit-slider-thumb]:bg-blue-400"})]}),i.isDownloading&&N.jsxs("div",{className:"mt-2 pt-2 border-t border-neutral-700",children:[N.jsxs("div",{className:"flex justify-between items-center text-[10px] text-neutral-400 mb-1",children:[N.jsx("span",{children:i.statusKey?o(i.statusKey,i.statusParams):o("model.downloading")}),N.jsx("span",{children:i.total>0?`${Math.round(i.current/i.total*100)}%`:""})]}),i.filename&&N.jsx("div",{className:"text-[9px] text-neutral-500 truncate mb-1",children:i.filename}),N.jsx("div",{className:"h-1 bg-neutral-800 rounded overflow-hidden",children:N.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:i.total>0?`${i.current/i.total*100}%`:"0%"}})})]}),N.jsx("button",{onClick:Z,disabled:A,className:"px-2 py-0.5 rounded bg-neutral-800 hover:bg-neutral-700 text-[10px] disabled:opacity-60 w-full text-center mt-1",children:o(A?"titleBar.indexing":"titleBar.indexUnindexedImages")}),e.isIndexing&&N.jsxs("div",{className:"mt-2 pt-2 border-t border-neutral-700",children:[N.jsxs("div",{className:"flex justify-between items-center text-[10px] text-neutral-400 mb-1",children:[N.jsx("span",{children:e.statusKey?o(e.statusKey,e.statusParams):o("titleBar.processing")}),N.jsx("span",{children:e.total>0?`${Math.round(e.current/e.total*100)}%`:""})]}),e.filename&&N.jsx("div",{className:"text-[9px] text-neutral-500 truncate mb-1",children:e.filename}),N.jsx("div",{className:"h-1 bg-neutral-800 rounded overflow-hidden",children:N.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:e.total>0?`${e.current/e.total*100}%`:"0%"}})})]})]})]})]})};function g5(l,e){if(l==null)return{};var i=m5(l,e),o,u;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);for(u=0;u<d.length;u++)o=d[u],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(l,o)&&(i[o]=l[o])}return i}function m5(l,e){if(l==null)return{};var i={},o=Object.keys(l),u,d;for(d=0;d<o.length;d++)u=o[d],!(e.indexOf(u)>=0)&&(i[u]=l[u]);return i}function _g(){return _g=Object.assign||function(l){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(l[o]=i[o])}return l},_g.apply(this,arguments)}function sp(l,e){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable})),i.push.apply(i,o)}return i}function zd(l){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?sp(Object(i),!0).forEach(function(o){p5(l,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):sp(Object(i)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(i,o))})}return l}function p5(l,e,i){return e in l?Object.defineProperty(l,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[e]=i,l}const v5={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},Lm=2;class Hv extends Zt.Component{constructor(e){super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let i;this.props.breakpointCols&&this.props.breakpointCols.default?i=this.props.breakpointCols.default:i=parseInt(this.props.breakpointCols)||Lm,this.state={columnCount:i}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const e=window&&window.innerWidth||1/0;let i=this.props.breakpointCols;typeof i!="object"&&(i={default:parseInt(i)||Lm});let o=1/0,u=i.default||Lm;for(let d in i){const h=parseInt(d);h>0&&e<=h&&h<o&&(o=h,u=i[d])}u=Math.max(1,parseInt(u)||1),this.state.columnCount!==u&&this.setState({columnCount:u})}itemsInColumns(){const e=this.state.columnCount,i=new Array(e),o=Zt.Children.toArray(this.props.children);for(let u=0;u<o.length;u++){const d=u%e;i[d]||(i[d]=[]),i[d].push(o[u])}return i}renderColumns(){const{column:e,columnAttrs:i={},columnClassName:o}=this.props,u=this.itemsInColumns(),d=`${100/u.length}%`;let h=o;h&&typeof h!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof h>"u"&&(h="my-masonry-grid_column"));const m=zd(zd(zd({},e),i),{},{style:zd(zd({},i.style),{},{width:d}),className:h});return u.map((v,b)=>Zt.createElement("div",_g({},m,{key:b}),v))}logDeprecated(e){console.error("[Masonry]",e)}render(){const e=this.props,{children:i,breakpointCols:o,columnClassName:u,columnAttrs:d,column:h,className:m}=e,v=g5(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let b=m;return typeof m!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof m>"u"&&(b="my-masonry-grid")),Zt.createElement("div",_g({},v,{className:b}),this.renderColumns())}}Hv.defaultProps=v5;const Gg=l=>l.startsWith("images/")?`${kn}/images/${l}`:`${kn}/${l}`,Id=l=>{const e=l.trim();if(!e)return"image";const i=e.split(/[\\/]/).pop()||e,o=i.lastIndexOf("."),u=o<=0?i:i.slice(0,o)||i;return u.startsWith("EMPTY_NAME_")?"":u},re=So({images:[],allImages:[],searchQuery:"",searchTags:[],searchColor:null,searchTone:null,searchImage:null,tagSortOrder:[],gallerySort:"manual"}),be={hydrateSettings:async()=>{try{const[l,e]=await Promise.all([Ie.get({key:"tagSortOrder",fallback:[]}),Ie.get({key:"gallerySort",fallback:re.gallerySort})]);Array.isArray(l)&&l.every(i=>typeof i=="string")&&(re.tagSortOrder=l),typeof e=="string"&&["manual","createdAtDesc"].includes(e)&&(re.gallerySort=e)}catch(l){console.error("Failed to hydrate settings:",l)}},createDropBatchId:()=>`drop_${Date.now()}`,createDroppedImageMeta:l=>({image:l.storedFilename,pageUrl:void 0,tags:[],createdAt:Date.now(),dominantColor:l.dominantColor??null,tone:l.tone??null,vector:null}),setTagSortOrder:l=>{re.tagSortOrder=l,Ie.set("tagSortOrder",l)},setGallerySort:l=>{re.gallerySort=l,Ie.set("gallerySort",l)},setImages:l=>{re.images=l.map(e=>({...e}))},setAllImages:l=>{const e=l.map(i=>({...i}));re.allImages=e,!re.searchQuery&&re.searchTags.length===0&&!re.searchColor&&!re.searchTone&&(re.images=e.map(i=>({...i})))},saveGalleryOrder:async l=>{const e=l.map(i=>i.image);await $4(e)},reorderImages:l=>{const e=l.map(i=>({...i}));re.allImages=e,!re.searchQuery&&re.searchTags.length===0&&!re.searchColor&&!re.searchTone&&(re.images=e.map(i=>({...i}))),be.saveGalleryOrder(e)},addImage:l=>{const e=re.images.findIndex(o=>o.image===l.image);e>=0?Object.assign(re.images[e],l):re.images.unshift(l);const i=re.allImages.findIndex(o=>o.image===l.image);i>=0?Object.assign(re.allImages[i],l):re.allImages.unshift(l)},setSearchQuery:l=>{re.searchQuery=l},setSearchTags:l=>{re.searchTags=l},setSearchColor:l=>{re.searchColor=l&&l.trim()?l.trim():null},setSearchTone:l=>{re.searchTone=l&&l.trim()?l.trim():null},setSearchImage:l=>{re.searchImage=l},deleteImage:l=>{const e=re.images.findIndex(o=>o.image===l);e!==-1&&re.images.splice(e,1);const i=re.allImages.findIndex(o=>o.image===l);i!==-1&&re.allImages.splice(i,1),ne.removeImageFromCanvas(l)},updateImage:(l,e)=>{const i=re.images.findIndex(u=>u.image===l);i!==-1&&Object.assign(re.images[i],e);const o=re.allImages.findIndex(u=>u.image===l);o!==-1&&Object.assign(re.allImages[o],e)}},rp=Object.freeze(Object.defineProperty({__proto__:null,actions:be,deriveNameFromFilename:Id,getImageUrl:Gg,state:re},Symbol.toStringTag,{value:"Module"})),f1="open-tag-color-picker",y5=l=>typeof l=="object"&&l!==null,S5=l=>y5(l)?typeof l.tag=="string"&&typeof l.x=="number"&&typeof l.y=="number":!1,op=l=>{window.dispatchEvent(new CustomEvent(f1,{detail:l}))},b5=l=>{const e=i=>{i instanceof CustomEvent&&S5(i.detail)&&l(i.detail)};return window.addEventListener(f1,e),()=>window.removeEventListener(f1,e)},x5=l=>{const e=l.trim().replace("#","");if(e.length!==6)return"#e5e7eb";const i=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),u=parseInt(e.slice(4,6),16);return Number.isNaN(i)||Number.isNaN(o)||Number.isNaN(u)?"#e5e7eb":(i*299+o*587+u*114)/1e3>154?"#020617":"#f9fafb"},up=({tag:l,color:e,className:i,size:o="sm"})=>{const{t:u}=fl(),d=typeof e=="string"?e.trim():"",m=d.length>0?d:De.primary;return N.jsx("button",{type:"button",className:`${o==="sm"?"w-2.5 h-2.5":"w-3.5 h-3.5"} border rounded-full cursor-pointer shrink-0 ${i||""}`,style:{backgroundColor:m},onPointerDown:v=>{v.preventDefault(),v.stopPropagation(),op({tag:l,x:v.clientX,y:v.clientY})},onKeyDown:v=>{if(v.key!=="Enter"&&v.key!==" ")return;v.preventDefault(),v.stopPropagation();const b=v.currentTarget.getBoundingClientRect();op({tag:l,x:b.left+b.width/2,y:b.top+b.height/2})},title:u("tag.setColor"),"aria-label":u("tag.setColor")})},xu=({tag:l,size:e="sm",isEdit:i=!1,showColor:o=!0,onClick:u,className:d,style:h,...m})=>{const b=Ha(ve).tagColors[l],E=typeof b=="string"?b.trim():"",C=E.length>0?E:De.primary,_=o,M=Su(C,1),A=x5(C),H="relative rounded transition-colors flex items-center group/tag whitespace-nowrap",D=e==="sm"?"text-[10px] px-1":"text-xs px-2 py-1",U=u?"cursor-pointer hover:text-white":"",j=i?"group hover:bg-red-900/20 hover:text-red-200":"";return N.jsxs("div",{className:`${H} ${D} ${U} ${j} ${d||""}`,style:{backgroundColor:M||(i?void 0:"rgba(38, 38, 38, 1)"),color:A,...h},onClick:Y=>{Y.stopPropagation(),u?.(Y)},title:l,...m,children:[N.jsx("span",{children:l}),!i&&_&&N.jsx("div",{className:"w-0 overflow-hidden group-hover/tag:w-auto transition-all duration-0",children:N.jsx(up,{tag:l,color:b,className:"ml-1",size:e})}),i&&N.jsx("div",{className:"w-0 overflow-hidden group-hover:w-auto flex items-center transition-all duration-200",children:_&&N.jsx(up,{tag:l,color:b,className:"opacity-0 group-hover:opacity-100 transition-opacity mx-1",size:e})})]})};var Zc=Sv();function C5(){for(var l=arguments.length,e=new Array(l),i=0;i<l;i++)e[i]=arguments[i];return O.useMemo(()=>o=>{e.forEach(u=>u(o))},e)}const Lg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pc(l){const e=Object.prototype.toString.call(l);return e==="[object Window]"||e==="[object global]"}function G1(l){return"nodeType"in l}function dl(l){var e,i;return l?Pc(l)?l:G1(l)&&(e=(i=l.ownerDocument)==null?void 0:i.defaultView)!=null?e:window:window}function L1(l){const{Document:e}=dl(l);return l instanceof e}function uh(l){return Pc(l)?!1:l instanceof dl(l).HTMLElement}function Uv(l){return l instanceof dl(l).SVGElement}function $c(l){return l?Pc(l)?l.document:G1(l)?L1(l)?l:uh(l)||Uv(l)?l.ownerDocument:document:document:document}const Vi=Lg?O.useLayoutEffect:O.useEffect;function Yg(l){const e=O.useRef(l);return Vi(()=>{e.current=l}),O.useCallback(function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e.current==null?void 0:e.current(...o)},[])}function E5(){const l=O.useRef(null),e=O.useCallback((o,u)=>{l.current=setInterval(o,u)},[]),i=O.useCallback(()=>{l.current!==null&&(clearInterval(l.current),l.current=null)},[]);return[e,i]}function ah(l,e){e===void 0&&(e=[l]);const i=O.useRef(l);return Vi(()=>{i.current!==l&&(i.current=l)},e),i}function ch(l,e){const i=O.useRef();return O.useMemo(()=>{const o=l(i.current);return i.current=o,o},[...e])}function Tg(l){const e=Yg(l),i=O.useRef(null),o=O.useCallback(u=>{u!==i.current&&e?.(u,i.current),i.current=u},[]);return[i,o]}function Ag(l){const e=O.useRef();return O.useEffect(()=>{e.current=l},[l]),e.current}let Ym={};function fh(l,e){return O.useMemo(()=>{if(e)return e;const i=Ym[l]==null?0:Ym[l]+1;return Ym[l]=i,l+"-"+i},[l,e])}function Bv(l){return function(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return o.reduce((d,h)=>{const m=Object.entries(h);for(const[v,b]of m){const E=d[v];E!=null&&(d[v]=E+l*b)}return d},{...e})}}const Jc=Bv(1),lh=Bv(-1);function _5(l){return"clientX"in l&&"clientY"in l}function Xg(l){if(!l)return!1;const{KeyboardEvent:e}=dl(l.target);return e&&l instanceof e}function T5(l){if(!l)return!1;const{TouchEvent:e}=dl(l.target);return e&&l instanceof e}function Mg(l){if(T5(l)){if(l.touches&&l.touches.length){const{clientX:e,clientY:i}=l.touches[0];return{x:e,y:i}}else if(l.changedTouches&&l.changedTouches.length){const{clientX:e,clientY:i}=l.changedTouches[0];return{x:e,y:i}}}return _5(l)?{x:l.clientX,y:l.clientY}:null}const hr=Object.freeze({Translate:{toString(l){if(!l)return;const{x:e,y:i}=l;return"translate3d("+(e?Math.round(e):0)+"px, "+(i?Math.round(i):0)+"px, 0)"}},Scale:{toString(l){if(!l)return;const{scaleX:e,scaleY:i}=l;return"scaleX("+e+") scaleY("+i+")"}},Transform:{toString(l){if(l)return[hr.Translate.toString(l),hr.Scale.toString(l)].join(" ")}},Transition:{toString(l){let{property:e,duration:i,easing:o}=l;return e+" "+i+"ms "+o}}}),cp="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function A5(l){return l.matches(cp)?l:l.querySelector(cp)}const M5={display:"none"};function w5(l){let{id:e,value:i}=l;return Zt.createElement("div",{id:e,style:M5},i)}function N5(l){let{id:e,announcement:i,ariaLiveType:o="assertive"}=l;const u={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Zt.createElement("div",{id:e,style:u,role:"status","aria-live":o,"aria-atomic":!0},i)}function R5(){const[l,e]=O.useState("");return{announce:O.useCallback(o=>{o!=null&&e(o)},[]),announcement:l}}const Gv=O.createContext(null);function D5(l){const e=O.useContext(Gv);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(l)},[l,e])}function O5(){const[l]=O.useState(()=>new Set),e=O.useCallback(o=>(l.add(o),()=>l.delete(o)),[l]);return[O.useCallback(o=>{let{type:u,event:d}=o;l.forEach(h=>{var m;return(m=h[u])==null?void 0:m.call(h,d)})},[l]),e]}const z5={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},j5={onDragStart(l){let{active:e}=l;return"Picked up draggable item "+e.id+"."},onDragOver(l){let{active:e,over:i}=l;return i?"Draggable item "+e.id+" was moved over droppable area "+i.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(l){let{active:e,over:i}=l;return i?"Draggable item "+e.id+" was dropped over droppable area "+i.id:"Draggable item "+e.id+" was dropped."},onDragCancel(l){let{active:e}=l;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function H5(l){let{announcements:e=j5,container:i,hiddenTextDescribedById:o,screenReaderInstructions:u=z5}=l;const{announce:d,announcement:h}=R5(),m=fh("DndLiveRegion"),[v,b]=O.useState(!1);if(O.useEffect(()=>{b(!0)},[]),D5(O.useMemo(()=>({onDragStart(C){let{active:_}=C;d(e.onDragStart({active:_}))},onDragMove(C){let{active:_,over:M}=C;e.onDragMove&&d(e.onDragMove({active:_,over:M}))},onDragOver(C){let{active:_,over:M}=C;d(e.onDragOver({active:_,over:M}))},onDragEnd(C){let{active:_,over:M}=C;d(e.onDragEnd({active:_,over:M}))},onDragCancel(C){let{active:_,over:M}=C;d(e.onDragCancel({active:_,over:M}))}}),[d,e])),!v)return null;const E=Zt.createElement(Zt.Fragment,null,Zt.createElement(w5,{id:o,value:u.draggable}),Zt.createElement(N5,{id:m,announcement:h}));return i?Zc.createPortal(E,i):E}var sa;(function(l){l.DragStart="dragStart",l.DragMove="dragMove",l.DragEnd="dragEnd",l.DragCancel="dragCancel",l.DragOver="dragOver",l.RegisterDroppable="registerDroppable",l.SetDroppableDisabled="setDroppableDisabled",l.UnregisterDroppable="unregisterDroppable"})(sa||(sa={}));function wg(){}function fp(l,e){return O.useMemo(()=>({sensor:l,options:e??{}}),[l,e])}function U5(){for(var l=arguments.length,e=new Array(l),i=0;i<l;i++)e[i]=arguments[i];return O.useMemo(()=>[...e].filter(o=>o!=null),[...e])}const Ki=Object.freeze({x:0,y:0});function Lv(l,e){return Math.sqrt(Math.pow(l.x-e.x,2)+Math.pow(l.y-e.y,2))}function B5(l,e){const i=Mg(l);if(!i)return"0 0";const o={x:(i.x-e.left)/e.width*100,y:(i.y-e.top)/e.height*100};return o.x+"% "+o.y+"%"}function Yv(l,e){let{data:{value:i}}=l,{data:{value:o}}=e;return i-o}function G5(l,e){let{data:{value:i}}=l,{data:{value:o}}=e;return o-i}function dp(l){let{left:e,top:i,height:o,width:u}=l;return[{x:e,y:i},{x:e+u,y:i},{x:e,y:i+o},{x:e+u,y:i+o}]}function Xv(l,e){if(!l||l.length===0)return null;const[i]=l;return i[e]}function hp(l,e,i){return e===void 0&&(e=l.left),i===void 0&&(i=l.top),{x:e+l.width*.5,y:i+l.height*.5}}const L5=l=>{let{collisionRect:e,droppableRects:i,droppableContainers:o}=l;const u=hp(e,e.left,e.top),d=[];for(const h of o){const{id:m}=h,v=i.get(m);if(v){const b=Lv(hp(v),u);d.push({id:m,data:{droppableContainer:h,value:b}})}}return d.sort(Yv)},Y5=l=>{let{collisionRect:e,droppableRects:i,droppableContainers:o}=l;const u=dp(e),d=[];for(const h of o){const{id:m}=h,v=i.get(m);if(v){const b=dp(v),E=u.reduce((_,M,A)=>_+Lv(b[A],M),0),C=Number((E/4).toFixed(4));d.push({id:m,data:{droppableContainer:h,value:C}})}}return d.sort(Yv)};function X5(l,e){const i=Math.max(e.top,l.top),o=Math.max(e.left,l.left),u=Math.min(e.left+e.width,l.left+l.width),d=Math.min(e.top+e.height,l.top+l.height),h=u-o,m=d-i;if(o<u&&i<d){const v=e.width*e.height,b=l.width*l.height,E=h*m,C=E/(v+b-E);return Number(C.toFixed(4))}return 0}const q5=l=>{let{collisionRect:e,droppableRects:i,droppableContainers:o}=l;const u=[];for(const d of o){const{id:h}=d,m=i.get(h);if(m){const v=X5(m,e);v>0&&u.push({id:h,data:{droppableContainer:d,value:v}})}}return u.sort(G5)};function V5(l,e,i){return{...l,scaleX:e&&i?e.width/i.width:1,scaleY:e&&i?e.height/i.height:1}}function qv(l,e){return l&&e?{x:l.left-e.left,y:l.top-e.top}:Ki}function K5(l){return function(i){for(var o=arguments.length,u=new Array(o>1?o-1:0),d=1;d<o;d++)u[d-1]=arguments[d];return u.reduce((h,m)=>({...h,top:h.top+l*m.y,bottom:h.bottom+l*m.y,left:h.left+l*m.x,right:h.right+l*m.x}),{...i})}}const Q5=K5(1);function Vv(l){if(l.startsWith("matrix3d(")){const e=l.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(l.startsWith("matrix(")){const e=l.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Z5(l,e,i){const o=Vv(e);if(!o)return l;const{scaleX:u,scaleY:d,x:h,y:m}=o,v=l.left-h-(1-u)*parseFloat(i),b=l.top-m-(1-d)*parseFloat(i.slice(i.indexOf(" ")+1)),E=u?l.width/u:l.width,C=d?l.height/d:l.height;return{width:E,height:C,top:b,right:v+E,bottom:b+C,left:v}}const k5={ignoreTransform:!1};function tf(l,e){e===void 0&&(e=k5);let i=l.getBoundingClientRect();if(e.ignoreTransform){const{transform:b,transformOrigin:E}=dl(l).getComputedStyle(l);b&&(i=Z5(i,b,E))}const{top:o,left:u,width:d,height:h,bottom:m,right:v}=i;return{top:o,left:u,width:d,height:h,bottom:m,right:v}}function gp(l){return tf(l,{ignoreTransform:!0})}function J5(l){const e=l.innerWidth,i=l.innerHeight;return{top:0,left:0,right:e,bottom:i,width:e,height:i}}function I5(l,e){return e===void 0&&(e=dl(l).getComputedStyle(l)),e.position==="fixed"}function F5(l,e){e===void 0&&(e=dl(l).getComputedStyle(l));const i=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(u=>{const d=e[u];return typeof d=="string"?i.test(d):!1})}function qg(l,e){const i=[];function o(u){if(e!=null&&i.length>=e||!u)return i;if(L1(u)&&u.scrollingElement!=null&&!i.includes(u.scrollingElement))return i.push(u.scrollingElement),i;if(!uh(u)||Uv(u)||i.includes(u))return i;const d=dl(l).getComputedStyle(u);return u!==l&&F5(u,d)&&i.push(u),I5(u,d)?i:o(u.parentNode)}return l?o(l):i}function Kv(l){const[e]=qg(l,1);return e??null}function Xm(l){return!Lg||!l?null:Pc(l)?l:G1(l)?L1(l)||l===$c(l).scrollingElement?window:uh(l)?l:null:null}function Qv(l){return Pc(l)?l.scrollX:l.scrollLeft}function Zv(l){return Pc(l)?l.scrollY:l.scrollTop}function d1(l){return{x:Qv(l),y:Zv(l)}}var ya;(function(l){l[l.Forward=1]="Forward",l[l.Backward=-1]="Backward"})(ya||(ya={}));function kv(l){return!Lg||!l?!1:l===document.scrollingElement}function Jv(l){const e={x:0,y:0},i=kv(l)?{height:window.innerHeight,width:window.innerWidth}:{height:l.clientHeight,width:l.clientWidth},o={x:l.scrollWidth-i.width,y:l.scrollHeight-i.height},u=l.scrollTop<=e.y,d=l.scrollLeft<=e.x,h=l.scrollTop>=o.y,m=l.scrollLeft>=o.x;return{isTop:u,isLeft:d,isBottom:h,isRight:m,maxScroll:o,minScroll:e}}const W5={x:.2,y:.2};function P5(l,e,i,o,u){let{top:d,left:h,right:m,bottom:v}=i;o===void 0&&(o=10),u===void 0&&(u=W5);const{isTop:b,isBottom:E,isLeft:C,isRight:_}=Jv(l),M={x:0,y:0},A={x:0,y:0},H={height:e.height*u.y,width:e.width*u.x};return!b&&d<=e.top+H.height?(M.y=ya.Backward,A.y=o*Math.abs((e.top+H.height-d)/H.height)):!E&&v>=e.bottom-H.height&&(M.y=ya.Forward,A.y=o*Math.abs((e.bottom-H.height-v)/H.height)),!_&&m>=e.right-H.width?(M.x=ya.Forward,A.x=o*Math.abs((e.right-H.width-m)/H.width)):!C&&h<=e.left+H.width&&(M.x=ya.Backward,A.x=o*Math.abs((e.left+H.width-h)/H.width)),{direction:M,speed:A}}function $5(l){if(l===document.scrollingElement){const{innerWidth:d,innerHeight:h}=window;return{top:0,left:0,right:d,bottom:h,width:d,height:h}}const{top:e,left:i,right:o,bottom:u}=l.getBoundingClientRect();return{top:e,left:i,right:o,bottom:u,width:l.clientWidth,height:l.clientHeight}}function Iv(l){return l.reduce((e,i)=>Jc(e,d1(i)),Ki)}function t6(l){return l.reduce((e,i)=>e+Qv(i),0)}function e6(l){return l.reduce((e,i)=>e+Zv(i),0)}function Fv(l,e){if(e===void 0&&(e=tf),!l)return;const{top:i,left:o,bottom:u,right:d}=e(l);Kv(l)&&(u<=0||d<=0||i>=window.innerHeight||o>=window.innerWidth)&&l.scrollIntoView({block:"center",inline:"center"})}const n6=[["x",["left","right"],t6],["y",["top","bottom"],e6]];let Y1=class{constructor(e,i){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const o=qg(i),u=Iv(o);this.rect={...e},this.width=e.width,this.height=e.height;for(const[d,h,m]of n6)for(const v of h)Object.defineProperty(this,v,{get:()=>{const b=m(o),E=u[d]-b;return this.rect[v]+E},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}};class Fd{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(i=>{var o;return(o=this.target)==null?void 0:o.removeEventListener(...i)})},this.target=e}add(e,i,o){var u;(u=this.target)==null||u.addEventListener(e,i,o),this.listeners.push([e,i,o])}}function a6(l){const{EventTarget:e}=dl(l);return l instanceof e?l:$c(l)}function qm(l,e){const i=Math.abs(l.x),o=Math.abs(l.y);return typeof e=="number"?Math.sqrt(i**2+o**2)>e:"x"in e&&"y"in e?i>e.x&&o>e.y:"x"in e?i>e.x:"y"in e?o>e.y:!1}var vi;(function(l){l.Click="click",l.DragStart="dragstart",l.Keydown="keydown",l.ContextMenu="contextmenu",l.Resize="resize",l.SelectionChange="selectionchange",l.VisibilityChange="visibilitychange"})(vi||(vi={}));function mp(l){l.preventDefault()}function l6(l){l.stopPropagation()}var Ue;(function(l){l.Space="Space",l.Down="ArrowDown",l.Right="ArrowRight",l.Left="ArrowLeft",l.Up="ArrowUp",l.Esc="Escape",l.Enter="Enter",l.Tab="Tab"})(Ue||(Ue={}));const Wv={start:[Ue.Space,Ue.Enter],cancel:[Ue.Esc],end:[Ue.Space,Ue.Enter,Ue.Tab]},i6=(l,e)=>{let{currentCoordinates:i}=e;switch(l.code){case Ue.Right:return{...i,x:i.x+25};case Ue.Left:return{...i,x:i.x-25};case Ue.Down:return{...i,y:i.y+25};case Ue.Up:return{...i,y:i.y-25}}};class X1{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:i}}=e;this.props=e,this.listeners=new Fd($c(i)),this.windowListeners=new Fd(dl(i)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vi.Resize,this.handleCancel),this.windowListeners.add(vi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:i}=this.props,o=e.node.current;o&&Fv(o),i(Ki)}handleKeyDown(e){if(Xg(e)){const{active:i,context:o,options:u}=this.props,{keyboardCodes:d=Wv,coordinateGetter:h=i6,scrollBehavior:m="smooth"}=u,{code:v}=e;if(d.end.includes(v)){this.handleEnd(e);return}if(d.cancel.includes(v)){this.handleCancel(e);return}const{collisionRect:b}=o.current,E=b?{x:b.left,y:b.top}:Ki;this.referenceCoordinates||(this.referenceCoordinates=E);const C=h(e,{active:i,context:o.current,currentCoordinates:E});if(C){const _=lh(C,E),M={x:0,y:0},{scrollableAncestors:A}=o.current;for(const H of A){const D=e.code,{isTop:U,isRight:j,isLeft:Y,isBottom:L,maxScroll:nt,minScroll:z}=Jv(H),G=$5(H),Q={x:Math.min(D===Ue.Right?G.right-G.width/2:G.right,Math.max(D===Ue.Right?G.left:G.left+G.width/2,C.x)),y:Math.min(D===Ue.Down?G.bottom-G.height/2:G.bottom,Math.max(D===Ue.Down?G.top:G.top+G.height/2,C.y))},dt=D===Ue.Right&&!j||D===Ue.Left&&!Y,lt=D===Ue.Down&&!L||D===Ue.Up&&!U;if(dt&&Q.x!==C.x){const vt=H.scrollLeft+_.x,pt=D===Ue.Right&&vt<=nt.x||D===Ue.Left&&vt>=z.x;if(pt&&!_.y){H.scrollTo({left:vt,behavior:m});return}pt?M.x=H.scrollLeft-vt:M.x=D===Ue.Right?H.scrollLeft-nt.x:H.scrollLeft-z.x,M.x&&H.scrollBy({left:-M.x,behavior:m});break}else if(lt&&Q.y!==C.y){const vt=H.scrollTop+_.y,pt=D===Ue.Down&&vt<=nt.y||D===Ue.Up&&vt>=z.y;if(pt&&!_.x){H.scrollTo({top:vt,behavior:m});return}pt?M.y=H.scrollTop-vt:M.y=D===Ue.Down?H.scrollTop-nt.y:H.scrollTop-z.y,M.y&&H.scrollBy({top:-M.y,behavior:m});break}}this.handleMove(e,Jc(lh(C,this.referenceCoordinates),M))}}}handleMove(e,i){const{onMove:o}=this.props;e.preventDefault(),o(i)}handleEnd(e){const{onEnd:i}=this.props;e.preventDefault(),this.detach(),i()}handleCancel(e){const{onCancel:i}=this.props;e.preventDefault(),this.detach(),i()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}X1.activators=[{eventName:"onKeyDown",handler:(l,e,i)=>{let{keyboardCodes:o=Wv,onActivation:u}=e,{active:d}=i;const{code:h}=l.nativeEvent;if(o.start.includes(h)){const m=d.activatorNode.current;return m&&l.target!==m?!1:(l.preventDefault(),u?.({event:l.nativeEvent}),!0)}return!1}}];function pp(l){return!!(l&&"distance"in l)}function vp(l){return!!(l&&"delay"in l)}class q1{constructor(e,i,o){var u;o===void 0&&(o=a6(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=i;const{event:d}=e,{target:h}=d;this.props=e,this.events=i,this.document=$c(h),this.documentListeners=new Fd(this.document),this.listeners=new Fd(o),this.windowListeners=new Fd(dl(h)),this.initialCoordinates=(u=Mg(d))!=null?u:Ki,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:i,bypassActivationConstraint:o}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(vi.Resize,this.handleCancel),this.windowListeners.add(vi.DragStart,mp),this.windowListeners.add(vi.VisibilityChange,this.handleCancel),this.windowListeners.add(vi.ContextMenu,mp),this.documentListeners.add(vi.Keydown,this.handleKeydown),i){if(o!=null&&o({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vp(i)){this.timeoutId=setTimeout(this.handleStart,i.delay),this.handlePending(i);return}if(pp(i)){this.handlePending(i);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,i){const{active:o,onPending:u}=this.props;u(o,e,this.initialCoordinates,i)}handleStart(){const{initialCoordinates:e}=this,{onStart:i}=this.props;e&&(this.activated=!0,this.documentListeners.add(vi.Click,l6,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vi.SelectionChange,this.removeTextSelection),i(e))}handleMove(e){var i;const{activated:o,initialCoordinates:u,props:d}=this,{onMove:h,options:{activationConstraint:m}}=d;if(!u)return;const v=(i=Mg(e))!=null?i:Ki,b=lh(u,v);if(!o&&m){if(pp(m)){if(m.tolerance!=null&&qm(b,m.tolerance))return this.handleCancel();if(qm(b,m.distance))return this.handleStart()}if(vp(m)&&qm(b,m.tolerance))return this.handleCancel();this.handlePending(m,b);return}e.cancelable&&e.preventDefault(),h(v)}handleEnd(){const{onAbort:e,onEnd:i}=this.props;this.detach(),this.activated||e(this.props.active),i()}handleCancel(){const{onAbort:e,onCancel:i}=this.props;this.detach(),this.activated||e(this.props.active),i()}handleKeydown(e){e.code===Ue.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const s6={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class V1 extends q1{constructor(e){const{event:i}=e,o=$c(i.target);super(e,s6,o)}}V1.activators=[{eventName:"onPointerDown",handler:(l,e)=>{let{nativeEvent:i}=l,{onActivation:o}=e;return!i.isPrimary||i.button!==0?!1:(o?.({event:i}),!0)}}];const r6={move:{name:"mousemove"},end:{name:"mouseup"}};var h1;(function(l){l[l.RightClick=2]="RightClick"})(h1||(h1={}));class o6 extends q1{constructor(e){super(e,r6,$c(e.event.target))}}o6.activators=[{eventName:"onMouseDown",handler:(l,e)=>{let{nativeEvent:i}=l,{onActivation:o}=e;return i.button===h1.RightClick?!1:(o?.({event:i}),!0)}}];const Vm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class u6 extends q1{constructor(e){super(e,Vm)}static setup(){return window.addEventListener(Vm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Vm.move.name,e)};function e(){}}}u6.activators=[{eventName:"onTouchStart",handler:(l,e)=>{let{nativeEvent:i}=l,{onActivation:o}=e;const{touches:u}=i;return u.length>1?!1:(o?.({event:i}),!0)}}];var Wd;(function(l){l[l.Pointer=0]="Pointer",l[l.DraggableRect=1]="DraggableRect"})(Wd||(Wd={}));var Ng;(function(l){l[l.TreeOrder=0]="TreeOrder",l[l.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ng||(Ng={}));function c6(l){let{acceleration:e,activator:i=Wd.Pointer,canScroll:o,draggingRect:u,enabled:d,interval:h=5,order:m=Ng.TreeOrder,pointerCoordinates:v,scrollableAncestors:b,scrollableAncestorRects:E,delta:C,threshold:_}=l;const M=d6({delta:C,disabled:!d}),[A,H]=E5(),D=O.useRef({x:0,y:0}),U=O.useRef({x:0,y:0}),j=O.useMemo(()=>{switch(i){case Wd.Pointer:return v?{top:v.y,bottom:v.y,left:v.x,right:v.x}:null;case Wd.DraggableRect:return u}},[i,u,v]),Y=O.useRef(null),L=O.useCallback(()=>{const z=Y.current;if(!z)return;const G=D.current.x*U.current.x,Q=D.current.y*U.current.y;z.scrollBy(G,Q)},[]),nt=O.useMemo(()=>m===Ng.TreeOrder?[...b].reverse():b,[m,b]);O.useEffect(()=>{if(!d||!b.length||!j){H();return}for(const z of nt){if(o?.(z)===!1)continue;const G=b.indexOf(z),Q=E[G];if(!Q)continue;const{direction:dt,speed:lt}=P5(z,Q,j,e,_);for(const vt of["x","y"])M[vt][dt[vt]]||(lt[vt]=0,dt[vt]=0);if(lt.x>0||lt.y>0){H(),Y.current=z,A(L,h),D.current=lt,U.current=dt;return}}D.current={x:0,y:0},U.current={x:0,y:0},H()},[e,L,o,H,d,h,JSON.stringify(j),JSON.stringify(M),A,b,nt,E,JSON.stringify(_)])}const f6={x:{[ya.Backward]:!1,[ya.Forward]:!1},y:{[ya.Backward]:!1,[ya.Forward]:!1}};function d6(l){let{delta:e,disabled:i}=l;const o=Ag(e);return ch(u=>{if(i||!o||!u)return f6;const d={x:Math.sign(e.x-o.x),y:Math.sign(e.y-o.y)};return{x:{[ya.Backward]:u.x[ya.Backward]||d.x===-1,[ya.Forward]:u.x[ya.Forward]||d.x===1},y:{[ya.Backward]:u.y[ya.Backward]||d.y===-1,[ya.Forward]:u.y[ya.Forward]||d.y===1}}},[i,e,o])}function h6(l,e){const i=e!=null?l.get(e):void 0,o=i?i.node.current:null;return ch(u=>{var d;return e==null?null:(d=o??u)!=null?d:null},[o,e])}function g6(l,e){return O.useMemo(()=>l.reduce((i,o)=>{const{sensor:u}=o,d=u.activators.map(h=>({eventName:h.eventName,handler:e(h.handler,o)}));return[...i,...d]},[]),[l,e])}var ih;(function(l){l[l.Always=0]="Always",l[l.BeforeDragging=1]="BeforeDragging",l[l.WhileDragging=2]="WhileDragging"})(ih||(ih={}));var g1;(function(l){l.Optimized="optimized"})(g1||(g1={}));const yp=new Map;function m6(l,e){let{dragging:i,dependencies:o,config:u}=e;const[d,h]=O.useState(null),{frequency:m,measure:v,strategy:b}=u,E=O.useRef(l),C=D(),_=ah(C),M=O.useCallback(function(U){U===void 0&&(U=[]),!_.current&&h(j=>j===null?U:j.concat(U.filter(Y=>!j.includes(Y))))},[_]),A=O.useRef(null),H=ch(U=>{if(C&&!i)return yp;if(!U||U===yp||E.current!==l||d!=null){const j=new Map;for(let Y of l){if(!Y)continue;if(d&&d.length>0&&!d.includes(Y.id)&&Y.rect.current){j.set(Y.id,Y.rect.current);continue}const L=Y.node.current,nt=L?new Y1(v(L),L):null;Y.rect.current=nt,nt&&j.set(Y.id,nt)}return j}return U},[l,d,i,C,v]);return O.useEffect(()=>{E.current=l},[l]),O.useEffect(()=>{C||M()},[i,C]),O.useEffect(()=>{d&&d.length>0&&h(null)},[JSON.stringify(d)]),O.useEffect(()=>{C||typeof m!="number"||A.current!==null||(A.current=setTimeout(()=>{M(),A.current=null},m))},[m,C,M,...o]),{droppableRects:H,measureDroppableContainers:M,measuringScheduled:d!=null};function D(){switch(b){case ih.Always:return!1;case ih.BeforeDragging:return i;default:return!i}}}function K1(l,e){return ch(i=>l?i||(typeof e=="function"?e(l):l):null,[e,l])}function p6(l,e){return K1(l,e)}function v6(l){let{callback:e,disabled:i}=l;const o=Yg(e),u=O.useMemo(()=>{if(i||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(o)},[o,i]);return O.useEffect(()=>()=>u?.disconnect(),[u]),u}function Vg(l){let{callback:e,disabled:i}=l;const o=Yg(e),u=O.useMemo(()=>{if(i||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(o)},[i]);return O.useEffect(()=>()=>u?.disconnect(),[u]),u}function y6(l){return new Y1(tf(l),l)}function Sp(l,e,i){e===void 0&&(e=y6);const[o,u]=O.useState(null);function d(){u(v=>{if(!l)return null;if(l.isConnected===!1){var b;return(b=v??i)!=null?b:null}const E=e(l);return JSON.stringify(v)===JSON.stringify(E)?v:E})}const h=v6({callback(v){if(l)for(const b of v){const{type:E,target:C}=b;if(E==="childList"&&C instanceof HTMLElement&&C.contains(l)){d();break}}}}),m=Vg({callback:d});return Vi(()=>{d(),l?(m?.observe(l),h?.observe(document.body,{childList:!0,subtree:!0})):(m?.disconnect(),h?.disconnect())},[l]),o}function S6(l){const e=K1(l);return qv(l,e)}const bp=[];function b6(l){const e=O.useRef(l),i=ch(o=>l?o&&o!==bp&&l&&e.current&&l.parentNode===e.current.parentNode?o:qg(l):bp,[l]);return O.useEffect(()=>{e.current=l},[l]),i}function x6(l){const[e,i]=O.useState(null),o=O.useRef(l),u=O.useCallback(d=>{const h=Xm(d.target);h&&i(m=>m?(m.set(h,d1(h)),new Map(m)):null)},[]);return O.useEffect(()=>{const d=o.current;if(l!==d){h(d);const m=l.map(v=>{const b=Xm(v);return b?(b.addEventListener("scroll",u,{passive:!0}),[b,d1(b)]):null}).filter(v=>v!=null);i(m.length?new Map(m):null),o.current=l}return()=>{h(l),h(d)};function h(m){m.forEach(v=>{const b=Xm(v);b?.removeEventListener("scroll",u)})}},[u,l]),O.useMemo(()=>l.length?e?Array.from(e.values()).reduce((d,h)=>Jc(d,h),Ki):Iv(l):Ki,[l,e])}function xp(l,e){e===void 0&&(e=[]);const i=O.useRef(null);return O.useEffect(()=>{i.current=null},e),O.useEffect(()=>{const o=l!==Ki;o&&!i.current&&(i.current=l),!o&&i.current&&(i.current=null)},[l]),i.current?lh(l,i.current):Ki}function C6(l){O.useEffect(()=>{if(!Lg)return;const e=l.map(i=>{let{sensor:o}=i;return o.setup==null?void 0:o.setup()});return()=>{for(const i of e)i?.()}},l.map(e=>{let{sensor:i}=e;return i}))}function E6(l,e){return O.useMemo(()=>l.reduce((i,o)=>{let{eventName:u,handler:d}=o;return i[u]=h=>{d(h,e)},i},{}),[l,e])}function Pv(l){return O.useMemo(()=>l?J5(l):null,[l])}const Cp=[];function _6(l,e){e===void 0&&(e=tf);const[i]=l,o=Pv(i?dl(i):null),[u,d]=O.useState(Cp);function h(){d(()=>l.length?l.map(v=>kv(v)?o:new Y1(e(v),v)):Cp)}const m=Vg({callback:h});return Vi(()=>{m?.disconnect(),h(),l.forEach(v=>m?.observe(v))},[l]),u}function $v(l){if(!l)return null;if(l.children.length>1)return l;const e=l.children[0];return uh(e)?e:l}function T6(l){let{measure:e}=l;const[i,o]=O.useState(null),u=O.useCallback(b=>{for(const{target:E}of b)if(uh(E)){o(C=>{const _=e(E);return C?{...C,width:_.width,height:_.height}:_});break}},[e]),d=Vg({callback:u}),h=O.useCallback(b=>{const E=$v(b);d?.disconnect(),E&&d?.observe(E),o(E?e(E):null)},[e,d]),[m,v]=Tg(h);return O.useMemo(()=>({nodeRef:m,rect:i,setRef:v}),[i,m,v])}const A6=[{sensor:V1,options:{}},{sensor:X1,options:{}}],M6={current:{}},yg={draggable:{measure:gp},droppable:{measure:gp,strategy:ih.WhileDragging,frequency:g1.Optimized},dragOverlay:{measure:tf}};class Pd extends Map{get(e){var i;return e!=null&&(i=super.get(e))!=null?i:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:i}=e;return!i})}getNodeFor(e){var i,o;return(i=(o=this.get(e))==null?void 0:o.node.current)!=null?i:void 0}}const w6={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:wg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yg,measureDroppableContainers:wg,windowRect:null,measuringScheduled:!1},ty={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:wg,draggableNodes:new Map,over:null,measureDroppableContainers:wg},dh=O.createContext(ty),ey=O.createContext(w6);function N6(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pd}}}function R6(l,e){switch(e.type){case sa.DragStart:return{...l,draggable:{...l.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case sa.DragMove:return l.draggable.active==null?l:{...l,draggable:{...l.draggable,translate:{x:e.coordinates.x-l.draggable.initialCoordinates.x,y:e.coordinates.y-l.draggable.initialCoordinates.y}}};case sa.DragEnd:case sa.DragCancel:return{...l,draggable:{...l.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case sa.RegisterDroppable:{const{element:i}=e,{id:o}=i,u=new Pd(l.droppable.containers);return u.set(o,i),{...l,droppable:{...l.droppable,containers:u}}}case sa.SetDroppableDisabled:{const{id:i,key:o,disabled:u}=e,d=l.droppable.containers.get(i);if(!d||o!==d.key)return l;const h=new Pd(l.droppable.containers);return h.set(i,{...d,disabled:u}),{...l,droppable:{...l.droppable,containers:h}}}case sa.UnregisterDroppable:{const{id:i,key:o}=e,u=l.droppable.containers.get(i);if(!u||o!==u.key)return l;const d=new Pd(l.droppable.containers);return d.delete(i),{...l,droppable:{...l.droppable,containers:d}}}default:return l}}function D6(l){let{disabled:e}=l;const{active:i,activatorEvent:o,draggableNodes:u}=O.useContext(dh),d=Ag(o),h=Ag(i?.id);return O.useEffect(()=>{if(!e&&!o&&d&&h!=null){if(!Xg(d)||document.activeElement===d.target)return;const m=u.get(h);if(!m)return;const{activatorNode:v,node:b}=m;if(!v.current&&!b.current)return;requestAnimationFrame(()=>{for(const E of[v.current,b.current]){if(!E)continue;const C=A5(E);if(C){C.focus();break}}})}},[o,e,u,h,d]),null}function ny(l,e){let{transform:i,...o}=e;return l!=null&&l.length?l.reduce((u,d)=>d({transform:u,...o}),i):i}function O6(l){return O.useMemo(()=>({draggable:{...yg.draggable,...l?.draggable},droppable:{...yg.droppable,...l?.droppable},dragOverlay:{...yg.dragOverlay,...l?.dragOverlay}}),[l?.draggable,l?.droppable,l?.dragOverlay])}function z6(l){let{activeNode:e,measure:i,initialRect:o,config:u=!0}=l;const d=O.useRef(!1),{x:h,y:m}=typeof u=="boolean"?{x:u,y:u}:u;Vi(()=>{if(!h&&!m||!e){d.current=!1;return}if(d.current||!o)return;const b=e?.node.current;if(!b||b.isConnected===!1)return;const E=i(b),C=qv(E,o);if(h||(C.x=0),m||(C.y=0),d.current=!0,Math.abs(C.x)>0||Math.abs(C.y)>0){const _=Kv(b);_&&_.scrollBy({top:C.y,left:C.x})}},[e,h,m,o,i])}const Kg=O.createContext({...Ki,scaleX:1,scaleY:1});var mo;(function(l){l[l.Uninitialized=0]="Uninitialized",l[l.Initializing=1]="Initializing",l[l.Initialized=2]="Initialized"})(mo||(mo={}));const j6=O.memo(function(e){var i,o,u,d;let{id:h,accessibility:m,autoScroll:v=!0,children:b,sensors:E=A6,collisionDetection:C=q5,measuring:_,modifiers:M,...A}=e;const H=O.useReducer(R6,void 0,N6),[D,U]=H,[j,Y]=O5(),[L,nt]=O.useState(mo.Uninitialized),z=L===mo.Initialized,{draggable:{active:G,nodes:Q,translate:dt},droppable:{containers:lt}}=D,vt=G!=null?Q.get(G):null,pt=O.useRef({initial:null,translated:null}),jt=O.useMemo(()=>{var ln;return G!=null?{id:G,data:(ln=vt?.data)!=null?ln:M6,rect:pt}:null},[G,vt]),Ot=O.useRef(null),[Mt,q]=O.useState(null),[I,k]=O.useState(null),xt=ah(A,Object.values(A)),Nt=fh("DndDescribedBy",h),B=O.useMemo(()=>lt.getEnabled(),[lt]),P=O6(_),{droppableRects:St,measureDroppableContainers:Ht,measuringScheduled:Vt}=m6(B,{dragging:z,dependencies:[dt.x,dt.y],config:P.droppable}),Xt=h6(Q,G),Z=O.useMemo(()=>I?Mg(I):null,[I]),F=Ii(),mt=p6(Xt,P.draggable.measure);z6({activeNode:G!=null?Q.get(G):null,config:F.layoutShiftCompensation,initialRect:mt,measure:P.draggable.measure});const wt=Sp(Xt,P.draggable.measure,mt),W=Sp(Xt?Xt.parentElement:null),gt=O.useRef({activatorEvent:null,active:null,activeNode:Xt,collisionRect:null,collisions:null,droppableRects:St,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:lt,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_t=lt.getNodeFor((i=gt.current.over)==null?void 0:i.id),At=T6({measure:P.dragOverlay.measure}),Yt=(o=At.nodeRef.current)!=null?o:Xt,ot=z?(u=At.rect)!=null?u:wt:null,ht=!!(At.nodeRef.current&&At.rect),Kt=S6(ht?null:wt),_e=Pv(Yt?dl(Yt):null),le=b6(z?_t??Xt:null),Oe=_6(le),Xe=ny(M,{transform:{x:dt.x-Kt.x,y:dt.y-Kt.y,scaleX:1,scaleY:1},activatorEvent:I,active:jt,activeNodeRect:wt,containerNodeRect:W,draggingNodeRect:ot,over:gt.current.over,overlayNodeRect:At.rect,scrollableAncestors:le,scrollableAncestorRects:Oe,windowRect:_e}),kt=Z?Jc(Z,dt):null,Jt=x6(le),Ze=xp(Jt),an=xp(Jt,[wt]),ze=Jc(Xe,Ze),je=ot?Q5(ot,Xe):null,dn=jt&&je?C({active:jt,collisionRect:je,droppableRects:St,droppableContainers:B,pointerCoordinates:kt}):null,hl=Xv(dn,"id"),[ka,ki]=O.useState(null),Ji=ht?Xe:Jc(Xe,an),oa=V5(Ji,(d=ka?.rect)!=null?d:null,wt),Ja=O.useRef(null),ua=O.useCallback((ln,Cn)=>{let{sensor:Nn,options:Sa}=Cn;if(Ot.current==null)return;const ba=Q.get(Ot.current);if(!ba)return;const En=ln.nativeEvent,xa=new Nn({active:Ot.current,activeNode:ba,event:En,options:Sa,context:gt,onAbort(_n){if(!Q.get(_n))return;const{onDragAbort:ca}=xt.current,Fa={id:_n};ca?.(Fa),j({type:"onDragAbort",event:Fa})},onPending(_n,Ca,ca,Fa){if(!Q.get(_n))return;const{onDragPending:ml}=xt.current,Wa={id:_n,constraint:Ca,initialCoordinates:ca,offset:Fa};ml?.(Wa),j({type:"onDragPending",event:Wa})},onStart(_n){const Ca=Ot.current;if(Ca==null)return;const ca=Q.get(Ca);if(!ca)return;const{onDragStart:Fa}=xt.current,gl={activatorEvent:En,active:{id:Ca,data:ca.data,rect:pt}};Zc.unstable_batchedUpdates(()=>{Fa?.(gl),nt(mo.Initializing),U({type:sa.DragStart,initialCoordinates:_n,active:Ca}),j({type:"onDragStart",event:gl}),q(Ja.current),k(En)})},onMove(_n){U({type:sa.DragMove,coordinates:_n})},onEnd:Ia(sa.DragEnd),onCancel:Ia(sa.DragCancel)});Ja.current=xa;function Ia(_n){return async function(){const{active:ca,collisions:Fa,over:gl,scrollAdjustedTranslate:ml}=gt.current;let Wa=null;if(ca&&ml){const{cancelDrop:Ua}=xt.current;Wa={activatorEvent:En,active:ca,collisions:Fa,delta:ml,over:gl},_n===sa.DragEnd&&typeof Ua=="function"&&await Promise.resolve(Ua(Wa))&&(_n=sa.DragCancel)}Ot.current=null,Zc.unstable_batchedUpdates(()=>{U({type:_n}),nt(mo.Uninitialized),ki(null),q(null),k(null),Ja.current=null;const Ua=_n===sa.DragEnd?"onDragEnd":"onDragCancel";if(Wa){const Pa=xt.current[Ua];Pa?.(Wa),j({type:Ua,event:Wa})}})}}},[Q]),To=O.useCallback((ln,Cn)=>(Nn,Sa)=>{const ba=Nn.nativeEvent,En=Q.get(Sa);if(Ot.current!==null||!En||ba.dndKit||ba.defaultPrevented)return;const xa={active:En};ln(Nn,Cn.options,xa)===!0&&(ba.dndKit={capturedBy:Cn.sensor},Ot.current=Sa,ua(Nn,Cn))},[Q,ua]),wu=g6(E,To);C6(E),Vi(()=>{wt&&L===mo.Initializing&&nt(mo.Initialized)},[wt,L]),O.useEffect(()=>{const{onDragMove:ln}=xt.current,{active:Cn,activatorEvent:Nn,collisions:Sa,over:ba}=gt.current;if(!Cn||!Nn)return;const En={active:Cn,activatorEvent:Nn,collisions:Sa,delta:{x:ze.x,y:ze.y},over:ba};Zc.unstable_batchedUpdates(()=>{ln?.(En),j({type:"onDragMove",event:En})})},[ze.x,ze.y]),O.useEffect(()=>{const{active:ln,activatorEvent:Cn,collisions:Nn,droppableContainers:Sa,scrollAdjustedTranslate:ba}=gt.current;if(!ln||Ot.current==null||!Cn||!ba)return;const{onDragOver:En}=xt.current,xa=Sa.get(hl),Ia=xa&&xa.rect.current?{id:xa.id,rect:xa.rect.current,data:xa.data,disabled:xa.disabled}:null,_n={active:ln,activatorEvent:Cn,collisions:Nn,delta:{x:ba.x,y:ba.y},over:Ia};Zc.unstable_batchedUpdates(()=>{ki(Ia),En?.(_n),j({type:"onDragOver",event:_n})})},[hl]),Vi(()=>{gt.current={activatorEvent:I,active:jt,activeNode:Xt,collisionRect:je,collisions:dn,droppableRects:St,draggableNodes:Q,draggingNode:Yt,draggingNodeRect:ot,droppableContainers:lt,over:ka,scrollableAncestors:le,scrollAdjustedTranslate:ze},pt.current={initial:ot,translated:je}},[jt,Xt,dn,je,Q,Yt,ot,St,lt,ka,le,ze]),c6({...F,delta:dt,draggingRect:je,pointerCoordinates:kt,scrollableAncestors:le,scrollableAncestorRects:Oe});const Nu=O.useMemo(()=>({active:jt,activeNode:Xt,activeNodeRect:wt,activatorEvent:I,collisions:dn,containerNodeRect:W,dragOverlay:At,draggableNodes:Q,droppableContainers:lt,droppableRects:St,over:ka,measureDroppableContainers:Ht,scrollableAncestors:le,scrollableAncestorRects:Oe,measuringConfiguration:P,measuringScheduled:Vt,windowRect:_e}),[jt,Xt,wt,I,dn,W,At,Q,lt,St,ka,Ht,le,Oe,P,Vt,_e]),vr=O.useMemo(()=>({activatorEvent:I,activators:wu,active:jt,activeNodeRect:wt,ariaDescribedById:{draggable:Nt},dispatch:U,draggableNodes:Q,over:ka,measureDroppableContainers:Ht}),[I,wu,jt,wt,U,Nt,Q,ka,Ht]);return Zt.createElement(Gv.Provider,{value:Y},Zt.createElement(dh.Provider,{value:vr},Zt.createElement(ey.Provider,{value:Nu},Zt.createElement(Kg.Provider,{value:oa},b)),Zt.createElement(D6,{disabled:m?.restoreFocus===!1})),Zt.createElement(H5,{...m,hiddenTextDescribedById:Nt}));function Ii(){const ln=Mt?.autoScrollEnabled===!1,Cn=typeof v=="object"?v.enabled===!1:v===!1,Nn=z&&!ln&&!Cn;return typeof v=="object"?{...v,enabled:Nn}:{enabled:Nn}}}),H6=O.createContext(null),Ep="button",U6="Draggable";function B6(l){let{id:e,data:i,disabled:o=!1,attributes:u}=l;const d=fh(U6),{activators:h,activatorEvent:m,active:v,activeNodeRect:b,ariaDescribedById:E,draggableNodes:C,over:_}=O.useContext(dh),{role:M=Ep,roleDescription:A="draggable",tabIndex:H=0}=u??{},D=v?.id===e,U=O.useContext(D?Kg:H6),[j,Y]=Tg(),[L,nt]=Tg(),z=E6(h,e),G=ah(i);Vi(()=>(C.set(e,{id:e,key:d,node:j,activatorNode:L,data:G}),()=>{const dt=C.get(e);dt&&dt.key===d&&C.delete(e)}),[C,e]);const Q=O.useMemo(()=>({role:M,tabIndex:H,"aria-disabled":o,"aria-pressed":D&&M===Ep?!0:void 0,"aria-roledescription":A,"aria-describedby":E.draggable}),[o,M,H,D,A,E.draggable]);return{active:v,activatorEvent:m,activeNodeRect:b,attributes:Q,isDragging:D,listeners:o?void 0:z,node:j,over:_,setNodeRef:Y,setActivatorNodeRef:nt,transform:U}}function ay(){return O.useContext(ey)}const G6="Droppable",L6={timeout:25};function Y6(l){let{data:e,disabled:i=!1,id:o,resizeObserverConfig:u}=l;const d=fh(G6),{active:h,dispatch:m,over:v,measureDroppableContainers:b}=O.useContext(dh),E=O.useRef({disabled:i}),C=O.useRef(!1),_=O.useRef(null),M=O.useRef(null),{disabled:A,updateMeasurementsFor:H,timeout:D}={...L6,...u},U=ah(H??o),j=O.useCallback(()=>{if(!C.current){C.current=!0;return}M.current!=null&&clearTimeout(M.current),M.current=setTimeout(()=>{b(Array.isArray(U.current)?U.current:[U.current]),M.current=null},D)},[D]),Y=Vg({callback:j,disabled:A||!h}),L=O.useCallback((Q,dt)=>{Y&&(dt&&(Y.unobserve(dt),C.current=!1),Q&&Y.observe(Q))},[Y]),[nt,z]=Tg(L),G=ah(e);return O.useEffect(()=>{!Y||!nt.current||(Y.disconnect(),C.current=!1,Y.observe(nt.current))},[nt,Y]),O.useEffect(()=>(m({type:sa.RegisterDroppable,element:{id:o,key:d,disabled:i,node:nt,rect:_,data:G}}),()=>m({type:sa.UnregisterDroppable,key:d,id:o})),[o]),O.useEffect(()=>{i!==E.current.disabled&&(m({type:sa.SetDroppableDisabled,id:o,key:d,disabled:i}),E.current.disabled=i)},[o,d,i,m]),{active:h,rect:_,isOver:v?.id===o,node:nt,over:v,setNodeRef:z}}function X6(l){let{animation:e,children:i}=l;const[o,u]=O.useState(null),[d,h]=O.useState(null),m=Ag(i);return!i&&!o&&m&&u(m),Vi(()=>{if(!d)return;const v=o?.key,b=o?.props.id;if(v==null||b==null){u(null);return}Promise.resolve(e(b,d)).then(()=>{u(null)})},[e,o,d]),Zt.createElement(Zt.Fragment,null,i,o?O.cloneElement(o,{ref:h}):null)}const q6={x:0,y:0,scaleX:1,scaleY:1};function V6(l){let{children:e}=l;return Zt.createElement(dh.Provider,{value:ty},Zt.createElement(Kg.Provider,{value:q6},e))}const K6={position:"fixed",touchAction:"none"},Q6=l=>Xg(l)?"transform 250ms ease":void 0,Z6=O.forwardRef((l,e)=>{let{as:i,activatorEvent:o,adjustScale:u,children:d,className:h,rect:m,style:v,transform:b,transition:E=Q6}=l;if(!m)return null;const C=u?b:{...b,scaleX:1,scaleY:1},_={...K6,width:m.width,height:m.height,top:m.top,left:m.left,transform:hr.Transform.toString(C),transformOrigin:u&&o?B5(o,m):void 0,transition:typeof E=="function"?E(o):E,...v};return Zt.createElement(i,{className:h,style:_,ref:e},d)}),k6=l=>e=>{let{active:i,dragOverlay:o}=e;const u={},{styles:d,className:h}=l;if(d!=null&&d.active)for(const[m,v]of Object.entries(d.active))v!==void 0&&(u[m]=i.node.style.getPropertyValue(m),i.node.style.setProperty(m,v));if(d!=null&&d.dragOverlay)for(const[m,v]of Object.entries(d.dragOverlay))v!==void 0&&o.node.style.setProperty(m,v);return h!=null&&h.active&&i.node.classList.add(h.active),h!=null&&h.dragOverlay&&o.node.classList.add(h.dragOverlay),function(){for(const[v,b]of Object.entries(u))i.node.style.setProperty(v,b);h!=null&&h.active&&i.node.classList.remove(h.active)}},J6=l=>{let{transform:{initial:e,final:i}}=l;return[{transform:hr.Transform.toString(e)},{transform:hr.Transform.toString(i)}]},I6={duration:250,easing:"ease",keyframes:J6,sideEffects:k6({styles:{active:{opacity:"0"}}})};function F6(l){let{config:e,draggableNodes:i,droppableContainers:o,measuringConfiguration:u}=l;return Yg((d,h)=>{if(e===null)return;const m=i.get(d);if(!m)return;const v=m.node.current;if(!v)return;const b=$v(h);if(!b)return;const{transform:E}=dl(h).getComputedStyle(h),C=Vv(E);if(!C)return;const _=typeof e=="function"?e:W6(e);return Fv(v,u.draggable.measure),_({active:{id:d,data:m.data,node:v,rect:u.draggable.measure(v)},draggableNodes:i,dragOverlay:{node:h,rect:u.dragOverlay.measure(b)},droppableContainers:o,measuringConfiguration:u,transform:C})})}function W6(l){const{duration:e,easing:i,sideEffects:o,keyframes:u}={...I6,...l};return d=>{let{active:h,dragOverlay:m,transform:v,...b}=d;if(!e)return;const E={x:m.rect.left-h.rect.left,y:m.rect.top-h.rect.top},C={scaleX:v.scaleX!==1?h.rect.width*v.scaleX/m.rect.width:1,scaleY:v.scaleY!==1?h.rect.height*v.scaleY/m.rect.height:1},_={x:v.x-E.x,y:v.y-E.y,...C},M=u({...b,active:h,dragOverlay:m,transform:{initial:v,final:_}}),[A]=M,H=M[M.length-1];if(JSON.stringify(A)===JSON.stringify(H))return;const D=o?.({active:h,dragOverlay:m,...b}),U=m.node.animate(M,{duration:e,easing:i,fill:"forwards"});return new Promise(j=>{U.onfinish=()=>{D?.(),j()}})}}let _p=0;function P6(l){return O.useMemo(()=>{if(l!=null)return _p++,_p},[l])}const $6=Zt.memo(l=>{let{adjustScale:e=!1,children:i,dropAnimation:o,style:u,transition:d,modifiers:h,wrapperElement:m="div",className:v,zIndex:b=999}=l;const{activatorEvent:E,active:C,activeNodeRect:_,containerNodeRect:M,draggableNodes:A,droppableContainers:H,dragOverlay:D,over:U,measuringConfiguration:j,scrollableAncestors:Y,scrollableAncestorRects:L,windowRect:nt}=ay(),z=O.useContext(Kg),G=P6(C?.id),Q=ny(h,{activatorEvent:E,active:C,activeNodeRect:_,containerNodeRect:M,draggingNodeRect:D.rect,over:U,overlayNodeRect:D.rect,scrollableAncestors:Y,scrollableAncestorRects:L,transform:z,windowRect:nt}),dt=K1(_),lt=F6({config:o,draggableNodes:A,droppableContainers:H,measuringConfiguration:j}),vt=dt?D.setRef:void 0;return Zt.createElement(V6,null,Zt.createElement(X6,{animation:lt},C&&G?Zt.createElement(Z6,{key:G,id:C.id,ref:vt,as:m,activatorEvent:E,adjustScale:e,className:v,transition:d,rect:dt,style:{zIndex:b,...u},transform:Q},i):null))});function Rg(l,e,i){const o=l.slice();return o.splice(i<0?o.length+i:i,0,o.splice(e,1)[0]),o}function t8(l,e){return l.reduce((i,o,u)=>{const d=e.get(o);return d&&(i[u]=d),i},Array(l.length))}function eg(l){return l!==null&&l>=0}function e8(l,e){if(l===e)return!0;if(l.length!==e.length)return!1;for(let i=0;i<l.length;i++)if(l[i]!==e[i])return!1;return!0}function n8(l){return typeof l=="boolean"?{draggable:l,droppable:l}:l}const Qg=l=>{let{rects:e,activeIndex:i,overIndex:o,index:u}=l;const d=Rg(e,o,i),h=e[u],m=d[u];return!m||!h?null:{x:m.left-h.left,y:m.top-h.top,scaleX:m.width/h.width,scaleY:m.height/h.height}},ly="Sortable",iy=Zt.createContext({activeIndex:-1,containerId:ly,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qg,disabled:{draggable:!1,droppable:!1}});function sy(l){let{children:e,id:i,items:o,strategy:u=Qg,disabled:d=!1}=l;const{active:h,dragOverlay:m,droppableRects:v,over:b,measureDroppableContainers:E}=ay(),C=fh(ly,i),_=m.rect!==null,M=O.useMemo(()=>o.map(z=>typeof z=="object"&&"id"in z?z.id:z),[o]),A=h!=null,H=h?M.indexOf(h.id):-1,D=b?M.indexOf(b.id):-1,U=O.useRef(M),j=!e8(M,U.current),Y=D!==-1&&H===-1||j,L=n8(d);Vi(()=>{j&&A&&E(M)},[j,M,A,E]),O.useEffect(()=>{U.current=M},[M]);const nt=O.useMemo(()=>({activeIndex:H,containerId:C,disabled:L,disableTransforms:Y,items:M,overIndex:D,useDragOverlay:_,sortedRects:t8(M,v),strategy:u}),[H,C,L.draggable,L.droppable,Y,M,D,v,_,u]);return Zt.createElement(iy.Provider,{value:nt},e)}const a8=l=>{let{id:e,items:i,activeIndex:o,overIndex:u}=l;return Rg(i,o,u).indexOf(e)},l8=l=>{let{containerId:e,isSorting:i,wasDragging:o,index:u,items:d,newIndex:h,previousItems:m,previousContainerId:v,transition:b}=l;return!b||!o||m!==d&&u===h?!1:i?!0:h!==u&&e===v},i8={duration:200,easing:"ease"},ry="transform",s8=hr.Transition.toString({property:ry,duration:0,easing:"linear"}),r8={roleDescription:"sortable"};function o8(l){let{disabled:e,index:i,node:o,rect:u}=l;const[d,h]=O.useState(null),m=O.useRef(i);return Vi(()=>{if(!e&&i!==m.current&&o.current){const v=u.current;if(v){const b=tf(o.current,{ignoreTransform:!0}),E={x:v.left-b.left,y:v.top-b.top,scaleX:v.width/b.width,scaleY:v.height/b.height};(E.x||E.y)&&h(E)}}i!==m.current&&(m.current=i)},[e,i,o,u]),O.useEffect(()=>{d&&h(null)},[d]),d}function oy(l){let{animateLayoutChanges:e=l8,attributes:i,disabled:o,data:u,getNewIndex:d=a8,id:h,strategy:m,resizeObserverConfig:v,transition:b=i8}=l;const{items:E,containerId:C,activeIndex:_,disabled:M,disableTransforms:A,sortedRects:H,overIndex:D,useDragOverlay:U,strategy:j}=O.useContext(iy),Y=u8(o,M),L=E.indexOf(h),nt=O.useMemo(()=>({sortable:{containerId:C,index:L,items:E},...u}),[C,u,L,E]),z=O.useMemo(()=>E.slice(E.indexOf(h)),[E,h]),{rect:G,node:Q,isOver:dt,setNodeRef:lt}=Y6({id:h,data:nt,disabled:Y.droppable,resizeObserverConfig:{updateMeasurementsFor:z,...v}}),{active:vt,activatorEvent:pt,activeNodeRect:jt,attributes:Ot,setNodeRef:Mt,listeners:q,isDragging:I,over:k,setActivatorNodeRef:xt,transform:Nt}=B6({id:h,data:nt,attributes:{...r8,...i},disabled:Y.draggable}),B=C5(lt,Mt),P=!!vt,St=P&&!A&&eg(_)&&eg(D),Ht=!U&&I,Vt=Ht&&St?Nt:null,Z=St?Vt??(m??j)({rects:H,activeNodeRect:jt,activeIndex:_,overIndex:D,index:L}):null,F=eg(_)&&eg(D)?d({id:h,items:E,activeIndex:_,overIndex:D}):L,mt=vt?.id,wt=O.useRef({activeId:mt,items:E,newIndex:F,containerId:C}),W=E!==wt.current.items,gt=e({active:vt,containerId:C,isDragging:I,isSorting:P,id:h,index:L,items:E,newIndex:wt.current.newIndex,previousItems:wt.current.items,previousContainerId:wt.current.containerId,transition:b,wasDragging:wt.current.activeId!=null}),_t=o8({disabled:!gt,index:L,node:Q,rect:G});return O.useEffect(()=>{P&&wt.current.newIndex!==F&&(wt.current.newIndex=F),C!==wt.current.containerId&&(wt.current.containerId=C),E!==wt.current.items&&(wt.current.items=E)},[P,F,C,E]),O.useEffect(()=>{if(mt===wt.current.activeId)return;if(mt!=null&&wt.current.activeId==null){wt.current.activeId=mt;return}const Yt=setTimeout(()=>{wt.current.activeId=mt},50);return()=>clearTimeout(Yt)},[mt]),{active:vt,activeIndex:_,attributes:Ot,data:nt,rect:G,index:L,newIndex:F,items:E,isOver:dt,isSorting:P,isDragging:I,listeners:q,node:Q,overIndex:D,over:k,setNodeRef:B,setActivatorNodeRef:xt,setDroppableNodeRef:lt,setDraggableNodeRef:Mt,transform:_t??Z,transition:At()};function At(){if(_t||W&&wt.current.newIndex===L)return s8;if(!(Ht&&!Xg(pt)||!b)&&(P||gt))return hr.Transition.toString({...b,property:ry})}}function u8(l,e){var i,o;return typeof l=="boolean"?{draggable:l,droppable:!1}:{draggable:(i=l?.draggable)!=null?i:e.draggable,droppable:(o=l?.droppable)!=null?o:e.droppable}}function Dg(l){if(!l)return!1;const e=l.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const c8=[Ue.Down,Ue.Right,Ue.Up,Ue.Left],f8=(l,e)=>{let{context:{active:i,collisionRect:o,droppableRects:u,droppableContainers:d,over:h,scrollableAncestors:m}}=e;if(c8.includes(l.code)){if(l.preventDefault(),!i||!o)return;const v=[];d.getEnabled().forEach(C=>{if(!C||C!=null&&C.disabled)return;const _=u.get(C.id);if(_)switch(l.code){case Ue.Down:o.top<_.top&&v.push(C);break;case Ue.Up:o.top>_.top&&v.push(C);break;case Ue.Left:o.left>_.left&&v.push(C);break;case Ue.Right:o.left<_.left&&v.push(C);break}});const b=Y5({collisionRect:o,droppableRects:u,droppableContainers:v});let E=Xv(b,"id");if(E===h?.id&&b.length>1&&(E=b[1].id),E!=null){const C=d.get(i.id),_=d.get(E),M=_?u.get(_.id):null,A=_?.node.current;if(A&&M&&C&&_){const D=qg(A).some((z,G)=>m[G]!==z),U=uy(C,_),j=d8(C,_),Y=D||!U?{x:0,y:0}:{x:j?o.width-M.width:0,y:j?o.height-M.height:0},L={x:M.left,y:M.top};return Y.x&&Y.y?L:lh(L,Y)}}}};function uy(l,e){return!Dg(l)||!Dg(e)?!1:l.data.current.sortable.containerId===e.data.current.sortable.containerId}function d8(l,e){return!Dg(l)||!Dg(e)||!uy(l,e)?!1:l.data.current.sortable.index<e.data.current.sortable.index}const h8=l=>Array.isArray(l)?l:[],g8=({image:l,enableVectorSearch:e,onDragStart:i,onContextMenu:o,onClick:u})=>{const{t:d}=fl(),{attributes:h,listeners:m,setNodeRef:v,transform:b,transition:E,isDragging:C}=oy({id:l.image}),_={transform:hr.Transform.toString(b),transformOrigin:"top",transition:E,opacity:C?.5:1,zIndex:C?999:"auto"},M=Id(l.image);return N.jsx("div",{ref:v,id:l.image,style:_,...h,...m,className:"mb-4 group overflow-hidden relative rounded hover:z-10 cursor-grab active:cursor-grabbing",children:N.jsxs("div",{draggable:!0,onDragStart:A=>i(A,l),onContextMenu:A=>o(A,l),onClick:()=>u(l),children:[N.jsx("img",{src:Gg(l.image),alt:M||d("gallery.referenceAlt"),className:"w-full bg-neutral-800 transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),N.jsxs("div",{className:"absolute top-2 left-2 z-20 flex flex-col gap-1 pointer-events-none max-w-[calc(100%-2rem)]",children:[M&&N.jsx("div",{className:"px-2 py-1 rounded bg-black/30 backdrop-blur-sm text-white text-[8px] font-normal leading-none truncate w-fit max-w-full",title:M,children:M}),!1]}),e&&!Array.isArray(l.vector)&&N.jsx("div",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-yellow-500 shadow-sm",title:d("gallery.notIndexed")}),N.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:N.jsx("div",{className:"flex flex-wrap gap-1 items-center",children:h8(l.tags).slice(0,5).map(A=>N.jsx(xu,{tag:A},A))})})]})})},m8=async l=>{const e=Array.from(l.items),i=[],o=async u=>{if(u.isFile)try{const d=await new Promise((h,m)=>{u.file(h,m)});i.push(d)}catch(d){console.error("Failed to read file entry",u.name,d)}else if(u.isDirectory)try{const d=u.createReader(),m=await(async()=>{const v=[];let b=[];do b=await new Promise((E,C)=>{d.readEntries(E,C)}),v.push(...b);while(b.length>0);return v})();for(const v of m)await o(v)}catch(d){console.error("Failed to read directory entry",u.name,d)}};for(const u of e){const d=u.webkitGetAsEntry();d&&await o(d)}return i},cy=async l=>{const e=[];for(const i of l)if(i.type.startsWith("image/"))try{const o=i;let u=null;if(o.path){u=`file://${encodeURI(o.path)}`;const d=await fetch(`${kn}/api/collect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:u,name:i.name,filename:i.name})});if(d.ok){const h=await d.json();h.success&&h.meta&&(be.addImage(h.meta),e.push(h.meta))}else console.error("Failed to import",i.name)}else{const d=await new Promise((m,v)=>{const b=new FileReader;b.onload=()=>m(String(b.result||"")),b.onerror=()=>v(new Error("Failed to read file")),b.readAsDataURL(i)}),h=await fetch(`${kn}/api/import-blob`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:d,filename:i.name})});if(h.ok){const m=await h.json();m.success&&m.meta&&(be.addImage(m.meta),e.push(m.meta))}else console.error("Failed to import blob",i.name)}}catch(o){console.error("Error importing file",i.name,o)}return e},m1=({color:l,selected:e,onPress:i,onReplaceWithCurrent:o})=>{const{t:u}=fl(),d=O.useRef(null),h=O.useRef(!1),m=()=>{d.current!==null&&(window.clearTimeout(d.current),d.current=null)};return N.jsx("button",{type:"button",className:["w-5 h-5 rounded transition-all",e?"ring-2":"hover:border-white/60"].join(" "),style:{backgroundColor:l},onPointerDown:v=>{v.preventDefault(),h.current=!1,o&&(m(),d.current=window.setTimeout(()=>{h.current=!0,o()},420))},onPointerUp:v=>{v.preventDefault();const b=h.current;m(),b||i()},onPointerCancel:()=>m(),onPointerLeave:()=>m(),title:o?u("swatch.replaceHint",{color:l}):l})},p1=({value:l,onChange:e,className:i})=>{const o=!l;return N.jsx("div",{className:`relative w-8 h-8 rounded overflow-hidden border border-neutral-700 bg-neutral-800 ${i||""}`,children:N.jsx("input",{type:"color",value:l||"#000000",onChange:u=>e(u.target.value),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 m-0 border-0 cursor-pointer",style:{opacity:o?0:1}})})},p8=({size:l,className:e,children:i})=>N.jsx("div",{className:`pointer-events-none ${e||""}`,style:l?{width:l.width,height:l.height}:void 0,children:i}),v8=248,y8=210,Tp={"high-short":"linear-gradient(135deg, #ffffff 0%, #dddddd 100%)","high-mid":"linear-gradient(135deg, #ffffff 0%, #999999 100%)","high-long":"linear-gradient(135deg, #ffffff 0%, #000000 100%)","mid-short":"linear-gradient(135deg, #bbbbbb 0%, #888888 100%)","mid-mid":"linear-gradient(135deg, #dddddd 0%, #444444 100%)","mid-long":"linear-gradient(135deg, #ffffff 0%, #000000 100%)","low-short":"linear-gradient(135deg, #444444 0%, #222222 100%)","low-mid":"linear-gradient(135deg, #777777 0%, #000000 100%)","low-long":"linear-gradient(135deg, #ffffff 0%, #000000 100%)"},S8={"high-short":"tone.label.highShort","high-mid":"tone.label.highMid","high-long":"tone.label.highLong","mid-short":"tone.label.midShort","mid-mid":"tone.label.midMid","mid-long":"tone.label.midLong","low-short":"tone.label.lowShort","low-mid":"tone.label.lowMid","low-long":"tone.label.lowLong"},b8=(l,e)=>{const i=Math.min(Math.max(12,l),window.innerWidth-v8-12),o=Math.min(Math.max(12,e),window.innerHeight-y8-12);return{x:i,y:o}},jd=l=>Array.isArray(l)?l:[],x8=({value:l,allTags:e,enableVectorSearch:i,onClose:o,onOpenFile:u,onDelete:d,onReindex:h,onOpenDominantColorPicker:m,onUpdateName:v,onAddTag:b,onRemoveTag:E})=>{const{t:C}=fl(),[_,M]=O.useState(""),A=O.useRef(null),H=O.useRef(null);O.useLayoutEffect(()=>{const z=H.current;if(!z)return;const G=z.getBoundingClientRect(),Q=8;let dt=l.y,lt=l.x;dt+G.height+Q>window.innerHeight&&(dt=window.innerHeight-G.height-Q),lt+G.width+Q>window.innerWidth&&(lt=window.innerWidth-G.width-Q),dt<Q&&(dt=Q),lt<Q&&(lt=Q),z.style.top=`${dt}px`,z.style.left=`${lt}px`,z.style.maxHeight=`calc(100vh - ${Q*2}px)`},[l.x,l.y,l.image.image]);const[D,U]=O.useState(()=>Id(l.image.image)),j=O.useMemo(()=>Bg({delay:500},z=>{const G=z.trim();G&&v(G)}),[v]),Y=l.image.dominantColor,L=_.trim().toLowerCase(),nt=e.filter(z=>z.toLowerCase().includes(L)).filter(z=>!jd(l.image.tags).includes(z)).slice(0,20);return N.jsxs("div",{className:"fixed bg-neutral-900 border border-neutral-700 rounded-lg shadow-2xl z-50 py-2 w-64 overflow-hidden text-sm",style:{top:l.y,left:l.x,maxHeight:"calc(100vh - 16px)",overflowY:"auto"},ref:H,onClick:z=>z.stopPropagation(),children:[N.jsxs("div",{className:"px-4 py-2",children:[N.jsx("div",{className:"text-xs text-neutral-400 mb-1",children:C("gallery.contextMenu.nameLabel")}),N.jsx("input",{className:"w-full bg-black/50 border border-neutral-700 rounded px-2 py-1.5 text-white text-xs outline-none focus:border-[var(--brand-color)] focus:ring-1 focus:ring-[var(--brand-color-transparent)] transition-colors",style:{"--brand-color":De.primary,"--brand-color-transparent":Su(De.primary,.5)},value:D,onChange:z=>{const G=z.target.value;U(G),j(G)},onBlur:()=>{j.cancel();const z=D.trim();if(!z){U(Id(l.image.image));return}z!==Id(l.image.image)&&v(z)},onKeyDown:z=>{z.key==="Enter"&&z.currentTarget.blur()},placeholder:C("gallery.contextMenu.imageNamePlaceholder")})]}),N.jsx("div",{className:"border-t border-neutral-800 my-1"}),l.image.pageUrl&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex justify-between",children:[N.jsx("div",{className:"px-4 py-1 text-xs text-neutral-400",children:C("gallery.contextMenu.linkLabel")}),N.jsxs("a",{href:l.image.pageUrl,className:"flex items-center gap-2 px-4 py-1.5 text-neutral-400 hover:text-white hover:bg-neutral-800 truncate transition-colors",title:l.image.pageUrl,onClick:z=>{z.preventDefault();const G=l.image.pageUrl;G&&(window.electron?.openExternal?window.electron.openExternal(G):window.open(G,"_blank","noopener,noreferrer"),o())},children:[N.jsx(i4,{size:12}),N.jsx("span",{className:"truncate text-[10px]",children:(()=>{try{return new URL(l.image.pageUrl||"").hostname}catch{return l.image.pageUrl}})()})]})]}),N.jsx("div",{className:"border-t border-neutral-800 my-1"})]}),N.jsxs("div",{className:"px-4 py-2",children:[N.jsx("div",{className:"text-xs text-neutral-400 mb-1",children:C("gallery.contextMenu.tagsLabel")}),N.jsxs("div",{className:"relative",children:[N.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 px-2 py-1.5 bg-black/50 border rounded transition-colors cursor-text border-neutral-700",style:{"--brand-color":De.primary,"--brand-color-transparent":Su(De.primary,.5)},onClick:()=>A.current?.focus(),children:[jd(l.image.tags).map(z=>N.jsx(xu,{tag:z,size:"sm",isEdit:!0,onClick:()=>E(z)},z)),N.jsx("input",{ref:A,className:"flex-1 bg-transparent text-white text-xs outline-none min-w-[60px] placeholder-neutral-600",placeholder:jd(l.image.tags).length===0?C("gallery.contextMenu.addTagPlaceholder"):"",value:_,onChange:z=>M(z.target.value),onKeyDown:z=>{if(z.key==="Enter")_.trim()&&(b(_),M(""));else if(z.key==="Backspace"&&_===""&&jd(l.image.tags).length>0){const G=jd(l.image.tags);E(G[G.length-1])}}})]}),nt.length>0&&N.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto bg-neutral-800 border border-neutral-700 rounded shadow-lg p-1 flex flex-wrap gap-1",children:nt.map(z=>N.jsx(xu,{tag:z,showColor:!1,onMouseDown:G=>G.preventDefault(),onClick:()=>{b(z),M("")}},z))})]})]}),N.jsx("div",{className:"border-t border-neutral-800 my-1"}),N.jsx("div",{className:"px-4 py-2",children:N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx("div",{className:"text-xs text-neutral-400",children:C("gallery.contextMenu.dominantColorLabel")}),N.jsxs("button",{type:"button",className:"flex items-center gap-2 rounded hover:bg-neutral-800/70 px-2 py-1 transition-colors",onClick:z=>{const G=z.currentTarget.getBoundingClientRect(),Q=b8(G.left,G.bottom);m({x:Q.x,y:Q.y})},title:Y||C("common.notSet"),children:[N.jsx("span",{className:"w-4 h-4 rounded border border-neutral-700",style:{backgroundColor:Y||"transparent"}}),N.jsx("span",{className:"text-xs text-neutral-300",children:Y||C("common.notSet")})]})]})}),N.jsx("div",{className:"border-t border-neutral-800 my-1"}),N.jsx("div",{className:"px-4 py-2",children:N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx("div",{className:"text-xs text-neutral-400",children:C("gallery.contextMenu.toneLabel")}),N.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[N.jsx("span",{className:"w-4 h-4 rounded border border-neutral-700",style:{background:l.image.tone&&Tp[l.image.tone]?Tp[l.image.tone]:"transparent"}}),N.jsx("span",{className:"text-xs text-neutral-300",children:l.image.tone?C(S8[l.image.tone]??"tone.unknown"):C("common.notSet")})]})]})}),N.jsx("div",{className:"border-t border-neutral-800 my-1"}),N.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-white hover:bg-neutral-800 cursor-pointer transition-colors",onClick:u,children:[N.jsx(xv,{size:14}),N.jsx("span",{children:C("gallery.contextMenu.showInFolder")})]}),N.jsx("div",{className:"border-t border-neutral-800 my-1"}),i&&!l.image.vector&&N.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-white hover:bg-neutral-800 cursor-pointer transition-colors",onClick:h,children:[N.jsx(m4,{size:14}),N.jsx("span",{children:C("gallery.contextMenu.indexVector")})]}),N.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 text-red-400 hover:bg-red-900/10 cursor-pointer transition-colors",onClick:d,children:[N.jsx(Cv,{size:14}),N.jsx("span",{children:C("gallery.contextMenu.deleteImage")})]})]})},C8=()=>{const{t:l}=fl();return N.jsxs("div",{className:"flex flex-col items-center justify-center h-full m-4 select-none",children:[N.jsxs("div",{className:"group flex flex-col items-center justify-center w-full max-w-md p-12 border-2 border-dashed border-neutral-800 rounded-3xl bg-neutral-900/30 text-neutral-500 transition-all duration-300 hover:border-[var(--brand-color-40)] hover:bg-[var(--brand-color-5)] hover:scale-[1.02] hover:shadow-2xl hover:shadow-[var(--brand-color-5)]",style:{"--brand-color-40":Su(De.primary,.4),"--brand-color-5":Su(De.primary,.05),"--brand-color-30":Su(De.primary,.3),"--brand-color":De.primary},children:[N.jsxs("div",{className:"relative mb-8",children:[N.jsx("div",{className:"absolute inset-0 bg-[var(--brand-color)] blur-3xl opacity-0 group-hover:opacity-20 transition-opacity duration-500 rounded-full transform scale-150"}),N.jsx(xv,{size:72,className:"relative z-10 text-neutral-700 group-hover:text-[var(--brand-color)] transition-colors duration-300",strokeWidth:1.2})]}),N.jsx("h1",{className:"text-2xl font-bold text-neutral-300 mb-3 group-hover:text-white transition-colors tracking-tight",children:l("envInit.brandTitle")}),N.jsxs("p",{className:"text-neutral-500 text-sm mb-8 text-center max-w-[240px] leading-relaxed group-hover:text-neutral-400 transition-colors",children:[l("gallery.empty.bodyLine1"),N.jsx("br",{}),l("gallery.empty.bodyLine2")]}),N.jsx("div",{className:"flex items-center gap-2 px-5 py-2.5 rounded-full bg-neutral-800/50 border border-neutral-700/50 text-xs font-medium text-neutral-400 group-hover:border-[var(--brand-color-30)] group-hover:text-[var(--brand-color)] group-hover:bg-[var(--brand-color-5)] transition-all",children:N.jsx("span",{className:"uppercase tracking-wide text-[10px]",children:l("gallery.empty.dragHint")})})]}),N.jsxs("div",{className:"mt-12 flex flex-col items-center gap-2 opacity-40 hover:opacity-80 transition-opacity",children:[N.jsx("div",{className:"h-px w-12 bg-neutral-700"}),N.jsx("div",{className:"text-neutral-500 text-[10px] font-mono tracking-[0.2em] uppercase",children:"LookBack"})]})]})};function Cu(l){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(l)}function E8(l,e){if(Cu(l)!="object"||!l)return l;var i=l[Symbol.toPrimitive];if(i!==void 0){var o=i.call(l,e);if(Cu(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(l)}function _8(l){var e=E8(l,"string");return Cu(e)=="symbol"?e:e+""}function Xi(l,e,i){return(e=_8(e))in l?Object.defineProperty(l,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):l[e]=i,l}function Ap(l,e){var i=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);e&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(l,u).enumerable})),i.push.apply(i,o)}return i}function vu(l){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ap(Object(i),!0).forEach(function(o){Xi(l,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(i)):Ap(Object(i)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(i,o))})}return l}function sh(){return sh=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)({}).hasOwnProperty.call(i,o)&&(l[o]=i[o])}return l},sh.apply(null,arguments)}var Km={exports:{}};var Mp;function T8(){return Mp||(Mp=1,(function(l){(function(){var e={}.hasOwnProperty;function i(){for(var d="",h=0;h<arguments.length;h++){var m=arguments[h];m&&(d=u(d,o(m)))}return d}function o(d){if(typeof d=="string"||typeof d=="number")return d;if(typeof d!="object")return"";if(Array.isArray(d))return i.apply(null,d);if(d.toString!==Object.prototype.toString&&!d.toString.toString().includes("[native code]"))return d.toString();var h="";for(var m in d)e.call(d,m)&&d[m]&&(h=u(h,m));return h}function u(d,h){return h?d?d+" "+h:d+h:d}l.exports?(i.default=i,l.exports=i):window.classNames=i})()})(Km)),Km.exports}var A8=T8();const qi=Ug(A8);function M8(l){return!!(l.addonBefore||l.addonAfter)}function w8(l){return!!(l.prefix||l.suffix||l.allowClear)}function wp(l,e,i){var o=e.cloneNode(!0),u=Object.create(l,{target:{value:o},currentTarget:{value:o}});return o.value=i,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(o.selectionStart=e.selectionStart,o.selectionEnd=e.selectionEnd),o.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},u}function Np(l,e,i,o){if(i){var u=e;if(e.type==="click"){u=wp(e,l,""),i(u);return}if(l.type!=="file"&&o!==void 0){u=wp(e,l,o),i(u);return}i(u)}}function N8(l,e){if(l){l.focus(e);var i=e||{},o=i.cursor;if(o){var u=l.value.length;switch(o){case"start":l.setSelectionRange(0,0);break;case"end":l.setSelectionRange(u,u);break;default:l.setSelectionRange(0,u)}}}}var R8=Zt.forwardRef(function(l,e){var i,o,u,d=l.inputElement,h=l.children,m=l.prefixCls,v=l.prefix,b=l.suffix,E=l.addonBefore,C=l.addonAfter,_=l.className,M=l.style,A=l.disabled,H=l.readOnly,D=l.focused,U=l.triggerFocus,j=l.allowClear,Y=l.value,L=l.handleReset,nt=l.hidden,z=l.classes,G=l.classNames,Q=l.dataAttrs,dt=l.styles,lt=l.components,vt=l.onClear,pt=h??d,jt=lt?.affixWrapper||"span",Ot=lt?.groupWrapper||"span",Mt=lt?.wrapper||"span",q=lt?.groupAddon||"span",I=O.useRef(null),k=function(Yt){var ot;(ot=I.current)!==null&&ot!==void 0&&ot.contains(Yt.target)&&U?.()},xt=w8(l),Nt=O.cloneElement(pt,{value:Y,className:qi((i=pt.props)===null||i===void 0?void 0:i.className,!xt&&G?.variant)||null}),B=O.useRef(null);if(Zt.useImperativeHandle(e,function(){return{nativeElement:B.current||I.current}}),xt){var P=null;if(j){var St=!A&&!H&&Y,Ht="".concat(m,"-clear-icon"),Vt=Cu(j)==="object"&&j!==null&&j!==void 0&&j.clearIcon?j.clearIcon:"";P=Zt.createElement("button",{type:"button",tabIndex:-1,onClick:function(Yt){L?.(Yt),vt?.()},onMouseDown:function(Yt){return Yt.preventDefault()},className:qi(Ht,Xi(Xi({},"".concat(Ht,"-hidden"),!St),"".concat(Ht,"-has-suffix"),!!b))},Vt)}var Xt="".concat(m,"-affix-wrapper"),Z=qi(Xt,Xi(Xi(Xi(Xi(Xi({},"".concat(m,"-disabled"),A),"".concat(Xt,"-disabled"),A),"".concat(Xt,"-focused"),D),"".concat(Xt,"-readonly"),H),"".concat(Xt,"-input-with-clear-btn"),b&&j&&Y),z?.affixWrapper,G?.affixWrapper,G?.variant),F=(b||j)&&Zt.createElement("span",{className:qi("".concat(m,"-suffix"),G?.suffix),style:dt?.suffix},P,b);Nt=Zt.createElement(jt,sh({className:Z,style:dt?.affixWrapper,onClick:k},Q?.affixWrapper,{ref:I}),v&&Zt.createElement("span",{className:qi("".concat(m,"-prefix"),G?.prefix),style:dt?.prefix},v),Nt,F)}if(M8(l)){var mt="".concat(m,"-group"),wt="".concat(mt,"-addon"),W="".concat(mt,"-wrapper"),gt=qi("".concat(m,"-wrapper"),mt,z?.wrapper,G?.wrapper),_t=qi(W,Xi({},"".concat(W,"-disabled"),A),z?.group,G?.groupWrapper);Nt=Zt.createElement(Ot,{className:_t,ref:B},Zt.createElement(Mt,{className:gt},E&&Zt.createElement(q,{className:wt},E),Nt,C&&Zt.createElement(q,{className:wt},C)))}return Zt.cloneElement(Nt,{className:qi((o=Nt.props)===null||o===void 0?void 0:o.className,_)||null,style:vu(vu({},(u=Nt.props)===null||u===void 0?void 0:u.style),M),hidden:nt})});function v1(l,e){(e==null||e>l.length)&&(e=l.length);for(var i=0,o=Array(e);i<e;i++)o[i]=l[i];return o}function D8(l){if(Array.isArray(l))return v1(l)}function O8(l){if(typeof Symbol<"u"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function fy(l,e){if(l){if(typeof l=="string")return v1(l,e);var i={}.toString.call(l).slice(8,-1);return i==="Object"&&l.constructor&&(i=l.constructor.name),i==="Map"||i==="Set"?Array.from(l):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v1(l,e):void 0}}function z8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j8(l){return D8(l)||O8(l)||fy(l)||z8()}function H8(l){if(Array.isArray(l))return l}function U8(l,e){var i=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(i!=null){var o,u,d,h,m=[],v=!0,b=!1;try{if(d=(i=i.call(l)).next,e!==0)for(;!(v=(o=d.call(i)).done)&&(m.push(o.value),m.length!==e);v=!0);}catch(E){b=!0,u=E}finally{try{if(!v&&i.return!=null&&(h=i.return(),Object(h)!==h))return}finally{if(b)throw u}}return m}}function B8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ic(l,e){return H8(l)||U8(l,e)||fy(l,e)||B8()}function G8(l,e){if(l==null)return{};var i={};for(var o in l)if({}.hasOwnProperty.call(l,o)){if(e.indexOf(o)!==-1)continue;i[o]=l[o]}return i}function dy(l,e){if(l==null)return{};var i,o,u=G8(l,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(l);for(o=0;o<d.length;o++)i=d[o],e.indexOf(i)===-1&&{}.propertyIsEnumerable.call(l,i)&&(u[i]=l[i])}return u}function Rp(l){var e=O.useRef();e.current=l;var i=O.useCallback(function(){for(var o,u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return(o=e.current)===null||o===void 0?void 0:o.call.apply(o,[e].concat(d))},[]);return i}function L8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Dp=L8()?O.useLayoutEffect:O.useEffect,Y8=function(e,i){var o=O.useRef(!0);Dp(function(){return e(o.current)},i),Dp(function(){return o.current=!1,function(){o.current=!0}},[])},Op=function(e,i){Y8(function(o){if(!o)return e()},i)};function zp(l){var e=O.useRef(!1),i=O.useState(l),o=Ic(i,2),u=o[0],d=o[1];O.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function h(m,v){v&&e.current||d(m)}return[u,h]}function Qm(l){return l!==void 0}function X8(l,e){var i=e||{},o=i.defaultValue,u=i.value,d=i.onChange,h=i.postState,m=zp(function(){return Qm(u)?u:Qm(o)?typeof o=="function"?o():o:typeof l=="function"?l():l}),v=Ic(m,2),b=v[0],E=v[1],C=u!==void 0?u:b,_=h?h(C):C,M=Rp(d),A=zp([C]),H=Ic(A,2),D=H[0],U=H[1];Op(function(){var Y=D[0];b!==Y&&M(b,Y)},[D]),Op(function(){Qm(u)||E(u)},[u]);var j=Rp(function(Y,L){E(Y,L),U([C],L)});return[_,j]}function q8(l,e){var i=Object.assign({},l);return Array.isArray(e)&&e.forEach(function(o){delete i[o]}),i}var V8=["show"];function K8(l,e){return O.useMemo(function(){var i={};e&&(i.show=Cu(e)==="object"&&e.formatter?e.formatter:!!e),i=vu(vu({},i),l);var o=i,u=o.show,d=dy(o,V8);return vu(vu({},d),{},{show:!!u,showFormatter:typeof u=="function"?u:void 0,strategy:d.strategy||function(h){return h.length}})},[l,e])}var Q8=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Z8=O.forwardRef(function(l,e){var i=l.autoComplete,o=l.onChange,u=l.onFocus,d=l.onBlur,h=l.onPressEnter,m=l.onKeyDown,v=l.onKeyUp,b=l.prefixCls,E=b===void 0?"rc-input":b,C=l.disabled,_=l.htmlSize,M=l.className,A=l.maxLength,H=l.suffix,D=l.showCount,U=l.count,j=l.type,Y=j===void 0?"text":j,L=l.classes,nt=l.classNames,z=l.styles,G=l.onCompositionStart,Q=l.onCompositionEnd,dt=dy(l,Q8),lt=O.useState(!1),vt=Ic(lt,2),pt=vt[0],jt=vt[1],Ot=O.useRef(!1),Mt=O.useRef(!1),q=O.useRef(null),I=O.useRef(null),k=function(Jt){q.current&&N8(q.current,Jt)},xt=X8(l.defaultValue,{value:l.value}),Nt=Ic(xt,2),B=Nt[0],P=Nt[1],St=B==null?"":String(B),Ht=O.useState(null),Vt=Ic(Ht,2),Xt=Vt[0],Z=Vt[1],F=K8(U,D),mt=F.max||A,wt=F.strategy(St),W=!!mt&&wt>mt;O.useImperativeHandle(e,function(){var kt;return{focus:k,blur:function(){var Ze;(Ze=q.current)===null||Ze===void 0||Ze.blur()},setSelectionRange:function(Ze,an,ze){var je;(je=q.current)===null||je===void 0||je.setSelectionRange(Ze,an,ze)},select:function(){var Ze;(Ze=q.current)===null||Ze===void 0||Ze.select()},input:q.current,nativeElement:((kt=I.current)===null||kt===void 0?void 0:kt.nativeElement)||q.current}}),O.useEffect(function(){Mt.current&&(Mt.current=!1),jt(function(kt){return kt&&C?!1:kt})},[C]);var gt=function(Jt,Ze,an){var ze=Ze;if(!Ot.current&&F.exceedFormatter&&F.max&&F.strategy(Ze)>F.max){if(ze=F.exceedFormatter(Ze,{max:F.max}),Ze!==ze){var je,dn;Z([((je=q.current)===null||je===void 0?void 0:je.selectionStart)||0,((dn=q.current)===null||dn===void 0?void 0:dn.selectionEnd)||0])}}else if(an.source==="compositionEnd")return;P(ze),q.current&&Np(q.current,Jt,o,ze)};O.useEffect(function(){if(Xt){var kt;(kt=q.current)===null||kt===void 0||kt.setSelectionRange.apply(kt,j8(Xt))}},[Xt]);var _t=function(Jt){gt(Jt,Jt.target.value,{source:"change"})},At=function(Jt){Ot.current=!1,gt(Jt,Jt.currentTarget.value,{source:"compositionEnd"}),Q?.(Jt)},Yt=function(Jt){h&&Jt.key==="Enter"&&!Mt.current&&(Mt.current=!0,h(Jt)),m?.(Jt)},ot=function(Jt){Jt.key==="Enter"&&(Mt.current=!1),v?.(Jt)},ht=function(Jt){jt(!0),u?.(Jt)},Kt=function(Jt){Mt.current&&(Mt.current=!1),jt(!1),d?.(Jt)},_e=function(Jt){P(""),k(),q.current&&Np(q.current,Jt,o)},le=W&&"".concat(E,"-out-of-range"),Oe=function(){var Jt=q8(l,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Zt.createElement("input",sh({autoComplete:i},Jt,{onChange:_t,onFocus:ht,onBlur:Kt,onKeyDown:Yt,onKeyUp:ot,className:qi(E,Xi({},"".concat(E,"-disabled"),C),nt?.input),style:z?.input,ref:q,size:_,type:Y,onCompositionStart:function(an){Ot.current=!0,G?.(an)},onCompositionEnd:At}))},Xe=function(){var Jt=Number(mt)>0;if(H||F.show){var Ze=F.showFormatter?F.showFormatter({value:St,count:wt,maxLength:mt}):"".concat(wt).concat(Jt?" / ".concat(mt):"");return Zt.createElement(Zt.Fragment,null,F.show&&Zt.createElement("span",{className:qi("".concat(E,"-show-count-suffix"),Xi({},"".concat(E,"-show-count-has-suffix"),!!H),nt?.count),style:vu({},z?.count)},Ze),H)}return null};return Zt.createElement(R8,sh({},dt,{prefixCls:E,className:qi(M,le),handleReset:_e,value:St,focused:pt,triggerFocus:k,suffix:Xe(),disabled:C,classes:L,classNames:nt,styles:z,ref:I}),Oe())});const k8=({tag:l,onClick:e,onRename:i})=>{const{attributes:o,listeners:u,setNodeRef:d,transform:h,transition:m,isDragging:v}=oy({id:l}),b=Ha(ve),[E,C]=O.useState(!1),[_,M]=O.useState(l),A={transform:v?void 0:hr.Transform.toString(h),transformOrigin:v?void 0:"left",transition:v?void 0:m,opacity:v?0:1,cursor:E?"text":"grab",willChange:"transform"},H=Y=>{Y.stopPropagation(),i&&(C(!0),M(l))},D=Y=>{i&&(Y.preventDefault(),Y.stopPropagation(),C(!0),M(l))},U=()=>{C(!1);const Y=_.trim();Y&&Y!==l?i?.(l,Y):M(l)},j=Y=>{Y.key==="Enter"?U():Y.key==="Escape"&&(C(!1),M(l))};if(E){const Y=b.tagColors[l],L=typeof Y=="string"?Y.trim():"",nt=L.length>0?L:De.primary;return N.jsx("div",{ref:d,style:A,className:"flex-shrink-0",onMouseDown:z=>z.stopPropagation(),children:N.jsx("input",{autoFocus:!0,className:"bg-neutral-800 text-white text-xs px-2 py-1 rounded outline-none border min-w-[60px]",style:{borderColor:nt,backgroundColor:L.length>0?`${L}20`:void 0},value:_,onChange:z=>M(z.target.value),onBlur:U,onKeyDown:j,onClick:z=>z.stopPropagation()})})}return N.jsx("div",{id:`tag-${l}`,ref:d,style:A,...o,...u,className:"flex-shrink-0",onDoubleClick:H,onContextMenu:D,children:N.jsx(xu,{tag:l,size:"md",onClick:e})})},hy=280,J8=["high","mid","low"],I8=["short","mid","long"],F8=[["high-short","high-mid","high-long"],["mid-short","mid-mid","mid-long"],["low-short","low-mid","low-long"]],jp={"high-short":"linear-gradient(135deg, #ffffff 0%, #dddddd 100%)","high-mid":"linear-gradient(135deg, #ffffff 0%, #999999 100%)","high-long":"linear-gradient(135deg, #ffffff 0%, 70%, #000000 100%)","mid-short":"linear-gradient(135deg, #bbbbbb 0%, #888888 100%)","mid-mid":"linear-gradient(135deg, #dddddd 0%, #444444 100%)","mid-long":"linear-gradient(135deg, #ffffff 0%, #000000 100%)","low-short":"linear-gradient(135deg, #444444 0%, #222222 100%)","low-mid":"linear-gradient(135deg, #777777 0%, #000000 100%)","low-long":"linear-gradient(135deg, #ffffff 0%, 30%, #000000 100%)"},Hp={"high-short":"tone.label.highShort","high-mid":"tone.label.highMid","high-long":"tone.label.highLong","mid-short":"tone.label.midShort","mid-mid":"tone.label.midMid","mid-long":"tone.label.midLong","low-short":"tone.label.lowShort","low-mid":"tone.label.lowMid","low-long":"tone.label.lowLong"},W8=l=>l==="high"?"tone.key.high":l==="mid"?"tone.key.mid":"tone.key.low",P8=l=>l==="short"?"tone.range.short":l==="mid"?"tone.range.mid":"tone.range.long",$8=(l,e)=>{const i=Math.min(Math.max(12,l),window.innerWidth-hy-12),o=Math.max(12,e);return{x:i,y:o}},tS=({loading:l,allTags:e})=>{const i=Ha(re),o=Ha(ve),{t:u}=fl(),[d,h]=O.useState(i.searchQuery),m=O.useMemo(()=>Bg({delay:300},C=>{be.setSearchQuery(C)}),[]),[v,b]=O.useState(null),E=async(C,_)=>{try{await ja("/api/rename-tag",{oldTag:C,newTag:_});const M=i.allImages.map(A=>{if(A.tags&&A.tags.includes(C)){const H=A.tags.map(U=>U===C?_:U),D=Array.from(new Set(H));return{...A,tags:D}}return A});if(be.setAllImages(M),i.searchTags.includes(C)){const A=i.searchTags.map(H=>H===C?_:H);be.setSearchTags(A)}if(i.tagSortOrder&&i.tagSortOrder.includes(C)){const A=i.tagSortOrder.map(H=>H===C?_:H);be.setTagSortOrder(A)}if(Object.prototype.hasOwnProperty.call(o.tagColors,C)){const A=o.tagColors[C];ae.clearTagColor(C),ae.setTagColor(_,A)}ae.pushToast({key:"toast.tagRenamed"},"success")}catch(M){console.error(M),ae.pushToast({key:"toast.tagRenameFailed"},"error")}};return N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"p-4 border-b border-neutral-800",children:[N.jsx("div",{className:"relative",children:N.jsxs("div",{className:"flex items-center gap-2 w-full bg-neutral-800 text-white px-3 py-2 rounded text-sm focus-within:ring-1 focus-within:ring-[var(--brand-color)]",style:{"--brand-color":De.primary},children:[N.jsx(v4,{className:"text-neutral-500 shrink-0",size:16}),N.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 flex-1 min-w-0",children:[i.searchTags.map(C=>N.jsx(xu,{tag:C,isEdit:!0,showColor:!1,onClick:()=>be.setSearchTags(i.searchTags.filter(_=>_!==C))},C)),N.jsx(Z8,{placeholder:u("gallery.searchPlaceholder"),className:"flex-1 bg-transparent text-white text-sm outline-none min-w-[80px] placeholder-neutral-500",value:d,onChange:C=>{const _=C.target.value;h(_),m(_)},onKeyDown:C=>{if(C.key==="Backspace"&&d===""&&i.searchTags.length>0){const _=i.searchTags.slice(0,-1);be.setSearchTags(_)}}})]}),l&&N.jsx("div",{className:"w-4 h-4 rounded-full animate-spin shrink-0",style:{border:`2px solid ${De.primary}`,borderTopColor:"transparent"}}),N.jsx("button",{type:"button",className:"w-5 h-5 rounded ring-2 transition-colors shrink-0 overflow-hidden",style:{"--tw-ring-color":i.searchColor||i.searchTone?Su(i.searchColor||"#ffffff",.2):"rgba(255, 255, 255, 0.1)",backgroundColor:i.searchColor||"transparent",backgroundImage:i.searchTone?jp[i.searchTone]:void 0,backgroundBlendMode:"overlay"},title:(()=>{const C=i.searchTone?Hp[i.searchTone]:void 0,_=C?u(C):"";return i.searchColor&&_?u("gallery.filterSummary.colorTone",{color:i.searchColor,tone:_}):i.searchColor?u("gallery.filterSummary.color",{color:i.searchColor}):_?u("gallery.filterSummary.tone",{tone:_}):u("gallery.filter")})(),onClick:C=>{C.stopPropagation();const _=C.currentTarget.getBoundingClientRect(),M=$8(_.left,_.bottom+16);b({x:M.x,y:M.y})}}),(i.searchTags.length>0||d.trim()||i.searchColor||i.searchTone)&&N.jsx("button",{className:"w-4 inline-flex items-center justify-center rounded hover:bg-neutral-700/70 text-neutral-400 hover:text-white transition-colors shrink-0",onClick:()=>{h(""),be.setSearchQuery(""),be.setSearchTags([]),be.setSearchColor(null),be.setSearchTone(null)},title:u("common.clear"),children:N.jsx(mg,{size:14})})]})}),e.length>0&&N.jsx(sy,{items:e,strategy:Qg,children:N.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:e.map(C=>N.jsx(k8,{tag:C,onClick:()=>{const M=i.searchTags.includes(C)?i.searchTags.filter(A=>A!==C):[...i.searchTags,C];be.setSearchTags(M)},onRename:E},C))})})]}),v&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-[60]",onMouseDown:()=>b(null)}),N.jsxs("div",{className:"fixed z-[61] w-62 bg-neutral-900/95 border border-neutral-700/80 rounded-xl shadow-2xl p-3 backdrop-blur",style:{top:v.y,left:v.x,width:hy},onMouseDown:C=>C.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold",children:u("gallery.colorFilter.title")}),N.jsx("button",{type:"button",className:"text-xs text-neutral-400 hover:text-white transition-colors",onClick:()=>be.setSearchColor(null),children:u("common.clear")})]}),N.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[N.jsx(p1,{value:i.searchColor,onChange:C=>be.setSearchColor(C)}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold truncate",children:u("gallery.colorFilter.selected")}),N.jsx("div",{className:"text-xs text-neutral-500 truncate",children:i.searchColor||u("common.none")})]})]}),N.jsx("div",{className:"mt-3 grid grid-cols-9 gap-1.5",children:o.colorSwatches.map((C,_)=>{const M=i.searchColor||"#39c5bb";return N.jsx(m1,{color:C,selected:!!i.searchColor&&C.toLowerCase()===i.searchColor.toLowerCase(),onPress:()=>{i.searchColor&&i.searchColor.toLowerCase()===C.toLowerCase()?be.setSearchColor(null):be.setSearchColor(C)},onReplaceWithCurrent:()=>ae.setColorSwatch(_,M)},`${C}_${_}`)})}),N.jsxs("div",{className:"mt-4 pt-3 border-t border-neutral-700/50",children:[N.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold",children:u("gallery.toneFilter.title")}),i.searchTone&&N.jsx("button",{type:"button",className:"text-xs text-neutral-400 hover:text-white transition-colors",onClick:()=>be.setSearchTone(null),children:u("common.clear")})]}),N.jsxs("div",{className:"grid grid-cols-[auto_1fr_1fr_1fr] gap-1.5 items-center",children:[N.jsx("div",{className:"text-[10px] text-neutral-500 font-medium text-right pr-1"}),I8.map(C=>N.jsx("div",{className:"text-[10px] text-neutral-500 font-medium text-center",children:u(P8(C))},C)),F8.map((C,_)=>N.jsxs(Zt.Fragment,{children:[N.jsx("div",{className:"text-[10px] text-neutral-500 font-medium text-right pr-1",children:u(W8(J8[_]))}),C.map(M=>N.jsx("button",{type:"button",className:`h-6 rounded overflow-hidden relative ring-1 transition-all ${i.searchTone===M?"ring-white ring-offset-1 ring-offset-neutral-900 z-10":"ring-white/10 hover:ring-white/30"}`,style:{background:jp[M]},title:u(Hp[M]??"tone.unknown"),onClick:()=>be.setSearchTone(M===i.searchTone?null:M)},M))]},_))]})]})]})]})]})},Up=l=>Array.isArray(l)?l:[],y1=248,Bp=(l,e)=>{const i=Math.min(Math.max(12,l),window.innerWidth-y1-12),o=Math.max(12,e);return{x:i,y:o}},eS=(l,e,i)=>{if(l.length>0&&"score"in l[0])return[...l].sort((d,h)=>{const m=d.score||0;return(h.score||0)-m});if(e==="createdAtDesc")return[...l].sort((d,h)=>h.createdAt-d.createdAt);if(!i.length||!l.length)return l;const u=new Map(i.map((d,h)=>[d.image,h]));return[...l].sort((d,h)=>{const m=u.get(d.image),v=u.get(h.image);return m===void 0&&v===void 0?0:m===void 0?1:v===void 0?-1:m-v})},nS=()=>{const l=Ha(re),e=Ha(ve),{t:i}=fl(),[o,u]=O.useState(!1),[d,h]=O.useState(!1);O.useEffect(()=>{fetch(`${kn}/api/settings`).then(W=>W.json()).then(W=>{W&&typeof W.enableVectorSearch=="boolean"&&h(W.enableVectorSearch)}).catch(W=>console.error("Failed to load settings in Gallery",W))},[]);const[m,v]=O.useState(null),[b,E]=O.useState(null),[C,_]=O.useState(null),[M,A]=O.useState(null),H=O.useMemo(()=>m&&b?{size:b,className:"rounded overflow-hidden shadow-2xl opacity-90",content:N.jsx("img",{src:Gg(m.image),className:"w-full h-full object-cover bg-neutral-800",alt:""})}:C?{size:M,className:"opacity-95",content:N.jsx(xu,{tag:C,showColor:!1,size:"md"})}:null,[m,b,C,M]),[D,U]=O.useState(null),[j,Y]=O.useState(null),[L,nt]=O.useState(null),z=O.useRef(null),G=O.useRef(""),Q=O.useRef(null),[dt,lt]=O.useState(2),vt=U5(fp(V1,{activationConstraint:{distance:8}}),fp(X1,{coordinateGetter:f8}));O.useEffect(()=>b5(({tag:W,x:gt,y:_t})=>{const At=Bp(gt,_t+8);Y({tag:W,x:At.x,y:At.y})}),[]),O.useEffect(()=>{if(!z.current)return;const W=new ResizeObserver(gt=>{for(const _t of gt){const At=_t.contentRect.width,Yt=Math.max(1,Math.floor(At/120));lt(Yt)}});return W.observe(z.current),()=>W.disconnect()},[]),O.useEffect(()=>{const W=window.electron?.onSearchUpdated(gt=>{if(!gt||typeof gt!="object")return;const{searchId:_t,results:At}=gt;typeof _t=="string"&&_t===G.current&&Array.isArray(At)&&(be.setImages(At),Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null),u(!1))});return()=>W?.()},[]),O.useEffect(()=>{const W=new AbortController;return(async()=>{Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null),u(!1);const _t=l.searchQuery.trim(),At=l.searchTags,Yt=At.length>0,ot=l.searchColor,ht=!!ot,Kt=l.searchTone;if(!_t&&!Yt&&!ht&&!!!Kt){G.current="",Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null),u(!1),be.setImages(l.allImages);return}try{const le=!!_t,Oe=`search_${Date.now()}_${Math.random().toString(16).slice(2)}`;G.current=Oe,Q.current=window.setTimeout(()=>{G.current===Oe&&!W.signal.aborted&&u(!0)},100);const Xe=await fetch(`${kn}/api/search`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchId:Oe,query:_t,tags:At,tagMatch:Yt?"strict":"contains",color:ot,tone:Kt,limit:100,threshold:e.vectorSearchThreshold}),signal:W.signal});if(!Xe.ok){if(Xe.status===409){const Jt=await Xe.json().catch(()=>null);if(Jt&&Jt.code==="STORAGE_INCOMPATIBLE"){ae.pushToast({key:"toast.storageIncompatible"},"error");return}}throw new Error(`Search failed with status ${Xe.status}`)}const kt=await Xe.json();Array.isArray(kt)&&be.setImages(kt),!le&&!W.signal.aborted&&(Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null),u(!1))}catch{if(W.signal.aborted)return;Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null),u(!1)}})(),()=>{W.abort(),Q.current!==null&&(window.clearTimeout(Q.current),Q.current=null)}},[l.searchQuery,l.searchTags,l.searchColor,l.searchTone,l.allImages,e.vectorSearchThreshold]),O.useEffect(()=>{},[]);const pt=O.useMemo(()=>{const W=new Set;l.allImages.forEach(Yt=>{Up(Yt.tags).forEach(ot=>W.add(ot))});const gt=Array.from(W.values()),_t=l.tagSortOrder||[],At=new Map(_t.map((Yt,ot)=>[Yt,ot]));return gt.sort((Yt,ot)=>{const ht=At.has(Yt)?At.get(Yt):999999,Kt=At.has(ot)?At.get(ot):999999;return ht!==Kt?ht-Kt:Yt.localeCompare(ot)})},[l.allImages,l.tagSortOrder]);O.useEffect(()=>{if(l.searchTags.length===0)return;const W=l.searchTags.filter(gt=>pt.includes(gt));W.length!==l.searchTags.length&&be.setSearchTags(W)},[pt,l.allImages,l.searchTags]);const jt=O.useMemo(()=>eS(l.images,l.gallerySort,l.allImages),[l.images,l.gallerySort,l.allImages]),Ot=W=>{const{active:gt}=W,_t=gt.id;if(pt.includes(_t)){_(_t);const Yt=W.active.rect.current,ot=Yt?.initial?.width??Yt?.translated?.width,ht=Yt?.initial?.height??Yt?.translated?.height;A(typeof ot=="number"&&typeof ht=="number"?{width:ot,height:ht}:null);return}const At=l.allImages.find(Yt=>Yt.image===gt.id);if(At){v(At);const Yt=document.getElementById(gt.id);Yt&&E({width:Yt.offsetWidth,height:Yt.offsetHeight})}},Mt=W=>{const{active:gt,over:_t,activatorEvent:At,delta:Yt}=W;v(null),E(null),_(null),A(null);const ot=z.current;let ht=0,Kt=0,_e=!1;if(At instanceof MouseEvent)ht=At.clientX+Yt.x,Kt=At.clientY+Yt.y,_e=!0;else if(window.TouchEvent&&At instanceof TouchEvent){const le=At.changedTouches[0];le&&(ht=le.clientX+Yt.x,Kt=le.clientY+Yt.y,_e=!0)}if(ot&&_e){const le=ot.getBoundingClientRect();if(ht>le.right){const Oe=l.allImages.find(Xe=>Xe.image===gt.id);if(Oe){window.dispatchEvent(new CustomEvent("canvas-drop-request",{detail:{image:Oe,x:ht,y:Kt}}));return}}}if(!(!_t||gt.id===_t.id))if(pt.includes(gt.id)){const le=pt.indexOf(gt.id),Oe=pt.indexOf(_t.id);if(le===-1||Oe===-1)return;const Xe=Rg(pt,le,Oe);be.setTagSortOrder(Xe)}else{const le=l.allImages.findIndex(Jt=>Jt.image===gt.id),Oe=l.allImages.findIndex(Jt=>Jt.image===_t.id);if(le===-1||Oe===-1)return;const Xe=[...l.allImages],kt=Rg(Xe,le,Oe);be.reorderImages(kt)}},q=(W,gt)=>{W.dataTransfer.setData("application/json",JSON.stringify(gt))},I=(W,gt)=>{W.preventDefault(),U({x:W.clientX,y:W.clientY,image:gt})},k=()=>U(null),xt=async(W,gt)=>{try{await ja("/api/update-dominant-color",{image:W.image,dominantColor:gt}),be.updateImage(W.image,{dominantColor:gt}),D&&D.image.image===W.image&&U({...D,image:{...W,dominantColor:gt}})}catch(_t){console.error(_t),ae.pushToast({key:"toast.updateDominantColorFailed"},"error")}},Nt=O.useRef(xt);Nt.current=xt;const B=O.useMemo(()=>Bg({delay:150},(W,gt)=>{const _t=re.allImages.find(At=>At.image===W)||re.images.find(At=>At.image===W)||D?.image;!_t||_t.image!==W||Nt.current(_t,gt)}),[D]),P=async(W,gt)=>{const _t=gt.trim();if(_t)try{const At=await ja("/api/update-name",{image:W.image,name:_t});At&&At.success&&At.meta?(be.updateImage(W.image,At.meta),D&&D.image.image===W.image&&U({...D,image:At.meta})):ae.pushToast({key:"toast.updateNameFailed"},"error")}catch(At){console.error(At),ae.pushToast({key:"toast.updateNameFailed"},"error")}},St=async()=>{if(D){try{await ja("/api/delete",{image:D.image.image}),be.deleteImage(D.image.image),ae.pushToast({key:"toast.imageDeleted"},"success")}catch(W){console.error(W),ae.pushToast({key:"toast.deleteImageFailed"},"error")}k()}},Ht=async()=>{if(D){try{const W=await ja("/api/reindex",{image:D.image.image});W&&W.success&&W.meta?(be.updateImage(D.image.image,{vector:W.meta.vector}),ae.pushToast({key:"toast.vectorIndexed"},"success")):ae.pushToast({key:"toast.vectorIndexFailed"},"error")}catch(W){console.error(W),ae.pushToast({key:"toast.vectorIndexFailed"},"error")}k()}},Vt=async()=>{if(D){try{await ja("/api/open-in-folder",{image:D.image.image})}catch(W){console.error(W),ae.pushToast({key:"toast.openFileFailed"},"error")}k()}},Xt=async W=>{try{await ja("/api/open-with-default",{image:W.image})}catch(gt){console.error(gt),ae.pushToast({key:"toast.openFileFailed"},"error")}},Z=async(W,gt)=>{const _t=gt.trim();if(!_t)return;const At=Up(W.tags);if(At.includes(_t))return;const Yt=[...At,_t];try{await ja("/api/update-tags",{image:W.image,tags:Yt}),be.updateImage(W.image,{tags:Yt}),D&&D.image.image===W.image&&U({...D,image:{...W,tags:Yt}})}catch(ot){console.error(ot)}},F=async W=>{if(!D)return;const gt=D.image,_t=gt.tags.filter(At=>At!==W);try{await ja("/api/update-tags",{image:gt.image,tags:_t}),be.updateImage(gt.image,{tags:_t}),U({...D,image:{...gt,tags:_t}})}catch(At){console.error(At)}},mt=async W=>{W.preventDefault(),W.stopPropagation();const gt=await m8(W.dataTransfer);gt.length>0&&await cy(gt)},wt=Zt.useCallback(W=>{const{pointerCoordinates:gt}=W;if(z.current&&gt){const _t=z.current.getBoundingClientRect();if(gt.x>_t.right-20)return[]}return L5(W)},[]);return N.jsxs("div",{className:"flex flex-col h-full bg-neutral-900 border-r border-neutral-800 flex-shrink-0 relative transition-colors",style:{width:e.sidebarWidth},onDrop:mt,onDragOver:W=>W.preventDefault(),onDragEnter:W=>W.preventDefault(),onClick:()=>ae.setActiveArea("gallery"),onFocus:()=>ae.setActiveArea("gallery"),children:[N.jsxs(j6,{sensors:vt,collisionDetection:wt,onDragStart:Ot,onDragEnd:Mt,children:[N.jsx(tS,{loading:o,allTags:pt}),N.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-4 scrollbar-hide",ref:z,onDrop:mt,onDragOver:W=>W.preventDefault(),onDragEnter:W=>W.preventDefault(),children:l.allImages.length===0?N.jsx(C8,{}):N.jsx(sy,{items:jt.map(W=>W.image),strategy:Qg,children:N.jsx(Hv,{breakpointCols:dt,className:"flex w-auto -ml-4",columnClassName:"pl-4 bg-clip-padding",children:jt.map(W=>N.jsx(g8,{image:W,enableVectorSearch:d,onDragStart:q,onContextMenu:gt=>{I(gt,W)},onClick:Xt},W.image))})})}),N.jsx($6,{children:H?N.jsx(p8,{size:H.size,className:H.className,children:H.content}):null})]}),D&&N.jsx("div",{className:"fixed inset-0 z-40",onClick:k,onContextMenu:W=>{W.preventDefault(),k()}}),D&&N.jsx(x8,{value:D,allTags:pt,enableVectorSearch:d,onClose:k,onOpenFile:Vt,onDelete:St,onReindex:Ht,onOpenDominantColorPicker:({x:W,y:gt})=>{const _t=Bp(W,gt+16),At=D.image.dominantColor||De.primary;nt({image:D.image.image,x:_t.x,y:_t.y,draft:At})},onUpdateName:W=>P(D.image,W),onAddTag:W=>Z(D.image,W),onRemoveTag:F},D.image.image),j&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-[60]",onMouseDown:()=>Y(null)}),N.jsxs("div",{className:"fixed z-[61] w-62 bg-neutral-900/95 border border-neutral-700/80 rounded-xl shadow-2xl p-3 backdrop-blur",style:{top:j.y,left:j.x,width:y1},onMouseDown:W=>W.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx(xu,{tag:j.tag,className:"truncate max-w-[150px]"}),N.jsx("button",{className:"text-xs text-neutral-400 hover:text-white transition-colors",onClick:()=>ae.clearTagColor(j.tag),children:i("common.clear")})]}),N.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[N.jsx(p1,{value:e.tagColors[j.tag]||De.primary,onChange:W=>ae.setTagColor(j.tag,W)}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold truncate",children:i("common.color")}),N.jsx("div",{className:"text-xs text-neutral-500 truncate",children:e.tagColors[j.tag]||i("common.notSet")})]})]}),N.jsx("div",{className:"mt-3 grid grid-cols-9 gap-1.5",children:e.colorSwatches.map((W,gt)=>{const _t=e.tagColors[j.tag]||De.primary;return N.jsx(m1,{color:W,selected:W.toLowerCase()===_t.toLowerCase(),onPress:()=>ae.setTagColor(j.tag,W),onReplaceWithCurrent:()=>ae.setColorSwatch(gt,_t)},`${W}_${gt}`)})})]})]}),L&&D&&N.jsxs(N.Fragment,{children:[N.jsx("div",{className:"fixed inset-0 z-[60]",onMouseDown:()=>{k(),B.cancel(),nt(null)}}),N.jsxs("div",{className:"fixed z-[61] w-62 bg-neutral-900/95 border border-neutral-700/80 rounded-xl shadow-2xl p-3 backdrop-blur",style:{top:L.y,left:L.x,width:y1},onMouseDown:W=>W.stopPropagation(),children:[N.jsxs("div",{className:"flex items-center justify-between gap-2",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold",children:i("gallery.dominantColor.title")}),N.jsx("button",{type:"button",className:"text-xs text-neutral-400 hover:text-white transition-colors",onClick:async()=>{B.cancel(),await xt(D.image,null),nt(null)},children:i("common.clear")})]}),N.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[N.jsx(p1,{value:L.draft,onChange:W=>{nt({...L,draft:W}),B(L.image,W)}}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("div",{className:"text-xs text-neutral-200 font-semibold truncate",children:i("gallery.colorFilter.selected")}),N.jsx("div",{className:"text-xs text-neutral-500 truncate",children:L.draft})]})]}),N.jsx("div",{className:"mt-3 grid grid-cols-9 gap-1.5",children:e.colorSwatches.map((W,gt)=>N.jsx(m1,{color:W,selected:W.toLowerCase()===L.draft.toLowerCase(),onPress:()=>{B.cancel(),nt({...L,draft:W});const _t=re.allImages.find(At=>At.image===L.image)||re.images.find(At=>At.image===L.image)||D.image;!_t||_t.image!==L.image||xt(_t,W)},onReplaceWithCurrent:()=>ae.setColorSwatch(gt,L.draft)},`${W}_${gt}`))})]})]})]})},gy=["shift","alt","meta","mod","ctrl","control"],aS={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function yo(l){return(aS[l.trim()]||l.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function my(l){return gy.includes(l)}function Zm(l,e=","){return l.toLowerCase().split(e)}function km(l,e="+",i=">",o=!1,u){let d=[],h=!1;l=l.trim(),l.includes(i)?(h=!0,d=l.toLocaleLowerCase().split(i).map(b=>yo(b))):d=l.toLocaleLowerCase().split(e).map(b=>yo(b));const m={alt:d.includes("alt"),ctrl:d.includes("ctrl")||d.includes("control"),shift:d.includes("shift"),meta:d.includes("meta"),mod:d.includes("mod"),useKey:o},v=d.filter(b=>!gy.includes(b));return{...m,keys:v,description:u,isSequence:h,hotkey:l}}typeof document<"u"&&(document.addEventListener("keydown",l=>{l.code!==void 0&&py([yo(l.code)])}),document.addEventListener("keyup",l=>{l.code!==void 0&&vy([yo(l.code)])})),typeof window<"u"&&(window.addEventListener("blur",()=>{dr.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{dr.clear()},0)}));const dr=new Set;function Q1(l){return Array.isArray(l)}function lS(l,e=","){return(Q1(l)?l:l.split(e)).every(i=>dr.has(i.trim().toLowerCase()))}function py(l){const e=Array.isArray(l)?l:[l];dr.has("meta")&&dr.forEach(i=>!my(i)&&dr.delete(i.toLowerCase())),e.forEach(i=>dr.add(i.toLowerCase()))}function vy(l){const e=Array.isArray(l)?l:[l];l==="meta"?dr.clear():e.forEach(i=>dr.delete(i.toLowerCase()))}function iS(l,e,i){(typeof i=="function"&&i(l,e)||i===!0)&&l.preventDefault()}function sS(l,e,i){return typeof i=="function"?i(l,e):i===!0||i===void 0}const rS=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function oS(l){return yy(l,rS)}function yy(l,e=!1){const{target:i,composed:o}=l;let u,d;return uS(i)&&o?(u=l.composedPath()[0]&&l.composedPath()[0].tagName,d=l.composedPath()[0]&&l.composedPath()[0].role):(u=i&&i.tagName,d=i&&i.role),Q1(e)?!!(u&&e&&e.some(h=>h.toLowerCase()===u.toLowerCase()||h===d)):!!(u&&e&&e)}function uS(l){return!!l.tagName&&!l.tagName.startsWith("-")&&l.tagName.includes("-")}function cS(l,e){return l.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?l.some(i=>e.includes(i))||l.includes("*"):!0}const fS=(l,e,i=!1)=>{const{alt:o,meta:u,mod:d,shift:h,ctrl:m,keys:v,useKey:b}=e,{code:E,key:C,ctrlKey:_,metaKey:M,shiftKey:A,altKey:H}=l,D=yo(E);if(b&&v?.length===1&&v.includes(C))return!0;if(!v?.includes(D)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(D))return!1;if(!i){if(o!==H&&D!=="alt"||h!==A&&D!=="shift")return!1;if(d){if(!M&&!_)return!1}else if(u!==M&&D!=="meta"&&D!=="os"||m!==_&&D!=="ctrl"&&D!=="control")return!1}return v&&v.length===1&&v.includes(D)?!0:v?lS(v):!v},dS=O.createContext(void 0),hS=()=>O.useContext(dS);function Sy(l,e){return l&&e&&typeof l=="object"&&typeof e=="object"?Object.keys(l).length===Object.keys(e).length&&Object.keys(l).reduce((i,o)=>i&&Sy(l[o],e[o]),!0):l===e}const gS=O.createContext({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),mS=()=>O.useContext(gS);function pS(l){const e=O.useRef(void 0);return Sy(e.current,l)||(e.current=l),e.current}const Gp=l=>{l.stopPropagation(),l.preventDefault(),l.stopImmediatePropagation()},vS=typeof window<"u"?O.useLayoutEffect:O.useEffect;function Lp(l,e,i,o){const u=O.useRef(null),d=O.useRef(!1),h=Array.isArray(i)?Array.isArray(o)?void 0:o:i,m=Q1(l)?l.join(h?.delimiter):l,v=Array.isArray(i)?i:Array.isArray(o)?o:void 0,b=O.useCallback(e,v??[]),E=O.useRef(b);v?E.current=b:E.current=e;const C=pS(h),{activeScopes:_}=mS(),M=hS();return vS(()=>{if(C?.enabled===!1||!cS(_,C?.scopes))return;let A=[],H;const D=(L,nt=!1)=>{if(!(oS(L)&&!yy(L,C?.enableOnFormTags))){if(u.current!==null){const z=u.current.getRootNode();if((z instanceof Document||z instanceof ShadowRoot)&&z.activeElement!==u.current&&!u.current.contains(z.activeElement)){Gp(L);return}}L.target?.isContentEditable&&!C?.enableOnContentEditable||Zm(m,C?.delimiter).forEach(z=>{if(z.includes(C?.splitKey??"+")&&z.includes(C?.sequenceSplitKey??">")){console.warn(`Hotkey ${z} contains both ${C?.splitKey??"+"} and ${C?.sequenceSplitKey??">"} which is not supported.`);return}const G=km(z,C?.splitKey,C?.sequenceSplitKey,C?.useKey,C?.description);if(G.isSequence){H=setTimeout(()=>{A=[]},C?.sequenceTimeoutMs??1e3);const Q=G.useKey?L.key:yo(L.code);if(my(Q.toLowerCase()))return;A.push(Q);const dt=G.keys?.[A.length-1];if(Q!==dt){A=[],H&&clearTimeout(H);return}A.length===G.keys?.length&&(E.current(L,G),H&&clearTimeout(H),A=[])}else if(fS(L,G,C?.ignoreModifiers)||G.keys?.includes("*")){if(C?.ignoreEventWhen?.(L)||nt&&d.current)return;if(iS(L,G,C?.preventDefault),!sS(L,G,C?.enabled)){Gp(L);return}E.current(L,G),nt||(d.current=!0)}})}},U=L=>{L.code!==void 0&&(py(yo(L.code)),(C?.keydown===void 0&&C?.keyup!==!0||C?.keydown)&&D(L))},j=L=>{L.code!==void 0&&(vy(yo(L.code)),d.current=!1,C?.keyup&&D(L,!0))},Y=u.current||h?.document||document;return Y.addEventListener("keyup",j,h?.eventListenerOptions),Y.addEventListener("keydown",U,h?.eventListenerOptions),M&&Zm(m,C?.delimiter).forEach(L=>M.addHotkey(km(L,C?.splitKey,C?.sequenceSplitKey,C?.useKey,C?.description))),()=>{Y.removeEventListener("keyup",j,h?.eventListenerOptions),Y.removeEventListener("keydown",U,h?.eventListenerOptions),M&&Zm(m,C?.delimiter).forEach(L=>M.removeHotkey(km(L,C?.splitKey,C?.sequenceSplitKey,C?.useKey,C?.description))),A=[],H&&clearTimeout(H)}},[m,C,_]),u}const yS=Math.PI/180;function SS(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const yu=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Lt={_global:yu,version:"10.0.12",isBrowser:SS(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle(l){return Lt.angleDeg?l*yS:l},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Lt.DD.isDragging},isTransforming(){var l,e;return(e=(l=Lt.Transformer)===null||l===void 0?void 0:l.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!Lt.DD.node},releaseCanvasOnDestroy:!0,document:yu.document,_injectGlobal(l){typeof yu.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),yu.Konva=l}},Hn=l=>{Lt[l.prototype.getClassName()]=l};Lt._injectGlobal(Lt);const bS=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,Yp=()=>{if(typeof document>"u")throw new Error(bS)};class Vl{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Vl(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){const i=Math.cos(e),o=Math.sin(e),u=this.m[0]*i+this.m[2]*o,d=this.m[1]*i+this.m[3]*o,h=this.m[0]*-o+this.m[2]*i,m=this.m[1]*-o+this.m[3]*i;return this.m[0]=u,this.m[1]=d,this.m[2]=h,this.m[3]=m,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){const o=this.m[0]+this.m[2]*i,u=this.m[1]+this.m[3]*i,d=this.m[2]+this.m[0]*e,h=this.m[3]+this.m[1]*e;return this.m[0]=o,this.m[1]=u,this.m[2]=d,this.m[3]=h,this}multiply(e){const i=this.m[0]*e.m[0]+this.m[2]*e.m[1],o=this.m[1]*e.m[0]+this.m[3]*e.m[1],u=this.m[0]*e.m[2]+this.m[2]*e.m[3],d=this.m[1]*e.m[2]+this.m[3]*e.m[3],h=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],m=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=h,this.m[5]=m,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,o=-this.m[1]*e,u=-this.m[2]*e,d=this.m[0]*e,h=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),m=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=h,this.m[5]=m,this}getMatrix(){return this.m}decompose(){const e=this.m[0],i=this.m[1],o=this.m[2],u=this.m[3],d=this.m[4],h=this.m[5],m=e*u-i*o,v={x:d,y:h,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){const b=Math.sqrt(e*e+i*i);v.rotation=i>0?Math.acos(e/b):-Math.acos(e/b),v.scaleX=b,v.scaleY=m/b,v.skewX=(e*o+i*u)/m,v.skewY=0}else if(o!=0||u!=0){const b=Math.sqrt(o*o+u*u);v.rotation=Math.PI/2-(u>0?Math.acos(-o/b):-Math.acos(o/b)),v.scaleX=m/b,v.scaleY=b,v.skewX=0,v.skewY=(e*o+i*u)/m}return v.rotation=et._getRotation(v.rotation),v}}const xS="[object Array]",CS="[object Number]",ES="[object String]",_S="[object Boolean]",TS=Math.PI/180,AS=180/Math.PI,Hd="#",MS="",wS="0",NS="Konva warning: ",Xp="Konva error: ",RS="rgb(",Jm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},DS=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let ng=[],Ud=null;const OS=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(l){setTimeout(l,60)},et={_isElement(l){return!!(l&&l.nodeType==1)},_isFunction(l){return!!(l&&l.constructor&&l.call&&l.apply)},_isPlainObject(l){return!!l&&l.constructor===Object},_isArray(l){return Object.prototype.toString.call(l)===xS},_isNumber(l){return Object.prototype.toString.call(l)===CS&&!isNaN(l)&&isFinite(l)},_isString(l){return Object.prototype.toString.call(l)===ES},_isBoolean(l){return Object.prototype.toString.call(l)===_S},isObject(l){return l instanceof Object},isValidSelector(l){if(typeof l!="string")return!1;const e=l[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(l){return l===0||l>0?1:-1},requestAnimFrame(l){ng.push(l),ng.length===1&&OS(function(){const e=ng;ng=[],e.forEach(function(i){i()})})},createCanvasElement(){Yp();const l=document.createElement("canvas");try{l.style=l.style||{}}catch{}return l},createImageElement(){return Yp(),document.createElement("img")},_isInDocument(l){for(;l=l.parentNode;)if(l==document)return!0;return!1},_urlToImage(l,e){const i=et.createImageElement();i.onload=function(){e(i)},i.src=l},_rgbToHex(l,e,i){return((1<<24)+(l<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(l){l=l.replace(Hd,MS);const e=parseInt(l,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let l=(Math.random()*16777215<<0).toString(16);for(;l.length<6;)l=wS+l;return Hd+l},isCanvasFarblingActive(){if(Ud!==null)return Ud;if(typeof document>"u")return Ud=!1,!1;const l=this.createCanvasElement();l.width=10,l.height=10;const e=l.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const i=e.getImageData(0,0,10,10).data;let o=!1;for(let u=0;u<100;u++)if(i[u*4]!==40||i[u*4+1]!==40||i[u*4+2]!==40||i[u*4+3]!==255){o=!0;break}return Ud=o,this.releaseCanvas(l),Ud},getHitColor(){const l=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(l):l},getHitColorKey(l,e,i){return this.isCanvasFarblingActive()&&(l=Math.round(l/5)*5,e=Math.round(e/5)*5,i=Math.round(i/5)*5),Hd+this._rgbToHex(l,e,i)},getSnappedHexColor(l){const e=this._hexToRgb(l);return Hd+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(l){let e;return l in Jm?(e=Jm[l],{r:e[0],g:e[1],b:e[2]}):l[0]===Hd?this._hexToRgb(l.substring(1)):l.substr(0,4)===RS?(e=DS.exec(l.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(l){return l=l||"black",et._namedColorToRBA(l)||et._hex3ColorToRGBA(l)||et._hex4ColorToRGBA(l)||et._hex6ColorToRGBA(l)||et._hex8ColorToRGBA(l)||et._rgbColorToRGBA(l)||et._rgbaColorToRGBA(l)||et._hslColorToRGBA(l)},_namedColorToRBA(l){const e=Jm[l.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(l){if(l.indexOf("rgb(")===0){l=l.match(/rgb\(([^)]+)\)/)[1];const e=l.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(l){if(l.indexOf("rgba(")===0){l=l.match(/rgba\(([^)]+)\)/)[1];const e=l.split(/ *, */).map((i,o)=>i.slice(-1)==="%"?o===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(l){if(l[0]==="#"&&l.length===9)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:parseInt(l.slice(7,9),16)/255}},_hex6ColorToRGBA(l){if(l[0]==="#"&&l.length===7)return{r:parseInt(l.slice(1,3),16),g:parseInt(l.slice(3,5),16),b:parseInt(l.slice(5,7),16),a:1}},_hex4ColorToRGBA(l){if(l[0]==="#"&&l.length===5)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:parseInt(l[4]+l[4],16)/255}},_hex3ColorToRGBA(l){if(l[0]==="#"&&l.length===4)return{r:parseInt(l[1]+l[1],16),g:parseInt(l[2]+l[2],16),b:parseInt(l[3]+l[3],16),a:1}},_hslColorToRGBA(l){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(l)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(l),o=Number(i[0])/360,u=Number(i[1])/100,d=Number(i[2])/100;let h,m,v;if(u===0)return v=d*255,{r:Math.round(v),g:Math.round(v),b:Math.round(v),a:1};d<.5?h=d*(1+u):h=d+u-d*u;const b=2*d-h,E=[0,0,0];for(let C=0;C<3;C++)m=o+1/3*-(C-1),m<0&&m++,m>1&&m--,6*m<1?v=b+(h-b)*6*m:2*m<1?v=h:3*m<2?v=b+(h-b)*(2/3-m)*6:v=b,E[C]=v*255;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection(l,e){return!(e.x>l.x+l.width||e.x+e.width<l.x||e.y>l.y+l.height||e.y+e.height<l.y)},cloneObject(l){const e={};for(const i in l)this._isPlainObject(l[i])?e[i]=this.cloneObject(l[i]):this._isArray(l[i])?e[i]=this.cloneArray(l[i]):e[i]=l[i];return e},cloneArray(l){return l.slice(0)},degToRad(l){return l*TS},radToDeg(l){return l*AS},_degToRad(l){return et.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),et.degToRad(l)},_radToDeg(l){return et.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),et.radToDeg(l)},_getRotation(l){return Lt.angleDeg?et.radToDeg(l):l},_capitalize(l){return l.charAt(0).toUpperCase()+l.slice(1)},throw(l){throw new Error(Xp+l)},error(l){console.error(Xp+l)},warn(l){Lt.showWarnings&&console.warn(NS+l)},each(l,e){for(const i in l)e(i,l[i])},_inRange(l,e,i){return e<=l&&l<i},_getProjectionToSegment(l,e,i,o,u,d){let h,m,v;const b=(l-i)*(l-i)+(e-o)*(e-o);if(b==0)h=l,m=e,v=(u-i)*(u-i)+(d-o)*(d-o);else{const E=((u-l)*(i-l)+(d-e)*(o-e))/b;E<0?(h=l,m=e,v=(l-u)*(l-u)+(e-d)*(e-d)):E>1?(h=i,m=o,v=(i-u)*(i-u)+(o-d)*(o-d)):(h=l+E*(i-l),m=e+E*(o-e),v=(h-u)*(h-u)+(m-d)*(m-d))}return[h,m,v]},_getProjectionToLine(l,e,i){const o=et.cloneObject(l);let u=Number.MAX_VALUE;return e.forEach(function(d,h){if(!i&&h===e.length-1)return;const m=e[(h+1)%e.length],v=et._getProjectionToSegment(d.x,d.y,m.x,m.y,l.x,l.y),b=v[0],E=v[1],C=v[2];C<u&&(o.x=b,o.y=E,u=C)}),o},_prepareArrayForTween(l,e,i){const o=[],u=[];if(l.length>e.length){const h=e;e=l,l=h}for(let h=0;h<l.length;h+=2)o.push({x:l[h],y:l[h+1]});for(let h=0;h<e.length;h+=2)u.push({x:e[h],y:e[h+1]});const d=[];return u.forEach(function(h){const m=et._getProjectionToLine(h,o,i);d.push(m.x),d.push(m.y)}),d},_prepareToStringify(l){let e;l.visitedByCircularReferenceRemoval=!0;for(const i in l)if(l.hasOwnProperty(i)&&l[i]&&typeof l[i]=="object"){if(e=Object.getOwnPropertyDescriptor(l,i),l[i].visitedByCircularReferenceRemoval||et._isElement(l[i]))if(e.configurable)delete l[i];else return null;else if(et._prepareToStringify(l[i])===null)if(e.configurable)delete l[i];else return null}return delete l.visitedByCircularReferenceRemoval,l},_assign(l,e){for(const i in e)l[i]=e[i];return l},_getFirstPointerId(l){return l.touches?l.changedTouches[0].identifier:l.pointerId||999},releaseCanvas(...l){Lt.releaseCanvasOnDestroy&&l.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(l,e,i,o){let u=e<0?e:0,d=i<0?i:0;e=Math.abs(e),i=Math.abs(i);let h=0,m=0,v=0,b=0;typeof o=="number"?h=m=v=b=Math.min(o,e/2,i/2):(h=Math.min(o[0]||0,e/2,i/2),m=Math.min(o[1]||0,e/2,i/2),b=Math.min(o[2]||0,e/2,i/2),v=Math.min(o[3]||0,e/2,i/2)),l.moveTo(u+h,d),l.lineTo(u+e-m,d),l.arc(u+e-m,d+m,m,Math.PI*3/2,0,!1),l.lineTo(u+e,d+i-b),l.arc(u+e-b,d+i-b,b,0,Math.PI/2,!1),l.lineTo(u+v,d+i),l.arc(u+v,d+i-v,v,Math.PI/2,Math.PI,!1),l.lineTo(u,d+h),l.arc(u+h,d+h,h,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(l,e,i,o,u){o=Math.abs(o);for(let d=0;d<i;d++){const h=e[(d-1+i)%i],m=e[d],v=e[(d+1)%i],b={x:m.x-h.x,y:m.y-h.y},E={x:v.x-m.x,y:v.y-m.y},C=Math.hypot(b.x,b.y),_=Math.hypot(E.x,E.y);let M;typeof u=="number"?M=u:M=d<u.length?u[d]:0,M=o*Math.cos(Math.PI/i)*Math.min(1,M/o*2);const H={x:b.x/C,y:b.y/C},D={x:E.x/_,y:E.y/_},U={x:m.x-H.x*M,y:m.y-H.y*M},j={x:m.x+D.x*M,y:m.y+D.y*M};d===0?l.moveTo(U.x,U.y):l.lineTo(U.x,U.y),l.arcTo(m.x,m.y,j.x,j.y,M)}}};function zS(l){const e=[],i=l.length,o=et;for(let u=0;u<i;u++){let d=l[u];o._isNumber(d)?d=Math.round(d*1e3)/1e3:o._isString(d)||(d=d+""),e.push(d)}return e}const qp=",",jS="(",HS=")",US="([",BS="])",GS=";",LS="()",YS="=",Vp=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],XS=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],qS=100;let ag=null;function Kp(){if(ag!==null)return ag;try{const e=et.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(ag=!1,!1)}catch{return ag=!1,!1}}class Zg{constructor(e){this.canvas=e,Lt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){let o=this.traceArr,u=o.length,d="",h,m,v,b;for(h=0;h<u;h++)m=o[h],v=m.method,v?(b=m.args,d+=v,e?d+=LS:et._isArray(b[0])?d+=US+b.join(qp)+BS:(i&&(b=b.map(E=>typeof E=="number"?Math.floor(E):E)),d+=jS+b.join(qp)+HS)):(d+=m.property,e||(d+=YS+m.val)),d+=GS;return d}clearTrace(){this.traceArr=[]}_trace(e){let i=this.traceArr,o;i.push(e),o=i.length,o>=qS&&i.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){const i=e.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(e){const i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){const i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}_applyMiterLimit(e){const i=e.attrs.miterLimit;i!=null&&this.setAttr("miterLimit",i)}setAttr(e,i){this._context[e]=i}arc(e,i,o,u,d,h){this._context.arc(e,i,o,u,d,h)}arcTo(e,i,o,u,d){this._context.arcTo(e,i,o,u,d)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,o,u,d,h){this._context.bezierCurveTo(e,i,o,u,d,h)}clearRect(e,i,o,u){this._context.clearRect(e,i,o,u)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,i){const o=arguments;if(o.length===2)return this._context.createImageData(e,i);if(o.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,o,u){return this._context.createLinearGradient(e,i,o,u)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,o,u,d,h){return this._context.createRadialGradient(e,i,o,u,d,h)}drawImage(e,i,o,u,d,h,m,v,b){const E=arguments,C=this._context;E.length===3?C.drawImage(e,i,o):E.length===5?C.drawImage(e,i,o,u,d):E.length===9&&C.drawImage(e,i,o,u,d,h,m,v,b)}ellipse(e,i,o,u,d,h,m,v){this._context.ellipse(e,i,o,u,d,h,m,v)}isPointInPath(e,i,o,u){return o?this._context.isPointInPath(o,e,i,u):this._context.isPointInPath(e,i,u)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,i,o,u){this._context.fillRect(e,i,o,u)}strokeRect(e,i,o,u){this._context.strokeRect(e,i,o,u)}fillText(e,i,o,u){u?this._context.fillText(e,i,o,u):this._context.fillText(e,i,o)}measureText(e){return this._context.measureText(e)}getImageData(e,i,o,u){return this._context.getImageData(e,i,o,u)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,o,u){this._context.rect(e,i,o,u)}roundRect(e,i,o,u,d){this._context.roundRect(e,i,o,u,d)}putImageData(e,i,o){this._context.putImageData(e,i,o)}quadraticCurveTo(e,i,o,u){this._context.quadraticCurveTo(e,i,o,u)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,o,u,d,h){this._context.setTransform(e,i,o,u,d,h)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,o,u){this._context.strokeText(e,i,o,u)}transform(e,i,o,u,d,h){this._context.transform(e,i,o,u,d,h)}translate(e,i){this._context.translate(e,i)}_enableTrace(){let e=this,i=Vp.length,o=this.setAttr,u,d;const h=function(m){let v=e[m],b;e[m]=function(){return d=zS(Array.prototype.slice.call(arguments,0)),b=v.apply(e,arguments),e._trace({method:m,args:d}),b}};for(u=0;u<i;u++)h(Vp[u]);e.setAttr=function(){o.apply(e,arguments);const m=arguments[0];let v=arguments[1];(m==="shadowOffsetX"||m==="shadowOffsetY"||m==="shadowBlur")&&(v=v/this.canvas.getPixelRatio()),e._trace({property:m,val:v})}}_applyGlobalCompositeOperation(e){const i=e.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}XS.forEach(function(l){Object.defineProperty(Zg.prototype,l,{get(){return this._context[l]},set(e){this._context[l]=e}})});class VS extends Zg{constructor(e,{willReadFrequently:i=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(e){const i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){const i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){const i=e.fill(),o=e.getFillPriority();if(i&&o==="color"){this._fillColor(e);return}const u=e.getFillPatternImage();if(u&&o==="pattern"){this._fillPattern(e);return}const d=e.getFillLinearGradientColorStops();if(d&&o==="linear-gradient"){this._fillLinearGradient(e);return}const h=e.getFillRadialGradientColorStops();if(h&&o==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):u?this._fillPattern(e):d?this._fillLinearGradient(e):h&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const i=e.getStrokeLinearGradientStartPoint(),o=e.getStrokeLinearGradientEndPoint(),u=e.getStrokeLinearGradientColorStops(),d=this.createLinearGradient(i.x,i.y,o.x,o.y);if(u){for(let h=0;h<u.length;h+=2)d.addColorStop(u[h],u[h+1]);this.setAttr("strokeStyle",d)}}_stroke(e){const i=e.dash(),o=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!o){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),o||this.restore()}}_applyShadow(e){var i,o,u;const d=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",h=(o=e.getShadowBlur())!==null&&o!==void 0?o:5,m=(u=e.getShadowOffset())!==null&&u!==void 0?u:{x:0,y:0},v=e.getAbsoluteScale(),b=this.canvas.getPixelRatio(),E=v.x*b,C=v.y*b;this.setAttr("shadowColor",d),this.setAttr("shadowBlur",h*Math.min(Math.abs(E),Math.abs(C))),this.setAttr("shadowOffsetX",m.x*E),this.setAttr("shadowOffsetY",m.y*C)}}class KS extends Zg{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const i=e.getStrokeScaleEnabled();if(!i){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(e);const o=e.hitStrokeWidth(),u=o==="auto"?e.strokeWidth():o;this.setAttr("lineWidth",u),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}}let lg;function QS(){if(lg)return lg;const l=et.createCanvasElement(),e=l.getContext("2d");return lg=(function(){const i=Lt._global.devicePixelRatio||1,o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/o})(),et.releaseCanvas(l),lg}let Z1=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const o=(e||{}).pixelRatio||Lt.pixelRatio||QS();this.pixelRatio=o,this._canvas=et.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(u){return et.error("Unable to get data URL. "+u.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};class po extends Z1{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new VS(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class k1 extends Z1{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new KS(this),this.setSize(e.width,e.height)}}const Qe={get isDragging(){let l=!1;return Qe._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(l=!0)}),l},justDragged:!1,get node(){let l;return Qe._dragElements.forEach(e=>{l=e.node}),l},_dragElements:new Map,_drag(l){const e=[];Qe._dragElements.forEach((i,o)=>{const{node:u}=i,d=u.getStage();d.setPointersPositions(l),i.pointerId===void 0&&(i.pointerId=et._getFirstPointerId(l));const h=d._changedPointerPositions.find(m=>m.id===i.pointerId);if(h){if(i.dragStatus!=="dragging"){const m=u.dragDistance();if(Math.max(Math.abs(h.x-i.startPointerPos.x),Math.abs(h.y-i.startPointerPos.y))<m||(u.startDrag({evt:l}),!u.isDragging()))return}u._setDragPosition(l,i),e.push(u)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:l},!0)})},_endDragBefore(l){const e=[];Qe._dragElements.forEach(i=>{const{node:o}=i,u=o.getStage();if(l&&u.setPointersPositions(l),!u._changedPointerPositions.find(m=>m.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(Qe.justDragged=!0,Lt._mouseListenClick=!1,Lt._touchListenClick=!1,Lt._pointerListenClick=!1,i.dragStatus="stopped");const h=i.node.getLayer()||i.node instanceof Lt.Stage&&i.node;h&&e.indexOf(h)===-1&&e.push(h)}),e.forEach(i=>{i.draw()})},_endDragAfter(l){Qe._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:l},!0),e.dragStatus!=="dragging"&&Qe._dragElements.delete(i)})}};Lt.isBrowser&&(window.addEventListener("mouseup",Qe._endDragBefore,!0),window.addEventListener("touchend",Qe._endDragBefore,!0),window.addEventListener("touchcancel",Qe._endDragBefore,!0),window.addEventListener("mousemove",Qe._drag),window.addEventListener("touchmove",Qe._drag),window.addEventListener("mouseup",Qe._endDragAfter,!1),window.addEventListener("touchend",Qe._endDragAfter,!1),window.addEventListener("touchcancel",Qe._endDragAfter,!1));function bo(l){return et._isString(l)?'"'+l+'"':Object.prototype.toString.call(l)==="[object Number]"||et._isBoolean(l)?l:Object.prototype.toString.call(l)}function by(l){return l>255?255:l<0?0:Math.round(l)}function Gt(){if(Lt.isUnminified)return function(l,e){return et._isNumber(l)||et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),l}}function kg(l){if(Lt.isUnminified)return function(e,i){let o=et._isNumber(e),u=et._isArray(e)&&e.length==l;return!o&&!u&&et.warn(bo(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+l+")"),e}}function J1(){if(Lt.isUnminified)return function(l,e){return et._isNumber(l)||l==="auto"||et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),l}}function Eu(){if(Lt.isUnminified)return function(l,e){return et._isString(l)||et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),l}}function xy(){if(Lt.isUnminified)return function(l,e){const i=et._isString(l),o=Object.prototype.toString.call(l)==="[object CanvasGradient]"||l&&l.addColorStop;return i||o||et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),l}}function ZS(){if(Lt.isUnminified)return function(l,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&l instanceof i||(et._isArray(l)?l.forEach(function(o){et._isNumber(o)||et.warn('"'+e+'" attribute has non numeric element '+o+". Make sure that all elements are numbers.")}):et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),l}}function Qi(){if(Lt.isUnminified)return function(l,e){return l===!0||l===!1||et.warn(bo(l)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),l}}function kS(l){if(Lt.isUnminified)return function(e,i){return e==null||et.isObject(e)||et.warn(bo(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+l),e}}const Bd="get",Gd="set",X={addGetterSetter(l,e,i,o,u){X.addGetter(l,e,i),X.addSetter(l,e,o,u),X.addOverloadedGetterSetter(l,e)},addGetter(l,e,i){const o=Bd+et._capitalize(e);l.prototype[o]=l.prototype[o]||function(){const u=this.attrs[e];return u===void 0?i:u}},addSetter(l,e,i,o){const u=Gd+et._capitalize(e);l.prototype[u]||X.overWriteSetter(l,e,i,o)},overWriteSetter(l,e,i,o){const u=Gd+et._capitalize(e);l.prototype[u]=function(d){return i&&d!==void 0&&d!==null&&(d=i.call(this,d,e)),this._setAttr(e,d),o&&o.call(this),this}},addComponentsGetterSetter(l,e,i,o,u){const d=i.length,h=et._capitalize,m=Bd+h(e),v=Gd+h(e);l.prototype[m]=function(){const E={};for(let C=0;C<d;C++){const _=i[C];E[_]=this.getAttr(e+h(_))}return E};const b=kS(i);l.prototype[v]=function(E){const C=this.attrs[e];o&&(E=o.call(this,E,e)),b&&b.call(this,E,e);for(const _ in E)E.hasOwnProperty(_)&&this._setAttr(e+h(_),E[_]);return E||i.forEach(_=>{this._setAttr(e+h(_),void 0)}),this._fireChangeEvent(e,C,E),u&&u.call(this),this},X.addOverloadedGetterSetter(l,e)},addOverloadedGetterSetter(l,e){const i=et._capitalize(e),o=Gd+i,u=Bd+i;l.prototype[e]=function(){return arguments.length?(this[o](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(l,e,i,o){et.error("Adding deprecated "+e);const u=Bd+et._capitalize(e),d=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";l.prototype[u]=function(){et.error(d);const h=this.attrs[e];return h===void 0?i:h},X.addSetter(l,e,o,function(){et.error(d)}),X.addOverloadedGetterSetter(l,e)},backCompat(l,e){et.each(e,function(i,o){const u=l.prototype[o],d=Bd+et._capitalize(i),h=Gd+et._capitalize(i);function m(){u.apply(this,arguments),et.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+o+'" instead.')}l.prototype[i]=m,l.prototype[d]=m,l.prototype[h]=m})},afterSetFilter(){this._filterUpToDate=!1}};function JS(l){const e=/(\w+)\(([^)]+)\)/g;let i;for(;(i=e.exec(l))!==null;){const[,o,u]=i;switch(o){case"blur":{const d=parseFloat(u.replace("px",""));return function(h){this.blurRadius(d*.5);const m=Lt.Filters;m&&m.Blur&&m.Blur.call(this,h)}}case"brightness":{const d=u.includes("%")?parseFloat(u)/100:parseFloat(u);return function(h){this.brightness(d);const m=Lt.Filters;m&&m.Brightness&&m.Brightness.call(this,h)}}case"contrast":{const d=parseFloat(u);return function(h){const m=100*(Math.sqrt(d)-1);this.contrast(m);const v=Lt.Filters;v&&v.Contrast&&v.Contrast.call(this,h)}}case"grayscale":return function(d){const h=Lt.Filters;h&&h.Grayscale&&h.Grayscale.call(this,d)};case"sepia":return function(d){const h=Lt.Filters;h&&h.Sepia&&h.Sepia.call(this,d)};case"invert":return function(d){const h=Lt.Filters;h&&h.Invert&&h.Invert.call(this,d)};default:et.warn(`CSS filter "${o}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Sg="absoluteOpacity",ig="allEventListeners",cr="absoluteTransform",Qp="absoluteScale",mu="canvas",IS="Change",FS="children",WS="konva",S1="listening",PS="mouseenter",$S="mouseleave",tb="pointerenter",eb="pointerleave",nb="touchenter",ab="touchleave",Zp="set",kp="Shape",bg=" ",Jp="stage",ho="transform",lb="Stage",b1="visible",ib=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(bg);let sb=1;class Bt{constructor(e){this._id=sb++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ho||e===cr)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){let o=this._cache.get(e);return(o===void 0||(e===ho||e===cr)&&o.dirty===!0)&&(o=i.call(this),this._cache.set(e,o)),o}_calculate(e,i,o){if(!this._attachedDepsListeners.get(e)){const u=i.map(d=>d+"Change.konva").join(bg);this.on(u,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,o)}_getCanvasCache(){return this._cache.get(mu)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===cr&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(mu)){const{scene:e,filter:i,hit:o,buffer:u}=this._cache.get(mu);et.releaseCanvas(e,i,o,u),this._cache.delete(mu)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const i=e||{};let o={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(o=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let u=Math.ceil(i.width||o.width),d=Math.ceil(i.height||o.height),h=i.pixelRatio,m=i.x===void 0?Math.floor(o.x):i.x,v=i.y===void 0?Math.floor(o.y):i.y,b=i.offset||0,E=i.drawBorder||!1,C=i.hitCanvasPixelRatio||1;if(!u||!d){et.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const _=Math.abs(Math.round(o.x)-m)>.5?1:0,M=Math.abs(Math.round(o.y)-v)>.5?1:0;u+=b*2+_,d+=b*2+M,m-=b,v-=b;const A=new po({pixelRatio:h,width:u,height:d}),H=new po({pixelRatio:h,width:0,height:0,willReadFrequently:!0}),D=new k1({pixelRatio:C,width:u,height:d}),U=A.getContext(),j=D.getContext(),Y=new po({width:A.width/A.pixelRatio+Math.abs(m),height:A.height/A.pixelRatio+Math.abs(v),pixelRatio:A.pixelRatio}),L=Y.getContext();return D.isCache=!0,A.isCache=!0,this._cache.delete(mu),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(A.getContext()._context.imageSmoothingEnabled=!1,H.getContext()._context.imageSmoothingEnabled=!1),U.save(),j.save(),L.save(),U.translate(-m,-v),j.translate(-m,-v),L.translate(-m,-v),Y.x=m,Y.y=v,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Sg),this._clearSelfAndDescendantCache(Qp),this.drawScene(A,this,Y),this.drawHit(D,this),this._isUnderCache=!1,U.restore(),j.restore(),E&&(U.save(),U.beginPath(),U.rect(0,0,u,d),U.closePath(),U.setAttr("strokeStyle","red"),U.setAttr("lineWidth",5),U.stroke(),U.restore()),this._cache.set(mu,{scene:A,filter:H,hit:D,buffer:Y,x:m,y:v}),this._requestDraw(),this}isCached(){return this._cache.has(mu)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){const o=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let u=1/0,d=1/0,h=-1/0,m=-1/0;const v=this.getAbsoluteTransform(i);return o.forEach(function(b){const E=v.point(b);u===void 0&&(u=h=E.x,d=m=E.y),u=Math.min(u,E.x),d=Math.min(d,E.y),h=Math.max(h,E.x),m=Math.max(m,E.y)}),{x:u,y:d,width:h-u,height:m-d}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();e.translate(i.x,i.y);const o=this._getCachedSceneCanvas(),u=o.pixelRatio;e.drawImage(o._canvas,0,0,o.width/u,o.height/u),e.restore()}_drawCachedHitCanvas(e){const i=this._getCanvasCache(),o=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(o._canvas,0,0,o.width/o.pixelRatio,o.height/o.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),i=this._getCanvasCache(),o=i.scene,u=i.filter,d=u.getContext(),h,m,v,b;if(!e||e.length===0)return o;if(this._filterUpToDate)return u;let E=!0;for(let _=0;_<e.length;_++)if(typeof e[_]=="string"&&Kp(),typeof e[_]!="string"||!Kp()){E=!1;break}const C=o.pixelRatio;if(u.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio),E){const _=e.join(" ");return d.save(),d.setAttr("filter",_),d.drawImage(o._canvas,0,0,o.getWidth()/C,o.getHeight()/C),d.restore(),this._filterUpToDate=!0,u}try{for(h=e.length,d.clear(),d.drawImage(o._canvas,0,0,o.getWidth()/C,o.getHeight()/C),m=d.getImageData(0,0,u.getWidth(),u.getHeight()),v=0;v<h;v++)b=e[v],typeof b=="string"&&(b=JS(b)),b.call(this,m),d.putImageData(m,0,0)}catch(_){et.error("Unable to apply filter. "+_.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,u}on(e,i){if(this._cache&&this._cache.delete(ig),arguments.length===3)return this._delegate.apply(this,arguments);const o=e.split(bg);for(let u=0;u<o.length;u++){const h=o[u].split("."),m=h[0],v=h[1]||"";this.eventListeners[m]||(this.eventListeners[m]=[]),this.eventListeners[m].push({name:v,handler:i})}return this}off(e,i){let o=(e||"").split(bg),u=o.length,d,h,m,v,b,E;if(this._cache&&this._cache.delete(ig),!e)for(h in this.eventListeners)this._off(h);for(d=0;d<u;d++)if(m=o[d],v=m.split("."),b=v[0],E=v[1],b)this.eventListeners[b]&&this._off(b,E,i);else for(h in this.eventListeners)this._off(h,E,i);return this}dispatchEvent(e){const i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(o){i.call(this,o.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,o){const u=this;this.on(e,function(d){const h=d.target.findAncestors(i,!0,u);for(let m=0;m<h.length;m++)d=et.cloneObject(d),d.currentTarget=h[m],o.call(h[m],d)})}remove(){return this.isDragging()&&this.stopDrag(),Qe._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(cr),this._clearSelfAndDescendantCache(Sg),this._clearSelfAndDescendantCache(Qp),this._clearSelfAndDescendantCache(Jp),this._clearSelfAndDescendantCache(b1),this._clearSelfAndDescendantCache(S1)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const i="get"+et._capitalize(e);return et._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){let e=this.getParent(),i=[];for(;e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let i,o;if(!e)return this;for(i in e)i!==FS&&(o=Zp+et._capitalize(i),et._isFunction(this[o])?this[o](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(S1,this._isListening)}_isListening(e){if(!this.listening())return!1;const o=this.getParent();return o&&o!==e&&this!==e?o._isListening(e):!0}isVisible(){return this._getCache(b1,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const o=this.getParent();return o&&o!==e&&this!==e?o._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);const o=this.getLayer();let u=!1;Qe._dragElements.forEach(h=>{h.dragStatus==="dragging"&&(h.node.nodeType==="Stage"||h.node.getLayer()===o)&&(u=!0)});const d=!i&&!Lt.hitOnDragEnabled&&(u||Lt.isTransforming());return this.isListening()&&this.isVisible()&&!d}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),i=this,o=0,u,d,h,m;function v(E){for(u=[],d=E.length,h=0;h<d;h++)m=E[h],o++,m.nodeType!==kp&&(u=u.concat(m.getChildren().slice())),m._id===i._id&&(h=d);u.length>0&&u[0].getDepth()<=e&&v(u)}const b=this.getStage();return i.nodeType!==lb&&b&&v(b.getChildren()),o}getDepth(){let e=0,i=this.parent;for(;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ho),this._clearSelfAndDescendantCache(cr)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const i=e.getPointerPosition();if(!i)return null;const o=this.getAbsoluteTransform().copy();return o.invert(),o.point(i)}getAbsolutePosition(e){let i=!1,o=this.parent;for(;o;){if(o.isCached()){i=!0;break}o=o.parent}i&&!e&&(e=!0);const u=this.getAbsoluteTransform(e).getMatrix(),d=new Vl,h=this.offset();return d.m=u.slice(),d.translate(h.x,h.y),d.getTranslation()}setAbsolutePosition(e){const{x:i,y:o,...u}=this._clearTransform();this.attrs.x=i,this.attrs.y=o,this._clearCache(ho);const d=this._getAbsoluteTransform().copy();return d.invert(),d.translate(e.x,e.y),e={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this._setTransform(u),this.setPosition({x:e.x,y:e.y}),this._clearCache(ho),this._clearSelfAndDescendantCache(cr),this}_setTransform(e){let i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let i=e.x,o=e.y,u=this.x(),d=this.y();return i!==void 0&&(u+=i),o!==void 0&&(d+=o),this.setPosition({x:u,y:d}),this}_eachAncestorReverse(e,i){let o=[],u=this.getParent(),d,h;if(!(i&&i._id===this._id)){for(o.unshift(this);u&&(!i||u._id!==i._id);)o.unshift(u),u=u.parent;for(d=o.length,h=0;h<d;h++)e(o[h])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return et.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return et.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return et.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return et.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return et.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&et.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Sg,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),i,o,u,d,h;const m={attrs:{},className:this.getClassName()};for(i in e)o=e[i],h=et.isObject(o)&&!et._isPlainObject(o)&&!et._isArray(o),!h&&(u=typeof this[i]=="function"&&this[i],delete e[i],d=u?u.call(this):null,e[i]=o,d!==o&&(m.attrs[i]=o));return et._prepareToStringify(m)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,o){const u=[];i&&this._isMatch(e)&&u.push(this);let d=this.parent;for(;d;){if(d===o)return u;d._isMatch(e)&&u.push(d),d=d.parent}return u}isAncestorOf(e){return!1}findAncestor(e,i,o){return this.findAncestors(e,i,o)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let i=e.replace(/ /g,"").split(","),o=i.length,u,d;for(u=0;u<o;u++)if(d=i[u],et.isValidSelector(d)||(et.warn('Selector "'+d+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),et.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),et.warn("Konva is awesome, right?")),d.charAt(0)==="#"){if(this.id()===d.slice(1))return!0}else if(d.charAt(0)==="."){if(this.hasName(d.slice(1)))return!0}else if(this.className===d||this.nodeType===d)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Jp,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,i={},o){return i.target=i.target||this,o?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(cr,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let i;if(e)return i=new Vl,this._eachAncestorReverse(function(o){const u=o.transformsEnabled();u==="all"?i.multiply(o.getTransform()):u==="position"&&i.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},e),i;{i=this._cache.get(cr)||new Vl,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const o=this.transformsEnabled();if(o==="all")i.multiply(this.getTransform());else if(o==="position"){const u=this.attrs.x||0,d=this.attrs.y||0,h=this.attrs.offsetX||0,m=this.attrs.offsetY||0;i.translate(u-h,d-m)}return i.dirty=!1,i}}getAbsoluteScale(e){let i=this;for(;i;)i._isUnderCache&&(e=i),i=i.getParent();const u=this.getAbsoluteTransform(e).decompose();return{x:u.scaleX,y:u.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ho,this._getTransform)}_getTransform(){var e,i;const o=this._cache.get(ho)||new Vl;o.reset();const u=this.x(),d=this.y(),h=Lt.getAngle(this.rotation()),m=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,v=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,b=this.attrs.skewX||0,E=this.attrs.skewY||0,C=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(u!==0||d!==0)&&o.translate(u,d),h!==0&&o.rotate(h),(b!==0||E!==0)&&o.skew(b,E),(m!==1||v!==1)&&o.scale(m,v),(C!==0||_!==0)&&o.translate(-1*C,-1*_),o.dirty=!1,o}clone(e){let i=et.cloneObject(this.attrs),o,u,d,h,m;for(o in e)i[o]=e[o];const v=new this.constructor(i);for(o in this.eventListeners)for(u=this.eventListeners[o],d=u.length,h=0;h<d;h++)m=u[h],m.name.indexOf(WS)<0&&(v.eventListeners[o]||(v.eventListeners[o]=[]),v.eventListeners[o].push(m));return v}_toKonvaCanvas(e){e=e||{};const i=this.getClientRect(),o=this.getStage(),u=e.x!==void 0?e.x:Math.floor(i.x),d=e.y!==void 0?e.y:Math.floor(i.y),h=e.pixelRatio||1,m=new po({width:e.width||Math.ceil(i.width)||(o?o.width():0),height:e.height||Math.ceil(i.height)||(o?o.height():0),pixelRatio:h}),v=m.getContext(),b=new po({width:m.width/m.pixelRatio+Math.abs(u),height:m.height/m.pixelRatio+Math.abs(d),pixelRatio:m.pixelRatio});return e.imageSmoothingEnabled===!1&&(v._context.imageSmoothingEnabled=!1),v.save(),(u||d)&&v.translate(-1*u,-1*d),this.drawScene(m,void 0,b),v.restore(),m}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const i=e.mimeType||null,o=e.quality||null,u=this._toKonvaCanvas(e).toDataURL(i,o);return e.callback&&e.callback(u),u}toImage(e){return new Promise((i,o)=>{try{const u=e?.callback;u&&delete e.callback,et._urlToImage(this.toDataURL(e),function(d){i(d),u?.(d)})}catch(u){o(u)}})}toBlob(e){return new Promise((i,o)=>{try{const u=e?.callback;u&&delete e.callback,this.toCanvas(e).toBlob(d=>{i(d),u?.(d)},e?.mimeType,e?.quality)}catch(u){o(u)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Lt.dragDistance}_off(e,i,o){let u=this.eventListeners[e],d,h,m;for(d=0;d<u.length;d++)if(h=u[d].name,m=u[d].handler,(h!=="konva"||i==="konva")&&(!i||h===i)&&(!o||o===m)){if(u.splice(d,1),u.length===0){delete this.eventListeners[e];break}d--}}_fireChangeEvent(e,i,o){this._fire(e+IS,{oldVal:i,newVal:o})}addName(e){if(!this.hasName(e)){const i=this.name(),o=i?i+" "+e:e;this.name(o)}return this}hasName(e){if(!e)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const i=(this.name()||"").split(/\s/g),o=i.indexOf(e);return o!==-1&&(i.splice(o,1),this.name(i.join(" "))),this}setAttr(e,i){const o=this[Zp+et._capitalize(e)];return et._isFunction(o)?o.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(Lt.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,i){const o=this.attrs[e];o===i&&!et.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,o,i),this._requestDraw())}_setComponentAttr(e,i,o){let u;o!==void 0&&(u=this.attrs[e],u||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=o,this._fireChangeEvent(e,u,o))}_fireAndBubble(e,i,o){i&&this.nodeType===kp&&(i.target=this);const u=[PS,$S,tb,eb,nb,ab];if(!(u.indexOf(e)!==-1&&(o&&(this===o||this.isAncestorOf&&this.isAncestorOf(o))||this.nodeType==="Stage"&&!o))){this._fire(e,i);const h=u.indexOf(e)!==-1&&o&&o.isAncestorOf&&o.isAncestorOf(this)&&!o.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!h&&(o&&o.parent?this._fireAndBubble.call(this.parent,e,i,o):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){var i,o,u;const d=(i=this._cache.get(ig))!==null&&i!==void 0?i:{};let h=d?.[e];if(h===void 0){h=[];let m=Object.getPrototypeOf(this);for(;m;){const v=(u=(o=m.eventListeners)===null||o===void 0?void 0:o[e])!==null&&u!==void 0?u:[];h.push(...v),m=Object.getPrototypeOf(m)}d[e]=h,this._cache.set(ig,d)}return h}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;const o=this._getProtoListeners(e);if(o)for(let d=0;d<o.length;d++)o[d].handler.call(this,i);const u=this.eventListeners[e];if(u)for(let d=0;d<u.length;d++)u[d].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const i=e?e.pointerId:void 0,o=this.getStage(),u=this.getAbsolutePosition();if(!o)return;const d=o._getPointerById(i)||o._changedPointerPositions[0]||u;Qe._dragElements.set(this._id,{node:this,startPointerPos:d,offset:{x:d.x-u.x,y:d.y-u.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){Qe._dragElements.has(this._id)||this._createDragElement(e);const o=Qe._dragElements.get(this._id);o.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){const o=this.getStage()._getPointerById(i.pointerId);if(!o)return;let u={x:o.x-i.offset.x,y:o.y-i.offset.y};const d=this.dragBoundFunc();if(d!==void 0){const h=d.call(this,u,e);h?u=h:et.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==u.x||this._lastPos.y!==u.y)&&(this.setAbsolutePosition(u),this._requestDraw()),this._lastPos=u}stopDrag(e){const i=Qe._dragElements.get(this._id);i&&(i.dragStatus="stopped"),Qe._endDragBefore(e),Qe._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Qe._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Lt.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let u=!1;Qe._dragElements.forEach(d=>{this.isAncestorOf(d.node)&&(u=!0)}),u||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=Qe._dragElements.get(this._id),o=i&&i.dragStatus==="dragging",u=i&&i.dragStatus==="ready";o?this.stopDrag():u&&Qe._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const i=this.getStage();if(!i)return!1;const o={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return et.haveIntersection(o,this.getClientRect())}static create(e,i){return et._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){let o=Bt.prototype.getClassName.call(e),u=e.children,d,h,m;i&&(e.attrs.container=i),Lt[o]||(et.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");const v=Lt[o];if(d=new v(e.attrs),u)for(h=u.length,m=0;m<h;m++)d.add(Bt._createNode(u[m]));return d}}Bt.prototype.nodeType="Node";Bt.prototype._attrsAffectingSize=[];Bt.prototype.eventListeners={};Bt.prototype.on.call(Bt.prototype,ib,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ho),this._clearSelfAndDescendantCache(cr)});Bt.prototype.on.call(Bt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(b1)});Bt.prototype.on.call(Bt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(S1)});Bt.prototype.on.call(Bt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Sg)});const nn=X.addGetterSetter;nn(Bt,"zIndex");nn(Bt,"absolutePosition");nn(Bt,"position");nn(Bt,"x",0,Gt());nn(Bt,"y",0,Gt());nn(Bt,"globalCompositeOperation","source-over",Eu());nn(Bt,"opacity",1,Gt());nn(Bt,"name","",Eu());nn(Bt,"id","",Eu());nn(Bt,"rotation",0,Gt());X.addComponentsGetterSetter(Bt,"scale",["x","y"]);nn(Bt,"scaleX",1,Gt());nn(Bt,"scaleY",1,Gt());X.addComponentsGetterSetter(Bt,"skew",["x","y"]);nn(Bt,"skewX",0,Gt());nn(Bt,"skewY",0,Gt());X.addComponentsGetterSetter(Bt,"offset",["x","y"]);nn(Bt,"offsetX",0,Gt());nn(Bt,"offsetY",0,Gt());nn(Bt,"dragDistance",void 0,Gt());nn(Bt,"width",0,Gt());nn(Bt,"height",0,Gt());nn(Bt,"listening",!0,Qi());nn(Bt,"preventDefault",!0,Qi());nn(Bt,"filters",void 0,function(l){return this._filterUpToDate=!1,l});nn(Bt,"visible",!0,Qi());nn(Bt,"transformsEnabled","all",Eu());nn(Bt,"size");nn(Bt,"dragBoundFunc");nn(Bt,"draggable",!1,Qi());X.backCompat(Bt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Kl extends Bt{constructor(){super(...arguments),this.children=[]}getChildren(e){const i=this.children||[];return e?i.filter(e):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let o=0;o<e.length;o++)this.add(e[o]);return this}const i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){const o=[];return this._descendants(u=>{const d=u._isMatch(e);return d&&o.push(u),!!(d&&i)}),o}_descendants(e){let i=!1;const o=this.getChildren();for(const u of o){if(i=e(u),i)return!0;if(u.hasChildren()&&(i=u._descendants(e),i))return!0}return!1}toObject(){const e=Bt.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){let i=e.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){const i=Bt.prototype.clone.call(this,e);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(e){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(e)&&i.push(o)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(e,i,o){const u=this.getLayer(),d=e||u&&u.getCanvas(),h=d&&d.getContext(),m=this._getCanvasCache(),v=m&&m.scene,b=d&&d.isCache;if(!this.isVisible()&&!b)return this;if(v){h.save();const E=this.getAbsoluteTransform(i).getMatrix();h.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedSceneCanvas(h),h.restore()}else this._drawChildren("drawScene",d,i,o);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),u=e||o&&o.hitCanvas,d=u&&u.getContext(),h=this._getCanvasCache();if(h&&h.hit){d.save();const v=this.getAbsoluteTransform(i).getMatrix();d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",u,i);return this}_drawChildren(e,i,o,u){var d;const h=i&&i.getContext(),m=this.clipWidth(),v=this.clipHeight(),b=this.clipFunc(),E=typeof m=="number"&&typeof v=="number"||b,C=o===this;if(E){h.save();const M=this.getAbsoluteTransform(o);let A=M.getMatrix();h.transform(A[0],A[1],A[2],A[3],A[4],A[5]),h.beginPath();let H;if(b)H=b.call(this,h,this);else{const D=this.clipX(),U=this.clipY();h.rect(D||0,U||0,m,v)}h.clip.apply(h,H),A=M.copy().invert().getMatrix(),h.transform(A[0],A[1],A[2],A[3],A[4],A[5])}const _=!C&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";_&&(h.save(),h._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(M){M[e](i,o,u)}),_&&h.restore(),E&&h.restore()}getClientRect(e={}){var i;const o=e.skipTransform,u=e.relativeTo;let d,h,m,v,b={x:1/0,y:1/0,width:0,height:0};const E=this;(i=this.children)===null||i===void 0||i.forEach(function(M){if(!M.visible())return;const A=M.getClientRect({relativeTo:E,skipShadow:e.skipShadow,skipStroke:e.skipStroke});A.width===0&&A.height===0||(d===void 0?(d=A.x,h=A.y,m=A.x+A.width,v=A.y+A.height):(d=Math.min(d,A.x),h=Math.min(h,A.y),m=Math.max(m,A.x+A.width),v=Math.max(v,A.y+A.height)))});const C=this.find("Shape");let _=!1;for(let M=0;M<C.length;M++)if(C[M]._isVisible(this)){_=!0;break}return _&&d!==void 0?b={x:d,y:h,width:m-d,height:v-h}:b={x:0,y:0,width:0,height:0},o?b:this._transformedRect(b,u)}}X.addComponentsGetterSetter(Kl,"clip",["x","y","width","height"]);X.addGetterSetter(Kl,"clipX",void 0,Gt());X.addGetterSetter(Kl,"clipY",void 0,Gt());X.addGetterSetter(Kl,"clipWidth",void 0,Gt());X.addGetterSetter(Kl,"clipHeight",void 0,Gt());X.addGetterSetter(Kl,"clipFunc");const rh=new Map,Cy=Lt._global.PointerEvent!==void 0;function Im(l){return rh.get(l)}function I1(l){return{evt:l,pointerId:l.pointerId}}function Ey(l,e){return rh.get(l)===e}function _y(l,e){$d(l),e.getStage()&&(rh.set(l,e),Cy&&e._fire("gotpointercapture",I1(new PointerEvent("gotpointercapture"))))}function $d(l,e){const i=rh.get(l);if(!i)return;const o=i.getStage();o&&o.content,rh.delete(l),Cy&&i._fire("lostpointercapture",I1(new PointerEvent("lostpointercapture")))}const rb="Stage",ob="string",Ip="px",ub="mouseout",Ty="mouseleave",Ay="mouseover",My="mouseenter",wy="mousemove",Ny="mousedown",Ry="mouseup",qd="pointermove",Vd="pointerdown",kc="pointerup",Kd="pointercancel",cb="lostpointercapture",sg="pointerout",Qd="pointerleave",rg="pointerover",og="pointerenter",x1="contextmenu",Dy="touchstart",Oy="touchend",zy="touchmove",jy="touchcancel",C1="wheel",fb=5,db=[[My,"_pointerenter"],[Ny,"_pointerdown"],[wy,"_pointermove"],[Ry,"_pointerup"],[Ty,"_pointerleave"],[Dy,"_pointerdown"],[zy,"_pointermove"],[Oy,"_pointerup"],[jy,"_pointercancel"],[Ay,"_pointerover"],[C1,"_wheel"],[x1,"_contextmenu"],[Vd,"_pointerdown"],[qd,"_pointermove"],[kc,"_pointerup"],[Kd,"_pointercancel"],[Qd,"_pointerleave"],[cb,"_lostpointercapture"]],Fm={mouse:{[sg]:ub,[Qd]:Ty,[rg]:Ay,[og]:My,[qd]:wy,[Vd]:Ny,[kc]:Ry,[Kd]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[sg]:"touchout",[Qd]:"touchleave",[rg]:"touchover",[og]:"touchenter",[qd]:zy,[Vd]:Dy,[kc]:Oy,[Kd]:jy,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[sg]:sg,[Qd]:Qd,[rg]:rg,[og]:og,[qd]:qd,[Vd]:Vd,[kc]:kc,[Kd]:Kd,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Zd=l=>l.indexOf("pointer")>=0?"pointer":l.indexOf("touch")>=0?"touch":"mouse",Kc=l=>{const e=Zd(l);if(e==="pointer")return Lt.pointerEventsEnabled&&Fm.pointer;if(e==="touch")return Fm.touch;if(e==="mouse")return Fm.mouse};function Fp(l={}){return(l.clipFunc||l.clipWidth||l.clipHeight)&&et.warn("Stage does not support clipping. Please use clip for Layers or Groups."),l}const hb="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",th=[];let Jg=class extends Kl{constructor(e){super(Fp(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),th.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Fp(this.attrs)}),this._checkVisibility()}_validateAdd(e){const i=e.getType()==="Layer",o=e.getType()==="FastLayer";i||o||et.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===ob){let i;if(e.charAt(0)==="."){const o=e.slice(1);e=document.getElementsByClassName(o)[0]}else e.charAt(0)!=="#"?i=e:i=e.slice(1),e=document.getElementById(i);if(!e)throw"Can not find container in document with id "+i}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,i=e.length;for(let o=0;o<i;o++)e[o].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Kl.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&et._isInDocument(e)&&this.container().removeChild(e);const i=th.indexOf(this);return i>-1&&th.splice(i,1),et.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(et.warn(hb),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const i=new po({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),o=i.getContext()._context,u=this.children;return(e.x||e.y)&&o.translate(-1*e.x,-1*e.y),u.forEach(function(d){if(!d.isVisible())return;const h=d._toKonvaCanvas(e);o.drawImage(h._canvas,e.x,e.y,h.getWidth()/h.getPixelRatio(),h.getHeight()/h.getPixelRatio())}),i}getIntersection(e){if(!e)return null;const i=this.children,o=i.length,u=o-1;for(let d=u;d>=0;d--){const h=i[d].getIntersection(e);if(h)return h}return null}_resizeDOM(){const e=this.width(),i=this.height();this.content&&(this.content.style.width=e+Ip,this.content.style.height=i+Ip),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(o=>{o.setSize({width:e,height:i}),o.draw()})}add(e,...i){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}super.add(e);const o=this.children.length;return o>fb&&et.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Lt.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Ey(e,this)}setPointerCapture(e){_y(e,this)}releaseCapture(e){$d(e)}getLayers(){return this.children}_bindContentEvents(){Lt.isBrowser&&db.forEach(([e,i])=>{this.content.addEventListener(e,o=>{this[i](o)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const i=Kc(e.type);i&&this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const i=Kc(e.type);i&&this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){const i=Kc(e.type),o=Zd(e.type);if(!i)return;this.setPointersPositions(e);const u=this._getTargetShape(o),d=!(Lt.isDragging()||Lt.isTransforming())||Lt.hitOnDragEnabled;u&&d?(u._fireAndBubble(i.pointerout,{evt:e}),u._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[o+"targetShape"]=null):d&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const i=Kc(e.type),o=Zd(e.type);if(!i)return;this.setPointersPositions(e);let u=!1;this._changedPointerPositions.forEach(d=>{const h=this.getIntersection(d);if(Qe.justDragged=!1,Lt["_"+o+"ListenClick"]=!0,!h||!h.isListening()){this[o+"ClickStartShape"]=void 0;return}Lt.capturePointerEventsEnabled&&h.setPointerCapture(d.id),this[o+"ClickStartShape"]=h,h._fireAndBubble(i.pointerdown,{evt:e,pointerId:d.id}),u=!0;const m=e.type.indexOf("touch")>=0;h.preventDefault()&&e.cancelable&&m&&e.preventDefault()}),u||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const i=Kc(e.type),o=Zd(e.type);if(!i)return;const u=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(Lt.isDragging()&&Qe.node.preventDefault()&&e.cancelable&&u&&e.preventDefault(),this.setPointersPositions(e),!(!(Lt.isDragging()||Lt.isTransforming())||Lt.hitOnDragEnabled))return;const h={};let m=!1;const v=this._getTargetShape(o);this._changedPointerPositions.forEach(b=>{const E=Im(b.id)||this.getIntersection(b),C=b.id,_={evt:e,pointerId:C},M=v!==E;if(M&&v&&(v._fireAndBubble(i.pointerout,{..._},E),v._fireAndBubble(i.pointerleave,{..._},E)),E){if(h[E._id])return;h[E._id]=!0}E&&E.isListening()?(m=!0,M&&(E._fireAndBubble(i.pointerover,{..._},v),E._fireAndBubble(i.pointerenter,{..._},v),this[o+"targetShape"]=E),E._fireAndBubble(i.pointermove,{..._})):v&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:C}),this[o+"targetShape"]=null)}),m||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const i=Kc(e.type),o=Zd(e.type);if(!i)return;this.setPointersPositions(e);const u=this[o+"ClickStartShape"],d=this[o+"ClickEndShape"],h={};let m=!1;this._changedPointerPositions.forEach(v=>{const b=Im(v.id)||this.getIntersection(v);if(b){if(b.releaseCapture(v.id),h[b._id])return;h[b._id]=!0}const E=v.id,C={evt:e,pointerId:E};let _=!1;Lt["_"+o+"InDblClickWindow"]?(_=!0,clearTimeout(this[o+"DblTimeout"])):Qe.justDragged||(Lt["_"+o+"InDblClickWindow"]=!0,clearTimeout(this[o+"DblTimeout"])),this[o+"DblTimeout"]=setTimeout(function(){Lt["_"+o+"InDblClickWindow"]=!1},Lt.dblClickWindow),b&&b.isListening()?(m=!0,this[o+"ClickEndShape"]=b,b._fireAndBubble(i.pointerup,{...C}),Lt["_"+o+"ListenClick"]&&u&&u===b&&(b._fireAndBubble(i.pointerclick,{...C}),_&&d&&d===b&&b._fireAndBubble(i.pointerdblclick,{...C}))):(this[o+"ClickEndShape"]=null,m||(this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),m=!0),Lt["_"+o+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:E}),_&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:E}))}),m||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Lt["_"+o+"ListenClick"]=!1,e.cancelable&&o!=="touch"&&o!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(x1,{evt:e}):this._fire(x1,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(C1,{evt:e}):this._fire(C1,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const i=Im(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(kc,I1(e)),$d(e.pointerId)}_lostpointercapture(e){$d(e.pointerId)}setPointersPositions(e){const i=this._getContentPosition();let o=null,u=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,d=>{this._pointerPositions.push({id:d.identifier,x:(d.clientX-i.left)/i.scaleX,y:(d.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,d=>{this._changedPointerPositions.push({id:d.identifier,x:(d.clientX-i.left)/i.scaleX,y:(d.clientY-i.top)/i.scaleY})})):(o=(e.clientX-i.left)/i.scaleX,u=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:o,y:u},this._pointerPositions=[{x:o,y:u,id:et._getFirstPointerId(e)}],this._changedPointerPositions=[{x:o,y:u,id:et._getFirstPointerId(e)}])}_setPointerPosition(e){et.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new po({width:this.width(),height:this.height()}),this.bufferHitCanvas=new k1({pixelRatio:1,width:this.width(),height:this.height()}),!Lt.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return et.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Jg.prototype.nodeType=rb;Hn(Jg);X.addGetterSetter(Jg,"container");Lt.isBrowser&&document.addEventListener("visibilitychange",()=>{th.forEach(l=>{l.batchDraw()})});const Hy="hasShadow",Uy="shadowRGBA",By="patternImage",Gy="linearGradient",Ly="radialGradient";let ug;function Wm(){return ug||(ug=et.createCanvasElement().getContext("2d"),ug)}const eh={};function gb(l){const e=this.attrs.fillRule;e?l.fill(e):l.fill()}function mb(l){l.stroke()}function pb(l){const e=this.attrs.fillRule;e?l.fill(e):l.fill()}function vb(l){l.stroke()}function yb(){this._clearCache(Hy)}function Sb(){this._clearCache(Uy)}function bb(){this._clearCache(By)}function xb(){this._clearCache(Gy)}function Cb(){this._clearCache(Ly)}class Dt extends Bt{constructor(e){super(e);let i,o=0;for(;i=et.getHitColor(),!(i&&!(i in eh));)if(o++,o>=1e4){et.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),i=et.getRandomColor();break}this.colorKey=i,eh[i]=this}getContext(){return et.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return et.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Hy,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(By,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const i=Wm().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const o=new Vl;o.translate(this.fillPatternX(),this.fillPatternY()),o.rotate(Lt.getAngle(this.fillPatternRotation())),o.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),o.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const u=o.getMatrix(),d=typeof DOMMatrix>"u"?{a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]}:new DOMMatrix(u);i.setTransform(d)}return i}}_getLinearGradient(){return this._getCache(Gy,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const i=Wm(),o=this.fillLinearGradientStartPoint(),u=this.fillLinearGradientEndPoint(),d=i.createLinearGradient(o.x,o.y,u.x,u.y);for(let h=0;h<e.length;h+=2)d.addColorStop(e[h],e[h+1]);return d}}_getRadialGradient(){return this._getCache(Ly,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const i=Wm(),o=this.fillRadialGradientStartPoint(),u=this.fillRadialGradientEndPoint(),d=i.createRadialGradient(o.x,o.y,this.fillRadialGradientStartRadius(),u.x,u.y,this.fillRadialGradientEndRadius());for(let h=0;h<e.length;h+=2)d.addColorStop(e[h],e[h+1]);return d}}getShadowRGBA(){return this._getCache(Uy,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=et.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const i=this.getStage();if(!i)return!1;const o=i.bufferHitCanvas;return o.getContext().clear(),this.drawHit(o,void 0,!0),o.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return Bt.prototype.destroy.call(this),delete eh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const u=e||this.hasFill(),d=this.hasStroke(),h=this.getAbsoluteOpacity()!==1;if(u&&d&&h)return!0;const m=this.hasShadow(),v=this.shadowForStrokeEnabled();return!!(u&&d&&m&&v)}setStrokeHitEnabled(e){et.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let i=!1,o=this.getParent();for(;o;){if(o.isCached()){i=!0;break}o=o.getParent()}const u=e.skipTransform,d=e.relativeTo||i&&this.getStage()||void 0,h=this.getSelfRect(),v=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,b=h.width+v,E=h.height+v,C=!e.skipShadow&&this.hasShadow(),_=C?this.shadowOffsetX():0,M=C?this.shadowOffsetY():0,A=b+Math.abs(_),H=E+Math.abs(M),D=C&&this.shadowBlur()||0,U=A+D*2,j=H+D*2,Y={width:U,height:j,x:-(v/2+D)+Math.min(_,0)+h.x,y:-(v/2+D)+Math.min(M,0)+h.y};return u?Y:this._transformedRect(Y,d)}drawScene(e,i,o){const u=this.getLayer(),d=e||u.getCanvas(),h=d.getContext(),m=this._getCanvasCache(),v=this.getSceneFunc(),b=this.hasShadow();let E;const C=i===this;if(!this.isVisible()&&!C)return this;if(m){h.save();const _=this.getAbsoluteTransform(i).getMatrix();return h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(h),h.restore(),this}if(!v)return this;if(h.save(),this._useBufferCanvas()){E=this.getStage();const _=o||E.bufferCanvas,M=_.getContext();M.clear(),M.save(),M._applyLineJoin(this),M._applyMiterLimit(this);const A=this.getAbsoluteTransform(i).getMatrix();M.transform(A[0],A[1],A[2],A[3],A[4],A[5]),v.call(this,M,this),M.restore();const H=_.pixelRatio;b&&h._applyShadow(this),C||(h._applyOpacity(this),h._applyGlobalCompositeOperation(this)),h.drawImage(_._canvas,_.x||0,_.y||0,_.width/H,_.height/H)}else{if(h._applyLineJoin(this),h._applyMiterLimit(this),!C){const _=this.getAbsoluteTransform(i).getMatrix();h.transform(_[0],_[1],_[2],_[3],_[4],_[5]),h._applyOpacity(this),h._applyGlobalCompositeOperation(this)}b&&h._applyShadow(this),v.call(this,h,this)}return h.restore(),this}drawHit(e,i,o=!1){if(!this.shouldDrawHit(i,o))return this;const u=this.getLayer(),d=e||u.hitCanvas,h=d&&d.getContext(),m=this.hitFunc()||this.sceneFunc(),v=this._getCanvasCache(),b=v&&v.hit;if(this.colorKey||et.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),b){h.save();const C=this.getAbsoluteTransform(i).getMatrix();return h.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedHitCanvas(h),h.restore(),this}if(!m)return this;if(h.save(),h._applyLineJoin(this),h._applyMiterLimit(this),!(this===i)){const C=this.getAbsoluteTransform(i).getMatrix();h.transform(C[0],C[1],C[2],C[3],C[4],C[5])}return m.call(this,h,this),h.restore(),this}drawHitFromCache(e=0){const i=this._getCanvasCache(),o=this._getCachedSceneCanvas(),u=i.hit,d=u.getContext(),h=u.getWidth(),m=u.getHeight();d.clear(),d.drawImage(o._canvas,0,0,h,m);try{const v=d.getImageData(0,0,h,m),b=v.data,E=b.length,C=et._hexToRgb(this.colorKey);for(let _=0;_<E;_+=4)b[_+3]>e?(b[_]=C.r,b[_+1]=C.g,b[_+2]=C.b,b[_+3]=255):b[_+3]=0;d.putImageData(v,0,0)}catch(v){et.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(e){return Ey(e,this)}setPointerCapture(e){_y(e,this)}releaseCapture(e){$d(e)}}Dt.prototype._fillFunc=gb;Dt.prototype._strokeFunc=mb;Dt.prototype._fillFuncHit=pb;Dt.prototype._strokeFuncHit=vb;Dt.prototype._centroid=!1;Dt.prototype.nodeType="Shape";Hn(Dt);Dt.prototype.eventListeners={};Dt.prototype.on.call(Dt.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",yb);Dt.prototype.on.call(Dt.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Sb);Dt.prototype.on.call(Dt.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",bb);Dt.prototype.on.call(Dt.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",xb);Dt.prototype.on.call(Dt.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Cb);X.addGetterSetter(Dt,"stroke",void 0,xy());X.addGetterSetter(Dt,"strokeWidth",2,Gt());X.addGetterSetter(Dt,"fillAfterStrokeEnabled",!1);X.addGetterSetter(Dt,"hitStrokeWidth","auto",J1());X.addGetterSetter(Dt,"strokeHitEnabled",!0,Qi());X.addGetterSetter(Dt,"perfectDrawEnabled",!0,Qi());X.addGetterSetter(Dt,"shadowForStrokeEnabled",!0,Qi());X.addGetterSetter(Dt,"lineJoin");X.addGetterSetter(Dt,"lineCap");X.addGetterSetter(Dt,"miterLimit");X.addGetterSetter(Dt,"sceneFunc");X.addGetterSetter(Dt,"hitFunc");X.addGetterSetter(Dt,"dash");X.addGetterSetter(Dt,"dashOffset",0,Gt());X.addGetterSetter(Dt,"shadowColor",void 0,Eu());X.addGetterSetter(Dt,"shadowBlur",0,Gt());X.addGetterSetter(Dt,"shadowOpacity",1,Gt());X.addComponentsGetterSetter(Dt,"shadowOffset",["x","y"]);X.addGetterSetter(Dt,"shadowOffsetX",0,Gt());X.addGetterSetter(Dt,"shadowOffsetY",0,Gt());X.addGetterSetter(Dt,"fillPatternImage");X.addGetterSetter(Dt,"fill",void 0,xy());X.addGetterSetter(Dt,"fillPatternX",0,Gt());X.addGetterSetter(Dt,"fillPatternY",0,Gt());X.addGetterSetter(Dt,"fillLinearGradientColorStops");X.addGetterSetter(Dt,"strokeLinearGradientColorStops");X.addGetterSetter(Dt,"fillRadialGradientStartRadius",0);X.addGetterSetter(Dt,"fillRadialGradientEndRadius",0);X.addGetterSetter(Dt,"fillRadialGradientColorStops");X.addGetterSetter(Dt,"fillPatternRepeat","repeat");X.addGetterSetter(Dt,"fillEnabled",!0);X.addGetterSetter(Dt,"strokeEnabled",!0);X.addGetterSetter(Dt,"shadowEnabled",!0);X.addGetterSetter(Dt,"dashEnabled",!0);X.addGetterSetter(Dt,"strokeScaleEnabled",!0);X.addGetterSetter(Dt,"fillPriority","color");X.addComponentsGetterSetter(Dt,"fillPatternOffset",["x","y"]);X.addGetterSetter(Dt,"fillPatternOffsetX",0,Gt());X.addGetterSetter(Dt,"fillPatternOffsetY",0,Gt());X.addComponentsGetterSetter(Dt,"fillPatternScale",["x","y"]);X.addGetterSetter(Dt,"fillPatternScaleX",1,Gt());X.addGetterSetter(Dt,"fillPatternScaleY",1,Gt());X.addComponentsGetterSetter(Dt,"fillLinearGradientStartPoint",["x","y"]);X.addComponentsGetterSetter(Dt,"strokeLinearGradientStartPoint",["x","y"]);X.addGetterSetter(Dt,"fillLinearGradientStartPointX",0);X.addGetterSetter(Dt,"strokeLinearGradientStartPointX",0);X.addGetterSetter(Dt,"fillLinearGradientStartPointY",0);X.addGetterSetter(Dt,"strokeLinearGradientStartPointY",0);X.addComponentsGetterSetter(Dt,"fillLinearGradientEndPoint",["x","y"]);X.addComponentsGetterSetter(Dt,"strokeLinearGradientEndPoint",["x","y"]);X.addGetterSetter(Dt,"fillLinearGradientEndPointX",0);X.addGetterSetter(Dt,"strokeLinearGradientEndPointX",0);X.addGetterSetter(Dt,"fillLinearGradientEndPointY",0);X.addGetterSetter(Dt,"strokeLinearGradientEndPointY",0);X.addComponentsGetterSetter(Dt,"fillRadialGradientStartPoint",["x","y"]);X.addGetterSetter(Dt,"fillRadialGradientStartPointX",0);X.addGetterSetter(Dt,"fillRadialGradientStartPointY",0);X.addComponentsGetterSetter(Dt,"fillRadialGradientEndPoint",["x","y"]);X.addGetterSetter(Dt,"fillRadialGradientEndPointX",0);X.addGetterSetter(Dt,"fillRadialGradientEndPointY",0);X.addGetterSetter(Dt,"fillPatternRotation",0);X.addGetterSetter(Dt,"fillRule",void 0,Eu());X.backCompat(Dt,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const Eb="beforeDraw",_b="draw",Yy=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Tb=Yy.length;let _u=class extends Kl{constructor(e){super(e),this.canvas=new po,this.hitCanvas=new k1({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Bt.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Bt.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Bt.prototype.moveDown.call(this)){const e=this.getStage();if(e){const i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Bt.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Bt.prototype.remove.call(this),e&&e.parentNode&&et._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){const i=e.getType();i!=="Group"&&i!=="Shape"&&et.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Bt.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){et.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){et.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,et.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let i=1,o=!1;for(;;){for(let u=0;u<Tb;u++){const d=Yy[u],h=this._getIntersection({x:e.x+d.x*i,y:e.y+d.y*i}),m=h.shape;if(m)return m;if(o=!!h.antialiased,!h.antialiased)break}if(o)i+=1;else return null}}_getIntersection(e){const i=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,u=o[3];if(u===255){const d=et.getHitColorKey(o[0],o[1],o[2]),h=eh[d];return h?{shape:h}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(e,i,o){const u=this.getLayer(),d=e||u&&u.getCanvas();return this._fire(Eb,{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),Kl.prototype.drawScene.call(this,d,i,o),this._fire(_b,{node:this}),this}drawHit(e,i){const o=this.getLayer(),u=e||o&&o.hitCanvas;return o&&o.clearBeforeDraw()&&o.getHitCanvas().getContext().clear(),Kl.prototype.drawHit.call(this,u,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return et.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return et.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};_u.prototype.nodeType="Layer";Hn(_u);X.addGetterSetter(_u,"imageSmoothingEnabled",!0);X.addGetterSetter(_u,"clearBeforeDraw",!0);X.addGetterSetter(_u,"hitGraphEnabled",!0,Qi());class F1 extends _u{constructor(e){super(e),this.listening(!1),et.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}F1.prototype.nodeType="FastLayer";Hn(F1);let Fc=class extends Kl{_validateAdd(e){const i=e.getType();i!=="Group"&&i!=="Shape"&&et.throw("You may only add groups and shapes to groups.")}};Fc.prototype.nodeType="Group";Hn(Fc);const Pm=(function(){return yu.performance&&yu.performance.now?function(){return yu.performance.now()}:function(){return new Date().getTime()}})();class yi{constructor(e,i){this.id=yi.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Pm(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){let i=[];return e&&(i=Array.isArray(e)?e:[e]),this.layers=i,this}getLayers(){return this.layers}addLayer(e){const i=this.layers,o=i.length;for(let u=0;u<o;u++)if(i[u]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const i=yi.animations,o=i.length;for(let u=0;u<o;u++)if(i[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Pm(),yi._addAnimation(this),this}stop(){return yi._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const i=e.id,o=this.animations,u=o.length;for(let d=0;d<u;d++)if(o[d].id===i){this.animations.splice(d,1);break}}static _runFrames(){const e={},i=this.animations;for(let o=0;o<i.length;o++){const u=i[o],d=u.layers,h=u.func;u._updateFrameObject(Pm());const m=d.length;let v;if(h?v=h.call(u,u.frame)!==!1:v=!0,!!v)for(let b=0;b<m;b++){const E=d[b];E._id!==void 0&&(e[E._id]=E)}}for(const o in e)e.hasOwnProperty(o)&&e[o].batchDraw()}static _animationLoop(){const e=yi;e.animations.length?(e._runFrames(),et.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,et.requestAnimFrame(this._animationLoop))}}yi.animations=[];yi.animIdCounter=0;yi.animRunning=!1;const Ab={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Mb=1,Wp=2,Pp=3,$p=["fill","stroke","shadowColor"];let wb=0;class Nb{constructor(e,i,o,u,d,h,m){this.prop=e,this.propFunc=i,this.begin=u,this._pos=u,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=m,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=o,this._change=d-this.begin,this.pause()}fire(e){const i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Wp,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Pp,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===Wp?this.setTime(e):this.state===Pp&&this.setTime(this.duration-e)}pause(){this.state=Mb,this.fire("onPause")}getTimer(){return new Date().getTime()}}class fn{constructor(e){const i=this,o=e.node,u=o._id,d=e.easing||nh.Linear,h=!!e.yoyo;let m,v;typeof e.duration>"u"?m=.3:e.duration===0?m=.001:m=e.duration,this.node=o,this._id=wb++;const b=o.getLayer()||(o instanceof Lt.Stage?o.getLayers():null);b||et.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new yi(function(){i.tween.onEnterFrame()},b),this.tween=new Nb(v,function(E){i._tweenFunc(E)},d,0,1,m*1e3,h),this._addListeners(),fn.attrs[u]||(fn.attrs[u]={}),fn.attrs[u][this._id]||(fn.attrs[u][this._id]={}),fn.tweens[u]||(fn.tweens[u]={});for(v in e)Ab[v]===void 0&&this._addAttr(v,e[v]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){const o=this.node,u=o._id;let d,h,m,v,b;const E=fn.tweens[u][e];E&&delete fn.attrs[u][E][e];let C=o.getAttr(e);if(et._isArray(i))if(d=[],h=Math.max(i.length,C.length),e==="points"&&i.length!==C.length&&(i.length>C.length?(v=C,C=et._prepareArrayForTween(C,i,o.closed())):(m=i,i=et._prepareArrayForTween(i,C,o.closed()))),e.indexOf("fill")===0)for(let _=0;_<h;_++)if(_%2===0)d.push(i[_]-C[_]);else{const M=et.colorToRGBA(C[_]);b=et.colorToRGBA(i[_]),C[_]=M,d.push({r:b.r-M.r,g:b.g-M.g,b:b.b-M.b,a:b.a-M.a})}else for(let _=0;_<h;_++)d.push(i[_]-C[_]);else $p.indexOf(e)!==-1?(C=et.colorToRGBA(C),b=et.colorToRGBA(i),d={r:b.r-C.r,g:b.g-C.g,b:b.b-C.b,a:b.a-C.a}):d=i-C;fn.attrs[u][this._id][e]={start:C,diff:d,end:i,trueEnd:m,trueStart:v},fn.tweens[u][e]=this._id}_tweenFunc(e){const i=this.node,o=fn.attrs[i._id][this._id];let u,d,h,m,v,b,E,C;for(u in o){if(d=o[u],h=d.start,m=d.diff,C=d.end,et._isArray(h))if(v=[],E=Math.max(h.length,C.length),u.indexOf("fill")===0)for(b=0;b<E;b++)b%2===0?v.push((h[b]||0)+m[b]*e):v.push("rgba("+Math.round(h[b].r+m[b].r*e)+","+Math.round(h[b].g+m[b].g*e)+","+Math.round(h[b].b+m[b].b*e)+","+(h[b].a+m[b].a*e)+")");else for(b=0;b<E;b++)v.push((h[b]||0)+m[b]*e);else $p.indexOf(u)!==-1?v="rgba("+Math.round(h.r+m.r*e)+","+Math.round(h.g+m.g*e)+","+Math.round(h.b+m.b*e)+","+(h.a+m.a*e)+")":v=h+m*e;i.setAttr(u,v)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,i=fn.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,i=fn.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,i=this._id,o=fn.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const u in o)delete fn.tweens[e][u];delete fn.attrs[e][i],fn.tweens[e]&&(Object.keys(fn.tweens[e]).length===0&&delete fn.tweens[e],Object.keys(fn.attrs[e]).length===0&&delete fn.attrs[e])}}fn.attrs={};fn.tweens={};Bt.prototype.to=function(l){const e=l.onFinish;l.node=this,l.onFinish=function(){this.destroy(),e&&e()},new fn(l).play()};const nh={BackEaseIn(l,e,i,o){return i*(l/=o)*l*((1.70158+1)*l-1.70158)+e},BackEaseOut(l,e,i,o){return i*((l=l/o-1)*l*((1.70158+1)*l+1.70158)+1)+e},BackEaseInOut(l,e,i,o){let u=1.70158;return(l/=o/2)<1?i/2*(l*l*(((u*=1.525)+1)*l-u))+e:i/2*((l-=2)*l*(((u*=1.525)+1)*l+u)+2)+e},ElasticEaseIn(l,e,i,o,u,d){let h=0;return l===0?e:(l/=o)===1?e+i:(d||(d=o*.3),!u||u<Math.abs(i)?(u=i,h=d/4):h=d/(2*Math.PI)*Math.asin(i/u),-(u*Math.pow(2,10*(l-=1))*Math.sin((l*o-h)*(2*Math.PI)/d))+e)},ElasticEaseOut(l,e,i,o,u,d){let h=0;return l===0?e:(l/=o)===1?e+i:(d||(d=o*.3),!u||u<Math.abs(i)?(u=i,h=d/4):h=d/(2*Math.PI)*Math.asin(i/u),u*Math.pow(2,-10*l)*Math.sin((l*o-h)*(2*Math.PI)/d)+i+e)},ElasticEaseInOut(l,e,i,o,u,d){let h=0;return l===0?e:(l/=o/2)===2?e+i:(d||(d=o*(.3*1.5)),!u||u<Math.abs(i)?(u=i,h=d/4):h=d/(2*Math.PI)*Math.asin(i/u),l<1?-.5*(u*Math.pow(2,10*(l-=1))*Math.sin((l*o-h)*(2*Math.PI)/d))+e:u*Math.pow(2,-10*(l-=1))*Math.sin((l*o-h)*(2*Math.PI)/d)*.5+i+e)},BounceEaseOut(l,e,i,o){return(l/=o)<1/2.75?i*(7.5625*l*l)+e:l<2/2.75?i*(7.5625*(l-=1.5/2.75)*l+.75)+e:l<2.5/2.75?i*(7.5625*(l-=2.25/2.75)*l+.9375)+e:i*(7.5625*(l-=2.625/2.75)*l+.984375)+e},BounceEaseIn(l,e,i,o){return i-nh.BounceEaseOut(o-l,0,i,o)+e},BounceEaseInOut(l,e,i,o){return l<o/2?nh.BounceEaseIn(l*2,0,i,o)*.5+e:nh.BounceEaseOut(l*2-o,0,i,o)*.5+i*.5+e},EaseIn(l,e,i,o){return i*(l/=o)*l+e},EaseOut(l,e,i,o){return-i*(l/=o)*(l-2)+e},EaseInOut(l,e,i,o){return(l/=o/2)<1?i/2*l*l+e:-i/2*(--l*(l-2)-1)+e},StrongEaseIn(l,e,i,o){return i*(l/=o)*l*l*l*l+e},StrongEaseOut(l,e,i,o){return i*((l=l/o-1)*l*l*l*l+1)+e},StrongEaseInOut(l,e,i,o){return(l/=o/2)<1?i/2*l*l*l*l*l+e:i/2*((l-=2)*l*l*l*l+2)+e},Linear(l,e,i,o){return i*l/o+e}},Wc=et._assign(Lt,{Util:et,Transform:Vl,Node:Bt,Container:Kl,Stage:Jg,stages:th,Layer:_u,FastLayer:F1,Group:Fc,DD:Qe,Shape:Dt,shapes:eh,Animation:yi,Tween:fn,Easings:nh,Context:Zg,Canvas:Z1});class gr extends Dt{_sceneFunc(e){const i=Lt.getAngle(this.angle()),o=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,i,o),e.arc(0,0,this.innerRadius(),i,0,!o),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),i=this.outerRadius(),o=this.clockwise(),u=Lt.getAngle(o?360-this.angle():this.angle()),d=Math.cos(Math.min(u,Math.PI)),h=1,m=Math.sin(Math.min(Math.max(Math.PI,u),3*Math.PI/2)),v=Math.sin(Math.min(u,Math.PI/2)),b=d*(d>0?e:i),E=h*i,C=m*(m>0?e:i),_=v*(v>0?i:e);return{x:b,y:o?-1*_:C,width:E-b,height:_-C}}}gr.prototype._centroid=!0;gr.prototype.className="Arc";gr.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Hn(gr);X.addGetterSetter(gr,"innerRadius",0,Gt());X.addGetterSetter(gr,"outerRadius",0,Gt());X.addGetterSetter(gr,"angle",0,Gt());X.addGetterSetter(gr,"clockwise",!1,Qi());function E1(l,e,i,o,u,d,h){const m=Math.sqrt(Math.pow(i-l,2)+Math.pow(o-e,2)),v=Math.sqrt(Math.pow(u-i,2)+Math.pow(d-o,2)),b=h*m/(m+v),E=h*v/(m+v),C=i-b*(u-l),_=o-b*(d-e),M=i+E*(u-l),A=o+E*(d-e);return[C,_,M,A]}function tv(l,e){const i=l.length,o=[];for(let u=2;u<i-2;u+=2){const d=E1(l[u-2],l[u-1],l[u],l[u+1],l[u+2],l[u+3],e);isNaN(d[0])||(o.push(d[0]),o.push(d[1]),o.push(l[u]),o.push(l[u+1]),o.push(d[2]),o.push(d[3]))}return o}class mr extends Dt{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const i=this.points(),o=i.length,u=this.tension(),d=this.closed(),h=this.bezier();if(!o)return;let m=0;if(e.beginPath(),e.moveTo(i[0],i[1]),u!==0&&o>4){const v=this.getTensionPoints(),b=v.length;for(m=d?0:4,d||e.quadraticCurveTo(v[0],v[1],v[2],v[3]);m<b-2;)e.bezierCurveTo(v[m++],v[m++],v[m++],v[m++],v[m++],v[m++]);d||e.quadraticCurveTo(v[b-2],v[b-1],i[o-2],i[o-1])}else if(h)for(m=2;m<o;)e.bezierCurveTo(i[m++],i[m++],i[m++],i[m++],i[m++],i[m++]);else for(m=2;m<o;m+=2)e.lineTo(i[m],i[m+1]);d?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():tv(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),i=e.length,o=this.tension(),u=E1(e[i-2],e[i-1],e[0],e[1],e[2],e[3],o),d=E1(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],o),h=tv(e,o);return[u[2],u[3]].concat(h).concat([d[0],d[1],e[i-2],e[i-1],d[2],d[3],u[0],u[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let i=e[0],o=e[0],u=e[1],d=e[1],h,m;for(let v=0;v<e.length/2;v++)h=e[v*2],m=e[v*2+1],i=Math.min(i,h),o=Math.max(o,h),u=Math.min(u,m),d=Math.max(d,m);return{x:i,y:u,width:o-i,height:d-u}}}mr.prototype.className="Line";mr.prototype._attrsAffectingSize=["points","bezier","tension"];Hn(mr);X.addGetterSetter(mr,"closed",!1);X.addGetterSetter(mr,"bezier",!1);X.addGetterSetter(mr,"tension",0,Gt());X.addGetterSetter(mr,"points",[],ZS());const Rb=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Db=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Ob=[[1],[1,1],[1,2,1],[1,3,3,1]],ev=(l,e,i)=>{let o,u;const h=i/2;o=0;for(let m=0;m<20;m++)u=h*Rb[20][m]+h,o+=Db[20][m]*zb(l,e,u);return h*o},nv=(l,e,i)=>{i===void 0&&(i=1);const o=l[0]-2*l[1]+l[2],u=e[0]-2*e[1]+e[2],d=2*l[1]-2*l[0],h=2*e[1]-2*e[0],m=4*(o*o+u*u),v=4*(o*d+u*h),b=d*d+h*h;if(m===0)return i*Math.sqrt(Math.pow(l[2]-l[0],2)+Math.pow(e[2]-e[0],2));const E=v/(2*m),C=b/m,_=i+E,M=C-E*E,A=_*_+M>0?Math.sqrt(_*_+M):0,H=E*E+M>0?Math.sqrt(E*E+M):0,D=E+Math.sqrt(E*E+M)!==0?M*Math.log(Math.abs((_+A)/(E+H))):0;return Math.sqrt(m)/2*(_*A-E*H+D)};function zb(l,e,i){const o=_1(1,i,l),u=_1(1,i,e),d=o*o+u*u;return Math.sqrt(d)}const _1=(l,e,i)=>{const o=i.length-1;let u,d;if(o===0)return 0;if(l===0){d=0;for(let h=0;h<=o;h++)d+=Ob[o][h]*Math.pow(1-e,o-h)*Math.pow(e,h)*i[h];return d}else{u=new Array(o);for(let h=0;h<o;h++)u[h]=o*(i[h+1]-i[h]);return _1(l-1,e,u)}},av=(l,e,i)=>{let o=1,u=l/e,d=(l-i(u))/e,h=0;for(;o>.001;){const m=i(u+d),v=Math.abs(l-m)/e;if(v<o)o=v,u+=d;else{const b=i(u-d),E=Math.abs(l-b)/e;E<o?(o=E,u-=d):d/=2}if(h++,h>500)break}return u};let Si=class Hl extends Dt{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Hl.parsePathData(this.data()),this.pathLength=Hl.getPathLength(this.dataArray)}_sceneFunc(e){const i=this.dataArray;e.beginPath();let o=!1;for(let u=0;u<i.length;u++){const d=i[u].command,h=i[u].points;switch(d){case"L":e.lineTo(h[0],h[1]);break;case"M":e.moveTo(h[0],h[1]);break;case"C":e.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case"Q":e.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case"A":const m=h[0],v=h[1],b=h[2],E=h[3],C=h[4],_=h[5],M=h[6],A=h[7],H=b>E?b:E,D=b>E?1:b/E,U=b>E?E/b:1;e.translate(m,v),e.rotate(M),e.scale(D,U),e.arc(0,0,H,C,C+_,1-A),e.scale(1/D,1/U),e.rotate(-M),e.translate(-m,-v);break;case"z":o=!0,e.closePath();break}}!o&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(v){if(v.command==="A"){const b=v.points[4],E=v.points[5],C=v.points[4]+E;let _=Math.PI/180;if(Math.abs(b-C)<_&&(_=Math.abs(b-C)),E<0)for(let M=b-_;M>C;M-=_){const A=Hl.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],M,0);e.push(A.x,A.y)}else for(let M=b+_;M<C;M+=_){const A=Hl.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],M,0);e.push(A.x,A.y)}}else if(v.command==="C")for(let b=0;b<=1;b+=.01){const E=Hl.getPointOnCubicBezier(b,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3],v.points[4],v.points[5]);e.push(E.x,E.y)}else e=e.concat(v.points)});let i=e[0],o=e[0],u=e[1],d=e[1],h,m;for(let v=0;v<e.length/2;v++)h=e[v*2],m=e[v*2+1],isNaN(h)||(i=Math.min(i,h),o=Math.max(o,h)),isNaN(m)||(u=Math.min(u,m),d=Math.max(d,m));return{x:i,y:u,width:o-i,height:d-u}}getLength(){return this.pathLength}getPointAtLength(e){return Hl.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,i,o,u){return Math.sqrt((o-e)*(o-e)+(u-i)*(u-i))}static getPathLength(e){let i=0;for(let o=0;o<e.length;++o)i+=e[o].pathLength;return i}static getPointAtLengthOfDataArray(e,i){let o,u=0,d=i.length;if(!d)return null;for(;u<d&&e>i[u].pathLength;)e-=i[u].pathLength,++u;if(u===d)return o=i[u-1].points.slice(-2),{x:o[0],y:o[1]};if(e<.01)return i[u].command==="M"?(o=i[u].points.slice(0,2),{x:o[0],y:o[1]}):{x:i[u].start.x,y:i[u].start.y};const h=i[u],m=h.points;switch(h.command){case"L":return Hl.getPointOnLine(e,h.start.x,h.start.y,m[0],m[1]);case"C":return Hl.getPointOnCubicBezier(av(e,Hl.getPathLength(i),H=>ev([h.start.x,m[0],m[2],m[4]],[h.start.y,m[1],m[3],m[5]],H)),h.start.x,h.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Hl.getPointOnQuadraticBezier(av(e,Hl.getPathLength(i),H=>nv([h.start.x,m[0],m[2]],[h.start.y,m[1],m[3]],H)),h.start.x,h.start.y,m[0],m[1],m[2],m[3]);case"A":const v=m[0],b=m[1],E=m[2],C=m[3],_=m[5],M=m[6];let A=m[4];return A+=_*e/h.pathLength,Hl.getPointOnEllipticalArc(v,b,E,C,A,M)}return null}static getPointOnLine(e,i,o,u,d,h,m){h=h??i,m=m??o;const v=this.getLineLength(i,o,u,d);if(v<1e-10)return{x:i,y:o};if(u===i)return{x:h,y:m+(d>o?e:-e)};const b=(d-o)/(u-i),E=Math.sqrt(e*e/(1+b*b))*(u<i?-1:1),C=b*E;if(Math.abs(m-o-b*(h-i))<1e-10)return{x:h+E,y:m+C};const _=((h-i)*(u-i)+(m-o)*(d-o))/(v*v),M=i+_*(u-i),A=o+_*(d-o),H=this.getLineLength(h,m,M,A),D=Math.sqrt(e*e-H*H),U=Math.sqrt(D*D/(1+b*b))*(u<i?-1:1),j=b*U;return{x:M+U,y:A+j}}static getPointOnCubicBezier(e,i,o,u,d,h,m,v,b){function E(D){return D*D*D}function C(D){return 3*D*D*(1-D)}function _(D){return 3*D*(1-D)*(1-D)}function M(D){return(1-D)*(1-D)*(1-D)}const A=v*E(e)+h*C(e)+u*_(e)+i*M(e),H=b*E(e)+m*C(e)+d*_(e)+o*M(e);return{x:A,y:H}}static getPointOnQuadraticBezier(e,i,o,u,d,h,m){function v(M){return M*M}function b(M){return 2*M*(1-M)}function E(M){return(1-M)*(1-M)}const C=h*v(e)+u*b(e)+i*E(e),_=m*v(e)+d*b(e)+o*E(e);return{x:C,y:_}}static getPointOnEllipticalArc(e,i,o,u,d,h){const m=Math.cos(h),v=Math.sin(h),b={x:o*Math.cos(d),y:u*Math.sin(d)};return{x:e+(b.x*m-b.y*v),y:i+(b.x*v+b.y*m)}}static parsePathData(e){if(!e)return[];let i=e;const o=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let C=0;C<o.length;C++)i=i.replace(new RegExp(o[C],"g"),"|"+o[C]);const u=i.split("|"),d=[],h=[];let m=0,v=0;const b=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let E;for(let C=1;C<u.length;C++){let _=u[C],M=_.charAt(0);for(_=_.slice(1),h.length=0;E=b.exec(_);)h.push(E[0]);let A=[],H=M==="A"||M==="a"?0:-1;for(let D=0,U=h.length;D<U;D++){const j=h[D];if(j==="00"){A.push(0,0),H>=0&&(H+=2,H>=7&&(H-=7));continue}if(H>=0){if(H===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(j)){A.push(parseInt(j[0],10)),A.push(parseInt(j[1],10)),A.push(parseFloat(j.slice(2))),H+=3,H>=7&&(H-=7);continue}if(j==="11"||j==="10"||j==="01"){A.push(parseInt(j[0],10)),A.push(parseInt(j[1],10)),H+=2,H>=7&&(H-=7);continue}if(j==="0"||j==="1"){A.push(parseInt(j,10)),H+=1,H>=7&&(H-=7);continue}}else if(H===4){if(/^[01]\d+(?:\.\d+)?$/.test(j)){A.push(parseInt(j[0],10)),A.push(parseFloat(j.slice(1))),H+=2,H>=7&&(H-=7);continue}if(j==="0"||j==="1"){A.push(parseInt(j,10)),H+=1,H>=7&&(H-=7);continue}}const Y=parseFloat(j);isNaN(Y)?A.push(0):A.push(Y),H+=1,H>=7&&(H-=7)}else{const Y=parseFloat(j);isNaN(Y)?A.push(0):A.push(Y)}}for(;A.length>0&&!isNaN(A[0]);){let D="",U=[];const j=m,Y=v;let L,nt,z,G,Q,dt,lt,vt,pt,jt;switch(M){case"l":m+=A.shift(),v+=A.shift(),D="L",U.push(m,v);break;case"L":m=A.shift(),v=A.shift(),U.push(m,v);break;case"m":const Ot=A.shift(),Mt=A.shift();if(m+=Ot,v+=Mt,D="M",d.length>2&&d[d.length-1].command==="z"){for(let q=d.length-2;q>=0;q--)if(d[q].command==="M"){m=d[q].points[0]+Ot,v=d[q].points[1]+Mt;break}}U.push(m,v),M="l";break;case"M":m=A.shift(),v=A.shift(),D="M",U.push(m,v),M="L";break;case"h":m+=A.shift(),D="L",U.push(m,v);break;case"H":m=A.shift(),D="L",U.push(m,v);break;case"v":v+=A.shift(),D="L",U.push(m,v);break;case"V":v=A.shift(),D="L",U.push(m,v);break;case"C":U.push(A.shift(),A.shift(),A.shift(),A.shift()),m=A.shift(),v=A.shift(),U.push(m,v);break;case"c":U.push(m+A.shift(),v+A.shift(),m+A.shift(),v+A.shift()),m+=A.shift(),v+=A.shift(),D="C",U.push(m,v);break;case"S":nt=m,z=v,L=d[d.length-1],L.command==="C"&&(nt=m+(m-L.points[2]),z=v+(v-L.points[3])),U.push(nt,z,A.shift(),A.shift()),m=A.shift(),v=A.shift(),D="C",U.push(m,v);break;case"s":nt=m,z=v,L=d[d.length-1],L.command==="C"&&(nt=m+(m-L.points[2]),z=v+(v-L.points[3])),U.push(nt,z,m+A.shift(),v+A.shift()),m+=A.shift(),v+=A.shift(),D="C",U.push(m,v);break;case"Q":U.push(A.shift(),A.shift()),m=A.shift(),v=A.shift(),U.push(m,v);break;case"q":U.push(m+A.shift(),v+A.shift()),m+=A.shift(),v+=A.shift(),D="Q",U.push(m,v);break;case"T":nt=m,z=v,L=d[d.length-1],L.command==="Q"&&(nt=m+(m-L.points[0]),z=v+(v-L.points[1])),m=A.shift(),v=A.shift(),D="Q",U.push(nt,z,m,v);break;case"t":nt=m,z=v,L=d[d.length-1],L.command==="Q"&&(nt=m+(m-L.points[0]),z=v+(v-L.points[1])),m+=A.shift(),v+=A.shift(),D="Q",U.push(nt,z,m,v);break;case"A":G=A.shift(),Q=A.shift(),dt=A.shift(),lt=A.shift(),vt=A.shift(),pt=m,jt=v,m=A.shift(),v=A.shift(),D="A",U=this.convertEndpointToCenterParameterization(pt,jt,m,v,lt,vt,G,Q,dt);break;case"a":G=A.shift(),Q=A.shift(),dt=A.shift(),lt=A.shift(),vt=A.shift(),pt=m,jt=v,m+=A.shift(),v+=A.shift(),D="A",U=this.convertEndpointToCenterParameterization(pt,jt,m,v,lt,vt,G,Q,dt);break}d.push({command:D||M,points:U,start:{x:j,y:Y},pathLength:this.calcLength(j,Y,D||M,U)})}(M==="z"||M==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(e,i,o,u){let d,h,m,v;const b=Hl;switch(o){case"L":return b.getLineLength(e,i,u[0],u[1]);case"C":return ev([e,u[0],u[2],u[4]],[i,u[1],u[3],u[5]],1);case"Q":return nv([e,u[0],u[2]],[i,u[1],u[3]],1);case"A":d=0;const E=u[4],C=u[5],_=u[4]+C;let M=Math.PI/180;if(Math.abs(E-_)<M&&(M=Math.abs(E-_)),h=b.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],E,0),C<0)for(v=E-M;v>_;v-=M)m=b.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=b.getLineLength(h.x,h.y,m.x,m.y),h=m;else for(v=E+M;v<_;v+=M)m=b.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=b.getLineLength(h.x,h.y,m.x,m.y),h=m;return m=b.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],_,0),d+=b.getLineLength(h.x,h.y,m.x,m.y),d}return 0}static convertEndpointToCenterParameterization(e,i,o,u,d,h,m,v,b){const E=b*(Math.PI/180),C=Math.cos(E)*(e-o)/2+Math.sin(E)*(i-u)/2,_=-1*Math.sin(E)*(e-o)/2+Math.cos(E)*(i-u)/2,M=C*C/(m*m)+_*_/(v*v);M>1&&(m*=Math.sqrt(M),v*=Math.sqrt(M));let A=Math.sqrt((m*m*(v*v)-m*m*(_*_)-v*v*(C*C))/(m*m*(_*_)+v*v*(C*C)));d===h&&(A*=-1),isNaN(A)&&(A=0);const H=A*m*_/v,D=A*-v*C/m,U=(e+o)/2+Math.cos(E)*H-Math.sin(E)*D,j=(i+u)/2+Math.sin(E)*H+Math.cos(E)*D,Y=function(lt){return Math.sqrt(lt[0]*lt[0]+lt[1]*lt[1])},L=function(lt,vt){return(lt[0]*vt[0]+lt[1]*vt[1])/(Y(lt)*Y(vt))},nt=function(lt,vt){return(lt[0]*vt[1]<lt[1]*vt[0]?-1:1)*Math.acos(L(lt,vt))},z=nt([1,0],[(C-H)/m,(_-D)/v]),G=[(C-H)/m,(_-D)/v],Q=[(-1*C-H)/m,(-1*_-D)/v];let dt=nt(G,Q);return L(G,Q)<=-1&&(dt=Math.PI),L(G,Q)>=1&&(dt=0),h===0&&dt>0&&(dt=dt-2*Math.PI),h===1&&dt<0&&(dt=dt+2*Math.PI),[U,j,m,v,z,dt,E,h]}};Si.prototype.className="Path";Si.prototype._attrsAffectingSize=["data"];Hn(Si);X.addGetterSetter(Si,"data");class Tu extends mr{_sceneFunc(e){super._sceneFunc(e);const i=Math.PI*2,o=this.points();let u=o;const d=this.tension()!==0&&o.length>4;d&&(u=this.getTensionPoints());const h=this.pointerLength(),m=o.length;let v,b;if(d){const _=[u[u.length-4],u[u.length-3],u[u.length-2],u[u.length-1],o[m-2],o[m-1]],M=Si.calcLength(u[u.length-4],u[u.length-3],"C",_),A=Si.getPointOnQuadraticBezier(Math.min(1,1-h/M),_[0],_[1],_[2],_[3],_[4],_[5]);v=o[m-2]-A.x,b=o[m-1]-A.y}else v=o[m-2]-o[m-4],b=o[m-1]-o[m-3];const E=(Math.atan2(b,v)+i)%i,C=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(o[m-2],o[m-1]),e.rotate(E),e.moveTo(0,0),e.lineTo(-h,C/2),e.lineTo(-h,-C/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(o[0],o[1]),d?(v=(u[0]+u[2])/2-o[0],b=(u[1]+u[3])/2-o[1]):(v=o[2]-o[0],b=o[3]-o[1]),e.rotate((Math.atan2(-b,-v)+i)%i),e.moveTo(0,0),e.lineTo(-h,C/2),e.lineTo(-h,-C/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),i=this.pointerWidth()/2;return{x:e.x,y:e.y-i,width:e.width,height:e.height+i*2}}}Tu.prototype.className="Arrow";Hn(Tu);X.addGetterSetter(Tu,"pointerLength",10,Gt());X.addGetterSetter(Tu,"pointerWidth",10,Gt());X.addGetterSetter(Tu,"pointerAtBeginning",!1);X.addGetterSetter(Tu,"pointerAtEnding",!0);let ef=class extends Dt{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};ef.prototype._centroid=!0;ef.prototype.className="Circle";ef.prototype._attrsAffectingSize=["radius"];Hn(ef);X.addGetterSetter(ef,"radius",0,Gt());class xo extends Dt{_sceneFunc(e){const i=this.radiusX(),o=this.radiusY();e.beginPath(),e.save(),i!==o&&e.scale(1,o/i),e.arc(0,0,i,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}xo.prototype.className="Ellipse";xo.prototype._centroid=!0;xo.prototype._attrsAffectingSize=["radiusX","radiusY"];Hn(xo);X.addComponentsGetterSetter(xo,"radius",["x","y"]);X.addGetterSetter(xo,"radiusX",0,Gt());X.addGetterSetter(xo,"radiusY",0,Gt());let Zi=class Xy extends Dt{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),i=this.hasShadow();return e&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const i=this.getWidth(),o=this.getHeight(),u=this.cornerRadius(),d=this.attrs.image;let h;if(d){const m=this.attrs.cropWidth,v=this.attrs.cropHeight;m&&v?h=[d,this.cropX(),this.cropY(),m,v,0,0,i,o]:h=[d,0,0,i,o]}(this.hasFill()||this.hasStroke()||u)&&(e.beginPath(),u?et.drawRoundedRectPath(e,i,o,u):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)),d&&(u&&e.clip(),e.drawImage.apply(e,h))}_hitFunc(e){const i=this.width(),o=this.height(),u=this.cornerRadius();e.beginPath(),u?et.drawRoundedRectPath(e,i,o,u):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,i,o;return(o=(e=this.attrs.width)!==null&&e!==void 0?e:(i=this.image())===null||i===void 0?void 0:i.width)!==null&&o!==void 0?o:0}getHeight(){var e,i,o;return(o=(e=this.attrs.height)!==null&&e!==void 0?e:(i=this.image())===null||i===void 0?void 0:i.height)!==null&&o!==void 0?o:0}static fromURL(e,i,o=null){const u=et.createImageElement();u.onload=function(){const d=new Xy({image:u});i(d)},u.onerror=o,u.crossOrigin="Anonymous",u.src=e}};Zi.prototype.className="Image";Zi.prototype._attrsAffectingSize=["image"];Hn(Zi);X.addGetterSetter(Zi,"cornerRadius",0,kg(4));X.addGetterSetter(Zi,"image");X.addComponentsGetterSetter(Zi,"crop",["x","y","width","height"]);X.addGetterSetter(Zi,"cropX",0,Gt());X.addGetterSetter(Zi,"cropY",0,Gt());X.addGetterSetter(Zi,"cropWidth",0,Gt());X.addGetterSetter(Zi,"cropHeight",0,Gt());const qy=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],jb="Change.konva",Hb="none",T1="up",A1="right",M1="down",w1="left",Ub=qy.length;class W1 extends Fc{constructor(e){super(e),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let i=this,o;const u=function(){i._sync()};for(o=0;o<Ub;o++)e.on(qy[o]+jb,u)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),i=this.getTag(),o,u,d,h,m,v,b;if(e&&i){switch(o=e.width(),u=e.height(),d=i.pointerDirection(),h=i.pointerWidth(),b=i.pointerHeight(),m=0,v=0,d){case T1:m=o/2,v=-1*b;break;case A1:m=o+h,v=u/2;break;case M1:m=o/2,v=u+b;break;case w1:m=-1*h,v=u/2;break}i.setAttrs({x:-1*m,y:-1*v,width:o,height:u}),e.setAttrs({x:-1*m,y:-1*v})}}}W1.prototype.className="Label";Hn(W1);class Au extends Dt{_sceneFunc(e){const i=this.width(),o=this.height(),u=this.pointerDirection(),d=this.pointerWidth(),h=this.pointerHeight(),m=this.cornerRadius();let v=0,b=0,E=0,C=0;typeof m=="number"?v=b=E=C=Math.min(m,i/2,o/2):(v=Math.min(m[0]||0,i/2,o/2),b=Math.min(m[1]||0,i/2,o/2),C=Math.min(m[2]||0,i/2,o/2),E=Math.min(m[3]||0,i/2,o/2)),e.beginPath(),e.moveTo(v,0),u===T1&&(e.lineTo((i-d)/2,0),e.lineTo(i/2,-1*h),e.lineTo((i+d)/2,0)),e.lineTo(i-b,0),e.arc(i-b,b,b,Math.PI*3/2,0,!1),u===A1&&(e.lineTo(i,(o-h)/2),e.lineTo(i+d,o/2),e.lineTo(i,(o+h)/2)),e.lineTo(i,o-C),e.arc(i-C,o-C,C,0,Math.PI/2,!1),u===M1&&(e.lineTo((i+d)/2,o),e.lineTo(i/2,o+h),e.lineTo((i-d)/2,o)),e.lineTo(E,o),e.arc(E,o-E,E,Math.PI/2,Math.PI,!1),u===w1&&(e.lineTo(0,(o+h)/2),e.lineTo(-1*d,o/2),e.lineTo(0,(o-h)/2)),e.lineTo(0,v),e.arc(v,v,v,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,i=0,o=this.pointerWidth(),u=this.pointerHeight(),d=this.pointerDirection(),h=this.width(),m=this.height();return d===T1?(i-=u,m+=u):d===M1?m+=u:d===w1?(e-=o*1.5,h+=o):d===A1&&(h+=o*1.5),{x:e,y:i,width:h,height:m}}}Au.prototype.className="Tag";Hn(Au);X.addGetterSetter(Au,"pointerDirection",Hb);X.addGetterSetter(Au,"pointerWidth",0,Gt());X.addGetterSetter(Au,"pointerHeight",0,Gt());X.addGetterSetter(Au,"cornerRadius",0,kg(4));let hh=class extends Dt{_sceneFunc(e){const i=this.cornerRadius(),o=this.width(),u=this.height();e.beginPath(),i?et.drawRoundedRectPath(e,o,u,i):e.rect(0,0,o,u),e.closePath(),e.fillStrokeShape(this)}};hh.prototype.className="Rect";Hn(hh);X.addGetterSetter(hh,"cornerRadius",0,kg(4));class Co extends Dt{_sceneFunc(e){const i=this._getPoints(),o=this.radius(),u=this.sides(),d=this.cornerRadius();if(e.beginPath(),d)et.drawRoundedPolygonPath(e,i,u,o,d);else{e.moveTo(i[0].x,i[0].y);for(let h=1;h<i.length;h++)e.lineTo(i[h].x,i[h].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,i=this.attrs.radius||0,o=[];for(let u=0;u<e;u++)o.push({x:i*Math.sin(u*2*Math.PI/e),y:-1*i*Math.cos(u*2*Math.PI/e)});return o}getSelfRect(){const e=this._getPoints();let i=e[0].x,o=e[0].x,u=e[0].y,d=e[0].y;return e.forEach(h=>{i=Math.min(i,h.x),o=Math.max(o,h.x),u=Math.min(u,h.y),d=Math.max(d,h.y)}),{x:i,y:u,width:o-i,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Co.prototype.className="RegularPolygon";Co.prototype._centroid=!0;Co.prototype._attrsAffectingSize=["radius"];Hn(Co);X.addGetterSetter(Co,"radius",0,Gt());X.addGetterSetter(Co,"sides",0,Gt());X.addGetterSetter(Co,"cornerRadius",0,kg(4));const lv=Math.PI*2;class Mu extends Dt{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,lv,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),lv,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Mu.prototype.className="Ring";Mu.prototype._centroid=!0;Mu.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Hn(Mu);X.addGetterSetter(Mu,"innerRadius",0,Gt());X.addGetterSetter(Mu,"outerRadius",0,Gt());class ws extends Dt{constructor(e){super(e),this._updated=!0,this.anim=new yi(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const i=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[i],h=this.frameOffsets(),m=d[u+0],v=d[u+1],b=d[u+2],E=d[u+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,b,E),e.closePath(),e.fillStrokeShape(this)),C)if(h){const _=h[i],M=o*2;e.drawImage(C,m,v,b,E,_[M+0],_[M+1],b,E)}else e.drawImage(C,m,v,b,E,0,0,b,E)}_hitFunc(e){const i=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[i],h=this.frameOffsets(),m=d[u+2],v=d[u+3];if(e.beginPath(),h){const b=h[i],E=o*2;e.rect(b[E+0],b[E+1],m,v)}else e.rect(0,0,m,v);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),i=this.animation(),o=this.animations(),u=o[i],d=u.length/4;e<d-1?this.frameIndex(e+1):this.frameIndex(0)}}ws.prototype.className="Sprite";Hn(ws);X.addGetterSetter(ws,"animation");X.addGetterSetter(ws,"animations");X.addGetterSetter(ws,"frameOffsets");X.addGetterSetter(ws,"image");X.addGetterSetter(ws,"frameIndex",0,Gt());X.addGetterSetter(ws,"frameRate",17,Gt());X.backCompat(ws,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Eo extends Dt{_sceneFunc(e){const i=this.innerRadius(),o=this.outerRadius(),u=this.numPoints();e.beginPath(),e.moveTo(0,0-o);for(let d=1;d<u*2;d++){const h=d%2===0?o:i,m=h*Math.sin(d*Math.PI/u),v=-1*h*Math.cos(d*Math.PI/u);e.lineTo(m,v)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Eo.prototype.className="Star";Eo.prototype._centroid=!0;Eo.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Hn(Eo);X.addGetterSetter(Eo,"numPoints",5,Gt());X.addGetterSetter(Eo,"innerRadius",0,Gt());X.addGetterSetter(Eo,"outerRadius",0,Gt());function go(l){return[...l].reduce((e,i,o,u)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const d=u[o+1];d&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(d)?(e.push(i+d),u[o+1]=""):e.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(u[o+1]||""))?e.push(i+u[o+1]):o>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?e[e.length-1]+=i:i&&e.push(i);return e},[])}const Qc="auto",Bb="center",Vy="inherit",Ld="justify",Gb="Change.konva",Lb="2d",iv="-",Ky="left",Yb="text",Xb="Text",qb="top",Vb="bottom",sv="middle",Qy="normal",Kb="px ",cg=" ",Qb="right",rv="rtl",Zb="word",kb="char",ov="none",$m="",Zy=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Jb=Zy.length;function Ib(l){return l.split(",").map(e=>{e=e.trim();const i=e.indexOf(" ")>=0,o=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!o&&(e=`"${e}"`),e}).join(", ")}let fg;function t1(){return fg||(fg=et.createCanvasElement().getContext(Lb),fg)}function Fb(l){l.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Wb(l){l.setAttr("miterLimit",2),l.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Pb(l){return l=l||{},!l.fillLinearGradientColorStops&&!l.fillRadialGradientColorStops&&!l.fillPatternImage&&(l.fill=l.fill||"black"),l}let xn=class extends Dt{constructor(e){super(Pb(e)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<Jb;i++)this.on(Zy[i]+Gb,this._setTextData);this._setTextData()}_sceneFunc(e){var i,o;const u=this.textArr,d=u.length;if(!this.text())return;let h=this.padding(),m=this.fontSize(),v=this.lineHeight()*m,b=this.verticalAlign(),E=this.direction(),C=0,_=this.align(),M=this.getWidth(),A=this.letterSpacing(),H=this.charRenderFunc(),D=this.fill(),U=this.textDecoration(),j=U.indexOf("underline")!==-1,Y=U.indexOf("line-through")!==-1,L;E=E===Vy?e.direction:E;let nt=v/2,z=sv;if(!Lt.legacyTextRendering){const G=this.measureSize("M");z="alphabetic";const Q=(i=G.fontBoundingBoxAscent)!==null&&i!==void 0?i:G.actualBoundingBoxAscent,dt=(o=G.fontBoundingBoxDescent)!==null&&o!==void 0?o:G.actualBoundingBoxDescent;nt=(Q-dt)/2+v/2}for(E===rv&&e.setAttr("direction",E),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",z),e.setAttr("textAlign",Ky),b===sv?C=(this.getHeight()-d*v-h*2)/2:b===Vb&&(C=this.getHeight()-d*v-h*2),e.translate(h,C+h),L=0;L<d;L++){let G=0,Q=0;const dt=u[L],lt=dt.text,vt=dt.width,pt=dt.lastInParagraph;if(e.save(),_===Qb?G+=M-vt-h*2:_===Bb&&(G+=(M-vt-h*2)/2),j){e.save(),e.beginPath();const Ot=Lt.legacyTextRendering?Math.round(m/2):Math.round(m/4),Mt=G,q=nt+Q+Ot;e.moveTo(Mt,q);const I=_===Ld&&!pt?M-h*2:vt;e.lineTo(Mt+Math.round(I),q),e.lineWidth=m/15;const k=this._getLinearGradient();e.strokeStyle=k||D,e.stroke(),e.restore()}const jt=G;if(E!==rv&&(A!==0||_===Ld||H)){const Ot=lt.split(" ").length-1,Mt=go(lt);for(let q=0;q<Mt.length;q++){const I=Mt[q];if(I===" "&&!pt&&_===Ld&&(G+=(M-h*2-vt)/Ot),this._partialTextX=G,this._partialTextY=nt+Q,this._partialText=I,H){e.save();const xt=u.slice(0,L).reduce((B,P)=>B+go(P.text).length,0),Nt=q+xt;H({char:I,index:Nt,x:G,y:nt+Q,lineIndex:L,column:q,isLastInLine:pt,width:this.measureSize(I).width,context:e})}e.fillStrokeShape(this),H&&e.restore(),G+=this.measureSize(I).width+A}}else A!==0&&e.setAttr("letterSpacing",`${A}px`),this._partialTextX=G,this._partialTextY=nt+Q,this._partialText=lt,e.fillStrokeShape(this);if(Y){e.save(),e.beginPath();const Ot=Lt.legacyTextRendering?0:-Math.round(m/4),Mt=jt;e.moveTo(Mt,nt+Q+Ot);const q=_===Ld&&!pt?M-h*2:vt;e.lineTo(Mt+Math.round(q),nt+Q+Ot),e.lineWidth=m/15;const I=this._getLinearGradient();e.strokeStyle=I||D,e.stroke(),e.restore()}e.restore(),d>1&&(nt+=v)}}_hitFunc(e){const i=this.getWidth(),o=this.getHeight();e.beginPath(),e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}setText(e){const i=et._isString(e)?e:e==null?"":e+"";return this._setAttr(Yb,i),this}getWidth(){return this.attrs.width===Qc||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Qc||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i,o,u,d,h,m,v,b,E,C,_;let M=t1(),A=this.fontSize(),H;M.save(),M.font=this._getContextFont(),H=M.measureText(e),M.restore();const D=A/100;return{actualBoundingBoxAscent:(i=H.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*D,actualBoundingBoxDescent:(o=H.actualBoundingBoxDescent)!==null&&o!==void 0?o:0,actualBoundingBoxLeft:(u=H.actualBoundingBoxLeft)!==null&&u!==void 0?u:-7.421875*D,actualBoundingBoxRight:(d=H.actualBoundingBoxRight)!==null&&d!==void 0?d:75.732421875*D,alphabeticBaseline:(h=H.alphabeticBaseline)!==null&&h!==void 0?h:0,emHeightAscent:(m=H.emHeightAscent)!==null&&m!==void 0?m:100*D,emHeightDescent:(v=H.emHeightDescent)!==null&&v!==void 0?v:-20*D,fontBoundingBoxAscent:(b=H.fontBoundingBoxAscent)!==null&&b!==void 0?b:91*D,fontBoundingBoxDescent:(E=H.fontBoundingBoxDescent)!==null&&E!==void 0?E:21*D,hangingBaseline:(C=H.hangingBaseline)!==null&&C!==void 0?C:72.80000305175781*D,ideographicBaseline:(_=H.ideographicBaseline)!==null&&_!==void 0?_:-21*D,width:H.width,height:A}}_getContextFont(){return this.fontStyle()+cg+this.fontVariant()+cg+(this.fontSize()+Kb)+Ib(this.fontFamily())}_addTextLine(e){this.align()===Ld&&(e=e.trim());const o=this._getTextWidth(e);return this.textArr.push({text:e,width:o,lastInParagraph:!1})}_getTextWidth(e){const i=this.letterSpacing(),o=e.length;return t1().measureText(e).width+i*o}_setTextData(){let e=this.text().split(`
`),i=+this.fontSize(),o=0,u=this.lineHeight()*i,d=this.attrs.width,h=this.attrs.height,m=d!==Qc&&d!==void 0,v=h!==Qc&&h!==void 0,b=this.padding(),E=d-b*2,C=h-b*2,_=0,M=this.wrap(),A=M!==ov,H=M!==kb&&A,D=this.ellipsis();this.textArr=[],t1().font=this._getContextFont();const U=D?this._getTextWidth($m):0;for(let j=0,Y=e.length;j<Y;++j){let L=e[j],nt=this._getTextWidth(L);if(m&&nt>E)for(;L.length>0;){let z=0,G=go(L).length,Q="",dt=0;for(;z<G;){const lt=z+G>>>1,vt=go(L),pt=vt.slice(0,lt+1).join(""),jt=this._getTextWidth(pt);(D&&v&&_+u>C?jt+U:jt)<=E?(z=lt+1,Q=pt,dt=jt):G=lt}if(Q){if(H){const pt=go(L),jt=go(Q),Ot=pt[jt.length],Mt=Ot===cg||Ot===iv;let q;if(Mt&&dt<=E)q=jt.length;else{const I=jt.lastIndexOf(cg),k=jt.lastIndexOf(iv);q=Math.max(I,k)+1}q>0&&(z=q,Q=pt.slice(0,z).join(""),dt=this._getTextWidth(Q))}if(Q=Q.trimRight(),this._addTextLine(Q),o=Math.max(o,dt),_+=u,this._shouldHandleEllipsis(_)){this._tryToAddEllipsisToLastLine();break}if(L=go(L).slice(z).join("").trimLeft(),L.length>0&&(nt=this._getTextWidth(L),nt<=E)){this._addTextLine(L),_+=u,o=Math.max(o,nt);break}}else break}else this._addTextLine(L),_+=u,o=Math.max(o,nt),this._shouldHandleEllipsis(_)&&j<Y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),v&&_+u>C)break}this.textHeight=i,this.textWidth=o}_shouldHandleEllipsis(e){const i=+this.fontSize(),o=this.lineHeight()*i,u=this.attrs.height,d=u!==Qc&&u!==void 0,h=this.padding(),m=u-h*2;return!(this.wrap()!==ov)||d&&e+o>m}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,i=e!==Qc&&e!==void 0,o=this.padding(),u=e-o*2,d=this.ellipsis(),h=this.textArr[this.textArr.length-1];!h||!d||(i&&(this._getTextWidth(h.text+$m)<u||(h.text=h.text.slice(0,h.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(h.text+$m))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return e&&i?!0:super._useBufferCanvas()}};xn.prototype._fillFunc=Fb;xn.prototype._strokeFunc=Wb;xn.prototype.className=Xb;xn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Hn(xn);X.overWriteSetter(xn,"width",J1());X.overWriteSetter(xn,"height",J1());X.addGetterSetter(xn,"direction",Vy);X.addGetterSetter(xn,"fontFamily","Arial");X.addGetterSetter(xn,"fontSize",12,Gt());X.addGetterSetter(xn,"fontStyle",Qy);X.addGetterSetter(xn,"fontVariant",Qy);X.addGetterSetter(xn,"padding",0,Gt());X.addGetterSetter(xn,"align",Ky);X.addGetterSetter(xn,"verticalAlign",qb);X.addGetterSetter(xn,"lineHeight",1,Gt());X.addGetterSetter(xn,"wrap",Zb);X.addGetterSetter(xn,"ellipsis",!1,Qi());X.addGetterSetter(xn,"letterSpacing",0,Gt());X.addGetterSetter(xn,"text","",Eu());X.addGetterSetter(xn,"textDecoration","");X.addGetterSetter(xn,"charRenderFunc",void 0);const $b="",ky="normal";function Jy(l){l.fillText(this.partialText,0,0)}function Iy(l){l.strokeText(this.partialText,0,0)}class ra extends Dt{constructor(e){super(e),this.dummyCanvas=et.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Si.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const i=this.pathLength;return e>i?null:Si.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Si.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const i=this.textDecoration(),o=this.fill(),u=this.fontSize(),d=this.glyphInfo,h=i.indexOf("underline")!==-1,m=i.indexOf("line-through")!==-1;h&&e.beginPath();for(let v=0;v<d.length;v++){e.save();const b=d[v].p0;e.translate(b.x,b.y),e.rotate(d[v].rotation),this.partialText=d[v].text,e.fillStrokeShape(this),h&&(v===0&&e.moveTo(0,u/2+1),e.lineTo(d[v].width,u/2+1)),e.restore()}if(h&&(e.strokeStyle=o,e.lineWidth=u/20,e.stroke()),m){e.beginPath();for(let v=0;v<d.length;v++){e.save();const b=d[v].p0;e.translate(b.x,b.y),e.rotate(d[v].rotation),v===0&&e.moveTo(0,0),e.lineTo(d[v].width,0),e.restore()}e.strokeStyle=o,e.lineWidth=u/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const i=this.glyphInfo;if(i.length>=1){const o=i[0].p0;e.moveTo(o.x,o.y)}for(let o=0;o<i.length;o++){const u=i[o].p1;e.lineTo(u.x,u.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return et.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return xn.prototype.setText.call(this,e)}_getContextFont(){return xn.prototype._getContextFont.call(this)}_getTextSize(e){const o=this.dummyCanvas.getContext("2d");o.save(),o.font=this._getContextFont();const u=o.measureText(e);return o.restore(),{width:u.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=go(this.text()),i=[];let o=0;for(let C=0;C<e.length;C++)i.push({char:e[C],width:this._getTextSize(e[C]).width}),o+=i[C].width;const{height:u}=this._getTextSize(this.attrs.text);if(this.textWidth=o,this.textHeight=u,this.glyphInfo=[],!this.attrs.data)return null;const d=this.letterSpacing(),h=this.align(),m=this.kerningFunc(),v=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);let b=0;h==="center"&&(b=Math.max(0,this.pathLength/2-v/2)),h==="right"&&(b=Math.max(0,this.pathLength-v));let E=b;for(let C=0;C<i.length;C++){const _=this._getPointAtLength(E);if(!_)return;const M=i[C].char;let A=i[C].width+d;if(M===" "&&h==="justify"){const L=this.text().split(" ").length-1;A+=(this.pathLength-v)/L}const H=this._getPointAtLength(E+A);if(!H)return;const D=Si.getLineLength(_.x,_.y,H.x,H.y);let U=0;if(m)try{U=m(i[C-1].char,M)*this.fontSize()}catch{U=0}_.x+=U,H.x+=U,this.textWidth+=U;const j=Si.getPointOnLine(U+D/2,_.x,_.y,H.x,H.y),Y=Math.atan2(H.y-_.y,H.x-_.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:e[C],rotation:Y,p0:_,p1:H,width:D}),E+=A}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(b){e.push(b.p0.x),e.push(b.p0.y),e.push(b.p1.x),e.push(b.p1.y)});let i=e[0]||0,o=e[0]||0,u=e[1]||0,d=e[1]||0,h,m;for(let b=0;b<e.length/2;b++)h=e[b*2],m=e[b*2+1],i=Math.min(i,h),o=Math.max(o,h),u=Math.min(u,m),d=Math.max(d,m);const v=this.fontSize();return{x:i-v/2,y:u-v/2,width:o-i+v,height:d-u+v}}destroy(){return et.releaseCanvas(this.dummyCanvas),super.destroy()}}ra.prototype._fillFunc=Jy;ra.prototype._strokeFunc=Iy;ra.prototype._fillFuncHit=Jy;ra.prototype._strokeFuncHit=Iy;ra.prototype.className="TextPath";ra.prototype._attrsAffectingSize=["text","fontSize","data"];Hn(ra);X.addGetterSetter(ra,"data");X.addGetterSetter(ra,"fontFamily","Arial");X.addGetterSetter(ra,"fontSize",12,Gt());X.addGetterSetter(ra,"fontStyle",ky);X.addGetterSetter(ra,"align","left");X.addGetterSetter(ra,"letterSpacing",0,Gt());X.addGetterSetter(ra,"textBaseline","middle");X.addGetterSetter(ra,"fontVariant",ky);X.addGetterSetter(ra,"text",$b);X.addGetterSetter(ra,"textDecoration","");X.addGetterSetter(ra,"kerningFunc",void 0);const Fy="tr-konva",t9=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(l=>l+`.${Fy}`).join(" "),uv="nodesRect",e9=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],n9={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},a9="ontouchstart"in Lt._global;function l9(l,e,i){if(l==="rotater")return i;e+=et.degToRad(n9[l]||0);const o=(et.radToDeg(e)%360+360)%360;return et._inRange(o,315+22.5,360)||et._inRange(o,0,22.5)?"ns-resize":et._inRange(o,45-22.5,45+22.5)?"nesw-resize":et._inRange(o,90-22.5,90+22.5)?"ew-resize":et._inRange(o,135-22.5,135+22.5)?"nwse-resize":et._inRange(o,180-22.5,180+22.5)?"ns-resize":et._inRange(o,225-22.5,225+22.5)?"nesw-resize":et._inRange(o,270-22.5,270+22.5)?"ew-resize":et._inRange(o,315-22.5,315+22.5)?"nwse-resize":(et.error("Transformer has unknown angle for cursor detection: "+o),"pointer")}const Og=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function i9(l){return{x:l.x+l.width/2*Math.cos(l.rotation)+l.height/2*Math.sin(-l.rotation),y:l.y+l.height/2*Math.cos(l.rotation)+l.width/2*Math.sin(l.rotation)}}function Wy(l,e,i){const o=i.x+(l.x-i.x)*Math.cos(e)-(l.y-i.y)*Math.sin(e),u=i.y+(l.x-i.x)*Math.sin(e)+(l.y-i.y)*Math.cos(e);return{...l,rotation:l.rotation+e,x:o,y:u}}function s9(l,e){const i=i9(l);return Wy(l,e,i)}function r9(l,e,i){let o=e;for(let u=0;u<l.length;u++){const d=Lt.getAngle(l[u]),h=Math.abs(d-e)%(Math.PI*2);Math.min(h,Math.PI*2-h)<i&&(o=d)}return o}let N1=0,Be=class extends Fc{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(t9,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return et.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Fy+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const i=e.filter(u=>u.isAncestorOf(this)?(et.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=i,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(u=>{const d=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(u._attrsAffectingSize.length){const h=u._attrsAffectingSize.map(m=>m+"Change."+this._getEventNamespace()).join(" ");u.on(h,d)}u.on(e9.map(h=>h+`.${this._getEventNamespace()}`).join(" "),d),u.on(`absoluteTransformChange.${this._getEventNamespace()}`,d),this._proxyDrag(u)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let i;e.on(`dragstart.${this._getEventNamespace()}`,o=>{i=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(o,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,o=>{if(!i)return;const u=e.getAbsolutePosition(),d=u.x-i.x,h=u.y-i.y;this.nodes().forEach(m=>{if(m===e||m.isDragging())return;const v=m.getAbsolutePosition();m.setAbsolutePosition({x:v.x+d,y:v.y+h}),m.startDrag(o)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(uv),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(uv,this.__getNodeRect)}__getNodeShape(e,i=this.rotation(),o){const u=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=e.getAbsoluteScale(o),h=e.getAbsolutePosition(o),m=u.x*d.x-e.offsetX()*d.x,v=u.y*d.y-e.offsetY()*d.y,b=(Lt.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),E={x:h.x+m*Math.cos(b)+v*Math.sin(-b),y:h.y+v*Math.cos(b)+m*Math.sin(b),width:u.width*d.x,height:u.height*d.y,rotation:b};return Wy(E,-Lt.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(b=>{const E=b.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),C=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],_=b.getAbsoluteTransform();C.forEach(function(M){const A=_.point(M);i.push(A)})});const o=new Vl;o.rotate(-Lt.getAngle(this.rotation()));let u=1/0,d=1/0,h=-1/0,m=-1/0;i.forEach(function(b){const E=o.point(b);u===void 0&&(u=h=E.x,d=m=E.y),u=Math.min(u,E.x),d=Math.min(d,E.y),h=Math.max(h,E.x),m=Math.max(m,E.y)}),o.invert();const v=o.point({x:u,y:d});return{x:v.x,y:v.y,width:h-u,height:m-d,rotation:Lt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Og.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const i=new hh({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:a9?10:"auto"}),o=this;i.on("mousedown touchstart",function(u){o._handleMouseDown(u)}),i.on("dragstart",u=>{i.stopDrag(),u.cancelBubble=!0}),i.on("dragend",u=>{u.cancelBubble=!0}),i.on("mouseenter",()=>{const u=Lt.getAngle(this.rotation()),d=this.rotateAnchorCursor(),h=l9(e,u,d);i.getStage().content&&(i.getStage().content.style.cursor=h),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const e=new Dt({name:"back",width:0,height:0,sceneFunc(i,o){const u=o.getParent(),d=u.padding();i.beginPath(),i.rect(-d,-d,o.width()+d*2,o.height()+d*2),i.moveTo(o.width()/2,-d),u.rotateEnabled()&&u.rotateLineVisible()&&i.lineTo(o.width()/2,-u.rotateAnchorOffset()*et._sign(o.height())-d),i.fillStrokeShape(o)},hitFunc:(i,o)=>{if(!this.shouldOverdrawWholeArea())return;const u=this.padding();i.beginPath(),i.rect(-u,-u,o.width()+u*2,o.height()+u*2),i.fillStrokeShape(o)}});this.add(e),this._proxyDrag(e),e.on("dragstart",i=>{i.cancelBubble=!0}),e.on("dragmove",i=>{i.cancelBubble=!0}),e.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const i=this._getNodeRect(),o=i.width,u=i.height,d=Math.sqrt(Math.pow(o,2)+Math.pow(u,2));this.sin=Math.abs(u/d),this.cos=Math.abs(o/d),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const h=e.target.getAbsolutePosition(),m=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:m.x-h.x,y:m.y-h.y},N1++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(v=>{v._fire("transformstart",{evt:e.evt,target:v})})}_handleMouseMove(e){let i,o,u;const d=this.findOne("."+this._movingAnchorName),h=d.getStage();h.setPointersPositions(e);const m=h.getPointerPosition();let v={x:m.x-this._anchorDragOffset.x,y:m.y-this._anchorDragOffset.y};const b=d.getAbsolutePosition();this.anchorDragBoundFunc()&&(v=this.anchorDragBoundFunc()(b,v,e)),d.setAbsolutePosition(v);const E=d.getAbsolutePosition();if(b.x===E.x&&b.y===E.y)return;if(this._movingAnchorName==="rotater"){const j=this._getNodeRect();i=d.x()-j.width/2,o=-d.y()+j.height/2;let Y=Math.atan2(-o,i)+Math.PI/2;j.height<0&&(Y-=Math.PI);const nt=Lt.getAngle(this.rotation())+Y,z=Lt.getAngle(this.rotationSnapTolerance()),Q=r9(this.rotationSnaps(),nt,z)-j.rotation,dt=s9(j,Q);this._fitNodesInto(dt,e);return}const C=this.shiftBehavior();let _;C==="inverted"?_=this.keepRatio()&&!e.shiftKey:C==="none"?_=this.keepRatio():_=this.keepRatio()||e.shiftKey;let M=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(_){const j=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};u=Math.sqrt(Math.pow(j.x-d.x(),2)+Math.pow(j.y-d.y(),2));const Y=this.findOne(".top-left").x()>j.x?-1:1,L=this.findOne(".top-left").y()>j.y?-1:1;i=u*this.cos*Y,o=u*this.sin*L,this.findOne(".top-left").x(j.x-i),this.findOne(".top-left").y(j.y-o)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(d.y());else if(this._movingAnchorName==="top-right"){if(_){const j=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};u=Math.sqrt(Math.pow(d.x()-j.x,2)+Math.pow(j.y-d.y(),2));const Y=this.findOne(".top-right").x()<j.x?-1:1,L=this.findOne(".top-right").y()>j.y?-1:1;i=u*this.cos*Y,o=u*this.sin*L,this.findOne(".top-right").x(j.x+i),this.findOne(".top-right").y(j.y-o)}var A=d.position();this.findOne(".top-left").y(A.y),this.findOne(".bottom-right").x(A.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(d.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(d.x());else if(this._movingAnchorName==="bottom-left"){if(_){const j=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};u=Math.sqrt(Math.pow(j.x-d.x(),2)+Math.pow(d.y()-j.y,2));const Y=j.x<d.x()?-1:1,L=d.y()<j.y?-1:1;i=u*this.cos*Y,o=u*this.sin*L,d.x(j.x-i),d.y(j.y+o)}A=d.position(),this.findOne(".top-left").x(A.x),this.findOne(".bottom-right").y(A.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(d.y());else if(this._movingAnchorName==="bottom-right"){if(_){const j=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};u=Math.sqrt(Math.pow(d.x()-j.x,2)+Math.pow(d.y()-j.y,2));const Y=this.findOne(".bottom-right").x()<j.x?-1:1,L=this.findOne(".bottom-right").y()<j.y?-1:1;i=u*this.cos*Y,o=u*this.sin*L,this.findOne(".bottom-right").x(j.x+i),this.findOne(".bottom-right").y(j.y+o)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(M=this.centeredScaling()||e.altKey,M){const j=this.findOne(".top-left"),Y=this.findOne(".bottom-right"),L=j.x(),nt=j.y(),z=this.getWidth()-Y.x(),G=this.getHeight()-Y.y();Y.move({x:-L,y:-nt}),j.move({x:z,y:G})}const H=this.findOne(".top-left").getAbsolutePosition();i=H.x,o=H.y;const D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),U=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:o,width:D,height:U,rotation:Lt.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const o=this.getNode();N1--,this._fire("transformend",{evt:e,target:o}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),o&&this._nodes.forEach(u=>{var d;u._fire("transformend",{evt:e,target:u}),(d=u.getLayer())===null||d===void 0||d.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,i){const o=this._getNodeRect(),u=1;if(et._inRange(e.width,-this.padding()*2-u,u)){this.update();return}if(et._inRange(e.height,-this.padding()*2-u,u)){this.update();return}const d=new Vl;if(d.rotate(Lt.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const _=d.point({x:-this.padding()*2,y:0});e.x+=_.x,e.y+=_.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const _=d.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const _=d.point({x:0,y:-this.padding()*2});e.x+=_.x,e.y+=_.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const _=d.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const _=this.boundBoxFunc()(o,e);_?e=_:et.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const h=1e7,m=new Vl;m.translate(o.x,o.y),m.rotate(o.rotation),m.scale(o.width/h,o.height/h);const v=new Vl,b=e.width/h,E=e.height/h;this.flipEnabled()===!1?(v.translate(e.x,e.y),v.rotate(e.rotation),v.translate(e.width<0?e.width:0,e.height<0?e.height:0),v.scale(Math.abs(b),Math.abs(E))):(v.translate(e.x,e.y),v.rotate(e.rotation),v.scale(b,E));const C=v.multiply(m.invert());this._nodes.forEach(_=>{var M;if(!_.getStage())return;const A=_.getParent().getAbsoluteTransform(),H=_.getTransform().copy();H.translate(_.offsetX(),_.offsetY());const D=new Vl;D.multiply(A.copy().invert()).multiply(C).multiply(A).multiply(H);const U=D.decompose();_.setAttrs(U),(M=_.getLayer())===null||M===void 0||M.batchDraw()}),this.rotation(et._getRotation(e.rotation)),this._nodes.forEach(_=>{this._fire("transform",{evt:i,target:_}),_._fire("transform",{evt:i,target:_})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,i){this.findOne(e).setAttrs(i)}update(){var e;const i=this._getNodeRect();this.rotation(et._getRotation(i.rotation));const o=i.width,u=i.height,d=this.enabledAnchors(),h=this.resizeEnabled(),m=this.padding(),v=this.anchorSize(),b=this.find("._anchor");b.forEach(C=>{C.setAttrs({width:v,height:v,offsetX:v/2,offsetY:v/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:v/2+m,offsetY:v/2+m,visible:h&&d.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:o/2,y:0,offsetY:v/2+m,visible:h&&d.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:o,y:0,offsetX:v/2-m,offsetY:v/2+m,visible:h&&d.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:u/2,offsetX:v/2+m,visible:h&&d.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:o,y:u/2,offsetX:v/2-m,visible:h&&d.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:u,offsetX:v/2+m,offsetY:v/2-m,visible:h&&d.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:o/2,y:u,offsetY:v/2-m,visible:h&&d.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:o,y:u,offsetX:v/2-m,offsetY:v/2-m,visible:h&&d.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:o/2,y:-this.rotateAnchorOffset()*et._sign(u)-m,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:o,height:u,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(C=>C.draggable()),x:0,y:0});const E=this.anchorStyleFunc();E&&b.forEach(C=>{E(C)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Fc.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Bt.prototype.toObject.call(this)}clone(e){return Bt.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Be.isTransforming=()=>N1>0;function o9(l){return l instanceof Array||et.warn("enabledAnchors value should be an array"),l instanceof Array&&l.forEach(function(e){Og.indexOf(e)===-1&&et.warn("Unknown anchor name: "+e+". Available names are: "+Og.join(", "))}),l||[]}Be.prototype.className="Transformer";Hn(Be);X.addGetterSetter(Be,"enabledAnchors",Og,o9);X.addGetterSetter(Be,"flipEnabled",!0,Qi());X.addGetterSetter(Be,"resizeEnabled",!0);X.addGetterSetter(Be,"anchorSize",10,Gt());X.addGetterSetter(Be,"rotateEnabled",!0);X.addGetterSetter(Be,"rotateLineVisible",!0);X.addGetterSetter(Be,"rotationSnaps",[]);X.addGetterSetter(Be,"rotateAnchorOffset",50,Gt());X.addGetterSetter(Be,"rotateAnchorCursor","crosshair");X.addGetterSetter(Be,"rotationSnapTolerance",5,Gt());X.addGetterSetter(Be,"borderEnabled",!0);X.addGetterSetter(Be,"anchorStroke","rgb(0, 161, 255)");X.addGetterSetter(Be,"anchorStrokeWidth",1,Gt());X.addGetterSetter(Be,"anchorFill","white");X.addGetterSetter(Be,"anchorCornerRadius",0,Gt());X.addGetterSetter(Be,"borderStroke","rgb(0, 161, 255)");X.addGetterSetter(Be,"borderStrokeWidth",1,Gt());X.addGetterSetter(Be,"borderDash");X.addGetterSetter(Be,"keepRatio",!0);X.addGetterSetter(Be,"shiftBehavior","default");X.addGetterSetter(Be,"centeredScaling",!1);X.addGetterSetter(Be,"ignoreStroke",!1);X.addGetterSetter(Be,"padding",0,Gt());X.addGetterSetter(Be,"nodes");X.addGetterSetter(Be,"node");X.addGetterSetter(Be,"boundBoxFunc");X.addGetterSetter(Be,"anchorDragBoundFunc");X.addGetterSetter(Be,"anchorStyleFunc");X.addGetterSetter(Be,"shouldOverdrawWholeArea",!1);X.addGetterSetter(Be,"useSingleNodeRotation",!0);X.backCompat(Be,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class pr extends Dt{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Lt.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}pr.prototype.className="Wedge";pr.prototype._centroid=!0;pr.prototype._attrsAffectingSize=["radius"];Hn(pr);X.addGetterSetter(pr,"radius",0,Gt());X.addGetterSetter(pr,"angle",0,Gt());X.addGetterSetter(pr,"clockwise",!1);X.backCompat(pr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function cv(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const u9=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],c9=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function f9(l,e){const i=l.data,o=l.width,u=l.height;let d,h,m,v,b,E,C,_,M,A,H,D,U,j,Y,L,nt,z,G,Q;const dt=e+e+1,lt=o-1,vt=u-1,pt=e+1,jt=pt*(pt+1)/2,Ot=new cv,Mt=u9[e],q=c9[e];let I=null,k=Ot,xt=null,Nt=null;for(let B=1;B<dt;B++)k=k.next=new cv,B===pt&&(I=k);k.next=Ot,m=h=0;for(let B=0;B<u;B++){D=U=j=Y=v=b=E=C=0,_=pt*(L=i[h]),M=pt*(nt=i[h+1]),A=pt*(z=i[h+2]),H=pt*(G=i[h+3]),v+=jt*L,b+=jt*nt,E+=jt*z,C+=jt*G,k=Ot;for(let P=0;P<pt;P++)k.r=L,k.g=nt,k.b=z,k.a=G,k=k.next;for(let P=1;P<pt;P++)d=h+((lt<P?lt:P)<<2),v+=(k.r=L=i[d])*(Q=pt-P),b+=(k.g=nt=i[d+1])*Q,E+=(k.b=z=i[d+2])*Q,C+=(k.a=G=i[d+3])*Q,D+=L,U+=nt,j+=z,Y+=G,k=k.next;xt=Ot,Nt=I;for(let P=0;P<o;P++)i[h+3]=G=C*Mt>>q,G!==0?(G=255/G,i[h]=(v*Mt>>q)*G,i[h+1]=(b*Mt>>q)*G,i[h+2]=(E*Mt>>q)*G):i[h]=i[h+1]=i[h+2]=0,v-=_,b-=M,E-=A,C-=H,_-=xt.r,M-=xt.g,A-=xt.b,H-=xt.a,d=m+((d=P+e+1)<lt?d:lt)<<2,D+=xt.r=i[d],U+=xt.g=i[d+1],j+=xt.b=i[d+2],Y+=xt.a=i[d+3],v+=D,b+=U,E+=j,C+=Y,xt=xt.next,_+=L=Nt.r,M+=nt=Nt.g,A+=z=Nt.b,H+=G=Nt.a,D-=L,U-=nt,j-=z,Y-=G,Nt=Nt.next,h+=4;m+=o}for(let B=0;B<o;B++){U=j=Y=D=b=E=C=v=0,h=B<<2,_=pt*(L=i[h]),M=pt*(nt=i[h+1]),A=pt*(z=i[h+2]),H=pt*(G=i[h+3]),v+=jt*L,b+=jt*nt,E+=jt*z,C+=jt*G,k=Ot;for(let St=0;St<pt;St++)k.r=L,k.g=nt,k.b=z,k.a=G,k=k.next;let P=o;for(let St=1;St<=e;St++)h=P+B<<2,v+=(k.r=L=i[h])*(Q=pt-St),b+=(k.g=nt=i[h+1])*Q,E+=(k.b=z=i[h+2])*Q,C+=(k.a=G=i[h+3])*Q,D+=L,U+=nt,j+=z,Y+=G,k=k.next,St<vt&&(P+=o);h=B,xt=Ot,Nt=I;for(let St=0;St<u;St++)d=h<<2,i[d+3]=G=C*Mt>>q,G>0?(G=255/G,i[d]=(v*Mt>>q)*G,i[d+1]=(b*Mt>>q)*G,i[d+2]=(E*Mt>>q)*G):i[d]=i[d+1]=i[d+2]=0,v-=_,b-=M,E-=A,C-=H,_-=xt.r,M-=xt.g,A-=xt.b,H-=xt.a,d=B+((d=St+pt)<vt?d:vt)*o<<2,v+=D+=xt.r=i[d],b+=U+=xt.g=i[d+1],E+=j+=xt.b=i[d+2],C+=Y+=xt.a=i[d+3],xt=xt.next,_+=L=Nt.r,M+=nt=Nt.g,A+=z=Nt.b,H+=G=Nt.a,D-=L,U-=nt,j-=z,Y-=G,Nt=Nt.next,h+=o}}const d9=function(e){const i=Math.round(this.blurRadius());i>0&&f9(e,i)};X.addGetterSetter(Bt,"blurRadius",0,Gt(),X.afterSetFilter);const h9=function(l){const e=this.brightness()*255,i=l.data,o=i.length;for(let u=0;u<o;u+=4)i[u]+=e,i[u+1]+=e,i[u+2]+=e};X.addGetterSetter(Bt,"brightness",0,Gt(),X.afterSetFilter);const g9=function(l){const e=this.brightness(),i=l.data,o=i.length;for(let u=0;u<o;u+=4)i[u]=Math.min(255,i[u]*e),i[u+1]=Math.min(255,i[u+1]*e),i[u+2]=Math.min(255,i[u+2]*e)},m9=function(l){const e=Math.pow((this.contrast()+100)/100,2),i=l.data,o=i.length;let u=150,d=150,h=150;for(let m=0;m<o;m+=4)u=i[m],d=i[m+1],h=i[m+2],u/=255,u-=.5,u*=e,u+=.5,u*=255,d/=255,d-=.5,d*=e,d+=.5,d*=255,h/=255,h-=.5,h*=e,h+=.5,h*=255,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,h=h<0?0:h>255?255:h,i[m]=u,i[m+1]=d,i[m+2]=h};X.addGetterSetter(Bt,"contrast",0,Gt(),X.afterSetFilter);const p9=function(l){var e,i,o,u,d,h,m,v,b;const E=l.data,C=l.width,_=l.height,M=Math.min(1,Math.max(0,(i=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&i!==void 0?i:.5)),A=Math.min(1,Math.max(0,(u=(o=this.embossWhiteLevel)===null||o===void 0?void 0:o.call(this))!==null&&u!==void 0?u:.5)),D=(m={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(h=(d=this.embossDirection)===null||d===void 0?void 0:d.call(this))!==null&&h!==void 0?h:"top-left"])!==null&&m!==void 0?m:315,U=!!((b=(v=this.embossBlend)===null||v===void 0?void 0:v.call(this))!==null&&b!==void 0&&b),j=M*10,Y=A*255,L=D*Math.PI/180,nt=Math.cos(L),z=Math.sin(L),G=128/1020*j,Q=new Uint8ClampedArray(E),dt=new Float32Array(C*_);for(let Ot=0,Mt=0;Mt<E.length;Mt+=4,Ot++)dt[Ot]=.2126*Q[Mt]+.7152*Q[Mt+1]+.0722*Q[Mt+2];const lt=[-1,0,1,-2,0,2,-1,0,1],vt=[-1,-2,-1,0,0,0,1,2,1],pt=[-C-1,-C,-C+1,-1,0,1,C-1,C,C+1],jt=Ot=>Ot<0?0:Ot>255?255:Ot;for(let Ot=1;Ot<_-1;Ot++)for(let Mt=1;Mt<C-1;Mt++){const q=Ot*C+Mt;let I=0,k=0;I+=dt[q+pt[0]]*lt[0],k+=dt[q+pt[0]]*vt[0],I+=dt[q+pt[1]]*lt[1],k+=dt[q+pt[1]]*vt[1],I+=dt[q+pt[2]]*lt[2],k+=dt[q+pt[2]]*vt[2],I+=dt[q+pt[3]]*lt[3],k+=dt[q+pt[3]]*vt[3],I+=dt[q+pt[5]]*lt[5],k+=dt[q+pt[5]]*vt[5],I+=dt[q+pt[6]]*lt[6],k+=dt[q+pt[6]]*vt[6],I+=dt[q+pt[7]]*lt[7],k+=dt[q+pt[7]]*vt[7],I+=dt[q+pt[8]]*lt[8],k+=dt[q+pt[8]]*vt[8];const xt=nt*I+z*k,Nt=jt(Y+xt*G),B=q*4;if(U){const P=Nt-Y;E[B]=jt(Q[B]+P),E[B+1]=jt(Q[B+1]+P),E[B+2]=jt(Q[B+2]+P),E[B+3]=Q[B+3]}else E[B]=E[B+1]=E[B+2]=Nt,E[B+3]=Q[B+3]}for(let Ot=0;Ot<C;Ot++){let Mt=Ot*4,q=((_-1)*C+Ot)*4;E[Mt]=Q[Mt],E[Mt+1]=Q[Mt+1],E[Mt+2]=Q[Mt+2],E[Mt+3]=Q[Mt+3],E[q]=Q[q],E[q+1]=Q[q+1],E[q+2]=Q[q+2],E[q+3]=Q[q+3]}for(let Ot=1;Ot<_-1;Ot++){let Mt=Ot*C*4,q=(Ot*C+(C-1))*4;E[Mt]=Q[Mt],E[Mt+1]=Q[Mt+1],E[Mt+2]=Q[Mt+2],E[Mt+3]=Q[Mt+3],E[q]=Q[q],E[q+1]=Q[q+1],E[q+2]=Q[q+2],E[q+3]=Q[q+3]}return l};X.addGetterSetter(Bt,"embossStrength",.5,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"embossWhiteLevel",.5,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"embossDirection","top-left",void 0,X.afterSetFilter);X.addGetterSetter(Bt,"embossBlend",!1,void 0,X.afterSetFilter);function e1(l,e,i,o,u){const d=i-e,h=u-o;if(d===0)return o+h/2;if(h===0)return o;let m=(l-e)/d;return m=h*m+o,m}const v9=function(l){const e=l.data,i=e.length;let o=e[0],u=o,d,h=e[1],m=h,v,b=e[2],E=b,C;const _=this.enhance();if(_===0)return;for(let Y=0;Y<i;Y+=4)d=e[Y+0],d<o?o=d:d>u&&(u=d),v=e[Y+1],v<h?h=v:v>m&&(m=v),C=e[Y+2],C<b?b=C:C>E&&(E=C);u===o&&(u=255,o=0),m===h&&(m=255,h=0),E===b&&(E=255,b=0);let M,A,H,D,U,j;if(_>0)M=u+_*(255-u),A=o-_*(o-0),H=m+_*(255-m),D=h-_*(h-0),U=E+_*(255-E),j=b-_*(b-0);else{const Y=(u+o)*.5;M=u+_*(u-Y),A=o+_*(o-Y);const L=(m+h)*.5;H=m+_*(m-L),D=h+_*(h-L);const nt=(E+b)*.5;U=E+_*(E-nt),j=b+_*(b-nt)}for(let Y=0;Y<i;Y+=4)e[Y+0]=e1(e[Y+0],o,u,A,M),e[Y+1]=e1(e[Y+1],h,m,D,H),e[Y+2]=e1(e[Y+2],b,E,j,U)};X.addGetterSetter(Bt,"enhance",0,Gt(),X.afterSetFilter);const y9=function(l){const e=l.data,i=e.length;for(let o=0;o<i;o+=4){const u=.34*e[o]+.5*e[o+1]+.16*e[o+2];e[o]=u,e[o+1]=u,e[o+2]=u}};X.addGetterSetter(Bt,"hue",0,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"saturation",0,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"luminance",0,Gt(),X.afterSetFilter);const S9=function(l){const e=l.data,i=e.length,o=1,u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,h=this.luminance()*127,m=o*u*Math.cos(d*Math.PI/180),v=o*u*Math.sin(d*Math.PI/180),b=.299*o+.701*m+.167*v,E=.587*o-.587*m+.33*v,C=.114*o-.114*m-.497*v,_=.299*o-.299*m-.328*v,M=.587*o+.413*m+.035*v,A=.114*o-.114*m+.293*v,H=.299*o-.3*m+1.25*v,D=.587*o-.586*m-1.05*v,U=.114*o+.886*m-.2*v;let j,Y,L,nt;for(let z=0;z<i;z+=4)j=e[z+0],Y=e[z+1],L=e[z+2],nt=e[z+3],e[z+0]=b*j+E*Y+C*L+h,e[z+1]=_*j+M*Y+A*L+h,e[z+2]=H*j+D*Y+U*L+h,e[z+3]=nt},b9=function(l){const e=l.data,i=e.length,o=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,h=o*u*Math.cos(d*Math.PI/180),m=o*u*Math.sin(d*Math.PI/180),v=.299*o+.701*h+.167*m,b=.587*o-.587*h+.33*m,E=.114*o-.114*h-.497*m,C=.299*o-.299*h-.328*m,_=.587*o+.413*h+.035*m,M=.114*o-.114*h+.293*m,A=.299*o-.3*h+1.25*m,H=.587*o-.586*h-1.05*m,D=.114*o+.886*h-.2*m;for(let U=0;U<i;U+=4){const j=e[U+0],Y=e[U+1],L=e[U+2],nt=e[U+3];e[U+0]=v*j+b*Y+E*L,e[U+1]=C*j+_*Y+M*L,e[U+2]=A*j+H*Y+D*L,e[U+3]=nt}};X.addGetterSetter(Bt,"hue",0,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"saturation",0,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"value",0,Gt(),X.afterSetFilter);const x9=function(l){const e=l.data,i=e.length;for(let o=0;o<i;o+=4)e[o]=255-e[o],e[o+1]=255-e[o+1],e[o+2]=255-e[o+2]},C9=function(l,e,i){const o=l.data,u=e.data,d=l.width,h=l.height,m=i.polarCenterX||d/2,v=i.polarCenterY||h/2;let b=Math.sqrt(m*m+v*v),E=d-m,C=h-v;const _=Math.sqrt(E*E+C*C);b=_>b?_:b;const M=h,A=d,H=360/A*Math.PI/180;for(let D=0;D<A;D+=1){const U=Math.sin(D*H),j=Math.cos(D*H);for(let Y=0;Y<M;Y+=1){E=Math.floor(m+b*Y/M*j),C=Math.floor(v+b*Y/M*U);let L=(C*d+E)*4;const nt=o[L+0],z=o[L+1],G=o[L+2],Q=o[L+3];L=(D+Y*d)*4,u[L+0]=nt,u[L+1]=z,u[L+2]=G,u[L+3]=Q}}},E9=function(l,e,i){const o=l.data,u=e.data,d=l.width,h=l.height,m=i.polarCenterX||d/2,v=i.polarCenterY||h/2;let b=Math.sqrt(m*m+v*v),E=d-m,C=h-v;const _=Math.sqrt(E*E+C*C);b=_>b?_:b;const M=h,A=d,H=0;let D,U;for(E=0;E<d;E+=1)for(C=0;C<h;C+=1){const j=E-m,Y=C-v,L=Math.sqrt(j*j+Y*Y)*M/b;let nt=(Math.atan2(Y,j)*180/Math.PI+360+H)%360;nt=nt*A/360,D=Math.floor(nt),U=Math.floor(L);let z=(U*d+D)*4;const G=o[z+0],Q=o[z+1],dt=o[z+2],lt=o[z+3];z=(C*d+E)*4,u[z+0]=G,u[z+1]=Q,u[z+2]=dt,u[z+3]=lt}},_9=function(l){const e=l.width,i=l.height;let o,u,d,h,m,v,b,E,C,_,M=Math.round(this.kaleidoscopePower());const A=Math.round(this.kaleidoscopeAngle()),H=Math.floor(e*(A%360)/360);if(M<1)return;const D=et.createCanvasElement();D.width=e,D.height=i;const U=D.getContext("2d").getImageData(0,0,e,i);et.releaseCanvas(D),C9(l,U,{polarCenterX:e/2,polarCenterY:i/2});let j=e/Math.pow(2,M);for(;j<=8;)j=j*2,M-=1;j=Math.ceil(j);let Y=j,L=0,nt=Y,z=1;for(H+j>e&&(L=Y,nt=0,z=-1),u=0;u<i;u+=1)for(o=L;o!==nt;o+=z)d=Math.round(o+H)%e,C=(e*u+d)*4,m=U.data[C+0],v=U.data[C+1],b=U.data[C+2],E=U.data[C+3],_=(e*u+o)*4,U.data[_+0]=m,U.data[_+1]=v,U.data[_+2]=b,U.data[_+3]=E;for(u=0;u<i;u+=1)for(Y=Math.floor(j),h=0;h<M;h+=1){for(o=0;o<Y+1;o+=1)C=(e*u+o)*4,m=U.data[C+0],v=U.data[C+1],b=U.data[C+2],E=U.data[C+3],_=(e*u+Y*2-o-1)*4,U.data[_+0]=m,U.data[_+1]=v,U.data[_+2]=b,U.data[_+3]=E;Y*=2}E9(U,l,{})};X.addGetterSetter(Bt,"kaleidoscopePower",2,Gt(),X.afterSetFilter);X.addGetterSetter(Bt,"kaleidoscopeAngle",0,Gt(),X.afterSetFilter);function dg(l,e,i){let o=(i*l.width+e)*4;const u=[];return u.push(l.data[o++],l.data[o++],l.data[o++],l.data[o++]),u}function Yd(l,e){return Math.sqrt(Math.pow(l[0]-e[0],2)+Math.pow(l[1]-e[1],2)+Math.pow(l[2]-e[2],2))}function T9(l){const e=[0,0,0];for(let i=0;i<l.length;i++)e[0]+=l[i][0],e[1]+=l[i][1],e[2]+=l[i][2];return e[0]/=l.length,e[1]/=l.length,e[2]/=l.length,e}function A9(l,e){const i=dg(l,0,0),o=dg(l,l.width-1,0),u=dg(l,0,l.height-1),d=dg(l,l.width-1,l.height-1),h=e||10;if(Yd(i,o)<h&&Yd(o,d)<h&&Yd(d,u)<h&&Yd(u,i)<h){const m=T9([o,i,d,u]),v=[];for(let b=0;b<l.width*l.height;b++){const E=Yd(m,[l.data[b*4],l.data[b*4+1],l.data[b*4+2]]);v[b]=E<h?0:255}return v}}function M9(l,e){for(let i=0;i<l.width*l.height;i++)l.data[4*i+3]=e[i]}function w9(l,e,i){const o=[1,1,1,1,0,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),h=[];for(let m=0;m<i;m++)for(let v=0;v<e;v++){const b=m*e+v;let E=0;for(let C=0;C<u;C++)for(let _=0;_<u;_++){const M=m+C-d,A=v+_-d;if(M>=0&&M<i&&A>=0&&A<e){const H=M*e+A,D=o[C*u+_];E+=l[H]*D}}h[b]=E===2040?255:0}return h}function N9(l,e,i){const o=[1,1,1,1,1,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),h=[];for(let m=0;m<i;m++)for(let v=0;v<e;v++){const b=m*e+v;let E=0;for(let C=0;C<u;C++)for(let _=0;_<u;_++){const M=m+C-d,A=v+_-d;if(M>=0&&M<i&&A>=0&&A<e){const H=M*e+A,D=o[C*u+_];E+=l[H]*D}}h[b]=E>=1020?255:0}return h}function R9(l,e,i){const o=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),h=[];for(let m=0;m<i;m++)for(let v=0;v<e;v++){const b=m*e+v;let E=0;for(let C=0;C<u;C++)for(let _=0;_<u;_++){const M=m+C-d,A=v+_-d;if(M>=0&&M<i&&A>=0&&A<e){const H=M*e+A,D=o[C*u+_];E+=l[H]*D}}h[b]=E}return h}const D9=function(l){const e=this.threshold();let i=A9(l,e);return i&&(i=w9(i,l.width,l.height),i=N9(i,l.width,l.height),i=R9(i,l.width,l.height),M9(l,i)),l};X.addGetterSetter(Bt,"threshold",0,Gt(),X.afterSetFilter);const O9=function(l){const e=this.noise()*255,i=l.data,o=i.length,u=e/2;for(let d=0;d<o;d+=4)i[d+0]+=u-2*u*Math.random(),i[d+1]+=u-2*u*Math.random(),i[d+2]+=u-2*u*Math.random()};X.addGetterSetter(Bt,"noise",.2,Gt(),X.afterSetFilter);const z9=function(l){let e=Math.ceil(this.pixelSize()),i=l.width,o=l.height,u=Math.ceil(i/e),d=Math.ceil(o/e),h=l.data;if(e<=0){et.error("pixelSize value can not be <= 0");return}for(let m=0;m<u;m+=1)for(let v=0;v<d;v+=1){let b=0,E=0,C=0,_=0;const M=m*e,A=M+e,H=v*e,D=H+e;let U=0;for(let j=M;j<A;j+=1)if(!(j>=i))for(let Y=H;Y<D;Y+=1){if(Y>=o)continue;const L=(i*Y+j)*4;b+=h[L+0],E+=h[L+1],C+=h[L+2],_+=h[L+3],U+=1}b=b/U,E=E/U,C=C/U,_=_/U;for(let j=M;j<A;j+=1)if(!(j>=i))for(let Y=H;Y<D;Y+=1){if(Y>=o)continue;const L=(i*Y+j)*4;h[L+0]=b,h[L+1]=E,h[L+2]=C,h[L+3]=_}}};X.addGetterSetter(Bt,"pixelSize",8,Gt(),X.afterSetFilter);const j9=function(l){const e=Math.round(this.levels()*254)+1,i=l.data,o=i.length,u=255/e;for(let d=0;d<o;d+=1)i[d]=Math.floor(i[d]/u)*u};X.addGetterSetter(Bt,"levels",.5,Gt(),X.afterSetFilter);const H9=function(l){const e=l.data,i=e.length,o=this.red(),u=this.green(),d=this.blue();for(let h=0;h<i;h+=4){const m=(.34*e[h]+.5*e[h+1]+.16*e[h+2])/255;e[h]=m*o,e[h+1]=m*u,e[h+2]=m*d,e[h+3]=e[h+3]}};X.addGetterSetter(Bt,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});X.addGetterSetter(Bt,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});X.addGetterSetter(Bt,"blue",0,by,X.afterSetFilter);const U9=function(l){const e=l.data,i=e.length,o=this.red(),u=this.green(),d=this.blue(),h=this.alpha();for(let m=0;m<i;m+=4){const v=1-h;e[m]=o*h+e[m]*v,e[m+1]=u*h+e[m+1]*v,e[m+2]=d*h+e[m+2]*v}};X.addGetterSetter(Bt,"red",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});X.addGetterSetter(Bt,"green",0,function(l){return this._filterUpToDate=!1,l>255?255:l<0?0:Math.round(l)});X.addGetterSetter(Bt,"blue",0,by,X.afterSetFilter);X.addGetterSetter(Bt,"alpha",1,function(l){return this._filterUpToDate=!1,l>1?1:l<0?0:l});const B9=function(l){const e=l.data,i=e.length;for(let o=0;o<i;o+=4){const u=e[o+0],d=e[o+1],h=e[o+2];e[o+0]=Math.min(255,u*.393+d*.769+h*.189),e[o+1]=Math.min(255,u*.349+d*.686+h*.168),e[o+2]=Math.min(255,u*.272+d*.534+h*.131)}},G9=function(l){const i=l.data;for(let o=0;o<i.length;o+=4){const u=i[o],d=i[o+1],h=i[o+2];.2126*u+.7152*d+.0722*h>=128&&(i[o]=255-u,i[o+1]=255-d,i[o+2]=255-h)}return l},L9=function(l){const e=this.threshold()*255,i=l.data,o=i.length;for(let u=0;u<o;u+=1)i[u]=i[u]<e?0:255};X.addGetterSetter(Bt,"threshold",.5,Gt(),X.afterSetFilter);const Py=Wc.Util._assign(Wc,{Arc:gr,Arrow:Tu,Circle:ef,Ellipse:xo,Image:Zi,Label:W1,Tag:Au,Line:mr,Path:Si,Rect:hh,RegularPolygon:Co,Ring:Mu,Sprite:ws,Star:Eo,Text:xn,TextPath:ra,Transformer:Be,Wedge:pr,Filters:{Blur:d9,Brightness:g9,Brighten:h9,Contrast:m9,Emboss:p9,Enhance:v9,Grayscale:y9,HSL:S9,HSV:b9,Invert:x9,Kaleidoscope:_9,Mask:D9,Noise:O9,Pixelate:z9,Posterize:j9,RGB:H9,RGBA:U9,Sepia:B9,Solarize:G9,Threshold:L9}});var n1={exports:{}},a1={exports:{}};var fv;function Y9(){return fv||(fv=1,(function(l){l.exports=function(e){function i(a,s,f,g){return new Df(a,s,f,g)}function o(){}function u(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(a){var s=a,f=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(f=s.return),a=s.return;while(a)}return s.tag===3?f:null}function h(a){if(d(a)!==a)throw Error(u(188))}function m(a){var s=a.alternate;if(!s){if(s=d(a),s===null)throw Error(u(188));return s!==a?null:a}for(var f=a,g=s;;){var S=f.return;if(S===null)break;var x=S.alternate;if(x===null){if(g=S.return,g!==null){f=g;continue}break}if(S.child===x.child){for(x=S.child;x;){if(x===f)return h(S),a;if(x===g)return h(S),s;x=x.sibling}throw Error(u(188))}if(f.return!==g.return)f=S,g=x;else{for(var w=!1,K=S.child;K;){if(K===f){w=!0,f=S,g=x;break}if(K===g){w=!0,g=S,f=x;break}K=K.sibling}if(!w){for(K=x.child;K;){if(K===f){w=!0,f=x,g=S;break}if(K===g){w=!0,g=x,f=S;break}K=K.sibling}if(!w)throw Error(u(189))}}if(f.alternate!==g)throw Error(u(190))}if(f.tag!==3)throw Error(u(188));return f.stateNode.current===f?a:s}function v(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=v(a),s!==null)return s;a=a.sibling}return null}function b(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(a.tag!==4&&(s=b(a),s!==null))return s;a=a.sibling}return null}function E(a){return a===null||typeof a!="object"?null:(a=Di&&a[Di]||a["@@iterator"],typeof a=="function"?a:null)}function C(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ds?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case Ks:return"Fragment";case Zs:return"Profiler";case Qs:return"StrictMode";case dc:return"Suspense";case Ri:return"SuspenseList";case Fo:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case Vs:return"Portal";case El:return a.displayName||"Context";case Io:return(a._context.displayName||"Context")+".Consumer";case Xr:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case hc:return s=a.displayName||null,s!==null?s:C(a.type)||"Memo";case Aa:s=a._payload,a=a._init;try{return C(a(s))}catch{}}return null}function _(a){return{current:a}}function M(a){0>Ws||(a.current=Ac[Ws],Ac[Ws]=null,Ws--)}function A(a,s){Ws++,Ac[Ws]=a.current,a.current=s}function H(a){return a>>>=0,a===0?32:31-(Mc(a)/D0|0)|0}function D(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function U(a,s,f){var g=a.pendingLanes;if(g===0)return 0;var S=0,x=a.suspendedLanes,w=a.pingedLanes;a=a.warmLanes;var K=g&134217727;return K!==0?(g=K&~x,g!==0?S=D(g):(w&=K,w!==0?S=D(w):f||(f=K&~a,f!==0&&(S=D(f))))):(K=g&~x,K!==0?S=D(K):w!==0?S=D(w):f||(f=g&~a,f!==0&&(S=D(f)))),S===0?0:s!==0&&s!==S&&(s&x)===0&&(x=S&-S,f=s&-s,x>=f||x===32&&(f&4194048)!==0)?s:S}function j(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function Y(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L(){var a=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),a}function nt(a){for(var s=[],f=0;31>f;f++)s.push(a);return s}function z(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function G(a,s,f,g,S,x){var w=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var K=a.entanglements,ct=a.expirationTimes,Tt=a.hiddenUpdates;for(f=w&~f;0<f;){var Ut=31-qa(f),Rt=1<<Ut;K[Ut]=0,ct[Ut]=-1;var qt=Tt[Ut];if(qt!==null)for(Tt[Ut]=null,Ut=0;Ut<qt.length;Ut++){var oe=qt[Ut];oe!==null&&(oe.lane&=-536870913)}f&=~Rt}g!==0&&Q(a,g,0),x!==0&&S===0&&a.tag!==0&&(a.suspendedLanes|=x&~(w&~s))}function Q(a,s,f){a.pendingLanes|=s,a.suspendedLanes&=~s;var g=31-qa(s);a.entangledLanes|=s,a.entanglements[g]=a.entanglements[g]|1073741824|f&261930}function dt(a,s){var f=a.entangledLanes|=s;for(a=a.entanglements;f;){var g=31-qa(f),S=1<<g;S&s|a[g]&s&&(a[g]|=s),f&=~S}}function lt(a,s){var f=s&-s;return f=(f&42)!==0?1:vt(f),(f&(a.suspendedLanes|s))!==0?0:f}function vt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function pt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function jt(a){if(typeof pd=="function"&&j0(a),Va&&typeof Va.setStrictMode=="function")try{Va.setStrictMode($s,a)}catch{}}function Ot(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}function Mt(a){if(zc===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);zc=s&&s[1]||"",ri=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zc+a+ri}function q(a,s){if(!a||iu)return"";iu=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(s){var Rt=function(){throw Error()};if(Object.defineProperty(Rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Rt,[])}catch(oe){var qt=oe}Reflect.construct(a,[],Rt)}else{try{Rt.call()}catch(oe){qt=oe}a.call(Rt.prototype)}}else{try{throw Error()}catch(oe){qt=oe}(Rt=a())&&typeof Rt.catch=="function"&&Rt.catch(function(){})}}catch(oe){if(oe&&qt&&typeof oe.stack=="string")return[oe.stack,qt.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=g.DetermineComponentFrameRoot(),w=x[0],K=x[1];if(w&&K){var ct=w.split(`
`),Tt=K.split(`
`);for(S=g=0;g<ct.length&&!ct[g].includes("DetermineComponentFrameRoot");)g++;for(;S<Tt.length&&!Tt[S].includes("DetermineComponentFrameRoot");)S++;if(g===ct.length||S===Tt.length)for(g=ct.length-1,S=Tt.length-1;1<=g&&0<=S&&ct[g]!==Tt[S];)S--;for(;1<=g&&0<=S;g--,S--)if(ct[g]!==Tt[S]){if(g!==1||S!==1)do if(g--,S--,0>S||ct[g]!==Tt[S]){var Ut=`
`+ct[g].replace(" at new "," at ");return a.displayName&&Ut.includes("<anonymous>")&&(Ut=Ut.replace("<anonymous>",a.displayName)),Ut}while(1<=g&&0<=S);break}}}finally{iu=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Mt(f):""}function I(a,s){switch(a.tag){case 26:case 27:case 5:return Mt(a.type);case 16:return Mt("Lazy");case 13:return a.child!==s&&s!==null?Mt("Suspense Fallback"):Mt("Suspense");case 19:return Mt("SuspenseList");case 0:case 15:return q(a.type,!1);case 11:return q(a.type.render,!1);case 1:return q(a.type,!0);case 31:return Mt("Activity");default:return""}}function k(a){try{var s="",f=null;do s+=I(a,f),f=a,a=a.return;while(a);return s}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function xt(a,s){if(typeof a=="object"&&a!==null){var f=vd.get(a);return f!==void 0?f:(s={value:a,source:s,stack:k(s)},vd.set(a,s),s)}return{value:a,source:s,stack:k(s)}}function Nt(a,s){ji[oi++]=su,ji[oi++]=Je,Je=a,su=s}function B(a,s,f){Al[sl++]=na,Al[sl++]=Ll,Al[sl++]=Ml,Ml=a;var g=na;a=Ll;var S=32-qa(g)-1;g&=~(1<<S),f+=1;var x=32-qa(s)+S;if(30<x){var w=S-S%5;x=(g&(1<<w)-1).toString(32),g>>=w,S-=w,na=1<<32-qa(s)+S|f<<S|g,Ll=x+a}else na=1<<x|f<<S|g,Ll=a}function P(a){a.return!==null&&(Nt(a,1),B(a,1,0))}function St(a){for(;a===Je;)Je=ji[--oi],ji[oi]=null,su=ji[--oi],ji[oi]=null;for(;a===Ml;)Ml=Al[--sl],Al[sl]=null,Ll=Al[--sl],Al[sl]=null,na=Al[--sl],Al[sl]=null}function Ht(a,s){Al[sl++]=na,Al[sl++]=Ll,Al[sl++]=Ml,na=s.id,Ll=s.overflow,Ml=a}function Vt(a,s){A(aa,s),A(Hi,a),A(Wn,null),a=kh(s),M(Wn),A(Wn,a)}function Xt(){M(Wn),M(Hi),M(aa)}function Z(a){a.memoizedState!==null&&A(ru,a);var s=Wn.current,f=Kr(s,a.type);s!==f&&(A(Hi,a),A(Wn,f))}function F(a){Hi.current===a&&(M(Wn),M(Hi)),ru.current===a&&(M(ru),Rn?Is._currentValue=Js:Is._currentValue2=Js)}function mt(a){var s=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yt(xt(s,a)),jc}function wt(a,s){if(!on)throw Error(u(175));S0(a.stateNode,a.type,a.memoizedProps,s,a)||mt(a,!0)}function W(a){for(Kn=a.return;Kn;)switch(Kn.tag){case 5:case 31:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:Kn=Kn.return}}function gt(a){if(!on||a!==Kn)return!1;if(!Ce)return W(a),Ce=!0,!1;var s=a.tag;if(Vn?s!==3&&s!==27&&(s!==5||kr(a.type)&&!Ma(a.type,a.memoizedProps))&&un&&mt(a):s!==3&&(s!==5||kr(a.type)&&!Ma(a.type,a.memoizedProps))&&un&&mt(a),W(a),s===13){if(!on)throw Error(u(316));if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(u(317));un=id(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(u(317));un=x0(a)}else un=Vn&&s===27?f0(a.type,un):Kn?c0(a.stateNode):null;return!0}function _t(){on&&(un=Kn=null,Ce=!1)}function At(){var a=ui;return a!==null&&(Qa===null?Qa=a:Qa.push.apply(Qa,a),ui=null),a}function Yt(a){ui===null?ui=[a]:ui.push(a)}function ot(a,s,f){Rn?(A(wl,s._currentValue),s._currentValue=f):(A(wl,s._currentValue2),s._currentValue2=f)}function ht(a){var s=wl.current;Rn?a._currentValue=s:a._currentValue2=s,M(wl)}function Kt(a,s,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,g!==null&&(g.childLanes|=s)):g!==null&&(g.childLanes&s)!==s&&(g.childLanes|=s),a===f)break;a=a.return}}function _e(a,s,f,g){var S=a.child;for(S!==null&&(S.return=a);S!==null;){var x=S.dependencies;if(x!==null){var w=S.child;x=x.firstContext;t:for(;x!==null;){var K=x;x=S;for(var ct=0;ct<s.length;ct++)if(K.context===s[ct]){x.lanes|=f,K=x.alternate,K!==null&&(K.lanes|=f),Kt(x.return,f,a),g||(w=null);break t}x=K.next}}else if(S.tag===18){if(w=S.return,w===null)throw Error(u(341));w.lanes|=f,x=w.alternate,x!==null&&(x.lanes|=f),Kt(w,f,a),w=null}else w=S.child;if(w!==null)w.return=S;else for(w=S;w!==null;){if(w===a){w=null;break}if(S=w.sibling,S!==null){S.return=w.return,w=S;break}w=w.return}S=w}}function le(a,s,f,g){a=null;for(var S=s,x=!1;S!==null;){if(!x){if((S.flags&524288)!==0)x=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var w=S.alternate;if(w===null)throw Error(u(387));if(w=w.memoizedProps,w!==null){var K=S.type;On(S.pendingProps.value,w.value)||(a!==null?a.push(K):a=[K])}}else if(S===ru.current){if(w=S.alternate,w===null)throw Error(u(387));w.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(a!==null?a.push(Is):a=[Is])}S=S.return}a!==null&&_e(s,a,f,g),s.flags|=262144}function Oe(a){for(a=a.firstContext;a!==null;){var s=a.context;if(!On(Rn?s._currentValue:s._currentValue2,a.memoizedValue))return!0;a=a.next}return!1}function Xe(a){Pe=a,Yl=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function kt(a){return Ze(Pe,a)}function Jt(a,s){return Pe===null&&Xe(a),Ze(a,s)}function Ze(a,s){var f=Rn?s._currentValue:s._currentValue2;if(s={context:s,memoizedValue:f,next:null},Yl===null){if(a===null)throw Error(u(308));Yl=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else Yl=Yl.next=s;return f}function an(){return{controller:new H0,data:new Map,refCount:0}}function ze(a){a.refCount--,a.refCount===0&&Pn(om,function(){a.controller.abort()})}function je(){}function dn(a){a!==qe&&a.next===null&&(qe===null?ou=qe=a:qe=qe.next=a),Nl=!0,pa||(pa=!0,ua())}function hl(a,s){if(!Hc&&Nl){Hc=!0;do for(var f=!1,g=ou;g!==null;){if(a!==0){var S=g.pendingLanes;if(S===0)var x=0;else{var w=g.suspendedLanes,K=g.pingedLanes;x=(1<<31-qa(42|a)+1)-1,x&=S&~(w&~K),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,Ja(g,x))}else x=Ee,x=U(g,g===me?x:0,g.cancelPendingCommit!==null||g.timeoutHandle!==Xa),(x&3)===0||j(g,x)||(f=!0,Ja(g,x));g=g.next}while(f);Hc=!1}}function ka(){ki()}function ki(){Nl=pa=!1;var a=0;vs!==0&&ks()&&(a=vs);for(var s=ma(),f=null,g=ou;g!==null;){var S=g.next,x=Ji(g,s);x===0?(g.next=null,f===null?ou=S:f.next=S,S===null&&(qe=f)):(f=g,(a!==0||(x&3)!==0)&&(Nl=!0)),g=S}Xn!==0&&Xn!==5||hl(a),vs!==0&&(vs=0)}function Ji(a,s){for(var f=a.suspendedLanes,g=a.pingedLanes,S=a.expirationTimes,x=a.pendingLanes&-62914561;0<x;){var w=31-qa(x),K=1<<w,ct=S[w];ct===-1?((K&f)===0||(K&g)!==0)&&(S[w]=Y(K,s)):ct<=s&&(a.expiredLanes|=K),x&=~K}if(s=me,f=Ee,f=U(a,a===s?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==Xa),g=a.callbackNode,f===0||a===s&&(Ke===2||Ke===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Nc(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||j(a,f)){if(s=f&-f,s===a.callbackPriority)return s;switch(g!==null&&Nc(g),pt(f)){case 2:case 8:f=z0;break;case 32:f=lu;break;case 268435456:f=Dc;break;default:f=lu}return g=oa.bind(null,a),f=au(f,g),a.callbackPriority=s,a.callbackNode=f,s}return g!==null&&g!==null&&Nc(g),a.callbackPriority=2,a.callbackNode=null,2}function oa(a,s){if(Xn!==0&&Xn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(li()&&a.callbackNode!==f)return null;var g=Ee;return g=U(a,a===me?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==Xa),g===0?null:(Gl(a,g,s),Ji(a,ma()),a.callbackNode!=null&&a.callbackNode===f?oa.bind(null,a):null)}function Ja(a,s){if(li())return null;Gl(a,s,!0)}function ua(){Vf?Kf(function(){(ye&6)!==0?au(Rc,ka):ki()}):au(Rc,ka)}function To(){if(vs===0){var a=Ui;a===0&&(a=wc,wc<<=1,(wc&261888)===0&&(wc=256)),vs=a}return vs}function wu(a,s){if(Ir===null){var f=Ir=[];yd=0,Ui=To(),Qn={status:"pending",value:void 0,then:function(g){f.push(g)}}}return yd++,s.then(Nu,Nu),s}function Nu(){if(--yd===0&&Ir!==null){Qn!==null&&(Qn.status="fulfilled");var a=Ir;Ir=null,Ui=0,Qn=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function vr(a,s){var f=[],g={status:"pending",value:null,reason:null,then:function(S){f.push(S)}};return a.then(function(){g.status="fulfilled",g.value=s;for(var S=0;S<f.length;S++)(0,f[S])(s)},function(S){for(g.status="rejected",g.reason=S,S=0;S<f.length;S++)(0,f[S])(void 0)}),g}function Ii(){var a=ys.current;return a!==null?a:me.pooledCache}function ln(a,s){s===null?A(ys,ys.current):A(ys,s.pool)}function Cn(){var a=Ii();return a===null?null:{parent:Rn?cn._currentValue:cn._currentValue2,pool:a}}function Nn(a,s){if(On(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var f=Object.keys(a),g=Object.keys(s);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var S=f[g];if(!rm.call(s,S)||!On(a[S],s[S]))return!1}return!0}function Sa(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ba(a,s,f){switch(f=a[f],f===void 0?a.push(s):f!==s&&(s.then(je,je),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Ia(a),a;default:if(typeof s.status=="string")s.then(je,je);else{if(a=me,a!==null&&100<a.shellSuspendCounter)throw Error(u(482));a=s,a.status="pending",a.then(function(g){if(s.status==="pending"){var S=s;S.status="fulfilled",S.value=g}},function(g){if(s.status==="pending"){var S=s;S.status="rejected",S.reason=g}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,Ia(a),a}throw Na=s,Zn}}function En(a){try{var s=a._init;return s(a._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Na=f,Zn):f}}function xa(){if(Na===null)throw Error(u(459));var a=Na;return Na=null,a}function Ia(a){if(a===Zn||a===Dl)throw Error(u(483))}function _n(a){var s=tr;return tr+=1,Ss===null&&(Ss=[]),ba(Ss,a,s)}function Ca(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function ca(a,s){throw s.$$typeof===qs?Error(u(525)):(a=Object.prototype.toString.call(s),Error(u(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function Fa(a){function s(st,tt){if(a){var ut=st.deletions;ut===null?(st.deletions=[tt],st.flags|=16):ut.push(tt)}}function f(st,tt){if(!a)return null;for(;tt!==null;)s(st,tt),tt=tt.sibling;return null}function g(st){for(var tt=new Map;st!==null;)st.key!==null?tt.set(st.key,st):tt.set(st.index,st),st=st.sibling;return tt}function S(st,tt){return st=ll(st,tt),st.index=0,st.sibling=null,st}function x(st,tt,ut){return st.index=ut,a?(ut=st.alternate,ut!==null?(ut=ut.index,ut<tt?(st.flags|=67108866,tt):ut):(st.flags|=67108866,tt)):(st.flags|=1048576,tt)}function w(st){return a&&st.alternate===null&&(st.flags|=67108866),st}function K(st,tt,ut,zt){return tt===null||tt.tag!==6?(tt=Of(ut,st.mode,zt),tt.return=st,tt):(tt=S(tt,ut),tt.return=st,tt)}function ct(st,tt,ut,zt){var $t=ut.type;return $t===Ks?Ut(st,tt,ut.props.children,zt,ut.key):tt!==null&&(tt.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===Aa&&En($t)===tt.type)?(tt=S(tt,ut.props),Ca(tt,ut),tt.return=st,tt):(tt=Ni(ut.type,ut.key,ut.props,null,st.mode,zt),Ca(tt,ut),tt.return=st,tt)}function Tt(st,tt,ut,zt){return tt===null||tt.tag!==4||tt.stateNode.containerInfo!==ut.containerInfo||tt.stateNode.implementation!==ut.implementation?(tt=jf(ut,st.mode,zt),tt.return=st,tt):(tt=S(tt,ut.children||[]),tt.return=st,tt)}function Ut(st,tt,ut,zt,$t){return tt===null||tt.tag!==7?(tt=Cl(ut,st.mode,zt,$t),tt.return=st,tt):(tt=S(tt,ut),tt.return=st,tt)}function Rt(st,tt,ut){if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return tt=Of(""+tt,st.mode,ut),tt.return=st,tt;if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case ii:return ut=Ni(tt.type,tt.key,tt.props,null,st.mode,ut),Ca(ut,tt),ut.return=st,ut;case Vs:return tt=jf(tt,st.mode,ut),tt.return=st,tt;case Aa:return tt=En(tt),Rt(st,tt,ut)}if(hs(tt)||E(tt))return tt=Cl(tt,st.mode,ut,null),tt.return=st,tt;if(typeof tt.then=="function")return Rt(st,_n(tt),ut);if(tt.$$typeof===El)return Rt(st,Jt(st,tt),ut);ca(st,tt)}return null}function qt(st,tt,ut,zt){var $t=tt!==null?tt.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return $t!==null?null:K(st,tt,""+ut,zt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case ii:return ut.key===$t?ct(st,tt,ut,zt):null;case Vs:return ut.key===$t?Tt(st,tt,ut,zt):null;case Aa:return ut=En(ut),qt(st,tt,ut,zt)}if(hs(ut)||E(ut))return $t!==null?null:Ut(st,tt,ut,zt,null);if(typeof ut.then=="function")return qt(st,tt,_n(ut),zt);if(ut.$$typeof===El)return qt(st,tt,Jt(st,ut),zt);ca(st,ut)}return null}function oe(st,tt,ut,zt,$t){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return st=st.get(ut)||null,K(tt,st,""+zt,$t);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case ii:return st=st.get(zt.key===null?ut:zt.key)||null,ct(tt,st,zt,$t);case Vs:return st=st.get(zt.key===null?ut:zt.key)||null,Tt(tt,st,zt,$t);case Aa:return zt=En(zt),oe(st,tt,ut,zt,$t)}if(hs(zt)||E(zt))return st=st.get(ut)||null,Ut(tt,st,zt,$t,null);if(typeof zt.then=="function")return oe(st,tt,ut,_n(zt),$t);if(zt.$$typeof===El)return oe(st,tt,ut,Jt(tt,zt),$t);ca(tt,zt)}return null}function $n(st,tt,ut,zt){for(var $t=null,bn=null,te=tt,Ne=tt=0,ta=null;te!==null&&Ne<ut.length;Ne++){te.index>Ne?(ta=te,te=null):ta=te.sibling;var Ge=qt(st,te,ut[Ne],zt);if(Ge===null){te===null&&(te=ta);break}a&&te&&Ge.alternate===null&&s(st,te),tt=x(Ge,tt,Ne),bn===null?$t=Ge:bn.sibling=Ge,bn=Ge,te=ta}if(Ne===ut.length)return f(st,te),Ce&&Nt(st,Ne),$t;if(te===null){for(;Ne<ut.length;Ne++)te=Rt(st,ut[Ne],zt),te!==null&&(tt=x(te,tt,Ne),bn===null?$t=te:bn.sibling=te,bn=te);return Ce&&Nt(st,Ne),$t}for(te=g(te);Ne<ut.length;Ne++)ta=oe(te,st,Ne,ut[Ne],zt),ta!==null&&(a&&ta.alternate!==null&&te.delete(ta.key===null?Ne:ta.key),tt=x(ta,tt,Ne),bn===null?$t=ta:bn.sibling=ta,bn=ta);return a&&te.forEach(function(jl){return s(st,jl)}),Ce&&Nt(st,Ne),$t}function ao(st,tt,ut,zt){if(ut==null)throw Error(u(151));for(var $t=null,bn=null,te=tt,Ne=tt=0,ta=null,Ge=ut.next();te!==null&&!Ge.done;Ne++,Ge=ut.next()){te.index>Ne?(ta=te,te=null):ta=te.sibling;var jl=qt(st,te,Ge.value,zt);if(jl===null){te===null&&(te=ta);break}a&&te&&jl.alternate===null&&s(st,te),tt=x(jl,tt,Ne),bn===null?$t=jl:bn.sibling=jl,bn=jl,te=ta}if(Ge.done)return f(st,te),Ce&&Nt(st,Ne),$t;if(te===null){for(;!Ge.done;Ne++,Ge=ut.next())Ge=Rt(st,Ge.value,zt),Ge!==null&&(tt=x(Ge,tt,Ne),bn===null?$t=Ge:bn.sibling=Ge,bn=Ge);return Ce&&Nt(st,Ne),$t}for(te=g(te);!Ge.done;Ne++,Ge=ut.next())Ge=oe(te,st,Ne,Ge.value,zt),Ge!==null&&(a&&Ge.alternate!==null&&te.delete(Ge.key===null?Ne:Ge.key),tt=x(Ge,tt,Ne),bn===null?$t=Ge:bn.sibling=Ge,bn=Ge);return a&&te.forEach(function(um){return s(st,um)}),Ce&&Nt(st,Ne),$t}function Ms(st,tt,ut,zt){if(typeof ut=="object"&&ut!==null&&ut.type===Ks&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case ii:t:{for(var $t=ut.key;tt!==null;){if(tt.key===$t){if($t=ut.type,$t===Ks){if(tt.tag===7){f(st,tt.sibling),zt=S(tt,ut.props.children),zt.return=st,st=zt;break t}}else if(tt.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===Aa&&En($t)===tt.type){f(st,tt.sibling),zt=S(tt,ut.props),Ca(zt,ut),zt.return=st,st=zt;break t}f(st,tt);break}else s(st,tt);tt=tt.sibling}ut.type===Ks?(zt=Cl(ut.props.children,st.mode,zt,ut.key),zt.return=st,st=zt):(zt=Ni(ut.type,ut.key,ut.props,null,st.mode,zt),Ca(zt,ut),zt.return=st,st=zt)}return w(st);case Vs:t:{for($t=ut.key;tt!==null;){if(tt.key===$t)if(tt.tag===4&&tt.stateNode.containerInfo===ut.containerInfo&&tt.stateNode.implementation===ut.implementation){f(st,tt.sibling),zt=S(tt,ut.children||[]),zt.return=st,st=zt;break t}else{f(st,tt);break}else s(st,tt);tt=tt.sibling}zt=jf(ut,st.mode,zt),zt.return=st,st=zt}return w(st);case Aa:return ut=En(ut),Ms(st,tt,ut,zt)}if(hs(ut))return $n(st,tt,ut,zt);if(E(ut)){if($t=E(ut),typeof $t!="function")throw Error(u(150));return ut=$t.call(ut),ao(st,tt,ut,zt)}if(typeof ut.then=="function")return Ms(st,tt,_n(ut),zt);if(ut.$$typeof===El)return Ms(st,tt,Jt(st,ut),zt);ca(st,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint"?(ut=""+ut,tt!==null&&tt.tag===6?(f(st,tt.sibling),zt=S(tt,ut),zt.return=st,st=zt):(f(st,tt),zt=Of(ut,st.mode,zt),zt.return=st,st=zt),w(st)):f(st,tt)}return function(st,tt,ut,zt){try{tr=0;var $t=Ms(st,tt,ut,zt);return Ss=null,$t}catch(te){if(te===Zn||te===Dl)throw te;var bn=i(29,te,null,st.mode);return bn.lanes=zt,bn.return=st,bn}}}function gl(){for(var a=fi,s=er=fi=0;s<a;){var f=ia[s];ia[s++]=null;var g=ia[s];ia[s++]=null;var S=ia[s];ia[s++]=null;var x=ia[s];if(ia[s++]=null,g!==null&&S!==null){var w=g.pending;w===null?S.next=S:(S.next=w.next,w.next=S),g.pending=S}x!==0&&Pa(f,S,x)}}function ml(a,s,f,g){ia[fi++]=a,ia[fi++]=s,ia[fi++]=f,ia[fi++]=g,er|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function Wa(a,s,f,g){return ml(a,s,f,g),Un(a)}function Ua(a,s){return ml(a,null,null,s),Un(a)}function Pa(a,s,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var S=!1,x=a.return;x!==null;)x.childLanes|=f,g=x.alternate,g!==null&&(g.childLanes|=f),x.tag===22&&(a=x.stateNode,a===null||a._visibility&1||(S=!0)),a=x,x=x.return;return a.tag===3?(x=a.stateNode,S&&s!==null&&(S=31-qa(f),a=x.hiddenUpdates,g=a[S],g===null?a[S]=[s]:g.push(s),s.lane=f|536870912),x):null}function Un(a){if(50<He)throw He=0,gu=null,Error(u(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}function fa(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fi(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ql(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Wi(a,s,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(ye&2)!==0){var S=g.pending;return S===null?s.next=s:(s.next=S.next,S.next=s),g.pending=s,s=Un(a),Pa(a,null,f),s}return ml(a,g,s,f),Un(a)}function Ao(a,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var g=s.lanes;g&=a.pendingLanes,f|=g,s.lanes=f,dt(a,f)}}function Ru(a,s){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var S=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var w={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?S=x=w:x=x.next=w,f=f.next}while(f!==null);x===null?S=x=s:x=x.next=s}else S=x=s;f={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:x,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=s:a.next=s,f.lastBaseUpdate=s}function bi(){if(Bc){var a=Qn;if(a!==null)throw a}}function Ns(a,s,f,g){Bc=!1;var S=a.updateQueue;rl=!1;var x=S.firstBaseUpdate,w=S.lastBaseUpdate,K=S.shared.pending;if(K!==null){S.shared.pending=null;var ct=K,Tt=ct.next;ct.next=null,w===null?x=Tt:w.next=Tt,w=ct;var Ut=a.alternate;Ut!==null&&(Ut=Ut.updateQueue,K=Ut.lastBaseUpdate,K!==w&&(K===null?Ut.firstBaseUpdate=Tt:K.next=Tt,Ut.lastBaseUpdate=ct))}if(x!==null){var Rt=S.baseState;w=0,Ut=Tt=ct=null,K=x;do{var qt=K.lane&-536870913,oe=qt!==K.lane;if(oe?(Ee&qt)===qt:(g&qt)===qt){qt!==0&&qt===Ui&&(Bc=!0),Ut!==null&&(Ut=Ut.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});t:{var $n=a,ao=K;qt=s;var Ms=f;switch(ao.tag){case 1:if($n=ao.payload,typeof $n=="function"){Rt=$n.call(Ms,Rt,qt);break t}Rt=$n;break t;case 3:$n.flags=$n.flags&-65537|128;case 0:if($n=ao.payload,qt=typeof $n=="function"?$n.call(Ms,Rt,qt):$n,qt==null)break t;Rt=fc({},Rt,qt);break t;case 2:rl=!0}}qt=K.callback,qt!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=S.callbacks,oe===null?S.callbacks=[qt]:oe.push(qt))}else oe={lane:qt,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ut===null?(Tt=Ut=oe,ct=Rt):Ut=Ut.next=oe,w|=qt;if(K=K.next,K===null){if(K=S.shared.pending,K===null)break;oe=K,K=oe.next,oe.next=null,S.lastBaseUpdate=oe,S.shared.pending=null}}while(!0);Ut===null&&(ct=Rt),S.baseState=ct,S.firstBaseUpdate=Tt,S.lastBaseUpdate=Ut,x===null&&(S.shared.lanes=0),Gi|=w,a.lanes=w,a.memoizedState=Rt}}function Rs(a,s){if(typeof a!="function")throw Error(u(191,a));a.call(s)}function Ds(a,s){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Rs(f[a],s)}function yr(a,s){a=hi,A(bs,a),A(nr,s),hi=a|s.baseLanes}function Pi(){A(bs,hi),A(nr,nr.current)}function Bn(){hi=bs.current,M(nr),M(bs)}function xi(a){var s=a.alternate;A(An,An.current&1),A(Ka,a),Ra===null&&(s===null||nr.current!==null||s.memoizedState!==null)&&(Ra=a)}function Du(a){A(An,An.current),A(Ka,a),Ra===null&&(Ra=a)}function $i(a){a.tag===22?(A(An,An.current),A(Ka,a),Ra===null&&(Ra=a)):$a()}function $a(){A(An,An.current),A(Ka,Ka.current)}function tl(a){M(Ka),Ra===a&&(Ra=null),M(An)}function Mo(a){for(var s=a;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||ms(f)||Sc(f)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function hn(){throw Error(u(321))}function nf(a,s){if(s===null)return!1;for(var f=0;f<s.length&&f<a.length;f++)if(!On(a[f],s[f]))return!1;return!0}function Sr(a,s,f,g,S,x){return Bi=x,ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Wt.H=a===null||a.memoizedState===null?vn:di,Me=!1,x=f(g,S),Me=!1,de&&(x=Zl(s,f,g,S)),wo(a),x}function wo(a){Wt.H=ol;var s=Ft!==null&&Ft.next!==null;if(Bi=0,se=Ft=ce=null,ge=!1,Ol=0,Xl=null,s)throw Error(u(300));a===null||en||(a=a.dependencies,a!==null&&Oe(a)&&(en=!0))}function Zl(a,s,f,g){ce=a;var S=0;do{if(de&&(Xl=null),Ol=0,de=!1,25<=S)throw Error(u(301));if(S+=1,se=Ft=null,a.updateQueue!=null){var x=a.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}Wt.H=xs,x=s(f,g)}while(de);return x}function pl(){var a=Wt.H,s=a.useState()[0];return s=typeof s.then=="function"?ha(s):s,a=a.useState()[0],(Ft!==null?Ft.memoizedState:null)!==a&&(ce.flags|=1024),s}function Ou(){var a=va!==0;return va=0,a}function af(a,s,f){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~f}function No(a){if(ge){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}ge=!1}Bi=0,se=Ft=ce=null,de=!1,Ol=va=0,Xl=null}function da(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?ce.memoizedState=se=a:se=se.next=a,se}function sn(){if(Ft===null){var a=ce.alternate;a=a!==null?a.memoizedState:null}else a=Ft.next;var s=se===null?ce.memoizedState:se.next;if(s!==null)se=s,Ft=a;else{if(a===null)throw ce.alternate===null?Error(u(467)):Error(u(310));Ft=a,a={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},se===null?ce.memoizedState=se=a:se=se.next=a}return se}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ha(a){var s=Ol;return Ol+=1,Xl===null&&(Xl=[]),a=ba(Xl,a,s),s=ce,(se===null?s.memoizedState:se.next)===null&&(s=s.alternate,Wt.H=s===null||s.memoizedState===null?vn:di),a}function br(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ha(a);if(a.$$typeof===El)return kt(a)}throw Error(u(438,String(a)))}function ju(a){var s=null,f=ce.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var g=ce.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(s={data:g.data.map(function(S){return S.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=zu(),ce.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(a),g=0;g<a;g++)f[g]=Uf;return s.index++,f}function Bl(a,s){return typeof s=="function"?s(a):s}function Ci(a){var s=sn();return Hu(s,Ft,a)}function Hu(a,s,f){var g=a.queue;if(g===null)throw Error(u(311));g.lastRenderedReducer=f;var S=a.baseQueue,x=g.pending;if(x!==null){if(S!==null){var w=S.next;S.next=x.next,x.next=w}s.baseQueue=S=x,g.pending=null}if(x=a.baseState,S===null)a.memoizedState=x;else{s=S.next;var K=w=null,ct=null,Tt=s,Ut=!1;do{var Rt=Tt.lane&-536870913;if(Rt!==Tt.lane?(Ee&Rt)===Rt:(Bi&Rt)===Rt){var qt=Tt.revertLane;if(qt===0)ct!==null&&(ct=ct.next={lane:0,revertLane:0,gesture:null,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null}),Rt===Ui&&(Ut=!0);else if((Bi&qt)===qt){Tt=Tt.next,qt===Ui&&(Ut=!0);continue}else Rt={lane:0,revertLane:Tt.revertLane,gesture:null,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ct===null?(K=ct=Rt,w=x):ct=ct.next=Rt,ce.lanes|=qt,Gi|=qt;Rt=Tt.action,Me&&f(x,Rt),x=Tt.hasEagerState?Tt.eagerState:f(x,Rt)}else qt={lane:Rt,revertLane:Tt.revertLane,gesture:Tt.gesture,action:Tt.action,hasEagerState:Tt.hasEagerState,eagerState:Tt.eagerState,next:null},ct===null?(K=ct=qt,w=x):ct=ct.next=qt,ce.lanes|=Rt,Gi|=Rt;Tt=Tt.next}while(Tt!==null&&Tt!==s);if(ct===null?w=x:ct.next=K,!On(x,a.memoizedState)&&(en=!0,Ut&&(f=Qn,f!==null)))throw f;a.memoizedState=x,a.baseState=w,a.baseQueue=ct,g.lastRenderedState=x}return S===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Uu(a){var s=sn(),f=s.queue;if(f===null)throw Error(u(311));f.lastRenderedReducer=a;var g=f.dispatch,S=f.pending,x=s.memoizedState;if(S!==null){f.pending=null;var w=S=S.next;do x=a(x,w.action),w=w.next;while(w!==S);On(x,s.memoizedState)||(en=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),f.lastRenderedState=x}return[x,g]}function Os(a,s,f){var g=ce,S=sn(),x=Ce;if(x){if(f===void 0)throw Error(u(407));f=f()}else f=s();var w=!On((Ft||S).memoizedState,f);if(w&&(S.memoizedState=f,en=!0),S=S.queue,Er(sf.bind(null,g,S,a),[a]),S.getSnapshot!==s||w||se!==null&&se.memoizedState.tag&1){if(g.flags|=2048,el(9,{destroy:void 0},lf.bind(null,g,S,f,s),null),me===null)throw Error(u(349));x||(Bi&127)!==0||gh(g,s,f)}return f}function gh(a,s,f){a.flags|=16384,a={getSnapshot:s,value:f},s=ce.updateQueue,s===null?(s=zu(),ce.updateQueue=s,s.stores=[a]):(f=s.stores,f===null?s.stores=[a]:f.push(a))}function lf(a,s,f,g){s.value=f,s.getSnapshot=g,Bu(s)&&mh(a)}function sf(a,s,f){return f(function(){Bu(s)&&mh(a)})}function Bu(a){var s=a.getSnapshot;a=a.value;try{var f=s();return!On(a,f)}catch{return!0}}function mh(a){var s=Ua(a,2);s!==null&&mn(s,a,2)}function rf(a){var s=da();if(typeof a=="function"){var f=a;if(a=f(),Me){jt(!0);try{f()}finally{jt(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:a},s}function Ro(a,s,f,g){return a.baseState=f,Hu(a,Ft,typeof g=="function"?g:Bl)}function Ei(a,s,f,g,S){if(Qu(a))throw Error(u(485));if(a=s.action,a!==null){var x={payload:S,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};Wt.T!==null?f(!0):x.isTransition=!1,g(x),f=s.pending,f===null?(x.next=s.pending=x,Gu(s,x)):(x.next=f.next,s.pending=f.next=x)}}function Gu(a,s){var f=s.action,g=s.payload,S=a.state;if(s.isTransition){var x=Wt.T,w={};Wt.T=w;try{var K=f(S,g),ct=Wt.S;ct!==null&&ct(w,K),Lu(a,s,K)}catch(Tt){ts(a,s,Tt)}finally{x!==null&&w.types!==null&&(x.types=w.types),Wt.T=x}}else try{x=f(S,g),Lu(a,s,x)}catch(Tt){ts(a,s,Tt)}}function Lu(a,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){zs(a,s,g)},function(g){return ts(a,s,g)}):zs(a,s,f)}function zs(a,s,f){s.status="fulfilled",s.value=f,of(s),a.state=f,s=a.pending,s!==null&&(f=s.next,f===s?a.pending=null:(f=f.next,s.next=f,Gu(a,f)))}function ts(a,s,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do s.status="rejected",s.reason=f,of(s),s=s.next;while(s!==g)}a.action=null}function of(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function Yu(a,s){return s}function uf(a,s){if(Ce){var f=me.formState;if(f!==null){t:{var g=ce;if(Ce){if(un){var S=u0(un,wa);if(S){un=c0(S),g=ed(S);break t}}mt(g)}g=!1}g&&(s=f[0])}}f=da(),f.memoizedState=f.baseState=s,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yu,lastRenderedState:s},f.queue=g,f=xh.bind(null,ce,g),g.dispatch=f,g=rf(!1);var x=Ku.bind(null,ce,!1,g.queue);return g=da(),S={state:s,dispatch:null,action:a,pending:null},g.queue=S,f=Ei.bind(null,ce,S,x,f),S.dispatch=f,g.memoizedState=a,[s,f,!1]}function xr(a){var s=sn();return kl(s,Ft,a)}function kl(a,s,f){if(s=Hu(a,s,Yu)[0],a=Ci(Bl)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var g=ha(s)}catch(w){throw w===Zn?Dl:w}else g=s;s=sn();var S=s.queue,x=S.dispatch;return f!==s.memoizedState&&(ce.flags|=2048,el(9,{destroy:void 0},cf.bind(null,S,f),null)),[g,x,a]}function cf(a,s){a.action=s}function Cr(a){var s=sn(),f=Ft;if(f!==null)return kl(s,f,a);sn(),s=s.memoizedState,f=sn();var g=f.queue.dispatch;return f.memoizedState=a,[s,g,!1]}function el(a,s,f,g){return a={tag:a,create:f,deps:g,inst:s,next:null},s=ce.updateQueue,s===null&&(s=zu(),ce.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,s.lastEffect=a),a}function Xu(){return sn().memoizedState}function js(a,s,f,g){var S=da();ce.flags|=a,S.memoizedState=el(1|s,{destroy:void 0},f,g===void 0?null:g)}function Do(a,s,f,g){var S=sn();g=g===void 0?null:g;var x=S.memoizedState.inst;Ft!==null&&g!==null&&nf(g,Ft.memoizedState.deps)?S.memoizedState=el(s,x,f,g):(ce.flags|=a,S.memoizedState=el(1|s,x,f,g))}function Oo(a,s){js(8390656,8,a,s)}function Er(a,s){Do(2048,8,a,s)}function ph(a){ce.flags|=4;var s=ce.updateQueue;if(s===null)s=zu(),ce.updateQueue=s,s.events=[a];else{var f=s.events;f===null?s.events=[a]:f.push(a)}}function Ea(a){var s=sn().memoizedState;return ph({ref:s,nextImpl:a}),function(){if((ye&2)!==0)throw Error(u(440));return s.impl.apply(void 0,arguments)}}function es(a,s){return Do(4,2,a,s)}function zo(a,s){return Do(4,4,a,s)}function _r(a,s){if(typeof s=="function"){a=a();var f=s(a);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function vh(a,s,f){f=f!=null?f.concat([a]):null,Do(4,4,_r.bind(null,s,a),f)}function jo(){}function qu(a,s){var f=sn();s=s===void 0?null:s;var g=f.memoizedState;return s!==null&&nf(s,g[1])?g[0]:(f.memoizedState=[a,s],a)}function Tr(a,s){var f=sn();s=s===void 0?null:s;var g=f.memoizedState;if(s!==null&&nf(s,g[1]))return g[0];if(g=a(),Me){jt(!0);try{a()}finally{jt(!1)}}return f.memoizedState=[g,s],g}function Ar(a,s,f){return f===void 0||(Bi&1073741824)!==0&&(Ee&261930)===0?a.memoizedState=s:(a.memoizedState=f,a=Ai(),ce.lanes|=a,Gi|=a,f)}function ff(a,s,f,g){return On(f,s)?f:nr.current!==null?(a=Ar(a,f,g),On(a,s)||(en=!0),a):(Bi&42)===0||(Bi&1073741824)!==0&&(Ee&261930)===0?(en=!0,a.memoizedState=f):(a=Ai(),ce.lanes|=a,Gi|=a,s)}function yh(a,s,f,g,S){var x=_l();xe(x!==0&&8>x?x:8);var w=Wt.T,K={};Wt.T=K,Ku(a,!1,s,f);try{var ct=S(),Tt=Wt.S;if(Tt!==null&&Tt(K,ct),ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var Ut=vr(ct,g);Ho(a,s,Ut,rn(a))}else Ho(a,s,g,rn(a))}catch(Rt){Ho(a,s,{then:function(){},status:"rejected",reason:Rt},rn())}finally{xe(x),w!==null&&K.types!==null&&(w.types=K.types),Wt.T=w}}function Sh(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:Js,baseState:Js,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:Js},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:f},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function df(){return kt(Is)}function Vu(){return sn().memoizedState}function bh(){return sn().memoizedState}function Wg(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var f=rn();a=Ql(f);var g=Wi(s,a,f);g!==null&&(mn(g,s,f),Ao(g,s,f)),s={cache:an()},a.payload=s;return}s=s.return}}function Pg(a,s,f){var g=rn();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Qu(a)?Ch(s,f):(f=Wa(a,s,f,g),f!==null&&(mn(f,a,g),Eh(f,s,g)))}function xh(a,s,f){var g=rn();Ho(a,s,f,g)}function Ho(a,s,f,g){var S={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Qu(a))Ch(s,S);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var w=s.lastRenderedState,K=x(w,f);if(S.hasEagerState=!0,S.eagerState=K,On(K,w))return ml(a,s,S,0),me===null&&gl(),!1}catch{}if(f=Wa(a,s,S,g),f!==null)return mn(f,a,g),Eh(f,s,g),!0}return!1}function Ku(a,s,f,g){if(g={lane:2,revertLane:To(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Qu(a)){if(s)throw Error(u(479))}else s=Wa(a,f,g,2),s!==null&&mn(s,a,2)}function Qu(a){var s=a.alternate;return a===ce||s!==null&&s===ce}function Ch(a,s){de=ge=!0;var f=a.pending;f===null?s.next=s:(s.next=f.next,f.next=s),a.pending=s}function Eh(a,s,f){if((f&4194048)!==0){var g=s.lanes;g&=a.pendingLanes,f|=g,s.lanes=f,dt(a,f)}}function hf(a,s,f,g){s=a.memoizedState,f=f(g,s),f=f==null?s:fc({},s,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}function Zu(a,s,f,g,S,x,w){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,x,w):s.prototype&&s.prototype.isPureReactComponent?!Nn(f,g)||!Nn(S,x):!0}function _h(a,s,f,g){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,g),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,g),s.state!==a&&uu.enqueueReplaceState(s,s.state,null)}function Hs(a,s){var f=s;if("ref"in s){f={};for(var g in s)g!=="ref"&&(f[g]=s[g])}if(a=a.defaultProps){f===s&&(f=fc({},f));for(var S in a)f[S]===void 0&&(f[S]=a[S])}return f}function ku(a,s){try{var f=a.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(g){setTimeout(function(){throw g})}}function gf(a,s,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function mf(a,s,f){return f=Ql(f),f.tag=3,f.payload={element:null},f.callback=function(){ku(a,s)},f}function Th(a){return a=Ql(a),a.tag=3,a}function Ah(a,s,f,g){var S=f.type.getDerivedStateFromError;if(typeof S=="function"){var x=g.value;a.payload=function(){return S(x)},a.callback=function(){gf(s,f,g)}}var w=f.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(a.callback=function(){gf(s,f,g),typeof S!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var K=g.stack;this.componentDidCatch(g.value,{componentStack:K!==null?K:""})})}function $g(a,s,f,g,S){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(s=f.alternate,s!==null&&le(s,f,S,!0),f=Ka.current,f!==null){switch(f.tag){case 31:case 13:return Ra===null?Br():f.alternate===null&&Sn===0&&(Sn=3),f.flags&=-257,f.flags|=65536,f.lanes=S,g===ci?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([g]):s.add(g),Yr(a,g,S)),!1;case 22:return f.flags|=65536,g===ci?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([g]):f.add(g)),Yr(a,g,S)),!1}throw Error(u(435,f.tag))}return Yr(a,g,S),Br(),!1}if(Ce)return s=Ka.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=S,g!==jc&&(a=Error(u(422),{cause:g}),Yt(xt(a,f)))):(g!==jc&&(s=Error(u(423),{cause:g}),Yt(xt(s,f))),a=a.current.alternate,a.flags|=65536,S&=-S,a.lanes|=S,g=xt(g,f),S=mf(a.stateNode,g,S),Ru(a,S),Sn!==4&&(Sn=2)),!1;var x=Error(u(520),{cause:g});if(x=xt(x,f),fu===null?fu=[x]:fu.push(x),Sn!==4&&(Sn=2),s===null)return!0;g=xt(g,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,a=S&-S,f.lanes|=a,a=mf(f.stateNode,g,a),Ru(f,a),!1;case 1:if(s=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Li===null||!Li.has(x))))return f.flags|=65536,S&=-S,f.lanes|=S,S=Th(S),Ah(S,a,f,g),Ru(f,S),!1}f=f.return}while(f!==null);return!1}function ea(a,s,f,g){s.child=a===null?Sd(s,null,f,g):la(s,a.child,f,g)}function Mh(a,s,f,g,S){f=f.render;var x=s.ref;if("ref"in g){var w={};for(var K in g)K!=="ref"&&(w[K]=g[K])}else w=g;return Xe(s),g=Sr(a,s,f,w,x,S),K=Ou(),a!==null&&!en?(af(a,s,S),Jl(a,s,S)):(Ce&&K&&P(s),s.flags|=1,ea(a,s,g,S),s.child)}function wh(a,s,f,g,S){if(a===null){var x=f.type;return typeof x=="function"&&!Ys(x)&&x.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=x,Nh(a,s,x,g,S)):(a=Ni(f.type,null,g,s,s.mode,S),a.ref=s.ref,a.return=s,s.child=a)}if(x=a.child,!Bo(a,S)){var w=x.memoizedProps;if(f=f.compare,f=f!==null?f:Nn,f(w,g)&&a.ref===s.ref)return Jl(a,s,S)}return s.flags|=1,a=ll(x,g),a.ref=s.ref,a.return=s,s.child=a}function Nh(a,s,f,g,S){if(a!==null){var x=a.memoizedProps;if(Nn(x,g)&&a.ref===s.ref)if(en=!1,s.pendingProps=g=x,Bo(a,S))(a.flags&131072)!==0&&(en=!0);else return s.lanes=a.lanes,Jl(a,s,S)}return Iu(a,s,f,g,S)}function Rh(a,s,f,g){var S=g.children,x=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|f:f,a!==null){for(g=s.child=a.child,S=0;g!==null;)S=S|g.lanes|g.childLanes,g=g.sibling;g=S&~x}else g=0,s.child=null;return Mr(a,s,x,f,g)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&ln(s,x!==null?x.cachePool:null),x!==null?yr(s,x):Pi(),$i(s);else return g=s.lanes=536870912,Mr(a,s,x!==null?x.baseLanes|f:f,f,g)}else x!==null?(ln(s,x.cachePool),yr(s,x),$a(),s.memoizedState=null):(a!==null&&ln(s,null),Pi(),$a());return ea(a,s,S,f),s.child}function Us(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Mr(a,s,f,g,S){var x=Ii();return x=x===null?null:{parent:Rn?cn._currentValue:cn._currentValue2,pool:x},s.memoizedState={baseLanes:f,cachePool:x},a!==null&&ln(s,null),Pi(),$i(s),a!==null&&le(a,s,g,!0),s.childLanes=S,null}function Ju(a,s){return s=ns({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function pf(a,s,f){return la(s,a.child,null,f),a=Ju(s,s.pendingProps),a.flags|=2,tl(s),s.memoizedState=null,a}function Dh(a,s,f){var g=s.pendingProps,S=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(Ce){if(g.mode==="hidden")return a=Ju(s,g),s.lanes=536870912,Us(null,a);if(Du(s),(a=un)?(a=ad(a,wa),a!==null&&(s.memoizedState={dehydrated:a,treeContext:Ml!==null?{id:na,overflow:Ll}:null,retryLane:536870912,hydrationErrors:null},f=zf(a),f.return=s,s.child=f,Kn=s,un=null)):a=null,a===null)throw mt(s);return s.lanes=536870912,null}return Ju(s,g)}var x=a.memoizedState;if(x!==null){var w=x.dehydrated;if(Du(s),S)if(s.flags&256)s.flags&=-257,s=pf(a,s,f);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(u(558));else if(en||le(a,s,f,!1),S=(f&a.childLanes)!==0,en||S){if(g=me,g!==null&&(w=lt(g,f),w!==0&&w!==x.retryLane))throw x.retryLane=w,Ua(a,w),mn(g,a,w),Da;Br(),s=pf(a,s,f)}else a=x.treeContext,on&&(un=g0(w),Kn=s,Ce=!0,ui=null,wa=!1,a!==null&&Ht(s,a)),s=Ju(s,g),s.flags|=4096;return s}return a=ll(a.child,{mode:g.mode,children:g.children}),a.ref=s.ref,s.child=a,a.return=s,a}function Uo(a,s){var f=s.ref;if(f===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(u(284));(a===null||a.ref!==f)&&(s.flags|=4194816)}}function Iu(a,s,f,g,S){return Xe(s),f=Sr(a,s,f,g,void 0,S),g=Ou(),a!==null&&!en?(af(a,s,S),Jl(a,s,S)):(Ce&&g&&P(s),s.flags|=1,ea(a,s,f,S),s.child)}function vf(a,s,f,g,S,x){return Xe(s),s.updateQueue=null,f=Zl(s,g,f,S),wo(a),g=Ou(),a!==null&&!en?(af(a,s,x),Jl(a,s,x)):(Ce&&g&&P(s),s.flags|=1,ea(a,s,f,x),s.child)}function Bs(a,s,f,g,S){if(Xe(s),s.stateNode===null){var x=si,w=f.contextType;typeof w=="object"&&w!==null&&(x=kt(w)),x=new f(g,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=uu,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=g,x.state=s.memoizedState,x.refs={},fa(s),w=f.contextType,x.context=typeof w=="object"&&w!==null?kt(w):si,x.state=s.memoizedState,w=f.getDerivedStateFromProps,typeof w=="function"&&(hf(s,f,w,g),x.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&uu.enqueueReplaceState(x,x.state,null),Ns(s,g,x,S),bi(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),g=!0}else if(a===null){x=s.stateNode;var K=s.memoizedProps,ct=Hs(f,K);x.props=ct;var Tt=x.context,Ut=f.contextType;w=si,typeof Ut=="object"&&Ut!==null&&(w=kt(Ut));var Rt=f.getDerivedStateFromProps;Ut=typeof Rt=="function"||typeof x.getSnapshotBeforeUpdate=="function",K=s.pendingProps!==K,Ut||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(K||Tt!==w)&&_h(s,x,g,w),rl=!1;var qt=s.memoizedState;x.state=qt,Ns(s,g,x,S),bi(),Tt=s.memoizedState,K||qt!==Tt||rl?(typeof Rt=="function"&&(hf(s,f,Rt,g),Tt=s.memoizedState),(ct=rl||Zu(s,f,ct,g,qt,Tt,w))?(Ut||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=g,s.memoizedState=Tt),x.props=g,x.state=Tt,x.context=w,g=ct):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),g=!1)}else{x=s.stateNode,Fi(a,s),w=s.memoizedProps,Ut=Hs(f,w),x.props=Ut,Rt=s.pendingProps,qt=x.context,Tt=f.contextType,ct=si,typeof Tt=="object"&&Tt!==null&&(ct=kt(Tt)),K=f.getDerivedStateFromProps,(Tt=typeof K=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==Rt||qt!==ct)&&_h(s,x,g,ct),rl=!1,qt=s.memoizedState,x.state=qt,Ns(s,g,x,S),bi();var oe=s.memoizedState;w!==Rt||qt!==oe||rl||a!==null&&a.dependencies!==null&&Oe(a.dependencies)?(typeof K=="function"&&(hf(s,f,K,g),oe=s.memoizedState),(Ut=rl||Zu(s,f,Ut,g,qt,oe,ct)||a!==null&&a.dependencies!==null&&Oe(a.dependencies))?(Tt||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(g,oe,ct),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(g,oe,ct)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&qt===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&qt===a.memoizedState||(s.flags|=1024),s.memoizedProps=g,s.memoizedState=oe),x.props=g,x.state=oe,x.context=ct,g=Ut):(typeof x.componentDidUpdate!="function"||w===a.memoizedProps&&qt===a.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===a.memoizedProps&&qt===a.memoizedState||(s.flags|=1024),g=!1)}return x=g,Uo(a,s),g=(s.flags&128)!==0,x||g?(x=s.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,a!==null&&g?(s.child=la(s,a.child,null,S),s.child=la(s,null,f,S)):ea(a,s,f,S),s.memoizedState=x.state,a=s.child):a=Jl(a,s,S),a}function Oh(a,s,f,g){return _t(),s.flags|=256,ea(a,s,f,g),s.child}function yf(a){return{baseLanes:a,cachePool:Cn()}}function Sf(a,s,f){return a=a!==null?a.childLanes&~f:0,s&&(a|=Oa),a}function bf(a,s,f){var g=s.pendingProps,S=!1,x=(s.flags&128)!==0,w;if((w=x)||(w=a!==null&&a.memoizedState===null?!1:(An.current&2)!==0),w&&(S=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,a===null){if(Ce){if(S?xi(s):$a(),(a=un)?(a=y0(a,wa),a!==null&&(s.memoizedState={dehydrated:a,treeContext:Ml!==null?{id:na,overflow:Ll}:null,retryLane:536870912,hydrationErrors:null},f=zf(a),f.return=s,s.child=f,Kn=s,un=null)):a=null,a===null)throw mt(s);return Sc(a)?s.lanes=32:s.lanes=536870912,null}var K=g.children;return g=g.fallback,S?($a(),S=s.mode,K=ns({mode:"hidden",children:K},S),g=Cl(g,S,f,null),K.return=s,g.return=s,K.sibling=g,s.child=K,g=s.child,g.memoizedState=yf(f),g.childLanes=Sf(a,w,f),s.memoizedState=ar,Us(null,g)):(xi(s),Fu(s,K))}var ct=a.memoizedState;if(ct!==null&&(K=ct.dehydrated,K!==null)){if(x)s.flags&256?(xi(s),s.flags&=-257,s=Gs(a,s,f)):s.memoizedState!==null?($a(),s.child=a.child,s.flags|=128,s=null):($a(),K=g.fallback,S=s.mode,g=ns({mode:"visible",children:g.children},S),K=Cl(K,S,f,null),K.flags|=2,g.return=s,K.return=s,g.sibling=K,s.child=g,la(s,a.child,null,f),g=s.child,g.memoizedState=yf(f),g.childLanes=Sf(a,w,f),s.memoizedState=ar,s=Us(null,g));else if(xi(s),Sc(K))w=bc(K).digest,g=Error(u(419)),g.stack="",g.digest=w,Yt({value:g,source:null,stack:null}),s=Gs(a,s,f);else if(en||le(a,s,f,!1),w=(f&a.childLanes)!==0,en||w){if(w=me,w!==null&&(g=lt(w,f),g!==0&&g!==ct.retryLane))throw ct.retryLane=g,Ua(a,g),mn(w,a,g),Da;ms(K)||Br(),s=Gs(a,s,f)}else ms(K)?(s.flags|=192,s.child=a.child,s=null):(a=ct.treeContext,on&&(un=m0(K),Kn=s,Ce=!0,ui=null,wa=!1,a!==null&&Ht(s,a)),s=Fu(s,g.children),s.flags|=4096);return s}return S?($a(),K=g.fallback,S=s.mode,ct=a.child,x=ct.sibling,g=ll(ct,{mode:"hidden",children:g.children}),g.subtreeFlags=ct.subtreeFlags&65011712,x!==null?K=ll(x,K):(K=Cl(K,S,f,null),K.flags|=2),K.return=s,g.return=s,g.sibling=K,s.child=g,Us(null,g),g=s.child,K=a.child.memoizedState,K===null?K=yf(f):(S=K.cachePool,S!==null?(ct=Rn?cn._currentValue:cn._currentValue2,S=S.parent!==ct?{parent:ct,pool:ct}:S):S=Cn(),K={baseLanes:K.baseLanes|f,cachePool:S}),g.memoizedState=K,g.childLanes=Sf(a,w,f),s.memoizedState=ar,Us(a.child,g)):(xi(s),f=a.child,a=f.sibling,f=ll(f,{mode:"visible",children:g.children}),f.return=s,f.sibling=null,a!==null&&(w=s.deletions,w===null?(s.deletions=[a],s.flags|=16):w.push(a)),s.child=f,s.memoizedState=null,f)}function Fu(a,s){return s=ns({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function ns(a,s){return a=i(22,a,null,s),a.lanes=0,a}function Gs(a,s,f){return la(s,a.child,null,f),a=Fu(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function zh(a,s,f){a.lanes|=s;var g=a.alternate;g!==null&&(g.lanes|=s),Kt(a.return,s,f)}function wr(a,s,f,g,S,x){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:S,treeForkCount:x}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=g,w.tail=f,w.tailMode=S,w.treeForkCount=x)}function xf(a,s,f){var g=s.pendingProps,S=g.revealOrder,x=g.tail;g=g.children;var w=An.current,K=(w&2)!==0;if(K?(w=w&1|2,s.flags|=128):w&=1,A(An,w),ea(a,s,g,f),g=Ce?su:0,!K&&a!==null&&(a.flags&128)!==0)t:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&zh(a,f,s);else if(a.tag===19)zh(a,f,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(S){case"forwards":for(f=s.child,S=null;f!==null;)a=f.alternate,a!==null&&Mo(a)===null&&(S=f),f=f.sibling;f=S,f===null?(S=s.child,s.child=null):(S=f.sibling,f.sibling=null),wr(s,!1,S,f,x,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,S=s.child,s.child=null;S!==null;){if(a=S.alternate,a!==null&&Mo(a)===null){s.child=S;break}a=S.sibling,S.sibling=f,f=S,S=a}wr(s,!0,f,null,x,g);break;case"together":wr(s,!1,null,null,void 0,g);break;default:s.memoizedState=null}return s.child}function Jl(a,s,f){if(a!==null&&(s.dependencies=a.dependencies),Gi|=s.lanes,(f&s.childLanes)===0)if(a!==null){if(le(a,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(u(153));if(s.child!==null){for(a=s.child,f=ll(a,a.pendingProps),s.child=f,f.return=s;a.sibling!==null;)a=a.sibling,f=f.sibling=ll(a,a.pendingProps),f.return=s;f.sibling=null}return s.child}function Bo(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&Oe(a)))}function Cf(a,s,f){switch(s.tag){case 3:Vt(s,s.stateNode.containerInfo),ot(s,cn,a.memoizedState.cache),_t();break;case 27:case 5:Z(s);break;case 4:Vt(s,s.stateNode.containerInfo);break;case 10:ot(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Du(s),null;break;case 13:var g=s.memoizedState;if(g!==null)return g.dehydrated!==null?(xi(s),s.flags|=128,null):(f&s.child.childLanes)!==0?bf(a,s,f):(xi(s),a=Jl(a,s,f),a!==null?a.sibling:null);xi(s);break;case 19:var S=(a.flags&128)!==0;if(g=(f&s.childLanes)!==0,g||(le(a,s,f,!1),g=(f&s.childLanes)!==0),S){if(g)return xf(a,s,f);s.flags|=128}if(S=s.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),A(An,An.current),g)break;return null;case 22:return s.lanes=0,Rh(a,s,f,s.pendingProps);case 24:ot(s,cn,a.memoizedState.cache)}return Jl(a,s,f)}function Ef(a,s,f){if(a!==null)if(a.memoizedProps!==s.pendingProps)en=!0;else{if(!Bo(a,f)&&(s.flags&128)===0)return en=!1,Cf(a,s,f);en=(a.flags&131072)!==0}else en=!1,Ce&&(s.flags&1048576)!==0&&B(s,su,s.index);switch(s.lanes=0,s.tag){case 16:t:{var g=s.pendingProps;if(a=En(s.elementType),s.type=a,typeof a=="function")Ys(a)?(g=Hs(a,g),s.tag=1,s=Bs(null,s,a,g,f)):(s.tag=0,s=Iu(null,s,a,g,f));else{if(a!=null){var S=a.$$typeof;if(S===Xr){s.tag=11,s=Mh(null,s,a,g,f);break t}else if(S===hc){s.tag=14,s=wh(null,s,a,g,f);break t}}throw s=C(a)||a,Error(u(306,s,""))}}return s;case 0:return Iu(a,s,s.type,s.pendingProps,f);case 1:return g=s.type,S=Hs(g,s.pendingProps),Bs(a,s,g,S,f);case 3:t:{if(Vt(s,s.stateNode.containerInfo),a===null)throw Error(u(387));var x=s.pendingProps;S=s.memoizedState,g=S.element,Fi(a,s),Ns(s,x,null,f);var w=s.memoizedState;if(x=w.cache,ot(s,cn,x),x!==S.cache&&_e(s,[cn],f,!0),bi(),x=w.element,on&&S.isDehydrated)if(S={element:x,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=S,s.memoizedState=S,s.flags&256){s=Oh(a,s,x,f);break t}else if(x!==g){g=xt(Error(u(424)),s),Yt(g),s=Oh(a,s,x,f);break t}else for(on&&(un=h0(s.stateNode.containerInfo),Kn=s,Ce=!0,ui=null,wa=!0),f=Sd(s,null,x,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(_t(),x===g){s=Jl(a,s,f);break t}ea(a,s,x,f)}s=s.child}return s;case 26:if(Tl)return Uo(a,s),a===null?(f=od(s.type,null,s.pendingProps,null))?s.memoizedState=f:Ce||(s.stateNode=_c(s.type,s.pendingProps,aa.current,s)):s.memoizedState=od(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:if(Vn)return Z(s),a===null&&Vn&&Ce&&(g=s.stateNode=Tc(s.type,s.pendingProps,aa.current,Wn.current,!1),Kn=s,wa=!0,un=nd(s.type,g,un)),ea(a,s,s.pendingProps.children,f),Uo(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Ce&&(M0(s.type,s.pendingProps,Wn.current),(S=g=un)&&(g=p0(g,s.type,s.pendingProps,wa),g!==null?(s.stateNode=g,Kn=s,un=d0(g),wa=!1,S=!0):S=!1),S||mt(s)),Z(s),S=s.type,x=s.pendingProps,w=a!==null?a.memoizedProps:null,g=x.children,Ma(S,x)?g=null:w!==null&&Ma(S,w)&&(s.flags|=32),s.memoizedState!==null&&(S=Sr(a,s,pl,null,null,f),Rn?Is._currentValue=S:Is._currentValue2=S),Uo(a,s),ea(a,s,g,f),s.child;case 6:return a===null&&Ce&&(rd(s.pendingProps,Wn.current),(a=f=un)&&(f=v0(f,s.pendingProps,wa),f!==null?(s.stateNode=f,Kn=s,un=null,a=!0):a=!1),a||mt(s)),null;case 13:return bf(a,s,f);case 4:return Vt(s,s.stateNode.containerInfo),g=s.pendingProps,a===null?s.child=la(s,null,g,f):ea(a,s,g,f),s.child;case 11:return Mh(a,s,s.type,s.pendingProps,f);case 7:return ea(a,s,s.pendingProps,f),s.child;case 8:return ea(a,s,s.pendingProps.children,f),s.child;case 12:return ea(a,s,s.pendingProps.children,f),s.child;case 10:return g=s.pendingProps,ot(s,s.type,g.value),ea(a,s,g.children,f),s.child;case 9:return S=s.type._context,g=s.pendingProps.children,Xe(s),S=kt(S),g=g(S),s.flags|=1,ea(a,s,g,f),s.child;case 14:return wh(a,s,s.type,s.pendingProps,f);case 15:return Nh(a,s,s.type,s.pendingProps,f);case 19:return xf(a,s,f);case 31:return Dh(a,s,f);case 22:return Rh(a,s,f,s.pendingProps);case 24:return Xe(s),g=kt(cn),a===null?(S=Ii(),S===null&&(S=me,x=an(),S.pooledCache=x,x.refCount++,x!==null&&(S.pooledCacheLanes|=f),S=x),s.memoizedState={parent:g,cache:S},fa(s),ot(s,cn,S)):((a.lanes&f)!==0&&(Fi(a,s),Ns(s,null,null,f),bi()),S=a.memoizedState,x=s.memoizedState,S.parent!==g?(S={parent:g,cache:g},s.memoizedState=S,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=S),ot(s,cn,g)):(g=x.cache,ot(s,cn,g),g!==S.cache&&_e(s,[cn],f,!0))),ea(a,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(u(156,s.tag))}function vl(a){a.flags|=4}function Go(a){il&&(a.flags|=8)}function jh(a,s){if(a!==null&&a.child===s.child)return!1;if((s.flags&16)!==0)return!0;for(a=s.child;a!==null;){if((a.flags&8218)!==0||(a.subtreeFlags&8218)!==0)return!0;a=a.sibling}return!1}function _f(a,s,f,g){if(Ae)for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)Po(a,f.stateNode);else if(!(f.tag===4||Vn&&f.tag===27)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(il)for(var S=s.child;S!==null;){if(S.tag===5){var x=S.stateNode;f&&g&&(x=o0(x,S.type,S.memoizedProps)),Po(a,x)}else if(S.tag===6)x=S.stateNode,f&&g&&(x=td(x,S.memoizedProps)),Po(a,x);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)x=S.child,x!==null&&(x.return=S),_f(a,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===s)break;for(;S.sibling===null;){if(S.return===null||S.return===s)return;S=S.return}S.sibling.return=S.return,S=S.sibling}}function Hh(a,s,f,g){var S=!1;if(il)for(var x=s.child;x!==null;){if(x.tag===5){var w=x.stateNode;f&&g&&(w=o0(w,x.type,x.memoizedProps)),Pf(a,w)}else if(x.tag===6)w=x.stateNode,f&&g&&(w=td(w,x.memoizedProps)),Pf(a,w);else if(x.tag!==4){if(x.tag===22&&x.memoizedState!==null)S=x.child,S!==null&&(S.return=x),Hh(a,x,!0,!0),S=!0;else if(x.child!==null){x.child.return=x,x=x.child;continue}}if(x===s)break;for(;x.sibling===null;){if(x.return===null||x.return===s)return S;x=x.return}x.sibling.return=x.return,x=x.sibling}return S}function Uh(a,s){if(il&&jh(a,s)){a=s.stateNode;var f=a.containerInfo,g=Wf();Hh(g,s,!1,!1),a.pendingChildren=g,vl(s),r0(f,g)}}function Tf(a,s,f,g){if(Ae)a.memoizedProps!==g&&vl(s);else if(il){var S=a.stateNode,x=a.memoizedProps;if((a=jh(a,s))||x!==g){var w=Wn.current;x=s0(S,f,x,g,!a,null),x===S?s.stateNode=S:(Go(s),Ya(x,f,g,w)&&vl(s),s.stateNode=x,a&&_f(x,s,!1,!1))}else s.stateNode=S}}function _a(a,s,f,g,S){if((a.mode&32)!==0&&(f===null?$o(s,g):Zr(s,f,g))){if(a.flags|=16777216,(S&335544128)===S||Yf(s,g))if(pn(a.stateNode,s,g))a.flags|=8192;else if(Te())a.flags|=8192;else throw Na=ci,Uc}else a.flags&=-16777217}function Nr(a,s){if(dd(s)){if(a.flags|=16777216,!hd(s))if(Te())a.flags|=8192;else throw Na=ci,Uc}else a.flags&=-16777217}function Lo(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?L():536870912,a.lanes|=s,eo|=s)}function Rr(a,s){if(!Ce)switch(a.tailMode){case"hidden":s=a.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Fe(a){var s=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(s)for(var S=a.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags&65011712,g|=S.flags&65011712,S.return=a,S=S.sibling;else for(S=a.child;S!==null;)f|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=a,S=S.sibling;return a.subtreeFlags|=g,a.childLanes=f,s}function Bh(a,s,f){var g=s.pendingProps;switch(St(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(s),null;case 1:return Fe(s),null;case 3:return f=s.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),s.memoizedState.cache!==g&&(s.flags|=2048),ht(cn),Xt(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(gt(s)?vl(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,At())),Uh(a,s),Fe(s),null;case 26:if(Tl){var S=s.type,x=s.memoizedState;return a===null?(vl(s),x!==null?(Fe(s),Nr(s,x)):(Fe(s),_a(s,S,null,g,f))):x?x!==a.memoizedState?(vl(s),Fe(s),Nr(s,x)):(Fe(s),s.flags&=-16777217):(x=a.memoizedProps,Ae?x!==g&&vl(s):Tf(a,s,S,g),Fe(s),_a(s,S,x,g,f)),null}case 27:if(Vn){if(F(s),f=aa.current,S=s.type,a!==null&&s.stateNode!=null)Ae?a.memoizedProps!==g&&vl(s):Tf(a,s,S,g);else{if(!g){if(s.stateNode===null)throw Error(u(166));return Fe(s),null}a=Wn.current,gt(s)?wt(s,a):(a=Tc(S,g,f,a,!0),s.stateNode=a,vl(s))}return Fe(s),null}case 5:if(F(s),S=s.type,a!==null&&s.stateNode!=null)Tf(a,s,S,g);else{if(!g){if(s.stateNode===null)throw Error(u(166));return Fe(s),null}if(x=Wn.current,gt(s))wt(s,x),_0(s.stateNode,S,g,x)&&(s.flags|=64);else{var w=Gf(S,g,aa.current,x,s);Go(s),_f(w,s,!1,!1),s.stateNode=w,Ya(w,S,g,x)&&vl(s)}}return Fe(s),_a(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,f),null;case 6:if(a&&s.stateNode!=null)f=a.memoizedProps,Ae?f!==g&&vl(s):il&&(f!==g?(a=aa.current,f=Wn.current,Go(s),s.stateNode=Oi(g,a,f,s)):s.stateNode=a.stateNode);else{if(typeof g!="string"&&s.stateNode===null)throw Error(u(166));if(a=aa.current,f=Wn.current,gt(s)){if(!on)throw Error(u(176));if(a=s.stateNode,f=s.memoizedProps,g=null,S=Kn,S!==null)switch(S.tag){case 27:case 5:g=S.memoizedProps}lm(a,f,s,g)||mt(s,!0)}else Go(s),s.stateNode=Oi(g,a,f,s)}return Fe(s),null;case 31:if(f=s.memoizedState,a===null||a.memoizedState!==null){if(g=gt(s),f!==null){if(a===null){if(!g)throw Error(u(318));if(!on)throw Error(u(556));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(u(557));ld(a,s)}else _t(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),a=!1}else f=At(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=f),a=!0;if(!a)return s.flags&256?(tl(s),s):(tl(s),null);if((s.flags&128)!==0)throw Error(u(558))}return Fe(s),null;case 13:if(g=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(S=gt(s),g!==null&&g.dehydrated!==null){if(a===null){if(!S)throw Error(u(318));if(!on)throw Error(u(344));if(S=s.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(u(317));b0(S,s)}else _t(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),S=!1}else S=At(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=S),S=!0;if(!S)return s.flags&256?(tl(s),s):(tl(s),null)}return tl(s),(s.flags&128)!==0?(s.lanes=f,s):(f=g!==null,a=a!==null&&a.memoizedState!==null,f&&(g=s.child,S=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(S=g.alternate.memoizedState.cachePool.pool),x=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(x=g.memoizedState.cachePool.pool),x!==S&&(g.flags|=2048)),f!==a&&f&&(s.child.flags|=8192),Lo(s,s.updateQueue),Fe(s),null);case 4:return Xt(),Uh(a,s),a===null&&ke(s.stateNode.containerInfo),Fe(s),null;case 10:return ht(s.type),Fe(s),null;case 19:if(M(An),g=s.memoizedState,g===null)return Fe(s),null;if(S=(s.flags&128)!==0,x=g.rendering,x===null)if(S)Rr(g,!1);else{if(Sn!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(x=Mo(a),x!==null){for(s.flags|=128,Rr(g,!1),a=x.updateQueue,s.updateQueue=a,Lo(s,a),s.subtreeFlags=0,a=f,f=s.child;f!==null;)oc(f,a),f=f.sibling;return A(An,An.current&1|2),Ce&&Nt(s,g.treeForkCount),s.child}a=a.sibling}g.tail!==null&&ma()>As&&(s.flags|=128,S=!0,Rr(g,!1),s.lanes=4194304)}else{if(!S)if(a=Mo(x),a!==null){if(s.flags|=128,S=!0,a=a.updateQueue,s.updateQueue=a,Lo(s,a),Rr(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!Ce)return Fe(s),null}else 2*ma()-g.renderingStartTime>As&&f!==536870912&&(s.flags|=128,S=!0,Rr(g,!1),s.lanes=4194304);g.isBackwards?(x.sibling=s.child,s.child=x):(a=g.last,a!==null?a.sibling=x:s.child=x,g.last=x)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=ma(),a.sibling=null,f=An.current,A(An,S?f&1|2:f&1),Ce&&Nt(s,g.treeForkCount),a):(Fe(s),null);case 22:case 23:return tl(s),Bn(),g=s.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(s.flags|=8192):g&&(s.flags|=8192),g?(f&536870912)!==0&&(s.flags&128)===0&&(Fe(s),s.subtreeFlags&6&&(s.flags|=8192)):Fe(s),f=s.updateQueue,f!==null&&Lo(s,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),g!==f&&(s.flags|=2048),a!==null&&M(ys),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ht(cn),Fe(s),null;case 25:return null;case 30:return null}throw Error(u(156,s.tag))}function Af(a,s){switch(St(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ht(cn),Xt(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return F(s),null;case 31:if(s.memoizedState!==null){if(tl(s),s.alternate===null)throw Error(u(340));_t()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(tl(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(u(340));_t()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return M(An),null;case 4:return Xt(),null;case 10:return ht(s.type),null;case 22:case 23:return tl(s),Bn(),a!==null&&M(ys),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return ht(cn),null;case 25:return null;default:return null}}function Gh(a,s){switch(St(s),s.tag){case 3:ht(cn),Xt();break;case 26:case 27:case 5:F(s);break;case 4:Xt();break;case 31:s.memoizedState!==null&&tl(s);break;case 13:tl(s);break;case 19:M(An);break;case 10:ht(s.type);break;case 22:case 23:tl(s),Bn(),a!==null&&M(ys);break;case 24:ht(cn)}}function Il(a,s){try{var f=s.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var S=g.next;f=S;do{if((f.tag&a)===a){g=void 0;var x=f.create,w=f.inst;g=x(),w.destroy=g}f=f.next}while(f!==S)}}catch(K){ie(s,s.return,K)}}function Fl(a,s,f){try{var g=s.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var x=S.next;g=x;do{if((g.tag&a)===a){var w=g.inst,K=w.destroy;if(K!==void 0){w.destroy=void 0,S=s;var ct=f,Tt=K;try{Tt()}catch(Ut){ie(S,ct,Ut)}}}g=g.next}while(g!==x)}}catch(Ut){ie(s,s.return,Ut)}}function Dr(a){var s=a.updateQueue;if(s!==null){var f=a.stateNode;try{Ds(s,f)}catch(g){ie(a,a.return,g)}}}function Wu(a,s,f){f.props=Hs(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){ie(a,s,g)}}function Or(a,s){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=Vr(a.stateNode);break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(S){ie(a,s,S)}}function ga(a,s){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(S){ie(a,s,S)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(S){ie(a,s,S)}else f.current=null}function Ls(a){var s=a.type,f=a.memoizedProps,g=a.stateNode;try{Ph(g,s,f,a)}catch(S){ie(a,a.return,S)}}function Yo(a,s,f){try{$h(a.stateNode,a.type,f,s,a)}catch(g){ie(a,a.return,g)}}function Mf(a){return a.tag===5||a.tag===3||(Tl?a.tag===26:!1)||(Vn?a.tag===27&&Fs(a.type):!1)||a.tag===4}function _i(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||Mf(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(Vn&&a.tag===27&&Fs(a.type)||a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Pu(a,s,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?e0(f,a,s):kf(f,a);else if(g!==4&&(Vn&&g===27&&Fs(a.type)&&(f=a.stateNode,s=null),a=a.child,a!==null))for(Pu(a,s,f),a=a.sibling;a!==null;)Pu(a,s,f),a=a.sibling}function Xo(a,s,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,s?t0(f,a,s):Zf(f,a);else if(g!==4&&(Vn&&g===27&&Fs(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Xo(a,s,f),a=a.sibling;a!==null;)Xo(a,s,f),a=a.sibling}function wf(a,s,f){a=a.containerInfo;try{$f(a,f)}catch(g){ie(s,s.return,g)}}function Lh(a){var s=a.stateNode,f=a.memoizedProps;try{Ln(a.type,f,s,a)}catch(g){ie(a,a.return,g)}}function tm(a,s){for(gc(a.containerInfo),zn=s;zn!==null;)if(a=zn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,zn=s;else for(;zn!==null;){a=zn;var f=a.alternate;switch(s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(var g=0;g<s.length;g++){var S=s[g];S.ref.impl=S.nextImpl}break;case 11:case 15:break;case 1:if((s&1024)!==0&&f!==null){s=void 0,g=a,S=f.memoizedProps,f=f.memoizedState;var x=g.stateNode;try{var w=Hs(g.type,S);s=x.getSnapshotBeforeUpdate(w,f),x.__reactInternalSnapshotBeforeUpdate=s}catch(K){ie(g,g.return,K)}}break;case 3:(s&1024)!==0&&Ae&&Ff(a.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(u(163))}if(s=a.sibling,s!==null){s.return=a.return,zn=s;break}zn=a.return}}function Yh(a,s,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Ta(a,f),g&4&&Il(5,f);break;case 1:if(Ta(a,f),g&4)if(a=f.stateNode,s===null)try{a.componentDidMount()}catch(w){ie(f,f.return,w)}else{var S=Hs(f.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(S,s,a.__reactInternalSnapshotBeforeUpdate)}catch(w){ie(f,f.return,w)}}g&64&&Dr(f),g&512&&Or(f,f.return);break;case 3:if(Ta(a,f),g&64&&(g=f.updateQueue,g!==null)){if(a=null,f.child!==null)switch(f.child.tag){case 27:case 5:a=Vr(f.child.stateNode);break;case 1:a=f.child.stateNode}try{Ds(g,a)}catch(w){ie(f,f.return,w)}}break;case 27:Vn&&s===null&&g&4&&Lh(f);case 26:case 5:if(Ta(a,f),s===null){if(g&4)Ls(f);else if(g&64){a=f.type,s=f.memoizedProps,S=f.stateNode;try{C0(S,a,s,f)}catch(w){ie(f,f.return,w)}}}g&512&&Or(f,f.return);break;case 12:Ta(a,f);break;case 31:Ta(a,f),g&4&&Sl(a,f);break;case 13:Ta(a,f),g&4&&Vo(a,f),g&64&&(g=f.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(f=em.bind(null,f),xc(g,f))));break;case 22:if(g=f.memoizedState!==null||Mn,!g){s=s!==null&&s.memoizedState!==null||wn,S=Mn;var x=wn;Mn=g,(wn=s)&&!x?xl(a,f,(f.subtreeFlags&8772)!==0):Ta(a,f),Mn=S,wn=x}break;case 30:break;default:Ta(a,f)}}function Nf(a){var s=a.alternate;s!==null&&(a.alternate=null,Nf(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&mc(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function yl(a,s,f){for(f=f.child;f!==null;)qo(a,s,f),f=f.sibling}function qo(a,s,f){if(Va&&typeof Va.onCommitFiberUnmount=="function")try{Va.onCommitFiberUnmount($s,f)}catch{}switch(f.tag){case 26:if(Tl){wn||ga(f,s),yl(a,s,f),f.memoizedState?ps(f.memoizedState):f.stateNode&&fd(f.stateNode);break}case 27:if(Vn){wn||ga(f,s);var g=yn,S=jn;Fs(f.type)&&(yn=f.stateNode,jn=!1),yl(a,s,f),Fn(f.stateNode),yn=g,jn=S;break}case 5:wn||ga(f,s);case 6:if(Ae){if(g=yn,S=jn,yn=null,yl(a,s,f),yn=g,jn=S,yn!==null)if(jn)try{Jf(yn,f.stateNode)}catch(x){ie(f,s,x)}else try{n0(yn,f.stateNode)}catch(x){ie(f,s,x)}}else yl(a,s,f);break;case 18:Ae&&yn!==null&&(jn?Cc(yn,f.stateNode):sd(yn,f.stateNode));break;case 4:Ae?(g=yn,S=jn,yn=f.stateNode.containerInfo,jn=!0,yl(a,s,f),yn=g,jn=S):(il&&wf(f.stateNode,f,Wf()),yl(a,s,f));break;case 0:case 11:case 14:case 15:Fl(2,f,s),wn||Fl(4,f,s),yl(a,s,f);break;case 1:wn||(ga(f,s),g=f.stateNode,typeof g.componentWillUnmount=="function"&&Wu(f,s,g)),yl(a,s,f);break;case 21:yl(a,s,f);break;case 22:wn=(g=wn)||f.memoizedState!==null,yl(a,s,f),wn=g;break;default:yl(a,s,f)}}function Sl(a,s){if(on&&s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{im(a)}catch(f){ie(s,s.return,f)}}}function Vo(a,s){if(on&&s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{sm(a)}catch(f){ie(s,s.return,f)}}function bl(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new xd),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new xd),s;default:throw Error(u(435,a.tag))}}function Ti(a,s){var f=bl(a);s.forEach(function(g){if(!f.has(g)){f.add(g);var S=nm.bind(null,a,g);g.then(S,S)}})}function Jn(a,s){var f=s.deletions;if(f!==null)for(var g=0;g<f.length;g++){var S=f[g],x=a,w=s;if(Ae){var K=w;t:for(;K!==null;){switch(K.tag){case 27:if(Vn){if(Fs(K.type)){yn=K.stateNode,jn=!1;break t}break}case 5:yn=K.stateNode,jn=!1;break t;case 3:case 4:yn=K.stateNode.containerInfo,jn=!0;break t}K=K.return}if(yn===null)throw Error(u(160));qo(x,w,S),yn=null,jn=!1}else qo(x,w,S);x=S.alternate,x!==null&&(x.return=null),S.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ko(s,a),s=s.sibling}function Ko(a,s){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Jn(s,a),In(a),g&4&&(Fl(3,a,a.return),Il(3,a),Fl(5,a,a.return));break;case 1:Jn(s,a),In(a),g&512&&(wn||f===null||ga(f,f.return)),g&64&&Mn&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:if(Tl){var S=Ve;if(Jn(s,a),In(a),g&512&&(wn||f===null||ga(f,f.return)),g&4){g=f!==null?f.memoizedState:null;var x=a.memoizedState;f===null?x===null?a.stateNode===null?a.stateNode=w0(S,a.type,a.memoizedProps,a):cd(S,a.type,a.stateNode):a.stateNode=ud(S,x,a.memoizedProps):g!==x?(g===null?f.stateNode!==null&&fd(f.stateNode):ps(g),x===null?cd(S,a.type,a.stateNode):ud(S,x,a.memoizedProps)):x===null&&a.stateNode!==null&&Yo(a,a.memoizedProps,f.memoizedProps)}break}case 27:if(Vn){Jn(s,a),In(a),g&512&&(wn||f===null||ga(f,f.return)),f!==null&&g&4&&Yo(a,a.memoizedProps,f.memoizedProps);break}case 5:if(Jn(s,a),In(a),g&512&&(wn||f===null||ga(f,f.return)),Ae){if(a.flags&32){S=a.stateNode;try{If(S)}catch(Rt){ie(a,a.return,Rt)}}g&4&&a.stateNode!=null&&(S=a.memoizedProps,Yo(a,S,f!==null?f.memoizedProps:S)),g&1024&&(Fr=!0)}else il&&a.alternate!==null&&(a.alternate.stateNode=a.stateNode);break;case 6:if(Jn(s,a),In(a),g&4&&Ae){if(a.stateNode===null)throw Error(u(162));g=a.memoizedProps,f=f!==null?f.memoizedProps:g,S=a.stateNode;try{Wh(S,f,g)}catch(Rt){ie(a,a.return,Rt)}}break;case 3:if(Tl?(N0(),S=Ve,Ve=nu(s.containerInfo),Jn(s,a),Ve=S):Jn(s,a),In(a),g&4){if(Ae&&on&&f!==null&&f.memoizedState.isDehydrated)try{E0(s.containerInfo)}catch(Rt){ie(a,a.return,Rt)}if(il){g=s.containerInfo,f=s.pendingChildren;try{$f(g,f)}catch(Rt){ie(a,a.return,Rt)}}}Fr&&(Fr=!1,$u(a));break;case 4:Tl?(f=Ve,Ve=nu(a.stateNode.containerInfo),Jn(s,a),In(a),Ve=f):(Jn(s,a),In(a)),g&4&&il&&wf(a.stateNode,a,a.stateNode.pendingChildren);break;case 12:Jn(s,a),In(a);break;case 31:Jn(s,a),In(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Ti(a,g)));break;case 13:Jn(s,a),In(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(du=ma()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Ti(a,g)));break;case 22:S=a.memoizedState!==null;var w=f!==null&&f.memoizedState!==null,K=Mn,ct=wn;if(Mn=K||S,wn=ct||w,Jn(s,a),wn=ct,Mn=K,In(a),g&8192&&(s=a.stateNode,s._visibility=S?s._visibility&-2:s._visibility|1,S&&(f===null||w||Mn||wn||as(a)),Ae)){t:if(f=null,Ae)for(s=a;;){if(s.tag===5||Tl&&s.tag===26){if(f===null){w=f=s;try{x=w.stateNode,S?am(x):l0(w.stateNode,w.memoizedProps)}catch(Rt){ie(w,w.return,Rt)}}}else if(s.tag===6){if(f===null){w=s;try{var Tt=w.stateNode;S?a0(Tt):i0(Tt,w.memoizedProps)}catch(Rt){ie(w,w.return,Rt)}}}else if(s.tag===18){if(f===null){w=s;try{var Ut=w.stateNode;S?T0(Ut):A0(w.stateNode)}catch(Rt){ie(w,w.return,Rt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Ti(a,f))));break;case 19:Jn(s,a),In(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Ti(a,g)));break;case 30:break;case 21:break;default:Jn(s,a),In(a)}}function In(a){var s=a.flags;if(s&2){try{for(var f,g=a.return;g!==null;){if(Mf(g)){f=g;break}g=g.return}if(Ae){if(f==null)throw Error(u(160));switch(f.tag){case 27:if(Vn){var S=f.stateNode,x=_i(a);Xo(a,x,S);break}case 5:var w=f.stateNode;f.flags&32&&(If(w),f.flags&=-33);var K=_i(a);Xo(a,K,w);break;case 3:case 4:var ct=f.stateNode.containerInfo,Tt=_i(a);Pu(a,Tt,ct);break;default:throw Error(u(161))}}}catch(Ut){ie(a,a.return,Ut)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function $u(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;$u(s),s.tag===5&&s.flags&1024&&qf(s.stateNode),a=a.sibling}}function Ta(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Yh(a,s.alternate,s),s=s.sibling}function as(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Fl(4,s,s.return),as(s);break;case 1:ga(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&Wu(s,s.return,f),as(s);break;case 27:Vn&&Fn(s.stateNode);case 26:case 5:ga(s,s.return),as(s);break;case 22:s.memoizedState===null&&as(s);break;case 30:as(s);break;default:as(s)}a=a.sibling}}function xl(a,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var g=s.alternate,S=a,x=s,w=x.flags;switch(x.tag){case 0:case 11:case 15:xl(S,x,f),Il(4,x);break;case 1:if(xl(S,x,f),g=x,S=g.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(Tt){ie(g,g.return,Tt)}if(g=x,S=g.updateQueue,S!==null){var K=g.stateNode;try{var ct=S.shared.hiddenCallbacks;if(ct!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ct.length;S++)Rs(ct[S],K)}catch(Tt){ie(g,g.return,Tt)}}f&&w&64&&Dr(x),Or(x,x.return);break;case 27:Vn&&Lh(x);case 26:case 5:xl(S,x,f),f&&g===null&&w&4&&Ls(x),Or(x,x.return);break;case 12:xl(S,x,f);break;case 31:xl(S,x,f),f&&w&4&&Sl(S,x);break;case 13:xl(S,x,f),f&&w&4&&Vo(S,x);break;case 22:x.memoizedState===null&&xl(S,x,f),Or(x,x.return);break;case 30:break;default:xl(S,x,f)}s=s.sibling}}function ls(a,s){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&ze(f))}function Rf(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&ze(a))}function gn(a,s,f,g){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tc(a,s,f,g),s=s.sibling}function tc(a,s,f,g){var S=s.flags;switch(s.tag){case 0:case 11:case 15:gn(a,s,f,g),S&2048&&Il(9,s);break;case 1:gn(a,s,f,g);break;case 3:gn(a,s,f,g),S&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&ze(a)));break;case 12:if(S&2048){gn(a,s,f,g),a=s.stateNode;try{var x=s.memoizedProps,w=x.id,K=x.onPostCommit;typeof K=="function"&&K(w,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ct){ie(s,s.return,ct)}}else gn(a,s,f,g);break;case 31:gn(a,s,f,g);break;case 13:gn(a,s,f,g);break;case 23:break;case 22:x=s.stateNode,w=s.alternate,s.memoizedState!==null?x._visibility&2?gn(a,s,f,g):zr(a,s):x._visibility&2?gn(a,s,f,g):(x._visibility|=2,Ba(a,s,f,g,(s.subtreeFlags&10256)!==0||!1)),S&2048&&ls(w,s);break;case 24:gn(a,s,f,g),S&2048&&Rf(s.alternate,s);break;default:gn(a,s,f,g)}}function Ba(a,s,f,g,S){for(S=S&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=a,w=s,K=f,ct=g,Tt=w.flags;switch(w.tag){case 0:case 11:case 15:Ba(x,w,K,ct,S),Il(8,w);break;case 23:break;case 22:var Ut=w.stateNode;w.memoizedState!==null?Ut._visibility&2?Ba(x,w,K,ct,S):zr(x,w):(Ut._visibility|=2,Ba(x,w,K,ct,S)),S&&Tt&2048&&ls(w.alternate,w);break;case 24:Ba(x,w,K,ct,S),S&&Tt&2048&&Rf(w.alternate,w);break;default:Ba(x,w,K,ct,S)}s=s.sibling}}function zr(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=a,g=s,S=g.flags;switch(g.tag){case 22:zr(f,g),S&2048&&ls(g.alternate,g);break;case 24:zr(f,g),S&2048&&Rf(g.alternate,g);break;default:zr(f,g)}s=s.sibling}}function Wl(a,s,f){if(a.subtreeFlags&ul)for(a=a.child;a!==null;)is(a,s,f),a=a.sibling}function is(a,s,f){switch(a.tag){case 26:if(Wl(a,s,f),a.flags&ul)if(a.memoizedState!==null)R0(f,Ve,a.memoizedState,a.memoizedProps);else{var g=a.stateNode,S=a.type;a=a.memoizedProps,((s&335544128)===s||Yf(S,a))&&pc(f,g,S,a)}break;case 5:Wl(a,s,f),a.flags&ul&&(g=a.stateNode,S=a.type,a=a.memoizedProps,((s&335544128)===s||Yf(S,a))&&pc(f,g,S,a));break;case 3:case 4:Tl?(g=Ve,Ve=nu(a.stateNode.containerInfo),Wl(a,s,f),Ve=g):Wl(a,s,f);break;case 22:a.memoizedState===null&&(g=a.alternate,g!==null&&g.memoizedState!==null?(g=ul,ul=16777216,Wl(a,s,f),ul=g):Wl(a,s,f));break;default:Wl(a,s,f)}}function ec(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function jr(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var g=s[f];zn=g,nl(g,a)}ec(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)nc(a),a=a.sibling}function nc(a){switch(a.tag){case 0:case 11:case 15:jr(a),a.flags&2048&&Fl(9,a,a.return);break;case 3:jr(a);break;case 12:jr(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,Qo(a)):jr(a);break;default:jr(a)}}function Qo(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var g=s[f];zn=g,nl(g,a)}ec(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Fl(8,s,s.return),Qo(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,Qo(s));break;default:Qo(s)}a=a.sibling}}function nl(a,s){for(;zn!==null;){var f=zn;switch(f.tag){case 0:case 11:case 15:Fl(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:ze(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,zn=g;else t:for(f=a;zn!==null;){g=zn;var S=g.sibling,x=g.return;if(Nf(g),g===f){zn=null;break t}if(S!==null){S.return=x,zn=S;break t}zn=x}}}function ss(a){var s=ue(a);if(s!=null){if(typeof s.memoizedProps["data-testname"]!="string")throw Error(u(364));return s}if(a=Dn(a),a===null)throw Error(u(362));return a.stateNode.current}function rs(a,s){var f=a.tag;switch(s.$$typeof){case zl:if(a.type===s.value)return!0;break;case Pr:t:{for(s=s.value,a=[a,0],f=0;f<a.length;){var g=a[f++],S=g.tag,x=a[f++],w=s[x];if(S!==5&&S!==26&&S!==27||!gs(g)){for(;w!=null&&rs(g,w);)x++,w=s[x];if(x===s.length){s=!0;break t}else for(g=g.child;g!==null;)a.push(g,x),g=g.sibling}}s=!1}return s;case $r:if((f===5||f===26||f===27)&&Qf(a.stateNode,s.value))return!0;break;case Cs:if((f===5||f===6||f===26||f===27)&&(a=tu(a),a!==null&&0<=a.indexOf(s.value)))return!0;break;case cu:if((f===5||f===26||f===27)&&(a=a.memoizedProps["data-testname"],typeof a=="string"&&a.toLowerCase()===s.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Hr(a){switch(a.$$typeof){case zl:return"<"+(C(a.value)||"Unknown")+">";case Pr:return":has("+(Hr(a)||"")+")";case $r:return'[role="'+a.value+'"]';case Cs:return'"'+a.value+'"';case cu:return'[data-testname="'+a.value+'"]';default:throw Error(u(365))}}function Ur(a,s){var f=[];a=[a,0];for(var g=0;g<a.length;){var S=a[g++],x=S.tag,w=a[g++],K=s[w];if(x!==5&&x!==26&&x!==27||!gs(S)){for(;K!=null&&rs(S,K);)w++,K=s[w];if(w===s.length)f.push(S);else for(S=S.child;S!==null;)a.push(S,w),S=S.sibling}}return f}function Ga(a,s){if(!qn)throw Error(u(363));a=ss(a),a=Ur(a,s),s=[],a=Array.from(a);for(var f=0;f<a.length;){var g=a[f++],S=g.tag;if(S===5||S===26||S===27)gs(g)||s.push(g.stateNode);else for(g=g.child;g!==null;)a.push(g),g=g.sibling}return s}function rn(){return(ye&2)!==0&&Ee!==0?Ee&-Ee:Wt.T!==null?To():Qr()}function Ai(){if(Oa===0)if((Ee&536870912)===0||Ce){var a=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),Oa=a}else Oa=536870912;return a=Ka.current,a!==null&&(a.flags|=32),Oa}function mn(a,s,f){(a===me&&(Ke===2||Ke===9)||a.cancelPendingCommit!==null)&&(Tn(a,0),$l(a,Ee,Oa,!1)),z(a,f),((ye&2)===0||a!==me)&&(a===me&&((ye&2)===0&&(Ts|=f),Sn===4&&$l(a,Ee,Oa,!1)),dn(a))}function Gl(a,s,f){if((ye&6)!==0)throw Error(u(327));var g=!f&&(s&127)===0&&(s&a.expiredLanes)===0||j(a,s),S=g?Vh(a,s):ti(a,s,!0),x=g;do{if(S===0){Es&&!g&&$l(a,s,0,!1);break}else{if(f=a.current.alternate,x&&!Xh(f)){S=ti(a,s,!1),x=!1;continue}if(S===2){if(x=s,a.errorRecoveryDisabledLanes&x)var w=0;else w=a.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var K=a;S=fu;var ct=on&&K.current.memoizedState.isDehydrated;if(ct&&(Tn(K,w).flags|=256),w=ti(K,w,!1),w!==2){if(_s&&!ct){K.errorRecoveryDisabledLanes|=x,Ts|=x,S=4;break t}x=Qa,Qa=S,x!==null&&(Qa===null?Qa=x:Qa.push.apply(Qa,x))}S=w}if(x=!1,S!==2)continue}}if(S===1){Tn(a,0),$l(a,s,0,!0);break}t:{switch(g=a,x=S,x){case 0:case 1:throw Error(u(345));case 4:if((s&4194048)!==s)break;case 6:$l(g,s,Oa,!ql);break t;case 2:Qa=null;break;case 3:case 5:break;default:throw Error(u(329))}if((s&62914560)===s&&(S=du+300-ma(),10<S)){if($l(g,s,Oa,!ql),U(g,0,!0)!==0)break t;gi=s,g.timeoutHandle=Lf(Pl.bind(null,g,f,Qa,hu,Gc,s,Oa,Ts,eo,ql,x,"Throttled",-0,0),S);break t}Pl(g,f,Qa,hu,Gc,s,Oa,Ts,eo,ql,x,null,-0,0)}}break}while(!0);dn(a)}function Pl(a,s,f,g,S,x,w,K,ct,Tt,Ut,Rt,qt,oe){if(a.timeoutHandle=Xa,Rt=s.subtreeFlags,Rt&8192||(Rt&16785408)===16785408){Rt=Xf(),is(s,x,Rt);var $n=(x&62914560)===x?du-ma():(x&4194048)===x?ir-ma():0;if($n=Fh(Rt,$n),$n!==null){gi=x,a.cancelPendingCommit=$n(ni.bind(null,a,s,x,f,g,S,w,K,ct,Ut,Rt,null,qt,oe)),$l(a,x,w,!Tt);return}}ni(a,s,x,f,g,S,w,K,ct)}function Xh(a){for(var s=a;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var S=f[g],x=S.getSnapshot;S=S.value;try{if(!On(x(),S))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $l(a,s,f,g){s&=~to,s&=~Ts,a.suspendedLanes|=s,a.pingedLanes&=~s,g&&(a.warmLanes|=s),g=a.expirationTimes;for(var S=s;0<S;){var x=31-qa(S),w=1<<x;g[x]=-1,S&=~w}f!==0&&Q(a,f,s)}function ac(){return(ye&6)===0?(hl(0),!1):!0}function lc(){if(Se!==null){if(Ke===0)var a=Se.return;else a=Se,Yl=Pe=null,No(a),Ss=null,tr=0,a=Se;for(;a!==null;)Gh(a.alternate,a),a=a.return;Se=null}}function Tn(a,s){var f=a.timeoutHandle;f!==Xa&&(a.timeoutHandle=Xa,Ih(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),gi=0,lc(),me=a,Se=f=ll(a.current,null),Ee=s,Ke=0,Yn=null,ql=!1,Es=j(a,s),_s=!1,eo=Oa=to=Ts=Gi=Sn=0,Qa=fu=null,Gc=!1,(s&8)!==0&&(s|=s&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=s;0<g;){var S=31-qa(g),x=1<<S;s|=a[S],g&=~x}return hi=s,gl(),f}function We(a,s){ce=null,Wt.H=ol,s===Zn||s===Dl?(s=xa(),Ke=3):s===Uc?(s=xa(),Ke=4):Ke=s===Da?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yn=s,Se===null&&(Sn=1,ku(a,xt(s,a.current)))}function Te(){var a=Ka.current;return a===null?!0:(Ee&4194048)===Ee?Ra===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?a===Ra:!1}function Mi(){var a=Wt.H;return Wt.H=ol,a===null?ol:a}function al(){var a=Wt.A;return Wt.A=Wr,a}function Br(){Sn=4,ql||(Ee&4194048)!==Ee&&Ka.current!==null||(Es=!0),(Gi&134217727)===0&&(Ts&134217727)===0||me===null||$l(me,Ee,Oa,!1)}function ti(a,s,f){var g=ye;ye|=2;var S=Mi(),x=al();(me!==a||Ee!==s)&&(hu=null,Tn(a,s)),s=!1;var w=Sn;t:do try{if(Ke!==0&&Se!==null){var K=Se,ct=Yn;switch(Ke){case 8:lc(),w=6;break t;case 3:case 2:case 9:case 6:Ka.current===null&&(s=!0);var Tt=Ke;if(Ke=0,Yn=null,ei(a,K,ct,Tt),f&&Es){w=0;break t}break;default:Tt=Ke,Ke=0,Yn=null,ei(a,K,ct,Tt)}}qh(),w=Sn;break}catch(Ut){We(a,Ut)}while(!0);return s&&a.shellSuspendCounter++,Yl=Pe=null,ye=g,Wt.H=S,Wt.A=x,Se===null&&(me=null,Ee=0,gl()),w}function qh(){for(;Se!==null;)os(Se)}function Vh(a,s){var f=ye;ye|=2;var g=Mi(),S=al();me!==a||Ee!==s?(hu=null,As=ma()+500,Tn(a,s)):Es=j(a,s);t:do try{if(Ke!==0&&Se!==null){s=Se;var x=Yn;e:switch(Ke){case 1:Ke=0,Yn=null,ei(a,s,x,1);break;case 2:case 9:if(Sa(x)){Ke=0,Yn=null,ic(s);break}s=function(){Ke!==2&&Ke!==9||me!==a||(Ke=7),dn(a)},x.then(s,s);break t;case 3:Ke=7;break t;case 4:Ke=5;break t;case 7:Sa(x)?(Ke=0,Yn=null,ic(s)):(Ke=0,Yn=null,ei(a,s,x,7));break;case 5:var w=null;switch(Se.tag){case 26:w=Se.memoizedState;case 5:case 27:var K=Se,ct=K.type,Tt=K.pendingProps;if(w?hd(w):pn(K.stateNode,ct,Tt)){Ke=0,Yn=null;var Ut=K.sibling;if(Ut!==null)Se=Ut;else{var Rt=K.return;Rt!==null?(Se=Rt,Lr(Rt)):Se=null}break e}}Ke=0,Yn=null,ei(a,s,x,5);break;case 6:Ke=0,Yn=null,ei(a,s,x,6);break;case 8:lc(),Sn=6;break t;default:throw Error(u(462))}}Gr();break}catch(qt){We(a,qt)}while(!0);return Yl=Pe=null,Wt.H=g,Wt.A=S,ye=f,Se!==null?0:(me=null,Ee=0,gl(),Sn)}function Gr(){for(;Se!==null&&!O0();)os(Se)}function os(a){var s=Ef(a.alternate,a,hi);a.memoizedProps=a.pendingProps,s===null?Lr(a):Se=s}function ic(a){var s=a,f=s.alternate;switch(s.tag){case 15:case 0:s=vf(f,s,s.pendingProps,s.type,void 0,Ee);break;case 11:s=vf(f,s,s.pendingProps,s.type.render,s.ref,Ee);break;case 5:No(s);default:Gh(f,s),s=Se=oc(s,hi),s=Ef(f,s,hi)}a.memoizedProps=a.pendingProps,s===null?Lr(a):Se=s}function ei(a,s,f,g){Yl=Pe=null,No(s),Ss=null,tr=0;var S=s.return;try{if($g(a,S,s,f,Ee)){Sn=1,ku(a,xt(f,a.current)),Se=null;return}}catch(x){if(S!==null)throw Se=S,x;Sn=1,ku(a,xt(f,a.current)),Se=null;return}s.flags&32768?(Ce||g===1?a=!0:Es||(Ee&536870912)!==0?a=!1:(ql=a=!0,(g===2||g===9||g===3||g===6)&&(g=Ka.current,g!==null&&g.tag===13&&(g.flags|=16384))),us(s,a)):Lr(s)}function Lr(a){var s=a;do{if((s.flags&32768)!==0){us(s,ql);return}a=s.return;var f=Bh(s.alternate,s,hi);if(f!==null){Se=f;return}if(s=s.sibling,s!==null){Se=s;return}Se=s=a}while(s!==null);Sn===0&&(Sn=5)}function us(a,s){do{var f=Af(a.alternate,a);if(f!==null){f.flags&=32767,Se=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(a=a.sibling,a!==null)){Se=a;return}Se=a=f}while(a!==null);Sn=6,Se=null}function ni(a,s,f,g,S,x,w,K,ct){a.cancelPendingCommit=null;do li();while(Xn!==0);if((ye&6)!==0)throw Error(u(327));if(s!==null){if(s===a.current)throw Error(u(177));if(x=s.lanes|s.childLanes,x|=er,G(a,f,x,w,K,ct),a===me&&(Se=me=null,Ee=0),sr=s,Yi=a,gi=f,no=x,Lc=S,Cd=g,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Gn(lu,function(){return Zo(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||g){g=Wt.T,Wt.T=null,S=_l(),xe(2),w=ye,ye|=4;try{tm(a,s,f)}finally{ye=w,xe(S),Wt.T=g}}Xn=1,wi(),ai(),sc()}}function wi(){if(Xn===1){Xn=0;var a=Yi,s=sr,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=Wt.T,Wt.T=null;var g=_l();xe(2);var S=ye;ye|=4;try{Ko(s,a),Jh(a.containerInfo)}finally{ye=S,xe(g),Wt.T=f}}a.current=s,Xn=2}}function ai(){if(Xn===2){Xn=0;var a=Yi,s=sr,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=Wt.T,Wt.T=null;var g=_l();xe(2);var S=ye;ye|=4;try{Yh(a,s.alternate,s)}finally{ye=S,xe(g),Wt.T=f}}Xn=3}}function sc(){if(Xn===4||Xn===3){Xn=0,md();var a=Yi,s=sr,f=gi,g=Cd;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Xn=5:(Xn=0,sr=Yi=null,rc(a,a.pendingLanes));var S=a.pendingLanes;if(S===0&&(Li=null),pt(f),s=s.stateNode,Va&&typeof Va.onCommitFiberRoot=="function")try{Va.onCommitFiberRoot($s,s,void 0,(s.current.flags&128)===128)}catch{}if(g!==null){s=Wt.T,S=_l(),xe(2),Wt.T=null;try{for(var x=a.onRecoverableError,w=0;w<g.length;w++){var K=g[w];x(K.value,{componentStack:K.stack})}}finally{Wt.T=s,xe(S)}}(gi&3)!==0&&li(),dn(a),S=a.pendingLanes,(f&261930)!==0&&(S&42)!==0?a===gu?He++:(He=0,gu=a):He=0,on&&eu(),hl(0)}}function rc(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,ze(s)))}function li(){return wi(),ai(),sc(),Zo()}function Zo(){if(Xn!==5)return!1;var a=Yi,s=no;no=0;var f=pt(gi),g=32>f?32:f;f=Wt.T;var S=_l();try{xe(g),Wt.T=null,g=Lc,Lc=null;var x=Yi,w=gi;if(Xn=0,sr=Yi=null,gi=0,(ye&6)!==0)throw Error(u(331));var K=ye;if(ye|=4,nc(x.current),tc(x,x.current,w,g),ye=K,hl(0,!1),Va&&typeof Va.onPostCommitFiberRoot=="function")try{Va.onPostCommitFiberRoot($s,x)}catch{}return!0}finally{xe(S),Wt.T=f,rc(a,s)}}function cs(a,s,f){s=xt(f,s),s=mf(a.stateNode,s,2),a=Wi(a,s,2),a!==null&&(z(a,2),dn(a))}function ie(a,s,f){if(a.tag===3)cs(a,a,f);else for(;s!==null;){if(s.tag===3){cs(s,a,f);break}else if(s.tag===1){var g=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Li===null||!Li.has(g))){a=xt(f,a),f=Th(2),g=Wi(s,f,2),g!==null&&(Ah(f,g,s,a),z(g,2),dn(g));break}}s=s.return}}function Yr(a,s,f){var g=a.pingCache;if(g===null){g=a.pingCache=new cl;var S=new Set;g.set(s,S)}else S=g.get(s),S===void 0&&(S=new Set,g.set(s,S));S.has(f)||(_s=!0,S.add(f),a=Kh.bind(null,a,s,f),s.then(a,a))}function Kh(a,s,f){var g=a.pingCache;g!==null&&g.delete(s),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,me===a&&(Ee&f)===f&&(Sn===4||Sn===3&&(Ee&62914560)===Ee&&300>ma()-du?(ye&2)===0&&Tn(a,0):to|=f,eo===Ee&&(eo=0)),dn(a)}function Qh(a,s){s===0&&(s=L()),a=Ua(a,s),a!==null&&(z(a,s),dn(a))}function em(a){var s=a.memoizedState,f=0;s!==null&&(f=s.retryLane),Qh(a,f)}function nm(a,s){var f=0;switch(a.tag){case 31:case 13:var g=a.stateNode,S=a.memoizedState;S!==null&&(f=S.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(u(314))}g!==null&&g.delete(s),Qh(a,f)}function Gn(a,s){return au(a,s)}function Df(a,s,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ll(a,s){var f=a.alternate;return f===null?(f=i(a.tag,s,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=s,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,s=a.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function oc(a,s){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,s=f.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function Ni(a,s,f,g,S,x){var w=0;if(g=a,typeof a=="function")Ys(a)&&(w=1);else if(typeof a=="string")w=Tl&&Vn?Ec(a,f,Wn.current)?26:gd(a)?27:5:Tl?Ec(a,f,Wn.current)?26:5:Vn&&gd(a)?27:5;else t:switch(a){case Fo:return a=i(31,f,s,S),a.elementType=Fo,a.lanes=x,a;case Ks:return Cl(f.children,S,x,s);case Qs:w=8,S|=24;break;case Zs:return a=i(12,f,s,S|2),a.elementType=Zs,a.lanes=x,a;case dc:return a=i(13,f,s,S),a.elementType=dc,a.lanes=x,a;case Ri:return a=i(19,f,s,S),a.elementType=Ri,a.lanes=x,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case El:w=10;break t;case Io:w=9;break t;case Xr:w=11;break t;case hc:w=14;break t;case Aa:w=16,g=null;break t}w=29,f=Error(u(130,a===null?"null":typeof a,"")),g=null}return s=i(w,f,s,S),s.elementType=a,s.type=g,s.lanes=x,s}function Cl(a,s,f,g){return a=i(7,a,g,s),a.lanes=f,a}function Of(a,s,f){return a=i(6,a,null,s),a.lanes=f,a}function zf(a){var s=i(18,null,null,0);return s.stateNode=a,s}function jf(a,s,f){return s=i(4,a.children!==null?a.children:[],a.key,s),s.lanes=f,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function Zh(a,s,f,g,S,x,w,K,ct){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Xa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nt(0),this.hiddenUpdates=nt(null),this.identifierPrefix=g,this.onUncaughtError=S,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ct,this.incompleteTransitions=new Map}function fs(a,s,f,g,S,x,w,K,ct,Tt,Ut,Rt){return a=new Zh(a,s,f,w,ct,Tt,Ut,Rt,K),s=1,x===!0&&(s|=24),x=i(3,null,null,s),a.current=x,x.stateNode=a,s=an(),s.refCount++,a.pooledCache=s,s.refCount++,x.memoizedState={element:g,isDehydrated:f,cache:s},fa(x),a}function uc(a){return a?(a=si,a):si}function ko(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(u(188)):(a=Object.keys(a).join(","),Error(u(268,a)));return a=m(s),a=a!==null?v(a):null,a===null?null:Vr(a.stateNode)}function Hf(a,s,f,g,S,x){S=uc(S),g.context===null?g.context=S:g.pendingContext=S,g=Ql(s),g.payload={element:f},x=x===void 0?null:x,x!==null&&(g.callback=x),f=Wi(a,g,s),f!==null&&(mn(f,a,s),Ao(f,a,s))}function Xs(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<s?f:s}}function Jo(a,s){Xs(a,s),(a=a.alternate)&&Xs(a,s)}var he={},cc=oh(),La=R1(),fc=Object.assign,qs=Symbol.for("react.element"),ii=Symbol.for("react.transitional.element"),Vs=Symbol.for("react.portal"),Ks=Symbol.for("react.fragment"),Qs=Symbol.for("react.strict_mode"),Zs=Symbol.for("react.profiler"),Io=Symbol.for("react.consumer"),El=Symbol.for("react.context"),Xr=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),Ri=Symbol.for("react.suspense_list"),hc=Symbol.for("react.memo"),Aa=Symbol.for("react.lazy"),Fo=Symbol.for("react.activity"),Uf=Symbol.for("react.memo_cache_sentinel"),Di=Symbol.iterator,ds=Symbol.for("react.client.reference"),hs=Array.isArray,Wt=cc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Bf=e.rendererVersion,Wo=e.rendererPackageName,qr=e.extraDevToolsConfig,Vr=e.getPublicInstance,kh=e.getRootHostContext,Kr=e.getChildHostContext,gc=e.prepareForCommit,Jh=e.resetAfterCommit,Gf=e.createInstance;e.cloneMutableInstance;var Po=e.appendInitialChild,Ya=e.finalizeInitialChildren,Ma=e.shouldSetTextContent,Oi=e.createTextInstance;e.cloneMutableTextInstance;var Lf=e.scheduleTimeout,Ih=e.cancelTimeout,Xa=e.noTimeout,Rn=e.isPrimaryRenderer;e.warnsIfNotActing;var Ae=e.supportsMutation,il=e.supportsPersistence,on=e.supportsHydration,ue=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ke=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var xe=e.setCurrentUpdatePriority,_l=e.getCurrentUpdatePriority,Qr=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var ks=e.shouldAttemptEagerTransition,mc=e.detachDeletedInstance;e.requestPostPaintCallback;var $o=e.maySuspendCommit,Zr=e.maySuspendCommitOnUpdate,Yf=e.maySuspendCommitInSyncRender,pn=e.preloadInstance,Xf=e.startSuspendingCommit,pc=e.suspendInstance;e.suspendOnActiveViewTransition;var Fh=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var Js=e.NotPendingTransition,Is=e.HostTransitionContext,qf=e.resetFormInstance;e.bindToConsole;var Vf=e.supportsMicrotasks,Kf=e.scheduleMicrotask,qn=e.supportsTestSelectors,Dn=e.findFiberRoot,vc=e.getBoundingRect,tu=e.getTextContent,gs=e.isHiddenSubtree,Qf=e.matchAccessibilityRole,zi=e.setFocusIfFocusable,yc=e.setupIntersectionObserver,Zf=e.appendChild,kf=e.appendChildToContainer,Wh=e.commitTextUpdate,Ph=e.commitMount,$h=e.commitUpdate,t0=e.insertBefore,e0=e.insertInContainerBefore,n0=e.removeChild,Jf=e.removeChildFromContainer,If=e.resetTextContent,am=e.hideInstance,a0=e.hideTextInstance,l0=e.unhideInstance,i0=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Ff=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var s0=e.cloneInstance,Wf=e.createContainerChildSet,Pf=e.appendChildToContainerChildSet,r0=e.finalizeContainerChildren,$f=e.replaceContainerChildren,o0=e.cloneHiddenInstance,td=e.cloneHiddenTextInstance,ms=e.isSuspenseInstancePending,Sc=e.isSuspenseInstanceFallback,bc=e.getSuspenseInstanceFallbackErrorDetails,xc=e.registerSuspenseInstanceRetry,u0=e.canHydrateFormStateMarker,ed=e.isFormStateMarkerMatching,c0=e.getNextHydratableSibling,f0=e.getNextHydratableSiblingAfterSingleton,d0=e.getFirstHydratableChild,h0=e.getFirstHydratableChildWithinContainer,g0=e.getFirstHydratableChildWithinActivityInstance,m0=e.getFirstHydratableChildWithinSuspenseInstance,nd=e.getFirstHydratableChildWithinSingleton,p0=e.canHydrateInstance,v0=e.canHydrateTextInstance,ad=e.canHydrateActivityInstance,y0=e.canHydrateSuspenseInstance,S0=e.hydrateInstance,lm=e.hydrateTextInstance,ld=e.hydrateActivityInstance,b0=e.hydrateSuspenseInstance,x0=e.getNextHydratableInstanceAfterActivityInstance,id=e.getNextHydratableInstanceAfterSuspenseInstance,C0=e.commitHydratedInstance,E0=e.commitHydratedContainer,im=e.commitHydratedActivityInstance,sm=e.commitHydratedSuspenseInstance,_0=e.finalizeHydratedChildren,eu=e.flushHydrationEvents;e.clearActivityBoundary;var sd=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Cc=e.clearSuspenseBoundaryFromContainer,T0=e.hideDehydratedBoundary,A0=e.unhideDehydratedBoundary,kr=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var M0=e.validateHydratableInstance,rd=e.validateHydratableTextInstance,Tl=e.supportsResources,Ec=e.isHostHoistableType,nu=e.getHoistableRoot,od=e.getResource,ud=e.acquireResource,ps=e.releaseResource,w0=e.hydrateHoistable,cd=e.mountHoistable,fd=e.unmountHoistable,_c=e.createHoistableInstance,N0=e.prepareToCommitHoistables,dd=e.mayResourceSuspendCommit,hd=e.preloadResource,R0=e.suspendResource,Vn=e.supportsSingletons,Tc=e.resolveSingletonInstance,Ln=e.acquireSingletonInstance,Fn=e.releaseSingletonInstance,gd=e.isHostSingletonType,Fs=e.isSingletonScope,Ac=[],Ws=-1,si={},qa=Math.clz32?Math.clz32:H,Mc=Math.log,D0=Math.LN2,wc=256,Ps=262144,Jr=4194304,au=La.unstable_scheduleCallback,Nc=La.unstable_cancelCallback,O0=La.unstable_shouldYield,md=La.unstable_requestPaint,ma=La.unstable_now,Rc=La.unstable_ImmediatePriority,z0=La.unstable_UserBlockingPriority,lu=La.unstable_NormalPriority,Dc=La.unstable_IdlePriority,pd=La.log,j0=La.unstable_setDisableYieldValue,$s=null,Va=null,On=typeof Object.is=="function"?Object.is:Ot,Oc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},rm=Object.prototype.hasOwnProperty,zc,ri,iu=!1,vd=new WeakMap,ji=[],oi=0,Je=null,su=0,Al=[],sl=0,Ml=null,na=1,Ll="",Wn=_(null),Hi=_(null),aa=_(null),ru=_(null),Kn=null,un=null,Ce=!1,ui=null,wa=!1,jc=Error(u(519)),wl=_(null),Pe=null,Yl=null,H0=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){s.aborted=!0,a.forEach(function(f){return f()})}},Pn=La.unstable_scheduleCallback,om=La.unstable_NormalPriority,cn={$$typeof:El,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ou=null,qe=null,pa=!1,Nl=!1,Hc=!1,vs=0,Ir=null,yd=0,Ui=0,Qn=null,Rl=Wt.S;Wt.S=function(a,s){ir=ma(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wu(a,s),Rl!==null&&Rl(a,s)};var ys=_(null),Zn=Error(u(460)),Uc=Error(u(474)),Dl=Error(u(542)),ci={then:function(){}},Na=null,Ss=null,tr=0,la=Fa(!0),Sd=Fa(!1),ia=[],fi=0,er=0,rl=!1,Bc=!1,nr=_(null),bs=_(0),Ka=_(null),Ra=null,An=_(0),Bi=0,ce=null,Ft=null,se=null,ge=!1,de=!1,Me=!1,va=0,Ol=0,Xl=null,bd=0,ol={readContext:kt,use:br,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};ol.useEffectEvent=hn;var vn={readContext:kt,use:br,useCallback:function(a,s){return da().memoizedState=[a,s===void 0?null:s],a},useContext:kt,useEffect:Oo,useImperativeHandle:function(a,s,f){f=f!=null?f.concat([a]):null,js(4194308,4,_r.bind(null,s,a),f)},useLayoutEffect:function(a,s){return js(4194308,4,a,s)},useInsertionEffect:function(a,s){js(4,2,a,s)},useMemo:function(a,s){var f=da();s=s===void 0?null:s;var g=a();if(Me){jt(!0);try{a()}finally{jt(!1)}}return f.memoizedState=[g,s],g},useReducer:function(a,s,f){var g=da();if(f!==void 0){var S=f(s);if(Me){jt(!0);try{f(s)}finally{jt(!1)}}}else S=s;return g.memoizedState=g.baseState=S,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:S},g.queue=a,a=a.dispatch=Pg.bind(null,ce,a),[g.memoizedState,a]},useRef:function(a){var s=da();return a={current:a},s.memoizedState=a},useState:function(a){a=rf(a);var s=a.queue,f=xh.bind(null,ce,s);return s.dispatch=f,[a.memoizedState,f]},useDebugValue:jo,useDeferredValue:function(a,s){var f=da();return Ar(f,a,s)},useTransition:function(){var a=rf(!1);return a=yh.bind(null,ce,a.queue,!0,!1),da().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,f){var g=ce,S=da();if(Ce){if(f===void 0)throw Error(u(407));f=f()}else{if(f=s(),me===null)throw Error(u(349));(Ee&127)!==0||gh(g,s,f)}S.memoizedState=f;var x={value:f,getSnapshot:s};return S.queue=x,Oo(sf.bind(null,g,x,a),[a]),g.flags|=2048,el(9,{destroy:void 0},lf.bind(null,g,x,f,s),null),f},useId:function(){var a=da(),s=me.identifierPrefix;if(Ce){var f=Ll,g=na;f=(g&~(1<<32-qa(g)-1)).toString(32)+f,s="_"+s+"R_"+f,f=va++,0<f&&(s+="H"+f.toString(32)),s+="_"}else f=bd++,s="_"+s+"r_"+f.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:df,useFormState:uf,useActionState:uf,useOptimistic:function(a){var s=da();s.memoizedState=s.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=Ku.bind(null,ce,!0,f),f.dispatch=s,[a,s]},useMemoCache:ju,useCacheRefresh:function(){return da().memoizedState=Wg.bind(null,ce)},useEffectEvent:function(a){var s=da(),f={impl:a};return s.memoizedState=f,function(){if((ye&2)!==0)throw Error(u(440));return f.impl.apply(void 0,arguments)}}},di={readContext:kt,use:br,useCallback:qu,useContext:kt,useEffect:Er,useImperativeHandle:vh,useInsertionEffect:es,useLayoutEffect:zo,useMemo:Tr,useReducer:Ci,useRef:Xu,useState:function(){return Ci(Bl)},useDebugValue:jo,useDeferredValue:function(a,s){var f=sn();return ff(f,Ft.memoizedState,a,s)},useTransition:function(){var a=Ci(Bl)[0],s=sn().memoizedState;return[typeof a=="boolean"?a:ha(a),s]},useSyncExternalStore:Os,useId:Vu,useHostTransitionStatus:df,useFormState:xr,useActionState:xr,useOptimistic:function(a,s){var f=sn();return Ro(f,Ft,a,s)},useMemoCache:ju,useCacheRefresh:bh};di.useEffectEvent=Ea;var xs={readContext:kt,use:br,useCallback:qu,useContext:kt,useEffect:Er,useImperativeHandle:vh,useInsertionEffect:es,useLayoutEffect:zo,useMemo:Tr,useReducer:Uu,useRef:Xu,useState:function(){return Uu(Bl)},useDebugValue:jo,useDeferredValue:function(a,s){var f=sn();return Ft===null?Ar(f,a,s):ff(f,Ft.memoizedState,a,s)},useTransition:function(){var a=Uu(Bl)[0],s=sn().memoizedState;return[typeof a=="boolean"?a:ha(a),s]},useSyncExternalStore:Os,useId:Vu,useHostTransitionStatus:df,useFormState:Cr,useActionState:Cr,useOptimistic:function(a,s){var f=sn();return Ft!==null?Ro(f,Ft,a,s):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:ju,useCacheRefresh:bh};xs.useEffectEvent=Ea;var uu={enqueueSetState:function(a,s,f){a=a._reactInternals;var g=rn(),S=Ql(g);S.payload=s,f!=null&&(S.callback=f),s=Wi(a,S,g),s!==null&&(mn(s,a,g),Ao(s,a,g))},enqueueReplaceState:function(a,s,f){a=a._reactInternals;var g=rn(),S=Ql(g);S.tag=1,S.payload=s,f!=null&&(S.callback=f),s=Wi(a,S,g),s!==null&&(mn(s,a,g),Ao(s,a,g))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var f=rn(),g=Ql(f);g.tag=2,s!=null&&(g.callback=s),s=Wi(a,g,f),s!==null&&(mn(s,a,f),Ao(s,a,f))}},Da=Error(u(461)),en=!1,ar={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Mn=!1,wn=!1,Fr=!1,xd=typeof WeakSet=="function"?WeakSet:Set,zn=null,yn=null,jn=!1,Ve=null,ul=8192,Wr={getCacheForType:function(a){var s=kt(cn),f=s.data.get(a);return f===void 0&&(f=a(),s.data.set(a,f)),f},cacheSignal:function(){return kt(cn).controller.signal}},zl=0,Pr=1,$r=2,cu=3,Cs=4;if(typeof Symbol=="function"&&Symbol.for){var lr=Symbol.for;zl=lr("selector.component"),Pr=lr("selector.has_pseudo_class"),$r=lr("selector.role"),cu=lr("selector.test_id"),Cs=lr("selector.text")}var cl=typeof WeakMap=="function"?WeakMap:Map,ye=0,me=null,Se=null,Ee=0,Ke=0,Yn=null,ql=!1,Es=!1,_s=!1,hi=0,Sn=0,Gi=0,Ts=0,to=0,Oa=0,eo=0,fu=null,Qa=null,Gc=!1,du=0,ir=0,As=1/0,hu=null,Li=null,Xn=0,Yi=null,sr=null,gi=0,no=0,Lc=null,Cd=null,He=0,gu=null;return he.attemptContinuousHydration=function(a){if(a.tag===13||a.tag===31){var s=Ua(a,67108864);s!==null&&mn(s,a,67108864),Jo(a,67108864)}},he.attemptHydrationAtCurrentPriority=function(a){if(a.tag===13||a.tag===31){var s=rn();s=vt(s);var f=Ua(a,s);f!==null&&mn(f,a,s),Jo(a,s)}},he.attemptSynchronousHydration=function(a){switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=D(a.pendingLanes);if(s!==0){for(a.pendingLanes|=2,a.entangledLanes|=2;s;){var f=1<<31-qa(s);a.entanglements[1]|=f,s&=~f}dn(a),(ye&6)===0&&(As=ma()+500,hl(0))}}break;case 31:case 13:s=Ua(a,2),s!==null&&mn(s,a,2),ac(),Jo(a,2)}},he.batchedUpdates=function(a,s){return a(s)},he.createComponentSelector=function(a){return{$$typeof:zl,value:a}},he.createContainer=function(a,s,f,g,S,x,w,K,ct,Tt){return fs(a,s,!1,null,f,g,x,null,w,K,ct,Tt)},he.createHasPseudoClassSelector=function(a){return{$$typeof:Pr,value:a}},he.createHydrationContainer=function(a,s,f,g,S,x,w,K,ct,Tt,Ut,Rt,qt,oe){return a=fs(f,g,!0,a,S,x,K,oe,ct,Tt,Ut,Rt),a.context=uc(null),f=a.current,g=rn(),g=vt(g),S=Ql(g),S.callback=s??null,Wi(f,S,g),s=g,a.current.lanes=s,z(a,s),dn(a),a},he.createPortal=function(a,s,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:g==null?null:""+g,children:a,containerInfo:s,implementation:f}},he.createRoleSelector=function(a){return{$$typeof:$r,value:a}},he.createTestNameSelector=function(a){return{$$typeof:cu,value:a}},he.createTextSelector=function(a){return{$$typeof:Cs,value:a}},he.defaultOnCaughtError=function(a){console.error(a)},he.defaultOnRecoverableError=function(a){Oc(a)},he.defaultOnUncaughtError=function(a){Oc(a)},he.deferredUpdates=function(a){var s=Wt.T,f=_l();try{return xe(32),Wt.T=null,a()}finally{xe(f),Wt.T=s}},he.discreteUpdates=function(a,s,f,g,S){var x=Wt.T,w=_l();try{return xe(2),Wt.T=null,a(s,f,g,S)}finally{xe(w),Wt.T=x,ye===0&&(As=ma()+500)}},he.findAllNodes=Ga,he.findBoundingRects=function(a,s){if(!qn)throw Error(u(363));s=Ga(a,s),a=[];for(var f=0;f<s.length;f++)a.push(vc(s[f]));for(s=a.length-1;0<s;s--){f=a[s];for(var g=f.x,S=g+f.width,x=f.y,w=x+f.height,K=s-1;0<=K;K--)if(s!==K){var ct=a[K],Tt=ct.x,Ut=Tt+ct.width,Rt=ct.y,qt=Rt+ct.height;if(g>=Tt&&x>=Rt&&S<=Ut&&w<=qt){a.splice(s,1);break}else if(g!==Tt||f.width!==ct.width||qt<x||Rt>w){if(!(x!==Rt||f.height!==ct.height||Ut<g||Tt>S)){Tt>g&&(ct.width+=Tt-g,ct.x=g),Ut<S&&(ct.width=S-Tt),a.splice(s,1);break}}else{Rt>x&&(ct.height+=Rt-x,ct.y=x),qt<w&&(ct.height=w-Rt),a.splice(s,1);break}}}return a},he.findHostInstance=ko,he.findHostInstanceWithNoPortals=function(a){return a=m(a),a=a!==null?b(a):null,a===null?null:Vr(a.stateNode)},he.findHostInstanceWithWarning=function(a){return ko(a)},he.flushPassiveEffects=li,he.flushSyncFromReconciler=function(a){var s=ye;ye|=1;var f=Wt.T,g=_l();try{if(xe(2),Wt.T=null,a)return a()}finally{xe(g),Wt.T=f,ye=s,(ye&6)===0&&hl(0)}},he.flushSyncWork=ac,he.focusWithin=function(a,s){if(!qn)throw Error(u(363));for(a=ss(a),s=Ur(a,s),s=Array.from(s),a=0;a<s.length;){var f=s[a++],g=f.tag;if(!gs(f)){if((g===5||g===26||g===27)&&zi(f.stateNode))return!0;for(f=f.child;f!==null;)s.push(f),f=f.sibling}}return!1},he.getFindAllNodesFailureDescription=function(a,s){if(!qn)throw Error(u(363));var f=0,g=[];a=[ss(a),0];for(var S=0;S<a.length;){var x=a[S++],w=x.tag,K=a[S++],ct=s[K];if((w!==5&&w!==26&&w!==27||!gs(x))&&(rs(x,ct)&&(g.push(Hr(ct)),K++,K>f&&(f=K)),K<s.length))for(x=x.child;x!==null;)a.push(x,K),x=x.sibling}if(f<s.length){for(a=[];f<s.length;f++)a.push(Hr(s[f]));return`findAllNodes was able to match part of the selector:
  `+(g.join(" > ")+`

No matching component was found for:
  `)+a.join(" > ")}return null},he.getPublicRootInstance=function(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 27:case 5:return Vr(a.child.stateNode);default:return a.child.stateNode}},he.injectIntoDevTools=function(){var a={bundleType:0,version:Bf,rendererPackageName:Wo,currentDispatcherRef:Wt,reconcilerVersion:"19.2.0"};if(qr!==null&&(a.rendererConfig=qr),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")a=!1;else{var s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(s.isDisabled||!s.supportsFiber)a=!0;else{try{$s=s.inject(a),Va=s}catch{}a=!!s.checkDCE}}return a},he.isAlreadyRendering=function(){return(ye&6)!==0},he.observeVisibleRects=function(a,s,f,g){if(!qn)throw Error(u(363));a=Ga(a,s);var S=yc(a,f,g).disconnect;return{disconnect:function(){S()}}},he.shouldError=function(){return null},he.shouldSuspend=function(){return!1},he.startHostTransition=function(a,s,f,g){if(a.tag!==5)throw Error(u(476));var S=Sh(a).queue;yh(a,S,s,Js,f===null?o:function(){var x=Sh(a);return x.next===null&&(x=a.alternate.memoizedState),Ho(a,x.next.queue,{},rn()),f(g)})},he.updateContainer=function(a,s,f,g){var S=s.current,x=rn();return Hf(S,x,a,s,f,g),x},he.updateContainerSync=function(a,s,f,g){return Hf(s.current,2,a,s,f,g),2},he},l.exports.default=l.exports,Object.defineProperty(l.exports,"__esModule",{value:!0})})(a1)),a1.exports}var dv;function X9(){return dv||(dv=1,n1.exports=Y9()),n1.exports}var q9=X9();const V9=Ug(q9);var l1={exports:{}},ur={};var hv;function K9(){return hv||(hv=1,ur.ConcurrentRoot=1,ur.ContinuousEventPriority=8,ur.DefaultEventPriority=32,ur.DiscreteEventPriority=2,ur.IdleEventPriority=268435456,ur.LegacyRoot=0,ur.NoEventPriority=0),ur}var gv;function Q9(){return gv||(gv=1,l1.exports=K9()),l1.exports}var Ig=Q9();const mv={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let pv=!1,vv=!1;const zg=".react-konva-event",Z9=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,k9=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,J9={};function Fg(l,e,i=J9){if(!pv&&"zIndex"in e&&(console.warn(k9),pv=!0),!vv&&e.draggable){var o=e.x!==void 0||e.y!==void 0,u=e.onDragEnd||e.onDragMove;o&&!u&&(console.warn(Z9),vv=!0)}for(var d in i)if(!mv[d]){var h=d.slice(0,2)==="on",m=i[d]!==e[d];if(h&&m){var v=d.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),l.off(v,i[d])}var b=!e.hasOwnProperty(d);b&&l.setAttr(d,void 0)}var E=e._useStrictMode,C={},_=!1;const M={};for(var d in e)if(!mv[d]){var h=d.slice(0,2)==="on",A=i[d]!==e[d];if(h&&A){var v=d.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),e[d]&&(M[v]=e[d])}!h&&(e[d]!==i[d]||E&&e[d]!==l.getAttr(d))&&(_=!0,C[d]=e[d])}_&&(l.setAttrs(C),_o(l));for(var v in M)l.off(v+zg),l.on(v+zg,M[v])}function _o(l){if(!Lt.autoDrawEnabled){var e=l.getLayer()||l.getStage();e&&e.batchDraw()}}var i1=R1();const $y={},I9={};Wc.Node.prototype._applyProps=Fg;let t3=Ig.DefaultEventPriority;function F9(l,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}l.add(e),_o(l)}function W9(l,e,i){let o=Wc[l];o||(console.error(`Konva has no node with the type ${l}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${l}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),o=Wc.Group);const u={},d={};for(var h in e)if(h!=="ref"){var m=h.slice(0,2)==="on";m?d[h]=e[h]:u[h]=e[h]}const v=new o(u);return Fg(v,d),v}function P9(l,e,i){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${l}"`)}function $9(l,e,i){return!1}function t7(l){return l}function e7(){return null}function n7(){return null}function a7(l,e,i,o){return I9}function l7(){}function i7(l){}function s7(l,e){return!1}function r7(){return $y}function o7(){return $y}const u7=setTimeout,c7=clearTimeout,f7=!0,d7=l=>{l()},h7=-1;function g7(l,e){return!1}const m7=!1,p7=!1,v7=!0,y7=!1,S7=!1;function b7(l,e){e.parent===l?e.moveToTop():l.add(e),_o(l)}function x7(l,e){e.parent===l?e.moveToTop():l.add(e),_o(l)}function e3(l,e,i){e._remove(),l.add(e),e.setZIndex(i.getZIndex()),_o(l)}function C7(l,e,i){e3(l,e,i)}function E7(l,e){e.destroy(),e.off(zg),_o(l)}function _7(l,e){e.destroy(),e.off(zg),_o(l)}function T7(l,e,i){console.error(`Text components are not yet supported in ReactKonva. You text is: "${i}"`)}function A7(l,e,i){}function M7(l,e,i,o){Fg(l,o,i)}function w7(l){l.hide(),_o(l)}function N7(l){}function R7(l,e){(e.visible==null||e.visible)&&l.show()}function D7(l,e){}function O7(l){}function z7(){}function j7(){return null}function H7(){}function U7(){}function B7(){return Ig.DefaultEventPriority}function G7(){}function L7(){return null}function Y7(l){t3=l}function X7(){return t3}function q7(){return Ig.DiscreteEventPriority}function V7(){return!1}function K7(){}function Q7(){return null}function Z7(){return-1.1}function k7(){}function J7(){return!1}function I7(){return!0}function F7(){}function W7(){}function P7(){return null}const $7=null,tx=Zt.createContext(null);function ex(){}const nx=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:tx,NotPendingTransition:$7,afterActiveInstanceBlur:U7,appendChild:b7,appendChildToContainer:x7,appendInitialChild:F9,beforeActiveInstanceBlur:H7,cancelTimeout:c7,clearContainer:O7,commitMount:A7,commitTextUpdate:T7,commitUpdate:M7,createInstance:W9,createTextInstance:P9,detachDeletedInstance:z7,finalizeInitialChildren:$9,getChildHostContext:o7,getCurrentEventPriority:B7,getCurrentUpdatePriority:X7,getInstanceFromNode:j7,getInstanceFromScope:L7,getPublicInstance:t7,getRootHostContext:r7,hideInstance:w7,hideTextInstance:N7,idlePriority:i1.unstable_IdlePriority,insertBefore:e3,insertInContainerBefore:C7,isPrimaryRenderer:m7,maySuspendCommit:J7,noTimeout:h7,now:i1.unstable_now,preloadInstance:I7,prepareForCommit:e7,preparePortalMount:n7,prepareScopeUpdate:G7,prepareUpdate:a7,removeChild:E7,removeChildFromContainer:_7,requestPostPaintCallback:k7,resetAfterCommit:l7,resetFormInstance:ex,resetTextContent:i7,resolveEventTimeStamp:Z7,resolveEventType:Q7,resolveUpdatePriority:q7,run:i1.unstable_runWithPriority,scheduleMicrotask:d7,scheduleTimeout:u7,setCurrentUpdatePriority:Y7,shouldAttemptEagerTransition:V7,shouldDeprioritizeSubtree:s7,shouldSetTextContent:g7,startSuspendingCommit:F7,supportsHydration:S7,supportsMicrotasks:f7,supportsMutation:v7,supportsPersistence:y7,suspendInstance:W7,trackSchedulerEvent:K7,unhideInstance:R7,unhideTextInstance:D7,waitForCommitToBeReady:P7,warnsIfNotActing:p7},Symbol.toStringTag,{value:"Module"}));function n3(l,e,i){if(!l)return;if(i(l)===!0)return l;let o=l.child;for(;o;){const u=n3(o,e,i);if(u)return u;o=o.sibling}}function a3(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const P1=a3(O.createContext(null));class l3 extends O.Component{render(){return O.createElement(P1.Provider,{value:this._reactInternals},this.props.children)}}function ax(){const l=O.useContext(P1);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=O.useId();return O.useMemo(()=>{for(const i of[l,l?.alternate]){if(!i)continue;const o=n3(i,!1,u=>{let d=u.memoizedState;for(;d;){if(d.memoizedState===e)return!0;d=d.next}});if(o)return o}},[l,e])}const lx=Symbol.for("react.context"),ix=l=>l!==null&&typeof l=="object"&&"$$typeof"in l&&l.$$typeof===lx;function sx(){const l=ax(),[e]=O.useState(()=>new Map);e.clear();let i=l;for(;i;){const o=i.type;ix(o)&&o!==P1&&!e.has(o)&&e.set(o,O.use(a3(o))),i=i.return}return e}function rx(){const l=sx();return O.useMemo(()=>Array.from(l.keys()).reduce((e,i)=>o=>O.createElement(e,null,O.createElement(i.Provider,{...o,value:l.get(i)})),e=>O.createElement(l3,{...e})),[l])}if(Zt.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function ox(l){const e=Zt.useRef({});return Zt.useLayoutEffect(()=>{e.current=l}),Zt.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const ux=()=>{const l=Zt.useRef(0);return Zt.useMemo(()=>{l.current++},[]),l.current>1},cx=l=>{const e=Zt.useRef(null),i=Zt.useRef(null),o=Zt.useRef(null),u=ox(l),d=rx(),h=Zt.useRef(null),m=E=>{const{forwardedRef:C}=l;C&&(typeof C=="function"?C(E):C.current=E)},v=ux(),b=()=>{m(null),hg.updateContainer(null,o.current,null),i.current?.destroy(),i.current=null};return Zt.useLayoutEffect(()=>(h.current&&(clearTimeout(h.current),h.current=null),i.current?m(i.current):(i.current=new Wc.Stage({width:l.width,height:l.height,container:e.current}),m(i.current),o.current=hg.createContainer(i.current,Ig.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),hg.updateContainer(Zt.createElement(d,{},l.children),o.current,null,()=>{})),()=>{v?h.current=setTimeout(b,0):b()}),[]),Zt.useLayoutEffect(()=>{m(i.current),Fg(i.current,l,u),hg.updateContainer(Zt.createElement(d,{},l.children),o.current,null)}),Zt.createElement("div",{ref:e,id:l.id,accessKey:l.accessKey,className:l.className,role:l.role,style:l.style,tabIndex:l.tabIndex,title:l.title})},fx="Layer",vo="Group",i3="Rect",jg="Circle",dx="Image",hx="Text",Hg="Path",s3="Transformer",hg=V9(nx),gx=Zt.forwardRef((l,e)=>Zt.createElement(l3,{},Zt.createElement(cx,{...l,forwardedRef:e}))),mx=({isOpen:l,title:e,message:i,onConfirm:o,onCancel:u,confirmText:d,cancelText:h,variant:m="default"})=>{const{t:v}=fl();if(!l)return null;const b=d??v("common.confirm"),E=h??v("common.cancel");return Zc.createPortal(N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:N.jsxs("div",{className:"w-full max-w-sm rounded-lg border border-neutral-700 bg-neutral-900 p-6 shadow-xl",children:[N.jsx("h3",{className:"mb-2 text-lg font-semibold text-white",children:e}),N.jsx("p",{className:"mb-6 text-sm text-neutral-400",children:i}),N.jsxs("div",{className:"flex justify-end gap-3",children:[N.jsx("button",{onClick:u,className:"rounded px-4 py-2 text-sm font-medium text-neutral-300 hover:bg-neutral-800 transition-colors cursor-pointer",children:E}),N.jsx("button",{onClick:o,className:`rounded px-4 py-2 text-sm font-medium text-white transition-colors cursor-pointer ${m==="danger"?"bg-danger hover:bg-danger/90":"bg-primary hover:bg-primary/90"}`,children:b})]})]})}),document.body)},px=({stageRef:l})=>{const e=Ha(re),i=Ha(Ct),o=O.useRef(null),u=i.canvasViewport;if(!u||u.width<=0||u.height<=0)return null;let d=1/0,h=1/0,m=-1/0,v=-1/0;(i.canvasItems||[]).forEach(Q=>{const dt=Q.scale||1,lt=(Q.width||0)*dt*Math.abs(Q.scaleX||1),vt=(Q.height||0)*dt*Math.abs(Q.type==="text"?1:Q.scaleY||1);d=Math.min(d,Q.x),h=Math.min(h,Q.y),m=Math.max(m,Q.x+lt),v=Math.max(v,Q.y+vt)});const b=-u.x/u.scale,E=-u.y/u.scale,C=u.width/u.scale,_=u.height/u.scale,M=Q=>e.allImages.find(dt=>dt.image===Q)||e.images.find(dt=>dt.image===Q)||null;isFinite(d)?(d=Math.min(d,b),h=Math.min(h,E),m=Math.max(m,b+C),v=Math.max(v,E+_)):(d=b,h=E,m=b+C,v=E+_);const A=100;d-=A,h-=A,m+=A,v+=A;const H=m-d,D=v-h,U=100,j=Math.min(U/H,U/D),Y=H*j,L=D*j,nt=Q=>(Q-d)*j,z=Q=>(Q-h)*j,G=Q=>{if(!o.current||!l.current)return;const dt=o.current.getBoundingClientRect(),lt=Q.clientX-dt.left,vt=Q.clientY-dt.top,pt=lt/j+d,jt=vt/j+h,Ot=-(pt-C/2)*u.scale,Mt=-(jt-_/2)*u.scale,q=l.current;q.position({x:Ot,y:Mt}),q.batchDraw(),ne.setCanvasViewport({x:Ot,y:Mt,width:q.width(),height:q.height(),scale:u.scale})};return N.jsxs("div",{ref:o,className:"absolute top-4 right-4 bg-neutral-900/90 border border-neutral-700 rounded-md shadow-xl overflow-hidden z-50 backdrop-blur-sm",style:{width:Y,height:L},onMouseDown:Q=>{Q.stopPropagation(),Q.buttons===1&&G(Q)},onMouseMove:Q=>{Q.stopPropagation(),Q.buttons===1&&G(Q)},onClick:Q=>Q.stopPropagation(),children:[(i.canvasItems||[]).filter(Q=>Q.type==="image").map(Q=>{const dt=Q.scale||1,lt=(Q.width||0)*dt*Math.abs(Q.scaleX||1),vt=(Q.height||0)*dt*Math.abs(Q.scaleY||1);let pt="#6b7280";if(Q.type==="image"){const jt=Q,Ot=M(jt.image);Ot?.dominantColor?pt=Ot.dominantColor:jt.dominantColor&&(pt=jt.dominantColor)}return N.jsx("div",{className:"absolute",style:{left:nt(Q.x),top:z(Q.y),width:Math.max(2,lt*j),height:Math.max(2,vt*j),backgroundColor:pt,borderRadius:1}},Q.canvasId)}),N.jsx("div",{className:"absolute border-2 box-border rounded-sm minimap-viewport",style:{left:nt(b),top:z(E),width:Math.max(4,C*j),height:Math.max(4,_*j),borderColor:De.primary,boxShadow:`0 0 10px ${De.canvas.selectionFill}`}})]})},vx="M4 7h16M6 7l1 14h10l1-14M9 7V4h6v3",yx=({item:l,isSelected:e,showControls:i,isPanModifierActive:o,stageScale:u,onDragStart:d,onDragMove:h,onDragEnd:m,onSelect:v,onCommit:b,onDelete:E,autoEdit:C,onAutoEditComplete:_,onCommitEnter:M})=>{const A=O.useRef(null),H=O.useRef(null),D=O.useRef(null),U=O.useRef(null),[j,Y]=O.useState(!1),[L,nt]=O.useState({width:l.width||200,height:l.height||0});O.useEffect(()=>{const lt=H.current;if(!lt)return;const vt=lt.getClientRect({skipTransform:!0});nt({width:Math.max(0,vt.width),height:Math.max(0,vt.height)}),D.current?.forceUpdate(),D.current?.getLayer()?.batchDraw()},[l.text,l.fontSize,l.align]),O.useEffect(()=>{e&&D.current&&A.current&&(D.current.nodes([A.current]),D.current.forceUpdate(),D.current.getLayer()?.batchDraw())},[e]);const z=O.useCallback(lt=>{const vt=H.current,pt=vt?.getStage();if(!vt||!pt||j)return!1;Y(!0),vt.hide(),D.current?.hide();const jt=vt.getAbsolutePosition(),Ot=pt.container().getBoundingClientRect(),Mt=pt.container().parentElement||document.body,q=Mt.getBoundingClientRect(),I={x:Ot.left-q.left+jt.x,y:Ot.top-q.top+jt.y},k=document.createElement("textarea");Mt.appendChild(k),k.value=vt.text(),k.style.position="absolute",k.style.top=`${I.y}px`,k.style.left=`${I.x}px`,k.style.border="none",k.style.padding="0px",k.style.margin="0px",k.style.overflow="hidden",k.style.background="none",k.style.outline="none",k.style.resize="none",k.style.whiteSpace="pre",k.style.lineHeight=vt.lineHeight().toString(),k.style.fontFamily=vt.fontFamily(),k.style.textAlign=vt.align(),k.style.zIndex="50";const xt=vt.fill();typeof xt=="string"&&(k.style.color=xt);const Nt=pt.scaleX()||1,B=vt.fontSize()*Nt;k.style.fontSize=`${B}px`;const P=vt.getClientRect({skipTransform:!0}),St=Math.max(80,P.width)*Nt,Ht=Math.max(B*1.2,(P.height||B*1.4)*Nt);k.style.width=`${St}px`,k.style.height=`${Ht}px`;const Vt=()=>{k.style.height="auto",k.style.width="auto";const F=Math.max(Ht,k.scrollHeight+2),mt=Math.max(St,k.scrollWidth+2);k.style.height=`${F}px`,k.style.width=`${mt}px`,ne.updateCanvasImageSilent(l.canvasId,{text:k.value,width:mt/Nt,height:F/Nt})};Vt(),setTimeout(()=>{k.focus(),lt==="all"?k.setSelectionRange(0,k.value.length):k.setSelectionRange(k.value.length,k.value.length)},100);const Xt=F=>{if(k.parentNode&&k.parentNode.removeChild(k),window.removeEventListener("click",Z),Y(!1),vt.show(),D.current?.show(),D.current?.forceUpdate(),D.current?.getLayer()?.batchDraw(),F){vt.text(k.value);const mt=vt.getClientRect({skipTransform:!0});b({text:k.value,width:Math.max(0,mt.width),height:Math.max(0,mt.height)})}},Z=F=>{F.target!==k&&Xt(!0)};return k.addEventListener("keydown",F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),Xt(!0),M?.()),F.key==="Escape"&&(F.preventDefault(),Xt(!1))}),k.addEventListener("input",()=>{Vt()}),setTimeout(()=>{window.addEventListener("click",Z)}),!0},[j,l.canvasId,b,M]);O.useEffect(()=>{if(!C||j)return;const lt=window.setTimeout(()=>{z("all")&&_?.()},0);return()=>window.clearTimeout(lt)},[C,j,z,_]);const G=1/u,Q=L.width+4*G,dt=0-4*G;return N.jsxs(Zt.Fragment,{children:[N.jsx(vo,{ref:A,name:`text-${l.canvasId}`,x:l.x,y:l.y,rotation:l.rotation,draggable:!o&&!j,onMouseDown:lt=>{lt.evt.button!==2&&(o||(v(lt),ne.bringToFront(l.canvasId)))},onDragStart:lt=>{o||(ne.bringToFront(l.canvasId),U.current?.position({x:lt.target.x(),y:lt.target.y()}),U.current?.rotation(lt.target.rotation()),D.current?.forceUpdate(),D.current?.getLayer()?.batchDraw(),d({x:lt.target.x(),y:lt.target.y()}))},onDragMove:lt=>{U.current?.position({x:lt.target.x(),y:lt.target.y()}),U.current?.rotation(lt.target.rotation()),D.current?.forceUpdate(),D.current?.getLayer()?.batchDraw(),h({x:lt.target.x(),y:lt.target.y()})},onDragEnd:lt=>{U.current?.position({x:lt.target.x(),y:lt.target.y()}),U.current?.rotation(lt.target.rotation()),D.current?.forceUpdate(),D.current?.getLayer()?.batchDraw(),m({x:lt.target.x(),y:lt.target.y()})},children:N.jsx(hx,{ref:H,text:l.text,fontSize:l.fontSize,fill:l.fill,align:l.align,onDblClick:()=>z("end")})}),i&&!j&&N.jsx(s3,{ref:D,enabledAnchors:["bottom-right"],rotateEnabled:!1,padding:5,anchorSize:10,borderStroke:De.primary,anchorStroke:De.primary,anchorFill:"white",onTransform:()=>{const lt=A.current;if(!lt)return;const vt=lt.scaleX(),pt=lt.scaleY(),jt=Math.max(vt,pt),Ot=Math.max(8,l.fontSize*jt);lt.scaleX(1),lt.scaleY(1),b({fontSize:Ot})}}),i&&!j&&N.jsx(vo,{ref:U,x:l.x,y:l.y,rotation:l.rotation,scaleX:1,scaleY:1,onMouseDown:lt=>{lt.cancelBubble=!0},children:N.jsxs(vo,{x:Q,y:dt,scaleX:G,scaleY:G,onClick:lt=>{lt.cancelBubble=!0,E()},onMouseEnter:lt=>{const vt=lt.target.getStage()?.container();vt&&(vt.style.cursor="pointer")},onMouseLeave:lt=>{const vt=lt.target.getStage()?.container();vt&&(vt.style.cursor="default")},children:[N.jsx(jg,{radius:12,fill:De.danger}),N.jsx(Hg,{data:vx,stroke:"white",strokeWidth:2,lineCap:"round",lineJoin:"round",scale:{x:.65,y:.65},x:-8,y:-9})]})})]})};var s1,yv;function Sx(){if(yv)return s1;yv=1;var l=oh();return s1=function(i,o,u){const d=l.useRef("loading"),h=l.useRef(),[m,v]=l.useState(0),b=l.useRef(),E=l.useRef(),C=l.useRef();return(b.current!==i||E.current!==o||C.current!==u)&&(d.current="loading",h.current=void 0,b.current=i,E.current=o,C.current=u),l.useLayoutEffect(function(){if(!i)return;var _=document.createElement("img");function M(){_.decode().catch(()=>{}).finally(()=>{d.current="loaded",h.current=_,v(Math.random())})}function A(){d.current="failed",h.current=void 0,v(Math.random())}return _.addEventListener("load",M),_.addEventListener("error",A),o&&(_.crossOrigin=o),u&&(_.referrerPolicy=u),_.src=i,function(){_.removeEventListener("load",M),_.removeEventListener("error",A)}},[i,o,u]),[h.current,d.current]},s1}var bx=Sx();const xx=Ug(bx),Cx="M4 7h16M6 7l1 14h10l1-14M9 7V4h6v3",Ex="M7 7l-3 3 3 3M17 7l3 3-3 3M4 10h16",_x=[Py.Filters.Grayscale],Tx=({image:l,isSelected:e,showControls:i,isPanModifierActive:o,stageScale:u,onDragStart:d,onDragMove:h,onDragEnd:m,onSelect:v,onChange:b,onCommit:E,onDelete:C,globalGrayscale:_})=>{const[M]=xx(Gg(l.image),"anonymous"),A=O.useRef(null),H=O.useRef(null),D=O.useRef(null),U=l.grayscale||_;O.useEffect(()=>{const z=D.current;!z||!M||(z.clearCache(),U&&z.cache({pixelRatio:1}))},[U,M,l.width,l.height]),O.useEffect(()=>{M&&(l.width!==M.width||l.height!==M.height)&&ne.updateCanvasImageSilent(l.canvasId,{width:M.width,height:M.height})},[M,l.width,l.height,l.canvasId]),O.useEffect(()=>{if(typeof l.scaleX!="number"&&typeof l.scaleY!="number")return;const z=typeof l.scaleX=="number"?l.scaleX:void 0,G=typeof l.scaleY=="number"?l.scaleY:void 0;if(!(typeof z=="number"&&Math.abs(z)!==1||typeof G=="number"&&Math.abs(G)!==1))return;const dt=typeof z=="number"?Math.abs(z):typeof G=="number"?Math.abs(G):1,lt=typeof z=="number"&&z<0?-1:1;ne.updateCanvasImageSilent(l.canvasId,{scale:dt,scaleX:lt,scaleY:1})},[l.scaleX,l.scaleY,l.canvasId]),O.useEffect(()=>{e&&H.current&&A.current&&(H.current.nodes([A.current]),H.current.getLayer()?.batchDraw())},[e]);const j=()=>{const z=(l.scaleX??1)<0?-1:1;E({scaleX:z*-1})},Y=l.scale||1,L=(l.scaleX??1)<0,nt=1/(Y*u);return N.jsxs(N.Fragment,{children:[N.jsx(vo,{ref:A,name:`image-${l.canvasId}`,x:l.x,y:l.y,rotation:l.rotation,scaleX:Y,scaleY:Y,draggable:!o,onMouseDown:z=>{z.evt.button!==2&&(o||(v(z),ne.bringToFront(l.canvasId)))},onDragStart:z=>{o||(ne.bringToFront(l.canvasId),d({x:z.target.x(),y:z.target.y()}))},onDragMove:z=>{h({x:z.target.x(),y:z.target.y()})},onDragEnd:z=>{m({x:z.target.x(),y:z.target.y()})},onTransform:()=>{const z=A.current;z&&b({x:z.x(),y:z.y(),scale:z.scaleX(),rotation:z.rotation()})},onTransformEnd:()=>{const z=A.current;z&&E({x:z.x(),y:z.y(),scale:z.scaleX(),rotation:z.rotation()})},children:N.jsx(dx,{ref:D,filters:U?_x:void 0,image:M,width:l.width,height:l.height,scaleX:L?-1:1,offsetX:L&&l.width||0})}),i&&N.jsx(s3,{ref:H,enabledAnchors:["bottom-right"],rotateEnabled:!0,padding:0,keepRatio:!0,anchorSize:10,borderStroke:De.primary,anchorStroke:De.primary,anchorFill:"white",boundBoxFunc:(z,G)=>G.width<5||G.height<5?z:G}),i&&N.jsxs(vo,{x:l.x,y:l.y,rotation:l.rotation,scaleX:Y,scaleY:Y,zIndex:999,onMouseDown:z=>{z.cancelBubble=!0},children:[N.jsxs(vo,{x:0,y:0,scaleX:nt,scaleY:nt,onClick:z=>{z.cancelBubble=!0,j()},onMouseEnter:z=>{const G=z.target.getStage()?.container();G&&(G.style.cursor="pointer")},onMouseLeave:z=>{const G=z.target.getStage()?.container();G&&(G.style.cursor="default")},children:[N.jsx(jg,{radius:12,fill:De.primary,shadowColor:"black",shadowBlur:5,shadowOpacity:.3}),N.jsx(Hg,{data:Ex,stroke:"white",strokeWidth:2,lineCap:"round",lineJoin:"round",scale:{x:.8,y:.8},x:-10,y:-8})]}),N.jsxs(vo,{x:l.width||100,y:0,scaleX:nt,scaleY:nt,onClick:z=>{z.cancelBubble=!0,C()},onMouseEnter:z=>{const G=z.target.getStage()?.container();G&&(G.style.cursor="pointer")},onMouseLeave:z=>{const G=z.target.getStage()?.container();G&&(G.style.cursor="default")},children:[N.jsx(jg,{radius:12,fill:De.danger,shadowColor:"black",shadowBlur:5,shadowOpacity:.3}),N.jsx(Hg,{data:Cx,stroke:"white",strokeWidth:2,lineCap:"round",lineJoin:"round",scale:{x:.65,y:.65},x:-8,y:-9})]})]})]})},gg=({isActive:l=!1,variant:e="default",className:i="",style:o,children:u,...d})=>{const h="text-xs px-2 py-1 rounded border transition-colors font-medium",m=e==="danger"?"bg-neutral-800 text-white border-neutral-700 hover:bg-red-900/50 hover:border-red-800":"bg-neutral-800 text-white border-neutral-700 hover:bg-neutral-700",v=l?"bg-primary border-primary text-white hover:border-primary":"";return N.jsx("button",{className:`
        ${h} 
        ${l?v:m} 
        ${i}
      `,style:o,...d,children:u})},Ax=({canvasGrayscale:l,showMinimap:e,isExpanded:i,onToggleGrayscale:o,onToggleMinimap:u,onAutoLayout:d,onRequestClear:h,onToggleExpanded:m})=>{const{t:v}=fl();return N.jsxs("div",{className:"absolute top-4 left-4 z-10 flex items-center",children:[N.jsx("button",{onClick:m,className:"flex px-1 py-1 items-center justify-center rounded-md bg-neutral-800 hover:bg-neutral-700 text-neutral-400 hover:text-white transition-colors border border-neutral-700 shadow-sm z-20",title:v(i?"canvas.toolbar.collapse":"canvas.toolbar.expand"),children:N.jsx(x4,{color:i?De.primary:"#666",size:16})}),N.jsxs("div",{className:`gap-2 ml-2 overflow-hidden transition-all duration-300 ease-in-out ${i?"flex":"hidden"}`,children:[N.jsx(gg,{isActive:l,onClick:o,title:v("canvas.toolbar.toggleGrayscale"),children:v("canvas.toolbar.grayscale")}),N.jsx(gg,{onClick:d,children:v("canvas.toolbar.smartLayout")}),N.jsx(gg,{isActive:e,onClick:u,title:v("canvas.toolbar.toggleMinimap"),children:v("canvas.toolbar.minimap")}),N.jsx(gg,{variant:"danger",onClick:h,children:v("common.clear")})]})]})},Mx="M4 7h16M6 7l1 14h10l1-14M9 7V4h6v3",wx=({union:l,stageScale:e,onDeleteSelection:i})=>l?N.jsxs(N.Fragment,{children:[N.jsx(i3,{x:l.x,y:l.y,width:l.width,height:l.height,stroke:De.primary,strokeWidth:1/e,dash:[6/e,4/e],listening:!1}),N.jsxs(vo,{x:l.x+l.width,y:l.y,scaleX:1/e,scaleY:1/e,onClick:o=>{o.cancelBubble=!0,i()},onMouseEnter:o=>{const u=o.target.getStage()?.container();u&&(u.style.cursor="pointer")},onMouseLeave:o=>{const u=o.target.getStage()?.container();u&&(u.style.cursor="default")},children:[N.jsx(jg,{radius:12,fill:"#ef4444",stroke:"white",strokeWidth:2,shadowColor:"black",shadowBlur:5,shadowOpacity:.3}),N.jsx(Hg,{data:Mx,stroke:"white",strokeWidth:2,lineCap:"round",lineJoin:"round",scale:{x:.8,y:.8},x:-10,y:-10})]})]}):null,Nx=({selectionBox:l})=>{if(!l.start||!l.current)return null;const e=Math.min(l.start.x,l.current.x),i=Math.min(l.start.y,l.current.y),o=Math.abs(l.current.x-l.start.x),u=Math.abs(l.current.y-l.start.y);return N.jsx(i3,{x:e,y:i,width:o,height:u,fill:De.canvas.selectionFill,stroke:De.primary,strokeWidth:1,listening:!1})},Rx=l=>new Promise((e,i)=>{const o=new FileReader;o.onload=()=>e(String(o.result||"")),o.onerror=()=>i(o.error),o.readAsDataURL(l)}),Dx=async l=>{const e=await Rx(l);if(!e)return null;const i=await ja("/api/upload-temp",{imageBase64:e,filename:l.name});return!i||!i.success||typeof i.filename!="string"||typeof i.path!="string"?null:{filename:i.filename,path:i.path}},Ox=()=>{const l=Ha(ve),e=Ha(Ct),{t:i}=fl(),o=l.pinMode&&l.pinTransparent,u=e.selectedIds,d=e.primaryId,h=e.autoEditId,m=e.isClearModalOpen,v=O.useRef(new Set),b=O.useRef(null),E=O.useRef(null),C=e.dimensions,_=e.isSpaceDown,M=e.canvasViewport.scale||1,A=e.multiSelectUnion,H=O.useRef(!1),D=O.useRef(null),U=O.useRef(!1),j=O.useRef({active:!1,draggedId:null,anchor:null,snapshots:new Map}),Y=O.useRef(!1),L=e.selectionBox,nt=Z=>{Ct.selectedIds=Z},z=Z=>{Ct.primaryId=Z},G=Z=>{Ct.multiSelectUnion=Z},Q=Z=>{Ct.selectionBox=Z},dt=Z=>{Ct.autoEditId=Z},lt=Z=>{Ct.isClearModalOpen=Z},vt=Z=>{Ct.isSpaceDown=Z};O.useEffect(()=>{v.current=u},[u]);const pt=Z=>{if(Z.size<=1)return null;const F=b.current;if(!F)return null;let mt=Number.POSITIVE_INFINITY,wt=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,gt=Number.NEGATIVE_INFINITY;return Z.forEach(_t=>{let At=F.findOne(`.image-${_t}`);if(At||(At=F.findOne(`.text-${_t}`)),!At)return;const Yt=At.getClientRect({relativeTo:F});mt=Math.min(mt,Yt.x),wt=Math.min(wt,Yt.y),W=Math.max(W,Yt.x+Yt.width),gt=Math.max(gt,Yt.y+Yt.height)}),!Number.isFinite(mt)||!Number.isFinite(wt)||!Number.isFinite(W)||!Number.isFinite(gt)?null:{x:mt,y:wt,width:W-mt,height:gt-wt}};O.useEffect(()=>{const Z=()=>{E.current&&(Ct.dimensions={width:E.current.offsetWidth,height:E.current.offsetHeight})};return window.addEventListener("resize",Z),Z(),()=>window.removeEventListener("resize",Z)},[]),O.useEffect(()=>{E.current&&(Ct.dimensions={width:E.current.offsetWidth,height:E.current.offsetHeight})},[l.pinMode,l.sidebarWidth]),O.useEffect(()=>{const Z=b.current;if(!Z)return;const F=e.canvasViewport;!F||F.x===0&&F.y===0&&F.width===0&&F.height===0&&F.scale===1||Y.current||(Z.position({x:F.x,y:F.y}),Z.scale({x:F.scale,y:F.scale}),Y.current=!0)},[e.canvasViewport]),O.useEffect(()=>{const Z=F=>{const mt=F,{image:wt,x:W,y:gt}=mt.detail,_t=b.current;if(!_t)return;const At=_t.container().getBoundingClientRect(),Yt={x:W-At.left,y:gt-At.top},ot=_t.getAbsoluteTransform().copy();ot.invert();const ht=ot.point(Yt);ne.addToCanvas(wt,ht.x,ht.y)};return window.addEventListener("canvas-drop-request",Z),()=>window.removeEventListener("canvas-drop-request",Z)},[]);const jt=O.useCallback(()=>{Ct.selectedIds=new Set,Ct.primaryId=null,Ct.multiSelectUnion=null},[]),Ot=async Z=>{Z.preventDefault(),console.log("[Canvas] handleDrop triggered",{files:Z.dataTransfer.files.length,types:Z.dataTransfer.types,items:Z.dataTransfer.items.length});const F=b.current;if(!F){console.log("[Canvas] handleDrop: no stage ref");return}F.setPointersPositions(Z);const mt=F.getPointerPosition();try{const wt=F.getAbsoluteTransform().copy();wt.invert();const W=wt.point(mt||{x:0,y:0}),gt=Z.dataTransfer.getData("application/json");if(gt)try{const ot=JSON.parse(gt);if(ot&&ot.image){ne.addToCanvas(ot,W.x,W.y);return}}catch{}const _t=Array.from(Z.dataTransfer.files||[]);if(!_t.length){const ot=Z.dataTransfer.getData("text/html");let ht="";if(ot){const Kt=new DOMParser().parseFromString(ot,"text/html").querySelector("img");Kt?.src&&(ht=Kt.src,console.log("[Canvas] extracted img src from html:",ht))}if(!ht){const Kt=Z.dataTransfer.getData("text/uri-list")||Z.dataTransfer.getData("text/plain");Kt&&(ht=Kt.split(`
`)[0].trim())}if(ht&&(ht.startsWith("http://")||ht.startsWith("https://")))try{const Kt=await fetch(`${kn}/api/download-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:ht})});if(Kt.ok){const _e=await Kt.json();if(_e.success&&_e.filename&&_e.path){const le=await np(_e.path),Oe=be.createDroppedImageMeta({path:_e.path,storedFilename:`temp-images/${_e.filename}`,originalName:_e.filename,dominantColor:le});ne.addToCanvas(Oe,W.x,W.y)}}}catch(Kt){console.error("URL drop error",Kt)}return}const At=_t.filter(ot=>ot.type.startsWith("image/"));if(!At.length)return;(await Promise.all(At.map(async(ot,ht)=>{try{const Kt=await Dx(ot);if(!Kt)return null;const _e=await np(Kt.path);return{meta:be.createDroppedImageMeta({path:Kt.path,storedFilename:`temp-images/${Kt.filename}`,originalName:ot.name,dominantColor:_e}),index:ht}}catch{return null}}))).filter(ot=>!!ot).forEach(({meta:ot,index:ht})=>{const Kt=ht*24;ne.addToCanvas(ot,W.x+Kt,W.y+Kt)})}catch(wt){console.error("Drop error",wt)}},Mt=Z=>{Z.evt.preventDefault();const F=b.current;if(!F)return;const mt=1.1,wt=F.scaleX(),W=F.getPointerPosition();if(!W)return;const gt={x:(W.x-F.x())/wt,y:(W.y-F.y())/wt},_t=Z.evt.deltaY>0?wt/mt:wt*mt,At={x:W.x-gt.x*_t,y:W.y-gt.y*_t};F.scale({x:_t,y:_t}),F.position(At),ne.setCanvasViewport({x:At.x,y:At.y,width:F.width(),height:F.height(),scale:_t})};O.useEffect(()=>{const Z=wt=>{const W=wt.target;if(!(W.tagName==="INPUT"||W.tagName==="TEXTAREA"||W.isContentEditable)&&wt.code==="Space"){wt.preventDefault(),vt(!0);const gt=b.current;gt&&(gt.container().style.cursor="grab")}},F=wt=>{if(wt.code==="Space"){vt(!1),H.current=!1,D.current=null;const W=b.current;W&&(W.container().style.cursor="default")}},mt=()=>{vt(!1),H.current=!1,D.current=null;const wt=b.current;wt&&(wt.container().style.cursor="default")};return window.addEventListener("keydown",Z),window.addEventListener("keyup",F),window.addEventListener("blur",mt),()=>{window.removeEventListener("keydown",Z),window.removeEventListener("keyup",F),window.removeEventListener("blur",mt)}},[]);const q=Z=>{const F=Z.target.getStage();if(!F)return;const wt=Z.evt.button===2;if(_||wt){if(Z.evt.preventDefault(),F.container().style.cursor="grabbing",H.current=!0,"touches"in Z.evt){const gt=Z.evt.touches[0];gt&&(D.current={x:gt.clientX,y:gt.clientY})}else D.current={x:Z.evt.clientX,y:Z.evt.clientY};return}if(("button"in Z.evt?Z.evt.button===0:!0)&&(Z.target===F||Z.target.getParent()===F)){const _t=F.getRelativePointerPosition();_t&&(U.current=!!(Z.evt.shiftKey||Z.evt.metaKey||Z.evt.ctrlKey),Q({start:_t,current:_t}),U.current||(nt(new Set),z(null),G(null)))}},I=Z=>{if(H.current){const F=b.current,mt=D.current;if(!F||!mt)return;let wt=null;if("touches"in Z.evt){const At=Z.evt.touches[0];At&&(wt={x:At.clientX,y:At.clientY})}else wt={x:Z.evt.clientX,y:Z.evt.clientY};if(!wt)return;const W=wt.x-mt.x,gt=wt.y-mt.y,_t={x:F.x()+W,y:F.y()+gt};F.position(_t),ne.setCanvasViewport({x:_t.x,y:_t.y,width:F.width(),height:F.height(),scale:F.scaleX()}),D.current=wt;return}if(L.start){const mt=b.current?.getRelativePointerPosition();mt&&(Ct.selectionBox={...Ct.selectionBox,current:mt})}},k=()=>{const Z=b.current;if(Z&&(Z.container().style.cursor="default"),H.current=!1,D.current=null,!Z){Ct.selectionBox={start:null,current:null};return}if(L.start&&L.current){const F=Math.min(L.start.x,L.current.x),mt=Math.max(L.start.x,L.current.x),wt=Math.min(L.start.y,L.current.y),W=Math.max(L.start.y,L.current.y);if(Math.abs(mt-F)>2||Math.abs(W-wt)>2){const gt=U.current?new Set(u):new Set;let _t=null;(e.canvasItems||[]).forEach(At=>{let Yt=Z.findOne(`.image-${At.canvasId}`);if(Yt||(Yt=Z.findOne(`.text-${At.canvasId}`)),Yt){const ot=Yt.getClientRect({relativeTo:Z});ot.x<mt&&ot.x+ot.width>F&&ot.y<W&&ot.y+ot.height>wt&&(gt.add(At.canvasId),_t=At.canvasId)}}),nt(gt),_t&&z(_t),G(pt(gt))}}Ct.selectionBox={start:null,current:null}};O.useEffect(()=>{const Z=()=>{(Ct.selectionBox.start||Ct.selectionBox.current)&&(Ct.selectionBox={start:null,current:null}),H.current=!1,D.current=null;const F=b.current;F&&(F.container().style.cursor="default")};return window.addEventListener("mouseup",Z),window.addEventListener("touchend",Z),()=>{window.removeEventListener("mouseup",Z),window.removeEventListener("touchend",Z)}},[]);const xt=()=>{if(u.size>0){const Ze=(e.canvasItems||[]).filter(an=>u.has(an.canvasId)).filter(an=>an.type==="image");if(Ze.length>=2){let an=1/0,ze=1/0;Ze.forEach(je=>{const dn=je.scale||1,hl=(je.width||0)*dn*Math.abs(je.scaleX||1),ka=(je.height||0)*dn*Math.abs(je.scaleY||1),ki=u1(hl,ka,je.rotation||0);an=Math.min(an,je.x+ki.offsetX),ze=Math.min(ze,je.y+ki.offsetY)}),an===1/0&&(an=0),ze===1/0&&(ze=0),ne.autoLayoutCanvas(Ze.map(je=>je.canvasId),{startX:an,startY:ze}),setTimeout(()=>{G(pt(v.current))},0);return}}ne.autoLayoutCanvas();const Z=b.current;if(!Z)return;const F=Ct.canvasItems||[];if(F.length===0)return;let mt=1/0,wt=1/0,W=-1/0,gt=-1/0;F.forEach(kt=>{const Jt=kt.scale||1,Ze=(kt.width||0)*Jt*Math.abs(kt.scaleX||1),an=(kt.height||0)*Jt*Math.abs(kt.type==="text"?1:kt.scaleY||1),ze=u1(Ze,an,kt.rotation||0);mt=Math.min(mt,kt.x+ze.offsetX),wt=Math.min(wt,kt.y+ze.offsetY),W=Math.max(W,kt.x+ze.offsetX+ze.width),gt=Math.max(gt,kt.y+ze.offsetY+ze.height)});const _t=50,At=W-mt,Yt=gt-wt;if(!isFinite(At)||!isFinite(Yt))return;const ot=Z.width(),ht=Z.height(),Kt=(ot-_t*2)/At,_e=(ht-_t*2)/Yt,le=Math.min(Kt,_e),Oe=(ot-At*le)/2-mt*le,Xe=(ht-Yt*le)/2-wt*le;Z.to({x:Oe,y:Xe,scaleX:le,scaleY:le,duration:.3,easing:Py.Easings.EaseInOut}),ne.setCanvasViewport({x:Oe,y:Xe,width:Z.width(),height:Z.height(),scale:le})},Nt=O.useCallback(()=>{u.size!==0&&u.forEach(Z=>{const F=e.canvasItems.find(mt=>mt.canvasId===Z);if(F&&F.type!=="text"){const mt=F.scaleX||1;ne.updateCanvasImage(Z,{scaleX:mt*-1})}})},[u,e.canvasItems]);Lp("mod+g",Z=>{Z.preventDefault(),u.size!==0&&xt()},{preventDefault:!0},[xt]),Lp("mod+f",Z=>{Z.preventDefault(),Nt()},{preventDefault:!0},[Nt]);const B=()=>{const Z=Array.from(v.current);Z.length!==0&&(ne.removeManyFromCanvas(Z),jt())};O.useEffect(()=>{const Z=F=>{const mt=F.target;if(!(mt.tagName==="INPUT"||mt.tagName==="TEXTAREA"||mt.isContentEditable)){if((F.metaKey||F.ctrlKey)&&!F.shiftKey&&F.key.toLowerCase()==="z"){F.preventDefault(),ne.undoCanvas(),nt(new Set),z(null),G(null);return}if((F.metaKey||F.ctrlKey)&&F.shiftKey&&F.key.toLowerCase()==="z"){F.preventDefault(),ne.redoCanvas(),nt(new Set),z(null),G(null);return}(F.key==="Delete"||F.key==="Backspace")&&u.size>0&&(ne.removeManyFromCanvas(Array.from(u)),jt())}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[u,jt]);const P=(Z,F)=>{const mt=v.current;if(!mt.has(Z)){j.current={active:!1,draggedId:null,anchor:null,snapshots:new Map};return}if(mt.size<=1){j.current={active:!1,draggedId:null,anchor:null,snapshots:new Map};return}const wt=new Map;mt.forEach(W=>{const gt=e.canvasItems.find(_t=>_t.canvasId===W);gt&&wt.set(W,{x:gt.x,y:gt.y})}),j.current={active:!0,draggedId:Z,anchor:F,snapshots:wt}},St=(Z,F)=>{const mt=j.current;if(mt.active&&mt.anchor){const wt=F.x-mt.anchor.x,W=F.y-mt.anchor.y;mt.snapshots.forEach((gt,_t)=>{ne.updateCanvasImageTransient(_t,{x:gt.x+wt,y:gt.y+W})}),G(pt(v.current));return}ne.updateCanvasImageTransient(Z,{x:F.x,y:F.y}),G(pt(v.current))},Ht=(Z,F)=>{const mt=j.current;if(mt.active&&mt.anchor){const wt=F.x-mt.anchor.x,W=F.y-mt.anchor.y;mt.snapshots.forEach((gt,_t)=>{ne.updateCanvasImage(_t,{x:gt.x+wt,y:gt.y+W})})}else ne.updateCanvasImage(Z,{x:F.x,y:F.y});j.current={active:!1,draggedId:null,anchor:null,snapshots:new Map},G(pt(v.current))},Vt=(Z,F)=>{if(!L.start)if(!F.evt.shiftKey&&!F.evt.metaKey&&!F.evt.ctrlKey)ne.bringToFront(Z),u.has(Z)?z(Z):(nt(new Set([Z])),z(Z),G(null));else{const mt=new Set(u);if(mt.has(Z)){if(mt.delete(Z),d===Z){const wt=Array.from(mt)[0]||null;z(wt)}}else mt.add(Z),z(Z);nt(mt),G(pt(mt))}},Xt=Z=>{const F=Z.target.getStage();if(!F)return;if(Z.target===F||Z.target.getParent()===F){const wt=F.getRelativePointerPosition();if(wt){const W=ne.addTextToCanvas(wt.x,wt.y);nt(new Set([W])),z(W),G(null),dt(W)}}};return N.jsxs("div",{ref:E,className:o?"flex-1 h-full bg-transparent overflow-hidden relative transition-colors outline-none focus:outline-none":"flex-1 h-full bg-neutral-950 overflow-hidden relative transition-colors outline-none focus:outline-none",onDrop:Ot,onDragOver:Z=>Z.preventDefault(),onContextMenu:Z=>Z.preventDefault(),onClick:()=>ae.setActiveArea("canvas"),onMouseDown:()=>ae.setActiveArea("canvas"),children:[N.jsx(Ax,{canvasGrayscale:e.canvasGrayscale,showMinimap:e.showMinimap,isExpanded:e.isCanvasToolbarExpanded,onToggleGrayscale:()=>ne.toggleCanvasGrayscale(),onToggleMinimap:()=>ne.toggleMinimap(),onAutoLayout:xt,onRequestClear:()=>lt(!0),onToggleExpanded:()=>ne.toggleCanvasToolbarExpanded()}),N.jsx(gx,{width:C.width,height:C.height,onMouseDown:q,onMouseMove:I,onMouseUp:k,onDblClick:Xt,onTouchStart:q,onTouchMove:I,onTouchEnd:k,onWheel:Mt,draggable:!1,ref:b,children:N.jsxs(fx,{children:[(e.canvasItems||[]).map(Z=>Z.type==="text"?N.jsx(yx,{item:Z,isSelected:u.has(Z.canvasId),showControls:u.size===1&&u.has(Z.canvasId),isPanModifierActive:_,stageScale:M,onDragStart:F=>P(Z.canvasId,F),onDragMove:F=>St(Z.canvasId,F),onDragEnd:F=>Ht(Z.canvasId,F),onSelect:F=>Vt(Z.canvasId,F),autoEdit:h===Z.canvasId,onAutoEditComplete:()=>{h===Z.canvasId&&dt(null)},onCommitEnter:()=>{const F=v.current;if(!(F.size===1&&F.has(Z.canvasId)))return;nt(new Set);const mt=d===Z.canvasId?null:d;z(mt),G(null)},onCommit:F=>{ne.updateCanvasImage(Z.canvasId,F),G(pt(v.current))},onDelete:()=>{ne.removeFromCanvas(Z.canvasId);const F=new Set(u);F.delete(Z.canvasId),nt(F),d===Z.canvasId&&z(Array.from(F)[0]||null),G(pt(F))}},Z.canvasId):N.jsx(Tx,{image:Z,isSelected:u.has(Z.canvasId),showControls:u.size===1&&u.has(Z.canvasId),isPanModifierActive:_,stageScale:M,onDragStart:F=>P(Z.canvasId,F),onDragMove:F=>St(Z.canvasId,F),onDragEnd:F=>Ht(Z.canvasId,F),onSelect:F=>Vt(Z.canvasId,F),onChange:F=>{ne.updateCanvasImageSilent(Z.canvasId,F)},onCommit:F=>{ne.updateCanvasImage(Z.canvasId,F),G(pt(v.current))},onDelete:()=>{ne.removeFromCanvas(Z.canvasId);const F=new Set(u);F.delete(Z.canvasId),nt(F),d===Z.canvasId&&z(Array.from(F)[0]||null),G(pt(F))},globalGrayscale:e.canvasGrayscale},Z.canvasId)),N.jsx(wx,{union:L.start===null?A:null,stageScale:M,onDeleteSelection:B}),N.jsx(Nx,{selectionBox:L})]})}),e.showMinimap&&N.jsx(px,{stageRef:b}),N.jsx(mx,{isOpen:m,title:i("canvas.clearCanvasTitle"),message:i("canvas.clearCanvasMessage"),confirmText:i("canvas.clearCanvasConfirm"),variant:"danger",onConfirm:()=>{ne.clearCanvas(),lt(!1)},onCancel:()=>lt(!1)})]})},zx=()=>{const l=Ha(pu),{t:e}=fl();return l.isOpen?N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:N.jsxs("div",{className:"w-[480px] bg-[#0b0d10] border border-white/10 rounded-xl p-6 shadow-2xl",children:[N.jsx("h1",{className:"font-semibold text-4xl mb-4 text-primary",children:e("envInit.brandTitle")}),N.jsx("h2",{className:"text-white font-semibold text-lg mb-2",children:e("envInit.heading")}),N.jsx("div",{className:"text-white/60 text-sm mb-4",children:e("envInit.subheading")}),N.jsx("div",{className:"relative h-2.5 w-full bg-white/10 rounded-full overflow-hidden mb-3",children:N.jsx("div",{className:"absolute top-0 left-0 h-full bg-[#39C5BB] transition-all duration-200 ease-linear rounded-full",style:{width:`${l.progress*100}%`}})}),N.jsxs("div",{className:"flex justify-between items-center text-xs",children:[N.jsx("div",{className:"text-white/70 font-mono truncate max-w-[380px]",children:e(l.statusKey,l.statusParams)}),N.jsx("div",{className:"text-[#39C5BB] font-medium tabular-nums",children:l.percentText})]})]})}):null},kd=l=>typeof l=="object"&&l!==null,jx=l=>!(!kd(l)||typeof l.image!="string"||!Array.isArray(l.tags)||!l.tags.every(e=>typeof e=="string")||typeof l.createdAt!="number"||l.dominantColor!==void 0&&l.dominantColor!==null&&typeof l.dominantColor!="string");function Hx(){const l=Ha(ve),e=O.useRef(!1),{t:i}=fl(),o=l.pinMode&&l.pinTransparent;return O.useEffect(()=>{const u=window.electron?.onNewCollection(v=>{console.log("New collection received:",v),jx(v)&&be.addImage(v)}),d=window.electron?.onImageUpdated(v=>{console.log("Image update received:",v),kd(v)&&typeof v.image=="string"&&be.updateImage(v.image,v)}),h=window.electron?.onEnvInitProgress(v=>{kd(v)&&t5.update(v)}),m=window.electron?.onToast?.(v=>{if(!kd(v)||!c1(v.key))return;const b=v.type==="success"||v.type==="error"||v.type==="warning"||v.type==="info"?v.type:"info",E=kd(v.params)?v.params:void 0;ae.pushToast({key:v.key,params:E},b)});return(async()=>{try{const v=await fetch(`${kn}/api/images`);if(!v.ok){const E=await v.json().catch(()=>null);if(E&&E.code==="STORAGE_INCOMPATIBLE"){ae.pushToast({key:"toast.storageIncompatible"},"error");return}throw new Error(`Failed to fetch images: ${v.status}`)}const b=await v.json();Array.isArray(b)&&(be.setImages(b),be.setAllImages(b))}catch(v){console.error("Failed to fetch images:",v)}finally{ne.initCanvas(v=>(re.allImages.find(E=>E.image===v)||re.images.find(E=>E.image===v))??null)}})(),()=>{u?.(),d?.(),h?.(),m?.()}},[]),O.useEffect(()=>{const u=h=>{if(!e.current)return;const m=Math.max(200,Math.min(h.clientX,document.body.clientWidth-200));ae.setSidebarWidth(m)},d=()=>{e.current&&ae.persistSidebarWidth(),e.current=!1,document.body.style.cursor="default",document.body.style.userSelect=""};return document.addEventListener("mousemove",u),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)}},[]),O.useEffect(()=>{const u=async d=>{let h=Array.from(d.clipboardData?.files||[]);h.length===0&&d.clipboardData?.items&&(h=Array.from(d.clipboardData.items).filter(v=>v.type.startsWith("image/")).map(v=>v.getAsFile()).filter(v=>v!==null)),h.length>0&&(d.preventDefault(),await cy(h))};return window.addEventListener("paste",u),()=>window.removeEventListener("paste",u)},[]),N.jsxs("div",{onMouseEnter:()=>window.electron?.focus(),className:o?"flex flex-col h-screen bg-transparent text-white overflow-hidden":"flex flex-col h-screen bg-neutral-950 text-white overflow-hidden",children:[N.jsx(h5,{}),N.jsx(zx,{}),l.toasts.length>0&&N.jsx("div",{className:"fixed right-4 top-10 z-[9999] flex flex-col gap-2 no-drag",children:l.toasts.map(u=>{const d=u.type==="success"?"border-emerald-700/60 bg-emerald-950/80 text-emerald-100":u.type==="error"?"border-red-700/60 bg-red-950/80 text-red-100":u.type==="warning"?"border-yellow-700/60 bg-yellow-950/80 text-yellow-100":"border-neutral-700/70 bg-neutral-900/90 text-neutral-100";return N.jsx("button",{type:"button",className:`max-w-[320px] rounded border px-3 py-2 text-left text-xs shadow-lg backdrop-blur transition-colors hover:bg-neutral-800/90 ${d}`,onClick:()=>ae.removeToast(u.id),children:i(u.message.key,u.message.params)},u.id)})}),N.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[!l.pinMode&&N.jsxs(N.Fragment,{children:[N.jsx(nS,{}),N.jsx("div",{className:"w-1 bg-neutral-800 hover:bg-[var(--resize-hover)] cursor-col-resize transition-colors z-10",style:{"--resize-hover":De.primary},onMouseDown:u=>{u.preventDefault(),e.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"}})]}),N.jsx(Ox,{})]}),o&&N.jsx("div",{className:"fixed bottom-1.5 right-1.5 w-2.5 h-2.5 rounded-full z-[9999] shadow-lg draggable cursor-move",style:{backgroundColor:De.primary}})]})}const Ux=({error:l})=>{const{t:e}=fl(),[i,o]=O.useState({state:"loading"});O.useEffect(()=>{(async()=>{try{if(window.electron?.getLogContent){const m=await window.electron.getLogContent();o({state:"ready",content:m})}else o({state:"unavailable"})}catch(m){o({state:"error",message:m instanceof Error?m.message:String(m)})}})()},[]);const u=i.state==="ready"?i.content:"",d=i.state==="ready"?i.content:i.state==="unavailable"?e("errors.logAccessUnavailable"):i.state==="error"?e("errors.failedToLoadLogs",{message:i.message}):e("errors.loadingLogs");return N.jsx("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-neutral-950 text-white p-8",children:N.jsxs("div",{className:"flex flex-col w-full max-w-4xl max-h-full bg-neutral-900 rounded-lg border border-neutral-800 shadow-xl overflow-hidden",children:[N.jsxs("div",{className:"p-6 border-b border-neutral-800 flex-shrink-0",children:[N.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--color-danger)"},children:e("errors.title")}),N.jsx("p",{className:"text-neutral-400 text-sm",children:l?.message||e("errors.unexpected")})]}),N.jsxs("div",{className:"flex-1 p-4 bg-black/50 overflow-hidden flex flex-col min-h-0",children:[N.jsx("div",{className:"text-xs text-neutral-500 mb-2 uppercase tracking-wider font-semibold",children:e("errors.applicationLogTitle")}),N.jsx("pre",{className:"flex-1 overflow-auto font-mono text-xs text-neutral-300 whitespace-pre-wrap break-all p-2 rounded bg-neutral-950/50 border border-neutral-800/50",children:d})]}),N.jsxs("div",{className:"p-4 border-t border-neutral-800 bg-neutral-900 flex justify-end gap-3 flex-shrink-0",children:[N.jsx("button",{className:"px-4 py-2 rounded transition-colors text-sm font-medium bg-neutral-800 hover:bg-neutral-700 text-white",onClick:()=>{navigator.clipboard.writeText(u).then(()=>{ae.pushToast({key:"toast.logCopied"},"success")}).catch(()=>{ae.pushToast({key:"toast.logCopyFailed"},"error")})},children:e("errors.copyLog")}),N.jsx("button",{className:"px-4 py-2 rounded transition-colors text-sm font-medium text-neutral-950 font-bold hover:opacity-90",style:{backgroundColor:"var(--color-primary)"},onClick:()=>window.location.reload(),children:e("errors.reloadApplication")})]})]})})};class Bx extends O.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,i){console.error("Uncaught error:",e,i),window.electron?.log?.("error","React ErrorBoundary caught an error:",e.message,i.componentStack),ae.pushToast({key:"toast.reactError",params:{message:e.message}},"error")}render(){return this.state.hasError?N.jsx(Ux,{error:this.state.error}):this.props.children}}window.addEventListener("error",l=>{const e=l.message||"Unknown error",i=l.filename,o=l.lineno,u=l.colno,d=l.error;console.error("Global error:",l),window.electron?.log?.("error","Global error:",e,`at ${i}:${o}:${u}`,d),ae.pushToast({key:"toast.globalError",params:{message:e}},"error")});window.addEventListener("unhandledrejection",l=>{console.error("Unhandled rejection:",l.reason),window.electron?.log?.("error","Unhandled rejection:",l.reason),ae.pushToast({key:"toast.unhandledRejection",params:{reason:String(l.reason)}},"error")});const Gx=()=>{const l=document.getElementById("root");if(!l)throw new Error("Root element not found");J3.createRoot(l).render(N.jsx(O.StrictMode,{children:N.jsx(Bx,{children:N.jsx(Hx,{})})}))},Lx=async()=>{await Promise.all([jv.hydrate(),ae.hydrateSettings(),be.hydrateSettings(),ne.hydrateSettings()]),ve.pinMode&&window.electron?.setPinMode?.(!0,ve.sidebarWidth)};Lx().catch(l=>{console.error("Failed to bootstrap app:",l)}).finally(()=>{Gx()});
